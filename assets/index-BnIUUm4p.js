function L0(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function xv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pd={exports:{}},Ha={},md={exports:{}},Ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function M0(){if(kg)return Ke;kg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function T(D){return D===null||typeof D!="object"?null:(D=E&&D[E]||D["@@iterator"],typeof D=="function"?D:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,F={};function O(D,K,ke){this.props=D,this.context=K,this.refs=F,this.updater=ke||V}O.prototype.isReactComponent={},O.prototype.setState=function(D,K){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,K,"setState")},O.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function H(){}H.prototype=O.prototype;function Y(D,K,ke){this.props=D,this.context=K,this.refs=F,this.updater=ke||V}var ee=Y.prototype=new H;ee.constructor=Y,U(ee,O.prototype),ee.isPureReactComponent=!0;var ue=Array.isArray,re=Object.prototype.hasOwnProperty,se={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function k(D,K,ke){var xe,Ue={},$e=null,We=null;if(K!=null)for(xe in K.ref!==void 0&&(We=K.ref),K.key!==void 0&&($e=""+K.key),K)re.call(K,xe)&&!x.hasOwnProperty(xe)&&(Ue[xe]=K[xe]);var He=arguments.length-2;if(He===1)Ue.children=ke;else if(1<He){for(var Qe=Array(He),Tt=0;Tt<He;Tt++)Qe[Tt]=arguments[Tt+2];Ue.children=Qe}if(D&&D.defaultProps)for(xe in He=D.defaultProps,He)Ue[xe]===void 0&&(Ue[xe]=He[xe]);return{$$typeof:n,type:D,key:$e,ref:We,props:Ue,_owner:se.current}}function A(D,K){return{$$typeof:n,type:D.type,key:K,ref:D.ref,props:D.props,_owner:D._owner}}function L(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function S(D){var K={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ke){return K[ke]})}var b=/\/+/g;function P(D,K){return typeof D=="object"&&D!==null&&D.key!=null?S(""+D.key):K.toString(36)}function Ie(D,K,ke,xe,Ue){var $e=typeof D;($e==="undefined"||$e==="boolean")&&(D=null);var We=!1;if(D===null)We=!0;else switch($e){case"string":case"number":We=!0;break;case"object":switch(D.$$typeof){case n:case e:We=!0}}if(We)return We=D,Ue=Ue(We),D=xe===""?"."+P(We,0):xe,ue(Ue)?(ke="",D!=null&&(ke=D.replace(b,"$&/")+"/"),Ie(Ue,K,ke,"",function(Tt){return Tt})):Ue!=null&&(L(Ue)&&(Ue=A(Ue,ke+(!Ue.key||We&&We.key===Ue.key?"":(""+Ue.key).replace(b,"$&/")+"/")+D)),K.push(Ue)),1;if(We=0,xe=xe===""?".":xe+":",ue(D))for(var He=0;He<D.length;He++){$e=D[He];var Qe=xe+P($e,He);We+=Ie($e,K,ke,Qe,Ue)}else if(Qe=T(D),typeof Qe=="function")for(D=Qe.call(D),He=0;!($e=D.next()).done;)$e=$e.value,Qe=xe+P($e,He++),We+=Ie($e,K,ke,Qe,Ue);else if($e==="object")throw K=String(D),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return We}function Le(D,K,ke){if(D==null)return D;var xe=[],Ue=0;return Ie(D,xe,"","",function($e){return K.call(ke,$e,Ue++)}),xe}function et(D){if(D._status===-1){var K=D._result;K=K(),K.then(function(ke){(D._status===0||D._status===-1)&&(D._status=1,D._result=ke)},function(ke){(D._status===0||D._status===-1)&&(D._status=2,D._result=ke)}),D._status===-1&&(D._status=0,D._result=K)}if(D._status===1)return D._result.default;throw D._result}var ye={current:null},ne={transition:null},J={ReactCurrentDispatcher:ye,ReactCurrentBatchConfig:ne,ReactCurrentOwner:se};function X(){throw Error("act(...) is not supported in production builds of React.")}return Ke.Children={map:Le,forEach:function(D,K,ke){Le(D,function(){K.apply(this,arguments)},ke)},count:function(D){var K=0;return Le(D,function(){K++}),K},toArray:function(D){return Le(D,function(K){return K})||[]},only:function(D){if(!L(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ke.Component=O,Ke.Fragment=t,Ke.Profiler=o,Ke.PureComponent=Y,Ke.StrictMode=s,Ke.Suspense=p,Ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,Ke.act=X,Ke.cloneElement=function(D,K,ke){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var xe=U({},D.props),Ue=D.key,$e=D.ref,We=D._owner;if(K!=null){if(K.ref!==void 0&&($e=K.ref,We=se.current),K.key!==void 0&&(Ue=""+K.key),D.type&&D.type.defaultProps)var He=D.type.defaultProps;for(Qe in K)re.call(K,Qe)&&!x.hasOwnProperty(Qe)&&(xe[Qe]=K[Qe]===void 0&&He!==void 0?He[Qe]:K[Qe])}var Qe=arguments.length-2;if(Qe===1)xe.children=ke;else if(1<Qe){He=Array(Qe);for(var Tt=0;Tt<Qe;Tt++)He[Tt]=arguments[Tt+2];xe.children=He}return{$$typeof:n,type:D.type,key:Ue,ref:$e,props:xe,_owner:We}},Ke.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:l,_context:D},D.Consumer=D},Ke.createElement=k,Ke.createFactory=function(D){var K=k.bind(null,D);return K.type=D,K},Ke.createRef=function(){return{current:null}},Ke.forwardRef=function(D){return{$$typeof:f,render:D}},Ke.isValidElement=L,Ke.lazy=function(D){return{$$typeof:_,_payload:{_status:-1,_result:D},_init:et}},Ke.memo=function(D,K){return{$$typeof:m,type:D,compare:K===void 0?null:K}},Ke.startTransition=function(D){var K=ne.transition;ne.transition={};try{D()}finally{ne.transition=K}},Ke.unstable_act=X,Ke.useCallback=function(D,K){return ye.current.useCallback(D,K)},Ke.useContext=function(D){return ye.current.useContext(D)},Ke.useDebugValue=function(){},Ke.useDeferredValue=function(D){return ye.current.useDeferredValue(D)},Ke.useEffect=function(D,K){return ye.current.useEffect(D,K)},Ke.useId=function(){return ye.current.useId()},Ke.useImperativeHandle=function(D,K,ke){return ye.current.useImperativeHandle(D,K,ke)},Ke.useInsertionEffect=function(D,K){return ye.current.useInsertionEffect(D,K)},Ke.useLayoutEffect=function(D,K){return ye.current.useLayoutEffect(D,K)},Ke.useMemo=function(D,K){return ye.current.useMemo(D,K)},Ke.useReducer=function(D,K,ke){return ye.current.useReducer(D,K,ke)},Ke.useRef=function(D){return ye.current.useRef(D)},Ke.useState=function(D){return ye.current.useState(D)},Ke.useSyncExternalStore=function(D,K,ke){return ye.current.useSyncExternalStore(D,K,ke)},Ke.useTransition=function(){return ye.current.useTransition()},Ke.version="18.3.1",Ke}var Rg;function ff(){return Rg||(Rg=1,md.exports=M0()),md.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function j0(){if(Ag)return Ha;Ag=1;var n=ff(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,m){var _,E={},T=null,V=null;m!==void 0&&(T=""+m),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(V=p.ref);for(_ in p)s.call(p,_)&&!l.hasOwnProperty(_)&&(E[_]=p[_]);if(f&&f.defaultProps)for(_ in p=f.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:f,key:T,ref:V,props:E,_owner:o.current}}return Ha.Fragment=t,Ha.jsx=c,Ha.jsxs=c,Ha}var Pg;function F0(){return Pg||(Pg=1,pd.exports=j0()),pd.exports}var I=F0(),R=ff();const pf=xv(R),U0=L0({__proto__:null,default:pf},[R]);var Vu={},gd={exports:{}},Nn={},yd={exports:{}},vd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xg;function z0(){return xg||(xg=1,(function(n){function e(ne,J){var X=ne.length;ne.push(J);e:for(;0<X;){var D=X-1>>>1,K=ne[D];if(0<o(K,J))ne[D]=J,ne[X]=K,X=D;else break e}}function t(ne){return ne.length===0?null:ne[0]}function s(ne){if(ne.length===0)return null;var J=ne[0],X=ne.pop();if(X!==J){ne[0]=X;e:for(var D=0,K=ne.length,ke=K>>>1;D<ke;){var xe=2*(D+1)-1,Ue=ne[xe],$e=xe+1,We=ne[$e];if(0>o(Ue,X))$e<K&&0>o(We,Ue)?(ne[D]=We,ne[$e]=X,D=$e):(ne[D]=Ue,ne[xe]=X,D=xe);else if($e<K&&0>o(We,X))ne[D]=We,ne[$e]=X,D=$e;else break e}}return J}function o(ne,J){var X=ne.sortIndex-J.sortIndex;return X!==0?X:ne.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],m=[],_=1,E=null,T=3,V=!1,U=!1,F=!1,O=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ee(ne){for(var J=t(m);J!==null;){if(J.callback===null)s(m);else if(J.startTime<=ne)s(m),J.sortIndex=J.expirationTime,e(p,J);else break;J=t(m)}}function ue(ne){if(F=!1,ee(ne),!U)if(t(p)!==null)U=!0,et(re);else{var J=t(m);J!==null&&ye(ue,J.startTime-ne)}}function re(ne,J){U=!1,F&&(F=!1,H(k),k=-1),V=!0;var X=T;try{for(ee(J),E=t(p);E!==null&&(!(E.expirationTime>J)||ne&&!S());){var D=E.callback;if(typeof D=="function"){E.callback=null,T=E.priorityLevel;var K=D(E.expirationTime<=J);J=n.unstable_now(),typeof K=="function"?E.callback=K:E===t(p)&&s(p),ee(J)}else s(p);E=t(p)}if(E!==null)var ke=!0;else{var xe=t(m);xe!==null&&ye(ue,xe.startTime-J),ke=!1}return ke}finally{E=null,T=X,V=!1}}var se=!1,x=null,k=-1,A=5,L=-1;function S(){return!(n.unstable_now()-L<A)}function b(){if(x!==null){var ne=n.unstable_now();L=ne;var J=!0;try{J=x(!0,ne)}finally{J?P():(se=!1,x=null)}}else se=!1}var P;if(typeof Y=="function")P=function(){Y(b)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Le=Ie.port2;Ie.port1.onmessage=b,P=function(){Le.postMessage(null)}}else P=function(){O(b,0)};function et(ne){x=ne,se||(se=!0,P())}function ye(ne,J){k=O(function(){ne(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ne){ne.callback=null},n.unstable_continueExecution=function(){U||V||(U=!0,et(re))},n.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<ne?Math.floor(1e3/ne):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ne){switch(T){case 1:case 2:case 3:var J=3;break;default:J=T}var X=T;T=J;try{return ne()}finally{T=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ne,J){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var X=T;T=ne;try{return J()}finally{T=X}},n.unstable_scheduleCallback=function(ne,J,X){var D=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?D+X:D):X=D,ne){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=X+K,ne={id:_++,callback:J,priorityLevel:ne,startTime:X,expirationTime:K,sortIndex:-1},X>D?(ne.sortIndex=X,e(m,ne),t(p)===null&&ne===t(m)&&(F?(H(k),k=-1):F=!0,ye(ue,X-D))):(ne.sortIndex=K,e(p,ne),U||V||(U=!0,et(re))),ne},n.unstable_shouldYield=S,n.unstable_wrapCallback=function(ne){var J=T;return function(){var X=T;T=J;try{return ne.apply(this,arguments)}finally{T=X}}}})(vd)),vd}var Ng;function B0(){return Ng||(Ng=1,yd.exports=z0()),yd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg;function $0(){if(bg)return Nn;bg=1;var n=ff(),e=B0();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function T(r){return p.call(E,r)?!0:p.call(_,r)?!1:m.test(r)?E[r]=!0:(_[r]=!0,!1)}function V(r,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function U(r,i,a,h){if(i===null||typeof i>"u"||V(r,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function F(r,i,a,h,d,g,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=g,this.removeEmptyString=w}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){O[r]=new F(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];O[i]=new F(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){O[r]=new F(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){O[r]=new F(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){O[r]=new F(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){O[r]=new F(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){O[r]=new F(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){O[r]=new F(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){O[r]=new F(r,5,!1,r.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function Y(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(H,Y);O[i]=new F(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(H,Y);O[i]=new F(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(H,Y);O[i]=new F(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){O[r]=new F(r,1,!1,r.toLowerCase(),null,!1,!1)}),O.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){O[r]=new F(r,1,!1,r.toLowerCase(),null,!0,!0)});function ee(r,i,a,h){var d=O.hasOwnProperty(i)?O[i]:null;(d!==null?d.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(U(i,a,d,h)&&(a=null),h||d===null?T(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,h=d.attributeNamespace,a===null?r.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?r.setAttributeNS(h,i,a):r.setAttribute(i,a))))}var ue=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),se=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),S=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),Le=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),ye=Symbol.for("react.offscreen"),ne=Symbol.iterator;function J(r){return r===null||typeof r!="object"?null:(r=ne&&r[ne]||r["@@iterator"],typeof r=="function"?r:null)}var X=Object.assign,D;function K(r){if(D===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);D=i&&i[1]||""}return`
`+D+r}var ke=!1;function xe(r,i){if(!r||ke)return"";ke=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(q){var h=q}Reflect.construct(r,[],i)}else{try{i.call()}catch(q){h=q}r.call(i.prototype)}else{try{throw Error()}catch(q){h=q}r()}}catch(q){if(q&&h&&typeof q.stack=="string"){for(var d=q.stack.split(`
`),g=h.stack.split(`
`),w=d.length-1,N=g.length-1;1<=w&&0<=N&&d[w]!==g[N];)N--;for(;1<=w&&0<=N;w--,N--)if(d[w]!==g[N]){if(w!==1||N!==1)do if(w--,N--,0>N||d[w]!==g[N]){var M=`
`+d[w].replace(" at new "," at ");return r.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",r.displayName)),M}while(1<=w&&0<=N);break}}}finally{ke=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?K(r):""}function Ue(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=xe(r.type,!1),r;case 11:return r=xe(r.type.render,!1),r;case 1:return r=xe(r.type,!0),r;default:return""}}function $e(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case se:return"Portal";case A:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case Ie:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case S:return(r.displayName||"Context")+".Consumer";case L:return(r._context.displayName||"Context")+".Provider";case b:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Le:return i=r.displayName||null,i!==null?i:$e(r.type)||"Memo";case et:i=r._payload,r=r._init;try{return $e(r(i))}catch{}}return null}function We(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $e(i);case 8:return i===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function He(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Qe(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Tt(r){var i=Qe(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){h=""+w,g.call(this,w)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Hn(r){r._valueTracker||(r._valueTracker=Tt(r))}function nr(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return r&&(h=Qe(r)?r.checked?"true":"false":r.value),r=h,r!==a?(i.setValue(r),!0):!1}function Ht(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ae(r,i){var a=i.checked;return X({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function W(r,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=He(i.value!=null?i.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ce(r,i){i=i.checked,i!=null&&ee(r,"checked",i,!1)}function ve(r,i){ce(r,i);var a=He(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?ge(r,i.type,a):i.hasOwnProperty("defaultValue")&&ge(r,i.type,He(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function de(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function ge(r,i,a){(i!=="number"||Ht(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Pe=Array.isArray;function It(r,i,a,h){if(r=r.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=i.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&h&&(r[a].defaultSelected=!0)}else{for(a=""+He(a),i=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,h&&(r[d].defaultSelected=!0);return}i!==null||r[d].disabled||(i=r[d])}i!==null&&(i.selected=!0)}}function bt(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Vn(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Pe(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:He(a)}}function In(r,i){var a=He(i.value),h=He(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function De(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function gt(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qe(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?gt(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var At,wn=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,d){MSApp.execUnsafeLocalFunction(function(){return r(i,a,h,d)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(At=At||document.createElement("div"),At.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=At.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Sn(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qn=["Webkit","ms","Moz","O"];Object.keys(ct).forEach(function(r){qn.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),ct[i]=ct[r]})});function ln(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||ct.hasOwnProperty(r)&&ct[r]?(""+i).trim():i+"px"}function St(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=ln(a,i[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,d):r[a]=d}}var ut=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function un(r,i){if(i){if(ut[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Wr(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rr=null;function Hr(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Gn=null,Cn=null,Ct=null;function ii(r){if(r=xa(r)){if(typeof Gn!="function")throw Error(t(280));var i=r.stateNode;i&&(i=Ql(i),Gn(r.stateNode,r.type,i))}}function yr(r){Cn?Ct?Ct.push(r):Ct=[r]:Cn=r}function vr(){if(Cn){var r=Cn,i=Ct;if(Ct=Cn=null,ii(r),i)for(r=0;r<i.length;r++)ii(i[r])}}function Q(r,i){return r(i)}function he(){}var fe=!1;function Ve(r,i,a){if(fe)return r(i,a);fe=!0;try{return Q(r,i,a)}finally{fe=!1,(Cn!==null||Ct!==null)&&(he(),vr())}}function at(r,i){var a=r.stateNode;if(a===null)return null;var h=Ql(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Ge=!1;if(f)try{var ht={};Object.defineProperty(ht,"passive",{get:function(){Ge=!0}}),window.addEventListener("test",ht,ht),window.removeEventListener("test",ht,ht)}catch{Ge=!1}function ft(r,i,a,h,d,g,w,N,M){var q=Array.prototype.slice.call(arguments,3);try{i.apply(a,q)}catch(oe){this.onError(oe)}}var rt=!1,yt=null,kt=!1,cn=null,Rl={onError:function(r){rt=!0,yt=r}};function Al(r,i,a,h,d,g,w,N,M){rt=!1,yt=null,ft.apply(Rl,arguments)}function sa(r,i,a,h,d,g,w,N,M){if(Al.apply(this,arguments),rt){if(rt){var q=yt;rt=!1,yt=null}else throw Error(t(198));kt||(kt=!0,cn=q)}}function sr(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function ia(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Pl(r){if(sr(r)!==r)throw Error(t(188))}function xl(r){var i=r.alternate;if(!i){if(i=sr(r),i===null)throw Error(t(188));return i!==r?null:r}for(var a=r,h=i;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return Pl(d),r;if(g===h)return Pl(d),i;g=g.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=g;else{for(var w=!1,N=d.child;N;){if(N===a){w=!0,a=d,h=g;break}if(N===h){w=!0,h=d,a=g;break}N=N.sibling}if(!w){for(N=g.child;N;){if(N===a){w=!0,a=g,h=d;break}if(N===h){w=!0,h=g,a=d;break}N=N.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:i}function Nl(r){return r=xl(r),r!==null?oi(r):null}function oi(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=oi(r);if(i!==null)return i;r=r.sibling}return null}var oa=e.unstable_scheduleCallback,Ki=e.unstable_cancelCallback,ai=e.unstable_shouldYield,qr=e.unstable_requestPaint,vt=e.unstable_now,Hc=e.unstable_getCurrentPriorityLevel,Qi=e.unstable_ImmediatePriority,aa=e.unstable_UserBlockingPriority,li=e.unstable_NormalPriority,la=e.unstable_LowPriority,Yi=e.unstable_IdlePriority,ui=null,On=null;function bl(r){if(On&&typeof On.onCommitFiberRoot=="function")try{On.onCommitFiberRoot(ui,r,void 0,(r.current.flags&128)===128)}catch{}}var Ln=Math.clz32?Math.clz32:ci,_r=Math.log,Kn=Math.LN2;function ci(r){return r>>>=0,r===0?32:31-(_r(r)/Kn|0)|0}var wr=64,gs=4194304;function it(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Gr(r,i){var a=r.pendingLanes;if(a===0)return 0;var h=0,d=r.suspendedLanes,g=r.pingedLanes,w=a&268435455;if(w!==0){var N=w&~d;N!==0?h=it(N):(g&=w,g!==0&&(h=it(g)))}else w=a&~d,w!==0?h=it(w):g!==0&&(h=it(g));if(h===0)return 0;if(i!==0&&i!==h&&(i&d)===0&&(d=h&-h,g=i&-i,d>=g||d===16&&(g&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)a=31-Ln(i),d=1<<a,h|=r[a],i&=~d;return h}function hi(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(r,i){for(var a=r.suspendedLanes,h=r.pingedLanes,d=r.expirationTimes,g=r.pendingLanes;0<g;){var w=31-Ln(g),N=1<<w,M=d[w];M===-1?((N&a)===0||(N&h)!==0)&&(d[w]=hi(N,i)):M<=i&&(r.expiredLanes|=N),g&=~N}}function ua(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ca(){var r=wr;return wr<<=1,(wr&4194240)===0&&(wr=64),r}function ha(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function fi(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-Ln(i),r[i]=a}function qc(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-Ln(a),g=1<<d;i[d]=0,h[d]=-1,r[d]=-1,a&=~g}}function da(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var h=31-Ln(a),d=1<<h;d&i|r[h]&i&&(r[h]|=i),a&=~d}}var Ze=0;function Er(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var fa,Ji,pa,ma,ga,Tr=!1,Xi=[],Ir=null,Sr=null,en=null,pi=new Map,Kr=new Map,Mn=[],Dl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ys(r,i){switch(r){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":en=null;break;case"pointerover":case"pointerout":pi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kr.delete(i.pointerId)}}function ir(r,i,a,h,d,g){return r===null||r.nativeEvent!==g?(r={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:g,targetContainers:[d]},i!==null&&(i=xa(i),i!==null&&Ji(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),r)}function Vl(r,i,a,h,d){switch(i){case"focusin":return Ir=ir(Ir,r,i,a,h,d),!0;case"dragenter":return Sr=ir(Sr,r,i,a,h,d),!0;case"mouseover":return en=ir(en,r,i,a,h,d),!0;case"pointerover":var g=d.pointerId;return pi.set(g,ir(pi.get(g)||null,r,i,a,h,d)),!0;case"gotpointercapture":return g=d.pointerId,Kr.set(g,ir(Kr.get(g)||null,r,i,a,h,d)),!0}return!1}function Zi(r){var i=vi(r.target);if(i!==null){var a=sr(i);if(a!==null){if(i=a.tag,i===13){if(i=ia(a),i!==null){r.blockedOn=i,ga(r.priority,function(){pa(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function dt(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=eo(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);rr=h,a.target.dispatchEvent(h),rr=null}else return i=xa(a),i!==null&&Ji(i),r.blockedOn=a,!1;i.shift()}return!0}function Ol(r,i,a){dt(r)&&a.delete(i)}function Gc(){Tr=!1,Ir!==null&&dt(Ir)&&(Ir=null),Sr!==null&&dt(Sr)&&(Sr=null),en!==null&&dt(en)&&(en=null),pi.forEach(Ol),Kr.forEach(Ol)}function vs(r,i){r.blockedOn===i&&(r.blockedOn=null,Tr||(Tr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gc)))}function _s(r){function i(d){return vs(d,r)}if(0<Xi.length){vs(Xi[0],r);for(var a=1;a<Xi.length;a++){var h=Xi[a];h.blockedOn===r&&(h.blockedOn=null)}}for(Ir!==null&&vs(Ir,r),Sr!==null&&vs(Sr,r),en!==null&&vs(en,r),pi.forEach(i),Kr.forEach(i),a=0;a<Mn.length;a++)h=Mn[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<Mn.length&&(a=Mn[0],a.blockedOn===null);)Zi(a),a.blockedOn===null&&Mn.shift()}var Qr=ue.ReactCurrentBatchConfig,Yr=!0;function Cr(r,i,a,h){var d=Ze,g=Qr.transition;Qr.transition=null;try{Ze=1,ya(r,i,a,h)}finally{Ze=d,Qr.transition=g}}function Ll(r,i,a,h){var d=Ze,g=Qr.transition;Qr.transition=null;try{Ze=4,ya(r,i,a,h)}finally{Ze=d,Qr.transition=g}}function ya(r,i,a,h){if(Yr){var d=eo(r,i,a,h);if(d===null)sh(r,i,h,kr,a),ys(r,h);else if(Vl(d,r,i,a,h))h.stopPropagation();else if(ys(r,h),i&4&&-1<Dl.indexOf(r)){for(;d!==null;){var g=xa(d);if(g!==null&&fa(g),g=eo(r,i,a,h),g===null&&sh(r,i,h,kr,a),g===d)break;d=g}d!==null&&h.stopPropagation()}else sh(r,i,h,null,a)}}var kr=null;function eo(r,i,a,h){if(kr=null,r=Hr(h),r=vi(r),r!==null)if(i=sr(r),i===null)r=null;else if(a=i.tag,a===13){if(r=ia(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return kr=r,null}function to(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hc()){case Qi:return 1;case aa:return 4;case li:case la:return 16;case Yi:return 536870912;default:return 16}default:return 16}}var jn=null,no=null,Jr=null;function Ml(){if(Jr)return Jr;var r,i=no,a=i.length,h,d="value"in jn?jn.value:jn.textContent,g=d.length;for(r=0;r<a&&i[r]===d[r];r++);var w=a-r;for(h=1;h<=w&&i[a-h]===d[g-h];h++);return Jr=d.slice(r,1<h?1-h:void 0)}function mi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Rr(){return!0}function va(){return!1}function hn(r){function i(a,h,d,g,w){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(a=r[N],this[N]=a?a(g):g[N]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Rr:va,this.isPropagationStopped=va,this}return X(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Rr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Rr)},persist:function(){},isPersistent:Rr}),i}var Ar={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gi=hn(Ar),ws=X({},Ar,{view:0,detail:0}),ro=hn(ws),so,io,Fn,yi=X({},ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ze,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Fn&&(Fn&&r.type==="mousemove"?(so=r.screenX-Fn.screenX,io=r.screenY-Fn.screenY):io=so=0,Fn=r),so)},movementY:function(r){return"movementY"in r?r.movementY:io}}),_a=hn(yi),jl=X({},yi,{dataTransfer:0}),Fl=hn(jl),oo=X({},ws,{relatedTarget:0}),tn=hn(oo),Ul=X({},Ar,{animationName:0,elapsedTime:0,pseudoElement:0}),zl=hn(Ul),Es=X({},Ar,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=hn(Es),y=X({},Ar,{data:0}),v=hn(y),C={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function me(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=G[r])?!!i[r]:!1}function ze(){return me}var Ot=X({},ws,{key:function(r){if(r.key){var i=C[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=mi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?B[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ze,charCode:function(r){return r.type==="keypress"?mi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?mi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),lt=hn(Ot),jt=X({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Un=hn(jt),Xr=X({},ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ze}),Pr=hn(Xr),xr=X({},Ar,{propertyName:0,elapsedTime:0,pseudoElement:0}),ao=hn(xr),wa=X({},yi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),xE=hn(wa),NE=[9,13,27,32],Kc=f&&"CompositionEvent"in window,Ea=null;f&&"documentMode"in document&&(Ea=document.documentMode);var bE=f&&"TextEvent"in window&&!Ea,vp=f&&(!Kc||Ea&&8<Ea&&11>=Ea),_p=" ",wp=!1;function Ep(r,i){switch(r){case"keyup":return NE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Tp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var lo=!1;function DE(r,i){switch(r){case"compositionend":return Tp(i);case"keypress":return i.which!==32?null:(wp=!0,_p);case"textInput":return r=i.data,r===_p&&wp?null:r;default:return null}}function VE(r,i){if(lo)return r==="compositionend"||!Kc&&Ep(r,i)?(r=Ml(),Jr=no=jn=null,lo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return vp&&i.locale!=="ko"?null:i.data;default:return null}}var OE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ip(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!OE[r.type]:i==="textarea"}function Sp(r,i,a,h){yr(h),i=ql(i,"onChange"),0<i.length&&(a=new gi("onChange","change",null,a,h),r.push({event:a,listeners:i}))}var Ta=null,Ia=null;function LE(r){Bp(r,0)}function Bl(r){var i=po(r);if(nr(i))return r}function ME(r,i){if(r==="change")return i}var Cp=!1;if(f){var Qc;if(f){var Yc="oninput"in document;if(!Yc){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),Yc=typeof kp.oninput=="function"}Qc=Yc}else Qc=!1;Cp=Qc&&(!document.documentMode||9<document.documentMode)}function Rp(){Ta&&(Ta.detachEvent("onpropertychange",Ap),Ia=Ta=null)}function Ap(r){if(r.propertyName==="value"&&Bl(Ia)){var i=[];Sp(i,Ia,r,Hr(r)),Ve(LE,i)}}function jE(r,i,a){r==="focusin"?(Rp(),Ta=i,Ia=a,Ta.attachEvent("onpropertychange",Ap)):r==="focusout"&&Rp()}function FE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bl(Ia)}function UE(r,i){if(r==="click")return Bl(i)}function zE(r,i){if(r==="input"||r==="change")return Bl(i)}function BE(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var or=typeof Object.is=="function"?Object.is:BE;function Sa(r,i){if(or(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!p.call(i,d)||!or(r[d],i[d]))return!1}return!0}function Pp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function xp(r,i){var a=Pp(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=i&&h>=i)return{node:a,offset:i-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Pp(a)}}function Np(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Np(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function bp(){for(var r=window,i=Ht();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=Ht(r.document)}return i}function Jc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function $E(r){var i=bp(),a=r.focusedElem,h=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&Np(a.ownerDocument.documentElement,a)){if(h!==null&&Jc(a)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,g=Math.min(h.start,d);h=h.end===void 0?g:Math.min(h.end,d),!r.extend&&g>h&&(d=h,h=g,g=d),d=xp(a,g);var w=xp(a,h);d&&w&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),r.removeAllRanges(),g>h?(r.addRange(i),r.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var WE=f&&"documentMode"in document&&11>=document.documentMode,uo=null,Xc=null,Ca=null,Zc=!1;function Dp(r,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Zc||uo==null||uo!==Ht(h)||(h=uo,"selectionStart"in h&&Jc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ca&&Sa(Ca,h)||(Ca=h,h=ql(Xc,"onSelect"),0<h.length&&(i=new gi("onSelect","select",null,i,a),r.push({event:i,listeners:h}),i.target=uo)))}function $l(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var co={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},eh={},Vp={};f&&(Vp=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function Wl(r){if(eh[r])return eh[r];if(!co[r])return r;var i=co[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Vp)return eh[r]=i[a];return r}var Op=Wl("animationend"),Lp=Wl("animationiteration"),Mp=Wl("animationstart"),jp=Wl("transitionend"),Fp=new Map,Up="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ts(r,i){Fp.set(r,i),l(i,[r])}for(var th=0;th<Up.length;th++){var nh=Up[th],HE=nh.toLowerCase(),qE=nh[0].toUpperCase()+nh.slice(1);Ts(HE,"on"+qE)}Ts(Op,"onAnimationEnd"),Ts(Lp,"onAnimationIteration"),Ts(Mp,"onAnimationStart"),Ts("dblclick","onDoubleClick"),Ts("focusin","onFocus"),Ts("focusout","onBlur"),Ts(jp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function zp(r,i,a){var h=r.type||"unknown-event";r.currentTarget=a,sa(h,i,void 0,r),r.currentTarget=null}function Bp(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],d=h.event;h=h.listeners;e:{var g=void 0;if(i)for(var w=h.length-1;0<=w;w--){var N=h[w],M=N.instance,q=N.currentTarget;if(N=N.listener,M!==g&&d.isPropagationStopped())break e;zp(d,N,q),g=M}else for(w=0;w<h.length;w++){if(N=h[w],M=N.instance,q=N.currentTarget,N=N.listener,M!==g&&d.isPropagationStopped())break e;zp(d,N,q),g=M}}}if(kt)throw r=cn,kt=!1,cn=null,r}function _t(r,i){var a=i[ch];a===void 0&&(a=i[ch]=new Set);var h=r+"__bubble";a.has(h)||($p(i,r,2,!1),a.add(h))}function rh(r,i,a){var h=0;i&&(h|=4),$p(a,r,h,i)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function Ra(r){if(!r[Hl]){r[Hl]=!0,s.forEach(function(a){a!=="selectionchange"&&(GE.has(a)||rh(a,!1,r),rh(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Hl]||(i[Hl]=!0,rh("selectionchange",!1,i))}}function $p(r,i,a,h){switch(to(i)){case 1:var d=Cr;break;case 4:d=Ll;break;default:d=ya}a=d.bind(null,i,a,r),d=void 0,!Ge||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),h?d!==void 0?r.addEventListener(i,a,{capture:!0,passive:d}):r.addEventListener(i,a,!0):d!==void 0?r.addEventListener(i,a,{passive:d}):r.addEventListener(i,a,!1)}function sh(r,i,a,h,d){var g=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var N=h.stateNode.containerInfo;if(N===d||N.nodeType===8&&N.parentNode===d)break;if(w===4)for(w=h.return;w!==null;){var M=w.tag;if((M===3||M===4)&&(M=w.stateNode.containerInfo,M===d||M.nodeType===8&&M.parentNode===d))return;w=w.return}for(;N!==null;){if(w=vi(N),w===null)return;if(M=w.tag,M===5||M===6){h=g=w;continue e}N=N.parentNode}}h=h.return}Ve(function(){var q=g,oe=Hr(a),le=[];e:{var ie=Fp.get(r);if(ie!==void 0){var we=gi,Se=r;switch(r){case"keypress":if(mi(a)===0)break e;case"keydown":case"keyup":we=lt;break;case"focusin":Se="focus",we=tn;break;case"focusout":Se="blur",we=tn;break;case"beforeblur":case"afterblur":we=tn;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=_a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Pr;break;case Op:case Lp:case Mp:we=zl;break;case jp:we=ao;break;case"scroll":we=ro;break;case"wheel":we=xE;break;case"copy":case"cut":case"paste":we=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Un}var Ce=(i&4)!==0,Lt=!Ce&&r==="scroll",z=Ce?ie!==null?ie+"Capture":null:ie;Ce=[];for(var j=q,$;j!==null;){$=j;var pe=$.stateNode;if($.tag===5&&pe!==null&&($=pe,z!==null&&(pe=at(j,z),pe!=null&&Ce.push(Aa(j,pe,$)))),Lt)break;j=j.return}0<Ce.length&&(ie=new we(ie,Se,null,a,oe),le.push({event:ie,listeners:Ce}))}}if((i&7)===0){e:{if(ie=r==="mouseover"||r==="pointerover",we=r==="mouseout"||r==="pointerout",ie&&a!==rr&&(Se=a.relatedTarget||a.fromElement)&&(vi(Se)||Se[Zr]))break e;if((we||ie)&&(ie=oe.window===oe?oe:(ie=oe.ownerDocument)?ie.defaultView||ie.parentWindow:window,we?(Se=a.relatedTarget||a.toElement,we=q,Se=Se?vi(Se):null,Se!==null&&(Lt=sr(Se),Se!==Lt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(we=null,Se=q),we!==Se)){if(Ce=_a,pe="onMouseLeave",z="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(Ce=Un,pe="onPointerLeave",z="onPointerEnter",j="pointer"),Lt=we==null?ie:po(we),$=Se==null?ie:po(Se),ie=new Ce(pe,j+"leave",we,a,oe),ie.target=Lt,ie.relatedTarget=$,pe=null,vi(oe)===q&&(Ce=new Ce(z,j+"enter",Se,a,oe),Ce.target=$,Ce.relatedTarget=Lt,pe=Ce),Lt=pe,we&&Se)t:{for(Ce=we,z=Se,j=0,$=Ce;$;$=ho($))j++;for($=0,pe=z;pe;pe=ho(pe))$++;for(;0<j-$;)Ce=ho(Ce),j--;for(;0<$-j;)z=ho(z),$--;for(;j--;){if(Ce===z||z!==null&&Ce===z.alternate)break t;Ce=ho(Ce),z=ho(z)}Ce=null}else Ce=null;we!==null&&Wp(le,ie,we,Ce,!1),Se!==null&&Lt!==null&&Wp(le,Lt,Se,Ce,!0)}}e:{if(ie=q?po(q):window,we=ie.nodeName&&ie.nodeName.toLowerCase(),we==="select"||we==="input"&&ie.type==="file")var Re=ME;else if(Ip(ie))if(Cp)Re=zE;else{Re=FE;var Ne=jE}else(we=ie.nodeName)&&we.toLowerCase()==="input"&&(ie.type==="checkbox"||ie.type==="radio")&&(Re=UE);if(Re&&(Re=Re(r,q))){Sp(le,Re,a,oe);break e}Ne&&Ne(r,ie,q),r==="focusout"&&(Ne=ie._wrapperState)&&Ne.controlled&&ie.type==="number"&&ge(ie,"number",ie.value)}switch(Ne=q?po(q):window,r){case"focusin":(Ip(Ne)||Ne.contentEditable==="true")&&(uo=Ne,Xc=q,Ca=null);break;case"focusout":Ca=Xc=uo=null;break;case"mousedown":Zc=!0;break;case"contextmenu":case"mouseup":case"dragend":Zc=!1,Dp(le,a,oe);break;case"selectionchange":if(WE)break;case"keydown":case"keyup":Dp(le,a,oe)}var be;if(Kc)e:{switch(r){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else lo?Ep(r,a)&&(Me="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(vp&&a.locale!=="ko"&&(lo||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&lo&&(be=Ml()):(jn=oe,no="value"in jn?jn.value:jn.textContent,lo=!0)),Ne=ql(q,Me),0<Ne.length&&(Me=new v(Me,r,null,a,oe),le.push({event:Me,listeners:Ne}),be?Me.data=be:(be=Tp(a),be!==null&&(Me.data=be)))),(be=bE?DE(r,a):VE(r,a))&&(q=ql(q,"onBeforeInput"),0<q.length&&(oe=new v("onBeforeInput","beforeinput",null,a,oe),le.push({event:oe,listeners:q}),oe.data=be))}Bp(le,i)})}function Aa(r,i,a){return{instance:r,listener:i,currentTarget:a}}function ql(r,i){for(var a=i+"Capture",h=[];r!==null;){var d=r,g=d.stateNode;d.tag===5&&g!==null&&(d=g,g=at(r,a),g!=null&&h.unshift(Aa(r,g,d)),g=at(r,i),g!=null&&h.push(Aa(r,g,d))),r=r.return}return h}function ho(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Wp(r,i,a,h,d){for(var g=i._reactName,w=[];a!==null&&a!==h;){var N=a,M=N.alternate,q=N.stateNode;if(M!==null&&M===h)break;N.tag===5&&q!==null&&(N=q,d?(M=at(a,g),M!=null&&w.unshift(Aa(a,M,N))):d||(M=at(a,g),M!=null&&w.push(Aa(a,M,N)))),a=a.return}w.length!==0&&r.push({event:i,listeners:w})}var KE=/\r\n?/g,QE=/\u0000|\uFFFD/g;function Hp(r){return(typeof r=="string"?r:""+r).replace(KE,`
`).replace(QE,"")}function Gl(r,i,a){if(i=Hp(i),Hp(r)!==i&&a)throw Error(t(425))}function Kl(){}var ih=null,oh=null;function ah(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lh=typeof setTimeout=="function"?setTimeout:void 0,YE=typeof clearTimeout=="function"?clearTimeout:void 0,qp=typeof Promise=="function"?Promise:void 0,JE=typeof queueMicrotask=="function"?queueMicrotask:typeof qp<"u"?function(r){return qp.resolve(null).then(r).catch(XE)}:lh;function XE(r){setTimeout(function(){throw r})}function uh(r,i){var a=i,h=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){r.removeChild(d),_s(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);_s(i)}function Is(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Gp(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var fo=Math.random().toString(36).slice(2),Nr="__reactFiber$"+fo,Pa="__reactProps$"+fo,Zr="__reactContainer$"+fo,ch="__reactEvents$"+fo,ZE="__reactListeners$"+fo,e0="__reactHandles$"+fo;function vi(r){var i=r[Nr];if(i)return i;for(var a=r.parentNode;a;){if(i=a[Zr]||a[Nr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=Gp(r);r!==null;){if(a=r[Nr])return a;r=Gp(r)}return i}r=a,a=r.parentNode}return null}function xa(r){return r=r[Nr]||r[Zr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function po(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Ql(r){return r[Pa]||null}var hh=[],mo=-1;function Ss(r){return{current:r}}function wt(r){0>mo||(r.current=hh[mo],hh[mo]=null,mo--)}function pt(r,i){mo++,hh[mo]=r.current,r.current=i}var Cs={},dn=Ss(Cs),kn=Ss(!1),_i=Cs;function go(r,i){var a=r.type.contextTypes;if(!a)return Cs;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in a)d[g]=i[g];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=d),d}function Rn(r){return r=r.childContextTypes,r!=null}function Yl(){wt(kn),wt(dn)}function Kp(r,i,a){if(dn.current!==Cs)throw Error(t(168));pt(dn,i),pt(kn,a)}function Qp(r,i,a){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in i))throw Error(t(108,We(r)||"Unknown",d));return X({},a,h)}function Jl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Cs,_i=dn.current,pt(dn,r),pt(kn,kn.current),!0}function Yp(r,i,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=Qp(r,i,_i),h.__reactInternalMemoizedMergedChildContext=r,wt(kn),wt(dn),pt(dn,r)):wt(kn),pt(kn,a)}var es=null,Xl=!1,dh=!1;function Jp(r){es===null?es=[r]:es.push(r)}function t0(r){Xl=!0,Jp(r)}function ks(){if(!dh&&es!==null){dh=!0;var r=0,i=Ze;try{var a=es;for(Ze=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}es=null,Xl=!1}catch(d){throw es!==null&&(es=es.slice(r+1)),oa(Qi,ks),d}finally{Ze=i,dh=!1}}return null}var yo=[],vo=0,Zl=null,eu=0,Qn=[],Yn=0,wi=null,ts=1,ns="";function Ei(r,i){yo[vo++]=eu,yo[vo++]=Zl,Zl=r,eu=i}function Xp(r,i,a){Qn[Yn++]=ts,Qn[Yn++]=ns,Qn[Yn++]=wi,wi=r;var h=ts;r=ns;var d=32-Ln(h)-1;h&=~(1<<d),a+=1;var g=32-Ln(i)+d;if(30<g){var w=d-d%5;g=(h&(1<<w)-1).toString(32),h>>=w,d-=w,ts=1<<32-Ln(i)+d|a<<d|h,ns=g+r}else ts=1<<g|a<<d|h,ns=r}function fh(r){r.return!==null&&(Ei(r,1),Xp(r,1,0))}function ph(r){for(;r===Zl;)Zl=yo[--vo],yo[vo]=null,eu=yo[--vo],yo[vo]=null;for(;r===wi;)wi=Qn[--Yn],Qn[Yn]=null,ns=Qn[--Yn],Qn[Yn]=null,ts=Qn[--Yn],Qn[Yn]=null}var zn=null,Bn=null,Rt=!1,ar=null;function Zp(r,i){var a=er(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function em(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,zn=r,Bn=Is(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,zn=r,Bn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=wi!==null?{id:ts,overflow:ns}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=er(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,zn=r,Bn=null,!0):!1;default:return!1}}function mh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function gh(r){if(Rt){var i=Bn;if(i){var a=i;if(!em(r,i)){if(mh(r))throw Error(t(418));i=Is(a.nextSibling);var h=zn;i&&em(r,i)?Zp(h,a):(r.flags=r.flags&-4097|2,Rt=!1,zn=r)}}else{if(mh(r))throw Error(t(418));r.flags=r.flags&-4097|2,Rt=!1,zn=r}}}function tm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;zn=r}function tu(r){if(r!==zn)return!1;if(!Rt)return tm(r),Rt=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!ah(r.type,r.memoizedProps)),i&&(i=Bn)){if(mh(r))throw nm(),Error(t(418));for(;i;)Zp(r,i),i=Is(i.nextSibling)}if(tm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){Bn=Is(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}Bn=null}}else Bn=zn?Is(r.stateNode.nextSibling):null;return!0}function nm(){for(var r=Bn;r;)r=Is(r.nextSibling)}function _o(){Bn=zn=null,Rt=!1}function yh(r){ar===null?ar=[r]:ar.push(r)}var n0=ue.ReactCurrentBatchConfig;function Na(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var d=h,g=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(w){var N=d.refs;w===null?delete N[g]:N[g]=w},i._stringRef=g,i)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function nu(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function rm(r){var i=r._init;return i(r._payload)}function sm(r){function i(z,j){if(r){var $=z.deletions;$===null?(z.deletions=[j],z.flags|=16):$.push(j)}}function a(z,j){if(!r)return null;for(;j!==null;)i(z,j),j=j.sibling;return null}function h(z,j){for(z=new Map;j!==null;)j.key!==null?z.set(j.key,j):z.set(j.index,j),j=j.sibling;return z}function d(z,j){return z=Vs(z,j),z.index=0,z.sibling=null,z}function g(z,j,$){return z.index=$,r?($=z.alternate,$!==null?($=$.index,$<j?(z.flags|=2,j):$):(z.flags|=2,j)):(z.flags|=1048576,j)}function w(z){return r&&z.alternate===null&&(z.flags|=2),z}function N(z,j,$,pe){return j===null||j.tag!==6?(j=ld($,z.mode,pe),j.return=z,j):(j=d(j,$),j.return=z,j)}function M(z,j,$,pe){var Re=$.type;return Re===x?oe(z,j,$.props.children,pe,$.key):j!==null&&(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===et&&rm(Re)===j.type)?(pe=d(j,$.props),pe.ref=Na(z,j,$),pe.return=z,pe):(pe=ku($.type,$.key,$.props,null,z.mode,pe),pe.ref=Na(z,j,$),pe.return=z,pe)}function q(z,j,$,pe){return j===null||j.tag!==4||j.stateNode.containerInfo!==$.containerInfo||j.stateNode.implementation!==$.implementation?(j=ud($,z.mode,pe),j.return=z,j):(j=d(j,$.children||[]),j.return=z,j)}function oe(z,j,$,pe,Re){return j===null||j.tag!==7?(j=Pi($,z.mode,pe,Re),j.return=z,j):(j=d(j,$),j.return=z,j)}function le(z,j,$){if(typeof j=="string"&&j!==""||typeof j=="number")return j=ld(""+j,z.mode,$),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case re:return $=ku(j.type,j.key,j.props,null,z.mode,$),$.ref=Na(z,null,j),$.return=z,$;case se:return j=ud(j,z.mode,$),j.return=z,j;case et:var pe=j._init;return le(z,pe(j._payload),$)}if(Pe(j)||J(j))return j=Pi(j,z.mode,$,null),j.return=z,j;nu(z,j)}return null}function ie(z,j,$,pe){var Re=j!==null?j.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return Re!==null?null:N(z,j,""+$,pe);if(typeof $=="object"&&$!==null){switch($.$$typeof){case re:return $.key===Re?M(z,j,$,pe):null;case se:return $.key===Re?q(z,j,$,pe):null;case et:return Re=$._init,ie(z,j,Re($._payload),pe)}if(Pe($)||J($))return Re!==null?null:oe(z,j,$,pe,null);nu(z,$)}return null}function we(z,j,$,pe,Re){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return z=z.get($)||null,N(j,z,""+pe,Re);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case re:return z=z.get(pe.key===null?$:pe.key)||null,M(j,z,pe,Re);case se:return z=z.get(pe.key===null?$:pe.key)||null,q(j,z,pe,Re);case et:var Ne=pe._init;return we(z,j,$,Ne(pe._payload),Re)}if(Pe(pe)||J(pe))return z=z.get($)||null,oe(j,z,pe,Re,null);nu(j,pe)}return null}function Se(z,j,$,pe){for(var Re=null,Ne=null,be=j,Me=j=0,Jt=null;be!==null&&Me<$.length;Me++){be.index>Me?(Jt=be,be=null):Jt=be.sibling;var st=ie(z,be,$[Me],pe);if(st===null){be===null&&(be=Jt);break}r&&be&&st.alternate===null&&i(z,be),j=g(st,j,Me),Ne===null?Re=st:Ne.sibling=st,Ne=st,be=Jt}if(Me===$.length)return a(z,be),Rt&&Ei(z,Me),Re;if(be===null){for(;Me<$.length;Me++)be=le(z,$[Me],pe),be!==null&&(j=g(be,j,Me),Ne===null?Re=be:Ne.sibling=be,Ne=be);return Rt&&Ei(z,Me),Re}for(be=h(z,be);Me<$.length;Me++)Jt=we(be,z,Me,$[Me],pe),Jt!==null&&(r&&Jt.alternate!==null&&be.delete(Jt.key===null?Me:Jt.key),j=g(Jt,j,Me),Ne===null?Re=Jt:Ne.sibling=Jt,Ne=Jt);return r&&be.forEach(function(Os){return i(z,Os)}),Rt&&Ei(z,Me),Re}function Ce(z,j,$,pe){var Re=J($);if(typeof Re!="function")throw Error(t(150));if($=Re.call($),$==null)throw Error(t(151));for(var Ne=Re=null,be=j,Me=j=0,Jt=null,st=$.next();be!==null&&!st.done;Me++,st=$.next()){be.index>Me?(Jt=be,be=null):Jt=be.sibling;var Os=ie(z,be,st.value,pe);if(Os===null){be===null&&(be=Jt);break}r&&be&&Os.alternate===null&&i(z,be),j=g(Os,j,Me),Ne===null?Re=Os:Ne.sibling=Os,Ne=Os,be=Jt}if(st.done)return a(z,be),Rt&&Ei(z,Me),Re;if(be===null){for(;!st.done;Me++,st=$.next())st=le(z,st.value,pe),st!==null&&(j=g(st,j,Me),Ne===null?Re=st:Ne.sibling=st,Ne=st);return Rt&&Ei(z,Me),Re}for(be=h(z,be);!st.done;Me++,st=$.next())st=we(be,z,Me,st.value,pe),st!==null&&(r&&st.alternate!==null&&be.delete(st.key===null?Me:st.key),j=g(st,j,Me),Ne===null?Re=st:Ne.sibling=st,Ne=st);return r&&be.forEach(function(O0){return i(z,O0)}),Rt&&Ei(z,Me),Re}function Lt(z,j,$,pe){if(typeof $=="object"&&$!==null&&$.type===x&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case re:e:{for(var Re=$.key,Ne=j;Ne!==null;){if(Ne.key===Re){if(Re=$.type,Re===x){if(Ne.tag===7){a(z,Ne.sibling),j=d(Ne,$.props.children),j.return=z,z=j;break e}}else if(Ne.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===et&&rm(Re)===Ne.type){a(z,Ne.sibling),j=d(Ne,$.props),j.ref=Na(z,Ne,$),j.return=z,z=j;break e}a(z,Ne);break}else i(z,Ne);Ne=Ne.sibling}$.type===x?(j=Pi($.props.children,z.mode,pe,$.key),j.return=z,z=j):(pe=ku($.type,$.key,$.props,null,z.mode,pe),pe.ref=Na(z,j,$),pe.return=z,z=pe)}return w(z);case se:e:{for(Ne=$.key;j!==null;){if(j.key===Ne)if(j.tag===4&&j.stateNode.containerInfo===$.containerInfo&&j.stateNode.implementation===$.implementation){a(z,j.sibling),j=d(j,$.children||[]),j.return=z,z=j;break e}else{a(z,j);break}else i(z,j);j=j.sibling}j=ud($,z.mode,pe),j.return=z,z=j}return w(z);case et:return Ne=$._init,Lt(z,j,Ne($._payload),pe)}if(Pe($))return Se(z,j,$,pe);if(J($))return Ce(z,j,$,pe);nu(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,j!==null&&j.tag===6?(a(z,j.sibling),j=d(j,$),j.return=z,z=j):(a(z,j),j=ld($,z.mode,pe),j.return=z,z=j),w(z)):a(z,j)}return Lt}var wo=sm(!0),im=sm(!1),ru=Ss(null),su=null,Eo=null,vh=null;function _h(){vh=Eo=su=null}function wh(r){var i=ru.current;wt(ru),r._currentValue=i}function Eh(r,i,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===a)break;r=r.return}}function To(r,i){su=r,vh=Eo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(An=!0),r.firstContext=null)}function Jn(r){var i=r._currentValue;if(vh!==r)if(r={context:r,memoizedValue:i,next:null},Eo===null){if(su===null)throw Error(t(308));Eo=r,su.dependencies={lanes:0,firstContext:r}}else Eo=Eo.next=r;return i}var Ti=null;function Th(r){Ti===null?Ti=[r]:Ti.push(r)}function om(r,i,a,h){var d=i.interleaved;return d===null?(a.next=a,Th(i)):(a.next=d.next,d.next=a),i.interleaved=a,rs(r,h)}function rs(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Rs=!1;function Ih(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function am(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ss(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function As(r,i,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(nt&2)!==0){var d=h.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),h.pending=i,rs(r,a)}return d=h.interleaved,d===null?(i.next=i,Th(h)):(i.next=d.next,d.next=i),h.interleaved=i,rs(r,a)}function iu(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,da(r,a)}}function lm(r,i){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?d=g=w:g=g.next=w,a=a.next}while(a!==null);g===null?d=g=i:g=g.next=i}else d=g=i;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function ou(r,i,a,h){var d=r.updateQueue;Rs=!1;var g=d.firstBaseUpdate,w=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var M=N,q=M.next;M.next=null,w===null?g=q:w.next=q,w=M;var oe=r.alternate;oe!==null&&(oe=oe.updateQueue,N=oe.lastBaseUpdate,N!==w&&(N===null?oe.firstBaseUpdate=q:N.next=q,oe.lastBaseUpdate=M))}if(g!==null){var le=d.baseState;w=0,oe=q=M=null,N=g;do{var ie=N.lane,we=N.eventTime;if((h&ie)===ie){oe!==null&&(oe=oe.next={eventTime:we,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var Se=r,Ce=N;switch(ie=i,we=a,Ce.tag){case 1:if(Se=Ce.payload,typeof Se=="function"){le=Se.call(we,le,ie);break e}le=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ce.payload,ie=typeof Se=="function"?Se.call(we,le,ie):Se,ie==null)break e;le=X({},le,ie);break e;case 2:Rs=!0}}N.callback!==null&&N.lane!==0&&(r.flags|=64,ie=d.effects,ie===null?d.effects=[N]:ie.push(N))}else we={eventTime:we,lane:ie,tag:N.tag,payload:N.payload,callback:N.callback,next:null},oe===null?(q=oe=we,M=le):oe=oe.next=we,w|=ie;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;ie=N,N=ie.next,ie.next=null,d.lastBaseUpdate=ie,d.shared.pending=null}}while(!0);if(oe===null&&(M=le),d.baseState=M,d.firstBaseUpdate=q,d.lastBaseUpdate=oe,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else g===null&&(d.shared.lanes=0);Ci|=w,r.lanes=w,r.memoizedState=le}}function um(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var ba={},br=Ss(ba),Da=Ss(ba),Va=Ss(ba);function Ii(r){if(r===ba)throw Error(t(174));return r}function Sh(r,i){switch(pt(Va,i),pt(Da,r),pt(br,ba),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:qe(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=qe(i,r)}wt(br),pt(br,i)}function Io(){wt(br),wt(Da),wt(Va)}function cm(r){Ii(Va.current);var i=Ii(br.current),a=qe(i,r.type);i!==a&&(pt(Da,r),pt(br,a))}function Ch(r){Da.current===r&&(wt(br),wt(Da))}var Pt=Ss(0);function au(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var kh=[];function Rh(){for(var r=0;r<kh.length;r++)kh[r]._workInProgressVersionPrimary=null;kh.length=0}var lu=ue.ReactCurrentDispatcher,Ah=ue.ReactCurrentBatchConfig,Si=0,xt=null,qt=null,Qt=null,uu=!1,Oa=!1,La=0,r0=0;function fn(){throw Error(t(321))}function Ph(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!or(r[a],i[a]))return!1;return!0}function xh(r,i,a,h,d,g){if(Si=g,xt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,lu.current=r===null||r.memoizedState===null?a0:l0,r=a(h,d),Oa){g=0;do{if(Oa=!1,La=0,25<=g)throw Error(t(301));g+=1,Qt=qt=null,i.updateQueue=null,lu.current=u0,r=a(h,d)}while(Oa)}if(lu.current=du,i=qt!==null&&qt.next!==null,Si=0,Qt=qt=xt=null,uu=!1,i)throw Error(t(300));return r}function Nh(){var r=La!==0;return La=0,r}function Dr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?xt.memoizedState=Qt=r:Qt=Qt.next=r,Qt}function Xn(){if(qt===null){var r=xt.alternate;r=r!==null?r.memoizedState:null}else r=qt.next;var i=Qt===null?xt.memoizedState:Qt.next;if(i!==null)Qt=i,qt=r;else{if(r===null)throw Error(t(310));qt=r,r={memoizedState:qt.memoizedState,baseState:qt.baseState,baseQueue:qt.baseQueue,queue:qt.queue,next:null},Qt===null?xt.memoizedState=Qt=r:Qt=Qt.next=r}return Qt}function Ma(r,i){return typeof i=="function"?i(r):i}function bh(r){var i=Xn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=qt,d=h.baseQueue,g=a.pending;if(g!==null){if(d!==null){var w=d.next;d.next=g.next,g.next=w}h.baseQueue=d=g,a.pending=null}if(d!==null){g=d.next,h=h.baseState;var N=w=null,M=null,q=g;do{var oe=q.lane;if((Si&oe)===oe)M!==null&&(M=M.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),h=q.hasEagerState?q.eagerState:r(h,q.action);else{var le={lane:oe,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};M===null?(N=M=le,w=h):M=M.next=le,xt.lanes|=oe,Ci|=oe}q=q.next}while(q!==null&&q!==g);M===null?w=h:M.next=N,or(h,i.memoizedState)||(An=!0),i.memoizedState=h,i.baseState=w,i.baseQueue=M,a.lastRenderedState=h}if(r=a.interleaved,r!==null){d=r;do g=d.lane,xt.lanes|=g,Ci|=g,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Dh(r){var i=Xn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,d=a.pending,g=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do g=r(g,w.action),w=w.next;while(w!==d);or(g,i.memoizedState)||(An=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,h]}function hm(){}function dm(r,i){var a=xt,h=Xn(),d=i(),g=!or(h.memoizedState,d);if(g&&(h.memoizedState=d,An=!0),h=h.queue,Vh(mm.bind(null,a,h,r),[r]),h.getSnapshot!==i||g||Qt!==null&&Qt.memoizedState.tag&1){if(a.flags|=2048,ja(9,pm.bind(null,a,h,d,i),void 0,null),Yt===null)throw Error(t(349));(Si&30)!==0||fm(a,i,d)}return d}function fm(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=xt.updateQueue,i===null?(i={lastEffect:null,stores:null},xt.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function pm(r,i,a,h){i.value=a,i.getSnapshot=h,gm(i)&&ym(r)}function mm(r,i,a){return a(function(){gm(i)&&ym(r)})}function gm(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!or(r,a)}catch{return!0}}function ym(r){var i=rs(r,1);i!==null&&hr(i,r,1,-1)}function vm(r){var i=Dr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:r},i.queue=r,r=r.dispatch=o0.bind(null,xt,r),[i.memoizedState,r]}function ja(r,i,a,h){return r={tag:r,create:i,destroy:a,deps:h,next:null},i=xt.updateQueue,i===null?(i={lastEffect:null,stores:null},xt.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,i.lastEffect=r)),r}function _m(){return Xn().memoizedState}function cu(r,i,a,h){var d=Dr();xt.flags|=r,d.memoizedState=ja(1|i,a,void 0,h===void 0?null:h)}function hu(r,i,a,h){var d=Xn();h=h===void 0?null:h;var g=void 0;if(qt!==null){var w=qt.memoizedState;if(g=w.destroy,h!==null&&Ph(h,w.deps)){d.memoizedState=ja(i,a,g,h);return}}xt.flags|=r,d.memoizedState=ja(1|i,a,g,h)}function wm(r,i){return cu(8390656,8,r,i)}function Vh(r,i){return hu(2048,8,r,i)}function Em(r,i){return hu(4,2,r,i)}function Tm(r,i){return hu(4,4,r,i)}function Im(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Sm(r,i,a){return a=a!=null?a.concat([r]):null,hu(4,4,Im.bind(null,i,r),a)}function Oh(){}function Cm(r,i){var a=Xn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Ph(i,h[1])?h[0]:(a.memoizedState=[r,i],r)}function km(r,i){var a=Xn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Ph(i,h[1])?h[0]:(r=r(),a.memoizedState=[r,i],r)}function Rm(r,i,a){return(Si&21)===0?(r.baseState&&(r.baseState=!1,An=!0),r.memoizedState=a):(or(a,i)||(a=ca(),xt.lanes|=a,Ci|=a,r.baseState=!0),i)}function s0(r,i){var a=Ze;Ze=a!==0&&4>a?a:4,r(!0);var h=Ah.transition;Ah.transition={};try{r(!1),i()}finally{Ze=a,Ah.transition=h}}function Am(){return Xn().memoizedState}function i0(r,i,a){var h=bs(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Pm(r))xm(i,a);else if(a=om(r,i,a,h),a!==null){var d=Tn();hr(a,r,h,d),Nm(a,i,h)}}function o0(r,i,a){var h=bs(r),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Pm(r))xm(i,d);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var w=i.lastRenderedState,N=g(w,a);if(d.hasEagerState=!0,d.eagerState=N,or(N,w)){var M=i.interleaved;M===null?(d.next=d,Th(i)):(d.next=M.next,M.next=d),i.interleaved=d;return}}catch{}finally{}a=om(r,i,d,h),a!==null&&(d=Tn(),hr(a,r,h,d),Nm(a,i,h))}}function Pm(r){var i=r.alternate;return r===xt||i!==null&&i===xt}function xm(r,i){Oa=uu=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Nm(r,i,a){if((a&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,da(r,a)}}var du={readContext:Jn,useCallback:fn,useContext:fn,useEffect:fn,useImperativeHandle:fn,useInsertionEffect:fn,useLayoutEffect:fn,useMemo:fn,useReducer:fn,useRef:fn,useState:fn,useDebugValue:fn,useDeferredValue:fn,useTransition:fn,useMutableSource:fn,useSyncExternalStore:fn,useId:fn,unstable_isNewReconciler:!1},a0={readContext:Jn,useCallback:function(r,i){return Dr().memoizedState=[r,i===void 0?null:i],r},useContext:Jn,useEffect:wm,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,cu(4194308,4,Im.bind(null,i,r),a)},useLayoutEffect:function(r,i){return cu(4194308,4,r,i)},useInsertionEffect:function(r,i){return cu(4,2,r,i)},useMemo:function(r,i){var a=Dr();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var h=Dr();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=i0.bind(null,xt,r),[h.memoizedState,r]},useRef:function(r){var i=Dr();return r={current:r},i.memoizedState=r},useState:vm,useDebugValue:Oh,useDeferredValue:function(r){return Dr().memoizedState=r},useTransition:function(){var r=vm(!1),i=r[0];return r=s0.bind(null,r[1]),Dr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var h=xt,d=Dr();if(Rt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Yt===null)throw Error(t(349));(Si&30)!==0||fm(h,i,a)}d.memoizedState=a;var g={value:a,getSnapshot:i};return d.queue=g,wm(mm.bind(null,h,g,r),[r]),h.flags|=2048,ja(9,pm.bind(null,h,g,a,i),void 0,null),a},useId:function(){var r=Dr(),i=Yt.identifierPrefix;if(Rt){var a=ns,h=ts;a=(h&~(1<<32-Ln(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=La++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=r0++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},l0={readContext:Jn,useCallback:Cm,useContext:Jn,useEffect:Vh,useImperativeHandle:Sm,useInsertionEffect:Em,useLayoutEffect:Tm,useMemo:km,useReducer:bh,useRef:_m,useState:function(){return bh(Ma)},useDebugValue:Oh,useDeferredValue:function(r){var i=Xn();return Rm(i,qt.memoizedState,r)},useTransition:function(){var r=bh(Ma)[0],i=Xn().memoizedState;return[r,i]},useMutableSource:hm,useSyncExternalStore:dm,useId:Am,unstable_isNewReconciler:!1},u0={readContext:Jn,useCallback:Cm,useContext:Jn,useEffect:Vh,useImperativeHandle:Sm,useInsertionEffect:Em,useLayoutEffect:Tm,useMemo:km,useReducer:Dh,useRef:_m,useState:function(){return Dh(Ma)},useDebugValue:Oh,useDeferredValue:function(r){var i=Xn();return qt===null?i.memoizedState=r:Rm(i,qt.memoizedState,r)},useTransition:function(){var r=Dh(Ma)[0],i=Xn().memoizedState;return[r,i]},useMutableSource:hm,useSyncExternalStore:dm,useId:Am,unstable_isNewReconciler:!1};function lr(r,i){if(r&&r.defaultProps){i=X({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function Lh(r,i,a,h){i=r.memoizedState,a=a(h,i),a=a==null?i:X({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var fu={isMounted:function(r){return(r=r._reactInternals)?sr(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var h=Tn(),d=bs(r),g=ss(h,d);g.payload=i,a!=null&&(g.callback=a),i=As(r,g,d),i!==null&&(hr(i,r,d,h),iu(i,r,d))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var h=Tn(),d=bs(r),g=ss(h,d);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=As(r,g,d),i!==null&&(hr(i,r,d,h),iu(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=Tn(),h=bs(r),d=ss(a,h);d.tag=2,i!=null&&(d.callback=i),i=As(r,d,h),i!==null&&(hr(i,r,h,a),iu(i,r,h))}};function bm(r,i,a,h,d,g,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,g,w):i.prototype&&i.prototype.isPureReactComponent?!Sa(a,h)||!Sa(d,g):!0}function Dm(r,i,a){var h=!1,d=Cs,g=i.contextType;return typeof g=="object"&&g!==null?g=Jn(g):(d=Rn(i)?_i:dn.current,h=i.contextTypes,g=(h=h!=null)?go(r,d):Cs),i=new i(a,g),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=fu,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=g),i}function Vm(r,i,a,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==r&&fu.enqueueReplaceState(i,i.state,null)}function Mh(r,i,a,h){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Ih(r);var g=i.contextType;typeof g=="object"&&g!==null?d.context=Jn(g):(g=Rn(i)?_i:dn.current,d.context=go(r,g)),d.state=r.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(Lh(r,i,g,a),d.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&fu.enqueueReplaceState(d,d.state,null),ou(r,a,d,h),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function So(r,i){try{var a="",h=i;do a+=Ue(h),h=h.return;while(h);var d=a}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:i,stack:d,digest:null}}function jh(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function Fh(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var c0=typeof WeakMap=="function"?WeakMap:Map;function Om(r,i,a){a=ss(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){wu||(wu=!0,ed=h),Fh(r,i)},a}function Lm(r,i,a){a=ss(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=i.value;a.payload=function(){return h(d)},a.callback=function(){Fh(r,i)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Fh(r,i),typeof h!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Mm(r,i,a){var h=r.pingCache;if(h===null){h=r.pingCache=new c0;var d=new Set;h.set(i,d)}else d=h.get(i),d===void 0&&(d=new Set,h.set(i,d));d.has(a)||(d.add(a),r=S0.bind(null,r,i,a),i.then(r,r))}function jm(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Fm(r,i,a,h,d){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=ss(-1,1),i.tag=2,As(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var h0=ue.ReactCurrentOwner,An=!1;function En(r,i,a,h){i.child=r===null?im(i,null,a,h):wo(i,r.child,a,h)}function Um(r,i,a,h,d){a=a.render;var g=i.ref;return To(i,d),h=xh(r,i,a,h,g,d),a=Nh(),r!==null&&!An?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,is(r,i,d)):(Rt&&a&&fh(i),i.flags|=1,En(r,i,h,d),i.child)}function zm(r,i,a,h,d){if(r===null){var g=a.type;return typeof g=="function"&&!ad(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Bm(r,i,g,h,d)):(r=ku(a.type,null,h,i,i.mode,d),r.ref=i.ref,r.return=i,i.child=r)}if(g=r.child,(r.lanes&d)===0){var w=g.memoizedProps;if(a=a.compare,a=a!==null?a:Sa,a(w,h)&&r.ref===i.ref)return is(r,i,d)}return i.flags|=1,r=Vs(g,h),r.ref=i.ref,r.return=i,i.child=r}function Bm(r,i,a,h,d){if(r!==null){var g=r.memoizedProps;if(Sa(g,h)&&r.ref===i.ref)if(An=!1,i.pendingProps=h=g,(r.lanes&d)!==0)(r.flags&131072)!==0&&(An=!0);else return i.lanes=r.lanes,is(r,i,d)}return Uh(r,i,a,h,d)}function $m(r,i,a){var h=i.pendingProps,d=h.children,g=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},pt(ko,$n),$n|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,pt(ko,$n),$n|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=g!==null?g.baseLanes:a,pt(ko,$n),$n|=h}else g!==null?(h=g.baseLanes|a,i.memoizedState=null):h=a,pt(ko,$n),$n|=h;return En(r,i,d,a),i.child}function Wm(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Uh(r,i,a,h,d){var g=Rn(a)?_i:dn.current;return g=go(i,g),To(i,d),a=xh(r,i,a,h,g,d),h=Nh(),r!==null&&!An?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,is(r,i,d)):(Rt&&h&&fh(i),i.flags|=1,En(r,i,a,d),i.child)}function Hm(r,i,a,h,d){if(Rn(a)){var g=!0;Jl(i)}else g=!1;if(To(i,d),i.stateNode===null)mu(r,i),Dm(i,a,h),Mh(i,a,h,d),h=!0;else if(r===null){var w=i.stateNode,N=i.memoizedProps;w.props=N;var M=w.context,q=a.contextType;typeof q=="object"&&q!==null?q=Jn(q):(q=Rn(a)?_i:dn.current,q=go(i,q));var oe=a.getDerivedStateFromProps,le=typeof oe=="function"||typeof w.getSnapshotBeforeUpdate=="function";le||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==h||M!==q)&&Vm(i,w,h,q),Rs=!1;var ie=i.memoizedState;w.state=ie,ou(i,h,w,d),M=i.memoizedState,N!==h||ie!==M||kn.current||Rs?(typeof oe=="function"&&(Lh(i,a,oe,h),M=i.memoizedState),(N=Rs||bm(i,a,N,h,ie,M,q))?(le||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=M),w.props=h,w.state=M,w.context=q,h=N):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,am(r,i),N=i.memoizedProps,q=i.type===i.elementType?N:lr(i.type,N),w.props=q,le=i.pendingProps,ie=w.context,M=a.contextType,typeof M=="object"&&M!==null?M=Jn(M):(M=Rn(a)?_i:dn.current,M=go(i,M));var we=a.getDerivedStateFromProps;(oe=typeof we=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==le||ie!==M)&&Vm(i,w,h,M),Rs=!1,ie=i.memoizedState,w.state=ie,ou(i,h,w,d);var Se=i.memoizedState;N!==le||ie!==Se||kn.current||Rs?(typeof we=="function"&&(Lh(i,a,we,h),Se=i.memoizedState),(q=Rs||bm(i,a,q,h,ie,Se,M)||!1)?(oe||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Se,M),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Se,M)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===r.memoizedProps&&ie===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&ie===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=Se),w.props=h,w.state=Se,w.context=M,h=q):(typeof w.componentDidUpdate!="function"||N===r.memoizedProps&&ie===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&ie===r.memoizedState||(i.flags|=1024),h=!1)}return zh(r,i,a,h,g,d)}function zh(r,i,a,h,d,g){Wm(r,i);var w=(i.flags&128)!==0;if(!h&&!w)return d&&Yp(i,a,!1),is(r,i,g);h=i.stateNode,h0.current=i;var N=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&w?(i.child=wo(i,r.child,null,g),i.child=wo(i,null,N,g)):En(r,i,N,g),i.memoizedState=h.state,d&&Yp(i,a,!0),i.child}function qm(r){var i=r.stateNode;i.pendingContext?Kp(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Kp(r,i.context,!1),Sh(r,i.containerInfo)}function Gm(r,i,a,h,d){return _o(),yh(d),i.flags|=256,En(r,i,a,h),i.child}var Bh={dehydrated:null,treeContext:null,retryLane:0};function $h(r){return{baseLanes:r,cachePool:null,transitions:null}}function Km(r,i,a){var h=i.pendingProps,d=Pt.current,g=!1,w=(i.flags&128)!==0,N;if((N=w)||(N=r!==null&&r.memoizedState===null?!1:(d&2)!==0),N?(g=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),pt(Pt,d&1),r===null)return gh(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=h.children,r=h.fallback,g?(h=i.mode,g=i.child,w={mode:"hidden",children:w},(h&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=w):g=Ru(w,h,0,null),r=Pi(r,h,a,null),g.return=i,r.return=i,g.sibling=r,i.child=g,i.child.memoizedState=$h(a),i.memoizedState=Bh,r):Wh(i,w));if(d=r.memoizedState,d!==null&&(N=d.dehydrated,N!==null))return d0(r,i,w,h,N,d,a);if(g){g=h.fallback,w=i.mode,d=r.child,N=d.sibling;var M={mode:"hidden",children:h.children};return(w&1)===0&&i.child!==d?(h=i.child,h.childLanes=0,h.pendingProps=M,i.deletions=null):(h=Vs(d,M),h.subtreeFlags=d.subtreeFlags&14680064),N!==null?g=Vs(N,g):(g=Pi(g,w,a,null),g.flags|=2),g.return=i,h.return=i,h.sibling=g,i.child=h,h=g,g=i.child,w=r.child.memoizedState,w=w===null?$h(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},g.memoizedState=w,g.childLanes=r.childLanes&~a,i.memoizedState=Bh,h}return g=r.child,r=g.sibling,h=Vs(g,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=h,i.memoizedState=null,h}function Wh(r,i){return i=Ru({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function pu(r,i,a,h){return h!==null&&yh(h),wo(i,r.child,null,a),r=Wh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function d0(r,i,a,h,d,g,w){if(a)return i.flags&256?(i.flags&=-257,h=jh(Error(t(422))),pu(r,i,w,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(g=h.fallback,d=i.mode,h=Ru({mode:"visible",children:h.children},d,0,null),g=Pi(g,d,w,null),g.flags|=2,h.return=i,g.return=i,h.sibling=g,i.child=h,(i.mode&1)!==0&&wo(i,r.child,null,w),i.child.memoizedState=$h(w),i.memoizedState=Bh,g);if((i.mode&1)===0)return pu(r,i,w,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var N=h.dgst;return h=N,g=Error(t(419)),h=jh(g,h,void 0),pu(r,i,w,h)}if(N=(w&r.childLanes)!==0,An||N){if(h=Yt,h!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(h.suspendedLanes|w))!==0?0:d,d!==0&&d!==g.retryLane&&(g.retryLane=d,rs(r,d),hr(h,r,d,-1))}return od(),h=jh(Error(t(421))),pu(r,i,w,h)}return d.data==="$?"?(i.flags|=128,i.child=r.child,i=C0.bind(null,r),d._reactRetry=i,null):(r=g.treeContext,Bn=Is(d.nextSibling),zn=i,Rt=!0,ar=null,r!==null&&(Qn[Yn++]=ts,Qn[Yn++]=ns,Qn[Yn++]=wi,ts=r.id,ns=r.overflow,wi=i),i=Wh(i,h.children),i.flags|=4096,i)}function Qm(r,i,a){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),Eh(r.return,i,a)}function Hh(r,i,a,h,d){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=h,g.tail=a,g.tailMode=d)}function Ym(r,i,a){var h=i.pendingProps,d=h.revealOrder,g=h.tail;if(En(r,i,h.children,a),h=Pt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Qm(r,a,i);else if(r.tag===19)Qm(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(pt(Pt,h),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)r=a.alternate,r!==null&&au(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Hh(i,!1,d,a,g);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(r=d.alternate,r!==null&&au(r)===null){i.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}Hh(i,!0,a,null,g);break;case"together":Hh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function mu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function is(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Ci|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,a=Vs(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=Vs(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function f0(r,i,a){switch(i.tag){case 3:qm(i),_o();break;case 5:cm(i);break;case 1:Rn(i.type)&&Jl(i);break;case 4:Sh(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,d=i.memoizedProps.value;pt(ru,h._currentValue),h._currentValue=d;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(pt(Pt,Pt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Km(r,i,a):(pt(Pt,Pt.current&1),r=is(r,i,a),r!==null?r.sibling:null);pt(Pt,Pt.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(r.flags&128)!==0){if(h)return Ym(r,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),pt(Pt,Pt.current),h)break;return null;case 22:case 23:return i.lanes=0,$m(r,i,a)}return is(r,i,a)}var Jm,qh,Xm,Zm;Jm=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},qh=function(){},Xm=function(r,i,a,h){var d=r.memoizedProps;if(d!==h){r=i.stateNode,Ii(br.current);var g=null;switch(a){case"input":d=ae(r,d),h=ae(r,h),g=[];break;case"select":d=X({},d,{value:void 0}),h=X({},h,{value:void 0}),g=[];break;case"textarea":d=bt(r,d),h=bt(r,h),g=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Kl)}un(a,h);var w;a=null;for(q in d)if(!h.hasOwnProperty(q)&&d.hasOwnProperty(q)&&d[q]!=null)if(q==="style"){var N=d[q];for(w in N)N.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?g||(g=[]):(g=g||[]).push(q,null));for(q in h){var M=h[q];if(N=d!=null?d[q]:void 0,h.hasOwnProperty(q)&&M!==N&&(M!=null||N!=null))if(q==="style")if(N){for(w in N)!N.hasOwnProperty(w)||M&&M.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in M)M.hasOwnProperty(w)&&N[w]!==M[w]&&(a||(a={}),a[w]=M[w])}else a||(g||(g=[]),g.push(q,a)),a=M;else q==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,N=N?N.__html:void 0,M!=null&&N!==M&&(g=g||[]).push(q,M)):q==="children"?typeof M!="string"&&typeof M!="number"||(g=g||[]).push(q,""+M):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(M!=null&&q==="onScroll"&&_t("scroll",r),g||N===M||(g=[])):(g=g||[]).push(q,M))}a&&(g=g||[]).push("style",a);var q=g;(i.updateQueue=q)&&(i.flags|=4)}},Zm=function(r,i,a,h){a!==h&&(i.flags|=4)};function Fa(r,i){if(!Rt)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function pn(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(i)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=h,r.childLanes=a,i}function p0(r,i,a){var h=i.pendingProps;switch(ph(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pn(i),null;case 1:return Rn(i.type)&&Yl(),pn(i),null;case 3:return h=i.stateNode,Io(),wt(kn),wt(dn),Rh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(tu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,ar!==null&&(rd(ar),ar=null))),qh(r,i),pn(i),null;case 5:Ch(i);var d=Ii(Va.current);if(a=i.type,r!==null&&i.stateNode!=null)Xm(r,i,a,h,d),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return pn(i),null}if(r=Ii(br.current),tu(i)){h=i.stateNode,a=i.type;var g=i.memoizedProps;switch(h[Nr]=i,h[Pa]=g,r=(i.mode&1)!==0,a){case"dialog":_t("cancel",h),_t("close",h);break;case"iframe":case"object":case"embed":_t("load",h);break;case"video":case"audio":for(d=0;d<ka.length;d++)_t(ka[d],h);break;case"source":_t("error",h);break;case"img":case"image":case"link":_t("error",h),_t("load",h);break;case"details":_t("toggle",h);break;case"input":W(h,g),_t("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!g.multiple},_t("invalid",h);break;case"textarea":Vn(h,g),_t("invalid",h)}un(a,g),d=null;for(var w in g)if(g.hasOwnProperty(w)){var N=g[w];w==="children"?typeof N=="string"?h.textContent!==N&&(g.suppressHydrationWarning!==!0&&Gl(h.textContent,N,r),d=["children",N]):typeof N=="number"&&h.textContent!==""+N&&(g.suppressHydrationWarning!==!0&&Gl(h.textContent,N,r),d=["children",""+N]):o.hasOwnProperty(w)&&N!=null&&w==="onScroll"&&_t("scroll",h)}switch(a){case"input":Hn(h),de(h,g,!0);break;case"textarea":Hn(h),De(h);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(h.onclick=Kl)}h=d,i.updateQueue=h,h!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=gt(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[Nr]=i,r[Pa]=h,Jm(r,i,!1,!1),i.stateNode=r;e:{switch(w=Wr(a,h),a){case"dialog":_t("cancel",r),_t("close",r),d=h;break;case"iframe":case"object":case"embed":_t("load",r),d=h;break;case"video":case"audio":for(d=0;d<ka.length;d++)_t(ka[d],r);d=h;break;case"source":_t("error",r),d=h;break;case"img":case"image":case"link":_t("error",r),_t("load",r),d=h;break;case"details":_t("toggle",r),d=h;break;case"input":W(r,h),d=ae(r,h),_t("invalid",r);break;case"option":d=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},d=X({},h,{value:void 0}),_t("invalid",r);break;case"textarea":Vn(r,h),d=bt(r,h),_t("invalid",r);break;default:d=h}un(a,d),N=d;for(g in N)if(N.hasOwnProperty(g)){var M=N[g];g==="style"?St(r,M):g==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&wn(r,M)):g==="children"?typeof M=="string"?(a!=="textarea"||M!=="")&&Sn(r,M):typeof M=="number"&&Sn(r,""+M):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?M!=null&&g==="onScroll"&&_t("scroll",r):M!=null&&ee(r,g,M,w))}switch(a){case"input":Hn(r),de(r,h,!1);break;case"textarea":Hn(r),De(r);break;case"option":h.value!=null&&r.setAttribute("value",""+He(h.value));break;case"select":r.multiple=!!h.multiple,g=h.value,g!=null?It(r,!!h.multiple,g,!1):h.defaultValue!=null&&It(r,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=Kl)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return pn(i),null;case 6:if(r&&i.stateNode!=null)Zm(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ii(Va.current),Ii(br.current),tu(i)){if(h=i.stateNode,a=i.memoizedProps,h[Nr]=i,(g=h.nodeValue!==a)&&(r=zn,r!==null))switch(r.tag){case 3:Gl(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Gl(h.nodeValue,a,(r.mode&1)!==0)}g&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Nr]=i,i.stateNode=h}return pn(i),null;case 13:if(wt(Pt),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(Rt&&Bn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)nm(),_o(),i.flags|=98560,g=!1;else if(g=tu(i),h!==null&&h.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[Nr]=i}else _o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;pn(i),g=!1}else ar!==null&&(rd(ar),ar=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Pt.current&1)!==0?Gt===0&&(Gt=3):od())),i.updateQueue!==null&&(i.flags|=4),pn(i),null);case 4:return Io(),qh(r,i),r===null&&Ra(i.stateNode.containerInfo),pn(i),null;case 10:return wh(i.type._context),pn(i),null;case 17:return Rn(i.type)&&Yl(),pn(i),null;case 19:if(wt(Pt),g=i.memoizedState,g===null)return pn(i),null;if(h=(i.flags&128)!==0,w=g.rendering,w===null)if(h)Fa(g,!1);else{if(Gt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=au(r),w!==null){for(i.flags|=128,Fa(g,!1),h=w.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)g=a,r=h,g.flags&=14680066,w=g.alternate,w===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=w.childLanes,g.lanes=w.lanes,g.child=w.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=w.memoizedProps,g.memoizedState=w.memoizedState,g.updateQueue=w.updateQueue,g.type=w.type,r=w.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return pt(Pt,Pt.current&1|2),i.child}r=r.sibling}g.tail!==null&&vt()>Ro&&(i.flags|=128,h=!0,Fa(g,!1),i.lanes=4194304)}else{if(!h)if(r=au(w),r!==null){if(i.flags|=128,h=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Fa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!w.alternate&&!Rt)return pn(i),null}else 2*vt()-g.renderingStartTime>Ro&&a!==1073741824&&(i.flags|=128,h=!0,Fa(g,!1),i.lanes=4194304);g.isBackwards?(w.sibling=i.child,i.child=w):(a=g.last,a!==null?a.sibling=w:i.child=w,g.last=w)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=vt(),i.sibling=null,a=Pt.current,pt(Pt,h?a&1|2:a&1),i):(pn(i),null);case 22:case 23:return id(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?($n&1073741824)!==0&&(pn(i),i.subtreeFlags&6&&(i.flags|=8192)):pn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function m0(r,i){switch(ph(i),i.tag){case 1:return Rn(i.type)&&Yl(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Io(),wt(kn),wt(dn),Rh(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Ch(i),null;case 13:if(wt(Pt),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));_o()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return wt(Pt),null;case 4:return Io(),null;case 10:return wh(i.type._context),null;case 22:case 23:return id(),null;case 24:return null;default:return null}}var gu=!1,mn=!1,g0=typeof WeakSet=="function"?WeakSet:Set,Te=null;function Co(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Dt(r,i,h)}else a.current=null}function Gh(r,i,a){try{a()}catch(h){Dt(r,i,h)}}var eg=!1;function y0(r,i){if(ih=Yr,r=bp(),Jc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,g=h.focusNode;h=h.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var w=0,N=-1,M=-1,q=0,oe=0,le=r,ie=null;t:for(;;){for(var we;le!==a||d!==0&&le.nodeType!==3||(N=w+d),le!==g||h!==0&&le.nodeType!==3||(M=w+h),le.nodeType===3&&(w+=le.nodeValue.length),(we=le.firstChild)!==null;)ie=le,le=we;for(;;){if(le===r)break t;if(ie===a&&++q===d&&(N=w),ie===g&&++oe===h&&(M=w),(we=le.nextSibling)!==null)break;le=ie,ie=le.parentNode}le=we}a=N===-1||M===-1?null:{start:N,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(oh={focusedElem:r,selectionRange:a},Yr=!1,Te=i;Te!==null;)if(i=Te,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Te=r;else for(;Te!==null;){i=Te;try{var Se=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ce=Se.memoizedProps,Lt=Se.memoizedState,z=i.stateNode,j=z.getSnapshotBeforeUpdate(i.elementType===i.type?Ce:lr(i.type,Ce),Lt);z.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var $=i.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){Dt(i,i.return,pe)}if(r=i.sibling,r!==null){r.return=i.return,Te=r;break}Te=i.return}return Se=eg,eg=!1,Se}function Ua(r,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&r)===r){var g=d.destroy;d.destroy=void 0,g!==void 0&&Gh(i,a,g)}d=d.next}while(d!==h)}}function yu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function Kh(r){var i=r.ref;if(i!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof i=="function"?i(r):i.current=r}}function tg(r){var i=r.alternate;i!==null&&(r.alternate=null,tg(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Nr],delete i[Pa],delete i[ch],delete i[ZE],delete i[e0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function ng(r){return r.tag===5||r.tag===3||r.tag===4}function rg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||ng(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Qh(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Kl));else if(h!==4&&(r=r.child,r!==null))for(Qh(r,i,a),r=r.sibling;r!==null;)Qh(r,i,a),r=r.sibling}function Yh(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Yh(r,i,a),r=r.sibling;r!==null;)Yh(r,i,a),r=r.sibling}var nn=null,ur=!1;function Ps(r,i,a){for(a=a.child;a!==null;)sg(r,i,a),a=a.sibling}function sg(r,i,a){if(On&&typeof On.onCommitFiberUnmount=="function")try{On.onCommitFiberUnmount(ui,a)}catch{}switch(a.tag){case 5:mn||Co(a,i);case 6:var h=nn,d=ur;nn=null,Ps(r,i,a),nn=h,ur=d,nn!==null&&(ur?(r=nn,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):nn.removeChild(a.stateNode));break;case 18:nn!==null&&(ur?(r=nn,a=a.stateNode,r.nodeType===8?uh(r.parentNode,a):r.nodeType===1&&uh(r,a),_s(r)):uh(nn,a.stateNode));break;case 4:h=nn,d=ur,nn=a.stateNode.containerInfo,ur=!0,Ps(r,i,a),nn=h,ur=d;break;case 0:case 11:case 14:case 15:if(!mn&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var g=d,w=g.destroy;g=g.tag,w!==void 0&&((g&2)!==0||(g&4)!==0)&&Gh(a,i,w),d=d.next}while(d!==h)}Ps(r,i,a);break;case 1:if(!mn&&(Co(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(N){Dt(a,i,N)}Ps(r,i,a);break;case 21:Ps(r,i,a);break;case 22:a.mode&1?(mn=(h=mn)||a.memoizedState!==null,Ps(r,i,a),mn=h):Ps(r,i,a);break;default:Ps(r,i,a)}}function ig(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new g0),i.forEach(function(h){var d=k0.bind(null,r,h);a.has(h)||(a.add(h),h.then(d,d))})}}function cr(r,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var g=r,w=i,N=w;e:for(;N!==null;){switch(N.tag){case 5:nn=N.stateNode,ur=!1;break e;case 3:nn=N.stateNode.containerInfo,ur=!0;break e;case 4:nn=N.stateNode.containerInfo,ur=!0;break e}N=N.return}if(nn===null)throw Error(t(160));sg(g,w,d),nn=null,ur=!1;var M=d.alternate;M!==null&&(M.return=null),d.return=null}catch(q){Dt(d,i,q)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)og(i,r),i=i.sibling}function og(r,i){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(cr(i,r),Vr(r),h&4){try{Ua(3,r,r.return),yu(3,r)}catch(Ce){Dt(r,r.return,Ce)}try{Ua(5,r,r.return)}catch(Ce){Dt(r,r.return,Ce)}}break;case 1:cr(i,r),Vr(r),h&512&&a!==null&&Co(a,a.return);break;case 5:if(cr(i,r),Vr(r),h&512&&a!==null&&Co(a,a.return),r.flags&32){var d=r.stateNode;try{Sn(d,"")}catch(Ce){Dt(r,r.return,Ce)}}if(h&4&&(d=r.stateNode,d!=null)){var g=r.memoizedProps,w=a!==null?a.memoizedProps:g,N=r.type,M=r.updateQueue;if(r.updateQueue=null,M!==null)try{N==="input"&&g.type==="radio"&&g.name!=null&&ce(d,g),Wr(N,w);var q=Wr(N,g);for(w=0;w<M.length;w+=2){var oe=M[w],le=M[w+1];oe==="style"?St(d,le):oe==="dangerouslySetInnerHTML"?wn(d,le):oe==="children"?Sn(d,le):ee(d,oe,le,q)}switch(N){case"input":ve(d,g);break;case"textarea":In(d,g);break;case"select":var ie=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!g.multiple;var we=g.value;we!=null?It(d,!!g.multiple,we,!1):ie!==!!g.multiple&&(g.defaultValue!=null?It(d,!!g.multiple,g.defaultValue,!0):It(d,!!g.multiple,g.multiple?[]:"",!1))}d[Pa]=g}catch(Ce){Dt(r,r.return,Ce)}}break;case 6:if(cr(i,r),Vr(r),h&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,g=r.memoizedProps;try{d.nodeValue=g}catch(Ce){Dt(r,r.return,Ce)}}break;case 3:if(cr(i,r),Vr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{_s(i.containerInfo)}catch(Ce){Dt(r,r.return,Ce)}break;case 4:cr(i,r),Vr(r);break;case 13:cr(i,r),Vr(r),d=r.child,d.flags&8192&&(g=d.memoizedState!==null,d.stateNode.isHidden=g,!g||d.alternate!==null&&d.alternate.memoizedState!==null||(Zh=vt())),h&4&&ig(r);break;case 22:if(oe=a!==null&&a.memoizedState!==null,r.mode&1?(mn=(q=mn)||oe,cr(i,r),mn=q):cr(i,r),Vr(r),h&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!oe&&(r.mode&1)!==0)for(Te=r,oe=r.child;oe!==null;){for(le=Te=oe;Te!==null;){switch(ie=Te,we=ie.child,ie.tag){case 0:case 11:case 14:case 15:Ua(4,ie,ie.return);break;case 1:Co(ie,ie.return);var Se=ie.stateNode;if(typeof Se.componentWillUnmount=="function"){h=ie,a=ie.return;try{i=h,Se.props=i.memoizedProps,Se.state=i.memoizedState,Se.componentWillUnmount()}catch(Ce){Dt(h,a,Ce)}}break;case 5:Co(ie,ie.return);break;case 22:if(ie.memoizedState!==null){ug(le);continue}}we!==null?(we.return=ie,Te=we):ug(le)}oe=oe.sibling}e:for(oe=null,le=r;;){if(le.tag===5){if(oe===null){oe=le;try{d=le.stateNode,q?(g=d.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(N=le.stateNode,M=le.memoizedProps.style,w=M!=null&&M.hasOwnProperty("display")?M.display:null,N.style.display=ln("display",w))}catch(Ce){Dt(r,r.return,Ce)}}}else if(le.tag===6){if(oe===null)try{le.stateNode.nodeValue=q?"":le.memoizedProps}catch(Ce){Dt(r,r.return,Ce)}}else if((le.tag!==22&&le.tag!==23||le.memoizedState===null||le===r)&&le.child!==null){le.child.return=le,le=le.child;continue}if(le===r)break e;for(;le.sibling===null;){if(le.return===null||le.return===r)break e;oe===le&&(oe=null),le=le.return}oe===le&&(oe=null),le.sibling.return=le.return,le=le.sibling}}break;case 19:cr(i,r),Vr(r),h&4&&ig(r);break;case 21:break;default:cr(i,r),Vr(r)}}function Vr(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(ng(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(Sn(d,""),h.flags&=-33);var g=rg(r);Yh(r,g,d);break;case 3:case 4:var w=h.stateNode.containerInfo,N=rg(r);Qh(r,N,w);break;default:throw Error(t(161))}}catch(M){Dt(r,r.return,M)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function v0(r,i,a){Te=r,ag(r)}function ag(r,i,a){for(var h=(r.mode&1)!==0;Te!==null;){var d=Te,g=d.child;if(d.tag===22&&h){var w=d.memoizedState!==null||gu;if(!w){var N=d.alternate,M=N!==null&&N.memoizedState!==null||mn;N=gu;var q=mn;if(gu=w,(mn=M)&&!q)for(Te=d;Te!==null;)w=Te,M=w.child,w.tag===22&&w.memoizedState!==null?cg(d):M!==null?(M.return=w,Te=M):cg(d);for(;g!==null;)Te=g,ag(g),g=g.sibling;Te=d,gu=N,mn=q}lg(r)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,Te=g):lg(r)}}function lg(r){for(;Te!==null;){var i=Te;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:mn||yu(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!mn)if(a===null)h.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:lr(i.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&um(i,g,h);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}um(i,w,a)}break;case 5:var N=i.stateNode;if(a===null&&i.flags&4){a=N;var M=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&a.focus();break;case"img":M.src&&(a.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var q=i.alternate;if(q!==null){var oe=q.memoizedState;if(oe!==null){var le=oe.dehydrated;le!==null&&_s(le)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}mn||i.flags&512&&Kh(i)}catch(ie){Dt(i,i.return,ie)}}if(i===r){Te=null;break}if(a=i.sibling,a!==null){a.return=i.return,Te=a;break}Te=i.return}}function ug(r){for(;Te!==null;){var i=Te;if(i===r){Te=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Te=a;break}Te=i.return}}function cg(r){for(;Te!==null;){var i=Te;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{yu(4,i)}catch(M){Dt(i,a,M)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var d=i.return;try{h.componentDidMount()}catch(M){Dt(i,d,M)}}var g=i.return;try{Kh(i)}catch(M){Dt(i,g,M)}break;case 5:var w=i.return;try{Kh(i)}catch(M){Dt(i,w,M)}}}catch(M){Dt(i,i.return,M)}if(i===r){Te=null;break}var N=i.sibling;if(N!==null){N.return=i.return,Te=N;break}Te=i.return}}var _0=Math.ceil,vu=ue.ReactCurrentDispatcher,Jh=ue.ReactCurrentOwner,Zn=ue.ReactCurrentBatchConfig,nt=0,Yt=null,Ft=null,rn=0,$n=0,ko=Ss(0),Gt=0,za=null,Ci=0,_u=0,Xh=0,Ba=null,Pn=null,Zh=0,Ro=1/0,os=null,wu=!1,ed=null,xs=null,Eu=!1,Ns=null,Tu=0,$a=0,td=null,Iu=-1,Su=0;function Tn(){return(nt&6)!==0?vt():Iu!==-1?Iu:Iu=vt()}function bs(r){return(r.mode&1)===0?1:(nt&2)!==0&&rn!==0?rn&-rn:n0.transition!==null?(Su===0&&(Su=ca()),Su):(r=Ze,r!==0||(r=window.event,r=r===void 0?16:to(r.type)),r)}function hr(r,i,a,h){if(50<$a)throw $a=0,td=null,Error(t(185));fi(r,a,h),((nt&2)===0||r!==Yt)&&(r===Yt&&((nt&2)===0&&(_u|=a),Gt===4&&Ds(r,rn)),xn(r,h),a===1&&nt===0&&(i.mode&1)===0&&(Ro=vt()+500,Xl&&ks()))}function xn(r,i){var a=r.callbackNode;di(r,i);var h=Gr(r,r===Yt?rn:0);if(h===0)a!==null&&Ki(a),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(a!=null&&Ki(a),i===1)r.tag===0?t0(dg.bind(null,r)):Jp(dg.bind(null,r)),JE(function(){(nt&6)===0&&ks()}),a=null;else{switch(Er(h)){case 1:a=Qi;break;case 4:a=aa;break;case 16:a=li;break;case 536870912:a=Yi;break;default:a=li}a=wg(a,hg.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function hg(r,i){if(Iu=-1,Su=0,(nt&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Ao()&&r.callbackNode!==a)return null;var h=Gr(r,r===Yt?rn:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=Cu(r,h);else{i=h;var d=nt;nt|=2;var g=pg();(Yt!==r||rn!==i)&&(os=null,Ro=vt()+500,Ri(r,i));do try{T0();break}catch(N){fg(r,N)}while(!0);_h(),vu.current=g,nt=d,Ft!==null?i=0:(Yt=null,rn=0,i=Gt)}if(i!==0){if(i===2&&(d=ua(r),d!==0&&(h=d,i=nd(r,d))),i===1)throw a=za,Ri(r,0),Ds(r,h),xn(r,vt()),a;if(i===6)Ds(r,h);else{if(d=r.current.alternate,(h&30)===0&&!w0(d)&&(i=Cu(r,h),i===2&&(g=ua(r),g!==0&&(h=g,i=nd(r,g))),i===1))throw a=za,Ri(r,0),Ds(r,h),xn(r,vt()),a;switch(r.finishedWork=d,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Ai(r,Pn,os);break;case 3:if(Ds(r,h),(h&130023424)===h&&(i=Zh+500-vt(),10<i)){if(Gr(r,0)!==0)break;if(d=r.suspendedLanes,(d&h)!==h){Tn(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=lh(Ai.bind(null,r,Pn,os),i);break}Ai(r,Pn,os);break;case 4:if(Ds(r,h),(h&4194240)===h)break;for(i=r.eventTimes,d=-1;0<h;){var w=31-Ln(h);g=1<<w,w=i[w],w>d&&(d=w),h&=~g}if(h=d,h=vt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*_0(h/1960))-h,10<h){r.timeoutHandle=lh(Ai.bind(null,r,Pn,os),h);break}Ai(r,Pn,os);break;case 5:Ai(r,Pn,os);break;default:throw Error(t(329))}}}return xn(r,vt()),r.callbackNode===a?hg.bind(null,r):null}function nd(r,i){var a=Ba;return r.current.memoizedState.isDehydrated&&(Ri(r,i).flags|=256),r=Cu(r,i),r!==2&&(i=Pn,Pn=a,i!==null&&rd(i)),r}function rd(r){Pn===null?Pn=r:Pn.push.apply(Pn,r)}function w0(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],g=d.getSnapshot;d=d.value;try{if(!or(g(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ds(r,i){for(i&=~Xh,i&=~_u,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-Ln(i),h=1<<a;r[a]=-1,i&=~h}}function dg(r){if((nt&6)!==0)throw Error(t(327));Ao();var i=Gr(r,0);if((i&1)===0)return xn(r,vt()),null;var a=Cu(r,i);if(r.tag!==0&&a===2){var h=ua(r);h!==0&&(i=h,a=nd(r,h))}if(a===1)throw a=za,Ri(r,0),Ds(r,i),xn(r,vt()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Ai(r,Pn,os),xn(r,vt()),null}function sd(r,i){var a=nt;nt|=1;try{return r(i)}finally{nt=a,nt===0&&(Ro=vt()+500,Xl&&ks())}}function ki(r){Ns!==null&&Ns.tag===0&&(nt&6)===0&&Ao();var i=nt;nt|=1;var a=Zn.transition,h=Ze;try{if(Zn.transition=null,Ze=1,r)return r()}finally{Ze=h,Zn.transition=a,nt=i,(nt&6)===0&&ks()}}function id(){$n=ko.current,wt(ko)}function Ri(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,YE(a)),Ft!==null)for(a=Ft.return;a!==null;){var h=a;switch(ph(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Yl();break;case 3:Io(),wt(kn),wt(dn),Rh();break;case 5:Ch(h);break;case 4:Io();break;case 13:wt(Pt);break;case 19:wt(Pt);break;case 10:wh(h.type._context);break;case 22:case 23:id()}a=a.return}if(Yt=r,Ft=r=Vs(r.current,null),rn=$n=i,Gt=0,za=null,Xh=_u=Ci=0,Pn=Ba=null,Ti!==null){for(i=0;i<Ti.length;i++)if(a=Ti[i],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,g=a.pending;if(g!==null){var w=g.next;g.next=d,h.next=w}a.pending=h}Ti=null}return r}function fg(r,i){do{var a=Ft;try{if(_h(),lu.current=du,uu){for(var h=xt.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}uu=!1}if(Si=0,Qt=qt=xt=null,Oa=!1,La=0,Jh.current=null,a===null||a.return===null){Gt=1,za=i,Ft=null;break}e:{var g=r,w=a.return,N=a,M=i;if(i=rn,N.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var q=M,oe=N,le=oe.tag;if((oe.mode&1)===0&&(le===0||le===11||le===15)){var ie=oe.alternate;ie?(oe.updateQueue=ie.updateQueue,oe.memoizedState=ie.memoizedState,oe.lanes=ie.lanes):(oe.updateQueue=null,oe.memoizedState=null)}var we=jm(w);if(we!==null){we.flags&=-257,Fm(we,w,N,g,i),we.mode&1&&Mm(g,q,i),i=we,M=q;var Se=i.updateQueue;if(Se===null){var Ce=new Set;Ce.add(M),i.updateQueue=Ce}else Se.add(M);break e}else{if((i&1)===0){Mm(g,q,i),od();break e}M=Error(t(426))}}else if(Rt&&N.mode&1){var Lt=jm(w);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),Fm(Lt,w,N,g,i),yh(So(M,N));break e}}g=M=So(M,N),Gt!==4&&(Gt=2),Ba===null?Ba=[g]:Ba.push(g),g=w;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var z=Om(g,M,i);lm(g,z);break e;case 1:N=M;var j=g.type,$=g.stateNode;if((g.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(xs===null||!xs.has($)))){g.flags|=65536,i&=-i,g.lanes|=i;var pe=Lm(g,N,i);lm(g,pe);break e}}g=g.return}while(g!==null)}gg(a)}catch(Re){i=Re,Ft===a&&a!==null&&(Ft=a=a.return);continue}break}while(!0)}function pg(){var r=vu.current;return vu.current=du,r===null?du:r}function od(){(Gt===0||Gt===3||Gt===2)&&(Gt=4),Yt===null||(Ci&268435455)===0&&(_u&268435455)===0||Ds(Yt,rn)}function Cu(r,i){var a=nt;nt|=2;var h=pg();(Yt!==r||rn!==i)&&(os=null,Ri(r,i));do try{E0();break}catch(d){fg(r,d)}while(!0);if(_h(),nt=a,vu.current=h,Ft!==null)throw Error(t(261));return Yt=null,rn=0,Gt}function E0(){for(;Ft!==null;)mg(Ft)}function T0(){for(;Ft!==null&&!ai();)mg(Ft)}function mg(r){var i=_g(r.alternate,r,$n);r.memoizedProps=r.pendingProps,i===null?gg(r):Ft=i,Jh.current=null}function gg(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=p0(a,i,$n),a!==null){Ft=a;return}}else{if(a=m0(a,i),a!==null){a.flags&=32767,Ft=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Gt=6,Ft=null;return}}if(i=i.sibling,i!==null){Ft=i;return}Ft=i=r}while(i!==null);Gt===0&&(Gt=5)}function Ai(r,i,a){var h=Ze,d=Zn.transition;try{Zn.transition=null,Ze=1,I0(r,i,a,h)}finally{Zn.transition=d,Ze=h}return null}function I0(r,i,a,h){do Ao();while(Ns!==null);if((nt&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(qc(r,g),r===Yt&&(Ft=Yt=null,rn=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Eu||(Eu=!0,wg(li,function(){return Ao(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=Zn.transition,Zn.transition=null;var w=Ze;Ze=1;var N=nt;nt|=4,Jh.current=null,y0(r,a),og(a,r),$E(oh),Yr=!!ih,oh=ih=null,r.current=a,v0(a),qr(),nt=N,Ze=w,Zn.transition=g}else r.current=a;if(Eu&&(Eu=!1,Ns=r,Tu=d),g=r.pendingLanes,g===0&&(xs=null),bl(a.stateNode),xn(r,vt()),i!==null)for(h=r.onRecoverableError,a=0;a<i.length;a++)d=i[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(wu)throw wu=!1,r=ed,ed=null,r;return(Tu&1)!==0&&r.tag!==0&&Ao(),g=r.pendingLanes,(g&1)!==0?r===td?$a++:($a=0,td=r):$a=0,ks(),null}function Ao(){if(Ns!==null){var r=Er(Tu),i=Zn.transition,a=Ze;try{if(Zn.transition=null,Ze=16>r?16:r,Ns===null)var h=!1;else{if(r=Ns,Ns=null,Tu=0,(nt&6)!==0)throw Error(t(331));var d=nt;for(nt|=4,Te=r.current;Te!==null;){var g=Te,w=g.child;if((Te.flags&16)!==0){var N=g.deletions;if(N!==null){for(var M=0;M<N.length;M++){var q=N[M];for(Te=q;Te!==null;){var oe=Te;switch(oe.tag){case 0:case 11:case 15:Ua(8,oe,g)}var le=oe.child;if(le!==null)le.return=oe,Te=le;else for(;Te!==null;){oe=Te;var ie=oe.sibling,we=oe.return;if(tg(oe),oe===q){Te=null;break}if(ie!==null){ie.return=we,Te=ie;break}Te=we}}}var Se=g.alternate;if(Se!==null){var Ce=Se.child;if(Ce!==null){Se.child=null;do{var Lt=Ce.sibling;Ce.sibling=null,Ce=Lt}while(Ce!==null)}}Te=g}}if((g.subtreeFlags&2064)!==0&&w!==null)w.return=g,Te=w;else e:for(;Te!==null;){if(g=Te,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ua(9,g,g.return)}var z=g.sibling;if(z!==null){z.return=g.return,Te=z;break e}Te=g.return}}var j=r.current;for(Te=j;Te!==null;){w=Te;var $=w.child;if((w.subtreeFlags&2064)!==0&&$!==null)$.return=w,Te=$;else e:for(w=j;Te!==null;){if(N=Te,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:yu(9,N)}}catch(Re){Dt(N,N.return,Re)}if(N===w){Te=null;break e}var pe=N.sibling;if(pe!==null){pe.return=N.return,Te=pe;break e}Te=N.return}}if(nt=d,ks(),On&&typeof On.onPostCommitFiberRoot=="function")try{On.onPostCommitFiberRoot(ui,r)}catch{}h=!0}return h}finally{Ze=a,Zn.transition=i}}return!1}function yg(r,i,a){i=So(a,i),i=Om(r,i,1),r=As(r,i,1),i=Tn(),r!==null&&(fi(r,1,i),xn(r,i))}function Dt(r,i,a){if(r.tag===3)yg(r,r,a);else for(;i!==null;){if(i.tag===3){yg(i,r,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(xs===null||!xs.has(h))){r=So(a,r),r=Lm(i,r,1),i=As(i,r,1),r=Tn(),i!==null&&(fi(i,1,r),xn(i,r));break}}i=i.return}}function S0(r,i,a){var h=r.pingCache;h!==null&&h.delete(i),i=Tn(),r.pingedLanes|=r.suspendedLanes&a,Yt===r&&(rn&a)===a&&(Gt===4||Gt===3&&(rn&130023424)===rn&&500>vt()-Zh?Ri(r,0):Xh|=a),xn(r,i)}function vg(r,i){i===0&&((r.mode&1)===0?i=1:(i=gs,gs<<=1,(gs&130023424)===0&&(gs=4194304)));var a=Tn();r=rs(r,i),r!==null&&(fi(r,i,a),xn(r,a))}function C0(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),vg(r,a)}function k0(r,i){var a=0;switch(r.tag){case 13:var h=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),vg(r,a)}var _g;_g=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||kn.current)An=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return An=!1,f0(r,i,a);An=(r.flags&131072)!==0}else An=!1,Rt&&(i.flags&1048576)!==0&&Xp(i,eu,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;mu(r,i),r=i.pendingProps;var d=go(i,dn.current);To(i,a),d=xh(null,i,h,r,d,a);var g=Nh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Rn(h)?(g=!0,Jl(i)):g=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ih(i),d.updater=fu,i.stateNode=d,d._reactInternals=i,Mh(i,h,r,a),i=zh(null,i,h,!0,g,a)):(i.tag=0,Rt&&g&&fh(i),En(null,i,d,a),i=i.child),i;case 16:h=i.elementType;e:{switch(mu(r,i),r=i.pendingProps,d=h._init,h=d(h._payload),i.type=h,d=i.tag=A0(h),r=lr(h,r),d){case 0:i=Uh(null,i,h,r,a);break e;case 1:i=Hm(null,i,h,r,a);break e;case 11:i=Um(null,i,h,r,a);break e;case 14:i=zm(null,i,h,lr(h.type,r),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:lr(h,d),Uh(r,i,h,d,a);case 1:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:lr(h,d),Hm(r,i,h,d,a);case 3:e:{if(qm(i),r===null)throw Error(t(387));h=i.pendingProps,g=i.memoizedState,d=g.element,am(r,i),ou(i,h,null,a);var w=i.memoizedState;if(h=w.element,g.isDehydrated)if(g={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){d=So(Error(t(423)),i),i=Gm(r,i,h,a,d);break e}else if(h!==d){d=So(Error(t(424)),i),i=Gm(r,i,h,a,d);break e}else for(Bn=Is(i.stateNode.containerInfo.firstChild),zn=i,Rt=!0,ar=null,a=im(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(_o(),h===d){i=is(r,i,a);break e}En(r,i,h,a)}i=i.child}return i;case 5:return cm(i),r===null&&gh(i),h=i.type,d=i.pendingProps,g=r!==null?r.memoizedProps:null,w=d.children,ah(h,d)?w=null:g!==null&&ah(h,g)&&(i.flags|=32),Wm(r,i),En(r,i,w,a),i.child;case 6:return r===null&&gh(i),null;case 13:return Km(r,i,a);case 4:return Sh(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=wo(i,null,h,a):En(r,i,h,a),i.child;case 11:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:lr(h,d),Um(r,i,h,d,a);case 7:return En(r,i,i.pendingProps,a),i.child;case 8:return En(r,i,i.pendingProps.children,a),i.child;case 12:return En(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,d=i.pendingProps,g=i.memoizedProps,w=d.value,pt(ru,h._currentValue),h._currentValue=w,g!==null)if(or(g.value,w)){if(g.children===d.children&&!kn.current){i=is(r,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var N=g.dependencies;if(N!==null){w=g.child;for(var M=N.firstContext;M!==null;){if(M.context===h){if(g.tag===1){M=ss(-1,a&-a),M.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var oe=q.pending;oe===null?M.next=M:(M.next=oe.next,oe.next=M),q.pending=M}}g.lanes|=a,M=g.alternate,M!==null&&(M.lanes|=a),Eh(g.return,a,i),N.lanes|=a;break}M=M.next}}else if(g.tag===10)w=g.type===i.type?null:g.child;else if(g.tag===18){if(w=g.return,w===null)throw Error(t(341));w.lanes|=a,N=w.alternate,N!==null&&(N.lanes|=a),Eh(w,a,i),w=g.sibling}else w=g.child;if(w!==null)w.return=g;else for(w=g;w!==null;){if(w===i){w=null;break}if(g=w.sibling,g!==null){g.return=w.return,w=g;break}w=w.return}g=w}En(r,i,d.children,a),i=i.child}return i;case 9:return d=i.type,h=i.pendingProps.children,To(i,a),d=Jn(d),h=h(d),i.flags|=1,En(r,i,h,a),i.child;case 14:return h=i.type,d=lr(h,i.pendingProps),d=lr(h.type,d),zm(r,i,h,d,a);case 15:return Bm(r,i,i.type,i.pendingProps,a);case 17:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:lr(h,d),mu(r,i),i.tag=1,Rn(h)?(r=!0,Jl(i)):r=!1,To(i,a),Dm(i,h,d),Mh(i,h,d,a),zh(null,i,h,!0,r,a);case 19:return Ym(r,i,a);case 22:return $m(r,i,a)}throw Error(t(156,i.tag))};function wg(r,i){return oa(r,i)}function R0(r,i,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(r,i,a,h){return new R0(r,i,a,h)}function ad(r){return r=r.prototype,!(!r||!r.isReactComponent)}function A0(r){if(typeof r=="function")return ad(r)?1:0;if(r!=null){if(r=r.$$typeof,r===b)return 11;if(r===Le)return 14}return 2}function Vs(r,i){var a=r.alternate;return a===null?(a=er(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function ku(r,i,a,h,d,g){var w=2;if(h=r,typeof r=="function")ad(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case x:return Pi(a.children,d,g,i);case k:w=8,d|=8;break;case A:return r=er(12,a,i,d|2),r.elementType=A,r.lanes=g,r;case P:return r=er(13,a,i,d),r.elementType=P,r.lanes=g,r;case Ie:return r=er(19,a,i,d),r.elementType=Ie,r.lanes=g,r;case ye:return Ru(a,d,g,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:w=10;break e;case S:w=9;break e;case b:w=11;break e;case Le:w=14;break e;case et:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=er(w,a,i,d),i.elementType=r,i.type=h,i.lanes=g,i}function Pi(r,i,a,h){return r=er(7,r,h,i),r.lanes=a,r}function Ru(r,i,a,h){return r=er(22,r,h,i),r.elementType=ye,r.lanes=a,r.stateNode={isHidden:!1},r}function ld(r,i,a){return r=er(6,r,null,i),r.lanes=a,r}function ud(r,i,a){return i=er(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function P0(r,i,a,h,d){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function cd(r,i,a,h,d,g,w,N,M){return r=new P0(r,i,a,N,M),i===1?(i=1,g===!0&&(i|=8)):i=0,g=er(3,null,null,i),r.current=g,g.stateNode=r,g.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ih(g),r}function x0(r,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:se,key:h==null?null:""+h,children:r,containerInfo:i,implementation:a}}function Eg(r){if(!r)return Cs;r=r._reactInternals;e:{if(sr(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Rn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Rn(a))return Qp(r,a,i)}return i}function Tg(r,i,a,h,d,g,w,N,M){return r=cd(a,h,!0,r,d,g,w,N,M),r.context=Eg(null),a=r.current,h=Tn(),d=bs(a),g=ss(h,d),g.callback=i??null,As(a,g,d),r.current.lanes=d,fi(r,d,h),xn(r,h),r}function Au(r,i,a,h){var d=i.current,g=Tn(),w=bs(d);return a=Eg(a),i.context===null?i.context=a:i.pendingContext=a,i=ss(g,w),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=As(d,i,w),r!==null&&(hr(r,d,w,g),iu(r,d,w)),w}function Pu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Ig(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function hd(r,i){Ig(r,i),(r=r.alternate)&&Ig(r,i)}function N0(){return null}var Sg=typeof reportError=="function"?reportError:function(r){console.error(r)};function dd(r){this._internalRoot=r}xu.prototype.render=dd.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));Au(r,i,null,null)},xu.prototype.unmount=dd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;ki(function(){Au(null,r,null,null)}),i[Zr]=null}};function xu(r){this._internalRoot=r}xu.prototype.unstable_scheduleHydration=function(r){if(r){var i=ma();r={blockedOn:null,target:r,priority:i};for(var a=0;a<Mn.length&&i!==0&&i<Mn[a].priority;a++);Mn.splice(a,0,r),a===0&&Zi(r)}};function fd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Nu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Cg(){}function b0(r,i,a,h,d){if(d){if(typeof h=="function"){var g=h;h=function(){var q=Pu(w);g.call(q)}}var w=Tg(i,h,r,0,null,!1,!1,"",Cg);return r._reactRootContainer=w,r[Zr]=w.current,Ra(r.nodeType===8?r.parentNode:r),ki(),w}for(;d=r.lastChild;)r.removeChild(d);if(typeof h=="function"){var N=h;h=function(){var q=Pu(M);N.call(q)}}var M=cd(r,0,!1,null,null,!1,!1,"",Cg);return r._reactRootContainer=M,r[Zr]=M.current,Ra(r.nodeType===8?r.parentNode:r),ki(function(){Au(i,M,a,h)}),M}function bu(r,i,a,h,d){var g=a._reactRootContainer;if(g){var w=g;if(typeof d=="function"){var N=d;d=function(){var M=Pu(w);N.call(M)}}Au(i,w,r,d)}else w=b0(a,i,r,d,h);return Pu(w)}fa=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=it(i.pendingLanes);a!==0&&(da(i,a|1),xn(i,vt()),(nt&6)===0&&(Ro=vt()+500,ks()))}break;case 13:ki(function(){var h=rs(r,1);if(h!==null){var d=Tn();hr(h,r,1,d)}}),hd(r,1)}},Ji=function(r){if(r.tag===13){var i=rs(r,134217728);if(i!==null){var a=Tn();hr(i,r,134217728,a)}hd(r,134217728)}},pa=function(r){if(r.tag===13){var i=bs(r),a=rs(r,i);if(a!==null){var h=Tn();hr(a,r,i,h)}hd(r,i)}},ma=function(){return Ze},ga=function(r,i){var a=Ze;try{return Ze=r,i()}finally{Ze=a}},Gn=function(r,i,a){switch(i){case"input":if(ve(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==r&&h.form===r.form){var d=Ql(h);if(!d)throw Error(t(90));nr(h),ve(h,d)}}}break;case"textarea":In(r,a);break;case"select":i=a.value,i!=null&&It(r,!!a.multiple,i,!1)}},Q=sd,he=ki;var D0={usingClientEntryPoint:!1,Events:[xa,po,Ql,yr,vr,sd]},Wa={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V0={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ue.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Nl(r),r===null?null:r.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||N0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Du.isDisabled&&Du.supportsFiber)try{ui=Du.inject(V0),On=Du}catch{}}return Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D0,Nn.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fd(i))throw Error(t(200));return x0(r,i,null,a)},Nn.createRoot=function(r,i){if(!fd(r))throw Error(t(299));var a=!1,h="",d=Sg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=cd(r,1,!1,null,null,a,!1,h,d),r[Zr]=i.current,Ra(r.nodeType===8?r.parentNode:r),new dd(i)},Nn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Nl(i),r=r===null?null:r.stateNode,r},Nn.flushSync=function(r){return ki(r)},Nn.hydrate=function(r,i,a){if(!Nu(i))throw Error(t(200));return bu(null,r,i,!0,a)},Nn.hydrateRoot=function(r,i,a){if(!fd(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,g="",w=Sg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Tg(i,null,r,1,a??null,d,!1,g,w),r[Zr]=i.current,Ra(r),h)for(r=0;r<h.length;r++)a=h[r],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new xu(i)},Nn.render=function(r,i,a){if(!Nu(i))throw Error(t(200));return bu(null,r,i,!1,a)},Nn.unmountComponentAtNode=function(r){if(!Nu(r))throw Error(t(40));return r._reactRootContainer?(ki(function(){bu(null,null,r,!1,function(){r._reactRootContainer=null,r[Zr]=null})}),!0):!1},Nn.unstable_batchedUpdates=sd,Nn.unstable_renderSubtreeIntoContainer=function(r,i,a,h){if(!Nu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return bu(r,i,a,!1,h)},Nn.version="18.3.1-next-f1338f8080-20240426",Nn}var Dg;function Nv(){if(Dg)return gd.exports;Dg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gd.exports=$0(),gd.exports}var Vg;function W0(){if(Vg)return Vu;Vg=1;var n=Nv();return Vu.createRoot=n.createRoot,Vu.hydrateRoot=n.hydrateRoot,Vu}var H0=W0();const q0=xv(H0);var G0=Nv();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},il.apply(this,arguments)}var Us;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Us||(Us={}));const Og="popstate";function K0(n){n===void 0&&(n={});function e(o,l){let{pathname:c="/",search:f="",hash:p=""}=$i(o.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Vd("",{pathname:c,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let c=o.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let p=o.location.href,m=p.indexOf("#");f=m===-1?p:p.slice(0,m)}return f+"#"+(typeof l=="string"?l:Zu(l))}function s(o,l){Tc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Y0(e,t,s,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Tc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q0(){return Math.random().toString(36).substr(2,8)}function Lg(n,e){return{usr:n.state,key:n.key,idx:e}}function Vd(n,e,t,s){return t===void 0&&(t=null),il({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?$i(e):e,{state:t,key:e&&e.key||s||Q0()})}function Zu(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function $i(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function Y0(n,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,f=Us.Pop,p=null,m=_();m==null&&(m=0,c.replaceState(il({},c.state,{idx:m}),""));function _(){return(c.state||{idx:null}).idx}function E(){f=Us.Pop;let O=_(),H=O==null?null:O-m;m=O,p&&p({action:f,location:F.location,delta:H})}function T(O,H){f=Us.Push;let Y=Vd(F.location,O,H);t&&t(Y,O),m=_()+1;let ee=Lg(Y,m),ue=F.createHref(Y);try{c.pushState(ee,"",ue)}catch(re){if(re instanceof DOMException&&re.name==="DataCloneError")throw re;o.location.assign(ue)}l&&p&&p({action:f,location:F.location,delta:1})}function V(O,H){f=Us.Replace;let Y=Vd(F.location,O,H);t&&t(Y,O),m=_();let ee=Lg(Y,m),ue=F.createHref(Y);c.replaceState(ee,"",ue),l&&p&&p({action:f,location:F.location,delta:0})}function U(O){let H=o.location.origin!=="null"?o.location.origin:o.location.href,Y=typeof O=="string"?O:Zu(O);return Y=Y.replace(/ $/,"%20"),Wt(H,"No window.location.(origin|href) available to create URL for href: "+Y),new URL(Y,H)}let F={get action(){return f},get location(){return n(o,c)},listen(O){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Og,E),p=O,()=>{o.removeEventListener(Og,E),p=null}},createHref(O){return e(o,O)},createURL:U,encodeLocation(O){let H=U(O);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:T,replace:V,go(O){return c.go(O)}};return F}var Mg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Mg||(Mg={}));function J0(n,e,t){return t===void 0&&(t="/"),X0(n,e,t)}function X0(n,e,t,s){let o=typeof e=="string"?$i(e):e,l=mf(o.pathname||"/",t);if(l==null)return null;let c=bv(n);Z0(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let m=hT(l);f=lT(c[p],m)}return f}function bv(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,c,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Wt(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let m=Bs([s,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(Wt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),bv(l.children,e,_,m)),!(l.path==null&&!l.index)&&e.push({path:m,score:oT(m,l.index),routesMeta:_})};return n.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,c);else for(let p of Dv(l.path))o(l,c,p)}),e}function Dv(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=Dv(s.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...c),f.map(p=>n.startsWith("/")&&p===""?"/":p)}function Z0(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:aT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const eT=/^:[\w-]+$/,tT=3,nT=2,rT=1,sT=10,iT=-2,jg=n=>n==="*";function oT(n,e){let t=n.split("/"),s=t.length;return t.some(jg)&&(s+=iT),e&&(s+=nT),t.filter(o=>!jg(o)).reduce((o,l)=>o+(eT.test(l)?tT:l===""?rT:sT),s)}function aT(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function lT(n,e,t){let{routesMeta:s}=n,o={},l="/",c=[];for(let f=0;f<s.length;++f){let p=s[f],m=f===s.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=uT({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},_),T=p.route;if(!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:Bs([l,E.pathname]),pathnameBase:gT(Bs([l,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(l=Bs([l,E.pathnameBase]))}return c}function uT(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=cT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((m,_,E)=>{let{paramName:T,isOptional:V}=_;if(T==="*"){let F=f[E]||"";c=l.slice(0,l.length-F.length).replace(/(.)\/+$/,"$1")}const U=f[E];return V&&!U?m[T]=void 0:m[T]=(U||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:c,pattern:n}}function cT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Tc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function hT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tc(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function mf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const dT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fT=n=>dT.test(n);function pT(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?$i(n):n,l;if(t)if(fT(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Tc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?l=Fg(t.substring(1),"/"):l=Fg(t,e)}else l=e;return{pathname:l,search:yT(s),hash:vT(o)}}function Fg(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function _d(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Vv(n,e){let t=mT(n);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Ov(n,e,t,s){s===void 0&&(s=!1);let o;typeof n=="string"?o=$i(n):(o=il({},n),Wt(!o.pathname||!o.pathname.includes("?"),_d("?","pathname","search",o)),Wt(!o.pathname||!o.pathname.includes("#"),_d("#","pathname","hash",o)),Wt(!o.search||!o.search.includes("#"),_d("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,f;if(c==null)f=t;else{let E=e.length-1;if(!s&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}f=E>=0?e[E]:"/"}let p=pT(o,f),m=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(m||_)&&(p.pathname+="/"),p}const Bs=n=>n.join("/").replace(/\/\/+/g,"/"),gT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),yT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,vT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function _T(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Lv=["post","put","patch","delete"];new Set(Lv);const wT=["get",...Lv];new Set(wT);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ol.apply(this,arguments)}const gf=R.createContext(null),ET=R.createContext(null),Wi=R.createContext(null),Ic=R.createContext(null),ti=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Mv=R.createContext(null);function TT(n,e){let{relative:t}=e===void 0?{}:e;pl()||Wt(!1);let{basename:s,navigator:o}=R.useContext(Wi),{hash:l,pathname:c,search:f}=Uv(n,{relative:t}),p=c;return s!=="/"&&(p=c==="/"?s:Bs([s,c])),o.createHref({pathname:p,search:f,hash:l})}function pl(){return R.useContext(Ic)!=null}function ml(){return pl()||Wt(!1),R.useContext(Ic).location}function jv(n){R.useContext(Wi).static||R.useLayoutEffect(n)}function Sc(){let{isDataRoute:n}=R.useContext(ti);return n?OT():IT()}function IT(){pl()||Wt(!1);let n=R.useContext(gf),{basename:e,future:t,navigator:s}=R.useContext(Wi),{matches:o}=R.useContext(ti),{pathname:l}=ml(),c=JSON.stringify(Vv(o,t.v7_relativeSplatPath)),f=R.useRef(!1);return jv(()=>{f.current=!0}),R.useCallback(function(m,_){if(_===void 0&&(_={}),!f.current)return;if(typeof m=="number"){s.go(m);return}let E=Ov(m,JSON.parse(c),l,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Bs([e,E.pathname])),(_.replace?s.replace:s.push)(E,_.state,_)},[e,s,c,l,n])}function Fv(){let{matches:n}=R.useContext(ti),e=n[n.length-1];return e?e.params:{}}function Uv(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=R.useContext(Wi),{matches:o}=R.useContext(ti),{pathname:l}=ml(),c=JSON.stringify(Vv(o,s.v7_relativeSplatPath));return R.useMemo(()=>Ov(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function ST(n,e){return CT(n,e)}function CT(n,e,t,s){pl()||Wt(!1);let{navigator:o}=R.useContext(Wi),{matches:l}=R.useContext(ti),c=l[l.length-1],f=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let m=ml(),_;if(e){var E;let O=typeof e=="string"?$i(e):e;p==="/"||(E=O.pathname)!=null&&E.startsWith(p)||Wt(!1),_=O}else _=m;let T=_.pathname||"/",V=T;if(p!=="/"){let O=p.replace(/^\//,"").split("/");V="/"+T.replace(/^\//,"").split("/").slice(O.length).join("/")}let U=J0(n,{pathname:V}),F=xT(U&&U.map(O=>Object.assign({},O,{params:Object.assign({},f,O.params),pathname:Bs([p,o.encodeLocation?o.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:Bs([p,o.encodeLocation?o.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),l,t,s);return e&&F?R.createElement(Ic.Provider,{value:{location:ol({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Us.Pop}},F):F}function kT(){let n=VT(),e=_T(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:o},t):null,null)}const RT=R.createElement(kT,null);class AT extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(ti.Provider,{value:this.props.routeContext},R.createElement(Mv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function PT(n){let{routeContext:e,match:t,children:s}=n,o=R.useContext(gf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(ti.Provider,{value:e},s)}function xT(n,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,f=(o=t)==null?void 0:o.errors;if(f!=null){let _=c.findIndex(E=>E.route.id&&(f==null?void 0:f[E.route.id])!==void 0);_>=0||Wt(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,m=-1;if(t&&s&&s.v7_partialHydration)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(m=_),E.route.id){let{loaderData:T,errors:V}=t,U=E.route.loader&&T[E.route.id]===void 0&&(!V||V[E.route.id]===void 0);if(E.route.lazy||U){p=!0,m>=0?c=c.slice(0,m+1):c=[c[0]];break}}}return c.reduceRight((_,E,T)=>{let V,U=!1,F=null,O=null;t&&(V=f&&E.route.id?f[E.route.id]:void 0,F=E.route.errorElement||RT,p&&(m<0&&T===0?(LT("route-fallback"),U=!0,O=null):m===T&&(U=!0,O=E.route.hydrateFallbackElement||null)));let H=e.concat(c.slice(0,T+1)),Y=()=>{let ee;return V?ee=F:U?ee=O:E.route.Component?ee=R.createElement(E.route.Component,null):E.route.element?ee=E.route.element:ee=_,R.createElement(PT,{match:E,routeContext:{outlet:_,matches:H,isDataRoute:t!=null},children:ee})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?R.createElement(AT,{location:t.location,revalidation:t.revalidation,component:F,error:V,children:Y(),routeContext:{outlet:null,matches:H,isDataRoute:!0}}):Y()},null)}var zv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(zv||{}),Bv=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(Bv||{});function NT(n){let e=R.useContext(gf);return e||Wt(!1),e}function bT(n){let e=R.useContext(ET);return e||Wt(!1),e}function DT(n){let e=R.useContext(ti);return e||Wt(!1),e}function $v(n){let e=DT(),t=e.matches[e.matches.length-1];return t.route.id||Wt(!1),t.route.id}function VT(){var n;let e=R.useContext(Mv),t=bT(),s=$v();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function OT(){let{router:n}=NT(zv.UseNavigateStable),e=$v(Bv.UseNavigateStable),t=R.useRef(!1);return jv(()=>{t.current=!0}),R.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,ol({fromRouteId:e},l)))},[n,e])}const Ug={};function LT(n,e,t){Ug[n]||(Ug[n]=!0)}function MT(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Ga(n){Wt(!1)}function jT(n){let{basename:e="/",children:t=null,location:s,navigationType:o=Us.Pop,navigator:l,static:c=!1,future:f}=n;pl()&&Wt(!1);let p=e.replace(/^\/*/,"/"),m=R.useMemo(()=>({basename:p,navigator:l,static:c,future:ol({v7_relativeSplatPath:!1},f)}),[p,f,l,c]);typeof s=="string"&&(s=$i(s));let{pathname:_="/",search:E="",hash:T="",state:V=null,key:U="default"}=s,F=R.useMemo(()=>{let O=mf(_,p);return O==null?null:{location:{pathname:O,search:E,hash:T,state:V,key:U},navigationType:o}},[p,_,E,T,V,U,o]);return F==null?null:R.createElement(Wi.Provider,{value:m},R.createElement(Ic.Provider,{children:t,value:F}))}function FT(n){let{children:e,location:t}=n;return ST(Od(e),t)}new Promise(()=>{});function Od(n,e){e===void 0&&(e=[]);let t=[];return R.Children.forEach(n,(s,o)=>{if(!R.isValidElement(s))return;let l=[...e,o];if(s.type===R.Fragment){t.push.apply(t,Od(s.props.children,l));return}s.type!==Ga&&Wt(!1),!s.props.index||!s.props.children||Wt(!1);let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Od(s.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ld(){return Ld=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Ld.apply(this,arguments)}function UT(n,e){if(n==null)return{};var t={},s=Object.keys(n),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function zT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function BT(n,e){return n.button===0&&(!e||e==="_self")&&!zT(n)}function Md(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function $T(n,e){let t=Md(n);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(l=>{t.append(o,l)})}),t}const WT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],HT="6";try{window.__reactRouterVersion=HT}catch{}const qT="startTransition",zg=U0[qT];function GT(n){let{basename:e,children:t,future:s,window:o}=n,l=R.useRef();l.current==null&&(l.current=K0({window:o,v5Compat:!0}));let c=l.current,[f,p]=R.useState({action:c.action,location:c.location}),{v7_startTransition:m}=s||{},_=R.useCallback(E=>{m&&zg?zg(()=>p(E)):p(E)},[p,m]);return R.useLayoutEffect(()=>c.listen(_),[c,_]),R.useEffect(()=>MT(s),[s]),R.createElement(jT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:c,future:s})}const KT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",QT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Di=R.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:c,state:f,target:p,to:m,preventScrollReset:_,viewTransition:E}=e,T=UT(e,WT),{basename:V}=R.useContext(Wi),U,F=!1;if(typeof m=="string"&&QT.test(m)&&(U=m,KT))try{let ee=new URL(window.location.href),ue=m.startsWith("//")?new URL(ee.protocol+m):new URL(m),re=mf(ue.pathname,V);ue.origin===ee.origin&&re!=null?m=re+ue.search+ue.hash:F=!0}catch{}let O=TT(m,{relative:o}),H=YT(m,{replace:c,state:f,target:p,preventScrollReset:_,relative:o,viewTransition:E});function Y(ee){s&&s(ee),ee.defaultPrevented||H(ee)}return R.createElement("a",Ld({},T,{href:U||O,onClick:F||l?s:Y,ref:t,target:p}))});var Bg;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Bg||(Bg={}));var $g;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})($g||($g={}));function YT(n,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:c,viewTransition:f}=e===void 0?{}:e,p=Sc(),m=ml(),_=Uv(n,{relative:c});return R.useCallback(E=>{if(BT(E,t)){E.preventDefault();let T=s!==void 0?s:Zu(m)===Zu(_);p(n,{replace:T,state:o,preventScrollReset:l,relative:c,viewTransition:f})}},[m,p,_,s,o,t,n,l,c,f])}function Wv(n){let e=R.useRef(Md(n)),t=R.useRef(!1),s=ml(),o=R.useMemo(()=>$T(s.search,t.current?null:e.current),[s.search]),l=Sc(),c=R.useCallback((f,p)=>{const m=Md(typeof f=="function"?f(o):f);t.current=!0,l("?"+m,p)},[l,o]);return[o,c]}const JT=()=>{};var Wg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},XT=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},qv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,p=o+2<n.length,m=p?n[o+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let T=(f&15)<<2|m>>6,V=m&63;p||(V=64,c||(T=64)),s.push(t[_],t[E],t[T],t[V])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Hv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):XT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const m=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||m==null||E==null)throw new ZT;const T=l<<2|f>>4;if(s.push(T),m!==64){const V=f<<4&240|m>>2;if(s.push(V),E!==64){const U=m<<6&192|E;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class ZT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eI=function(n){const e=Hv(n);return qv.encodeByteArray(e,!0)},ec=function(n){return eI(n).replace(/\./g,"")},Gv=function(n){try{return qv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=()=>tI().__FIREBASE_DEFAULTS__,rI=()=>{if(typeof process>"u"||typeof Wg>"u")return;const n=Wg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},sI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Gv(n[1]);return e&&JSON.parse(e)},Cc=()=>{try{return JT()||nI()||rI()||sI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Kv=n=>{var e,t;return(t=(e=Cc())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},iI=n=>{const e=Kv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Qv=()=>{var n;return(n=Cc())==null?void 0:n.config},Yv=n=>{var e;return(e=Cc())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Jv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ec(JSON.stringify(t)),ec(JSON.stringify(c)),""].join(".")}const Za={};function lI(){const n={prod:[],emulator:[]};for(const e of Object.keys(Za))Za[e]?n.emulator.push(e):n.prod.push(e);return n}function uI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Hg=!1;function Xv(n,e){if(typeof window>"u"||typeof document>"u"||!Yo(window.location.host)||Za[n]===e||Za[n]||Hg)return;Za[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=lI().prod.length>0;function c(){const T=document.getElementById(s);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,V){T.setAttribute("width","24"),T.setAttribute("id",V),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Hg=!0,c()},T}function _(T,V){T.setAttribute("id",V),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=uI(s),V=t("text"),U=document.getElementById(V)||document.createElement("span"),F=t("learnmore"),O=document.getElementById(F)||document.createElement("a"),H=t("preprendIcon"),Y=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const ee=T.element;f(ee),_(O,F);const ue=m();p(Y,H),ee.append(Y,U,O,ue),document.body.appendChild(ee)}l?(U.innerText="Preview backend disconnected.",Y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _n(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_n())}function hI(){var e;const n=(e=Cc())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function pI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mI(){const n=_n();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function gI(){return!hI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yI(){try{return typeof indexedDB=="object"}catch{return!1}}function vI(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="FirebaseError";class ms extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=_I,Object.setPrototypeOf(this,ms.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?wI(l,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new ms(o,f,s)}}function wI(n,e){return n.replace(EI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const EI=/\{\$([^}]+)}/g;function TI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function cs(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(qg(l)&&qg(c)){if(!cs(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function qg(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function II(n,e){const t=new SI(n,e);return t.subscribe.bind(t)}class SI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");CI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=wd),o.error===void 0&&(o.error=wd),o.complete===void 0&&(o.complete=wd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(n){return n&&n._delegate?n._delegate:n}class ji{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new oI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AI(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:RI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RI(n){return n===bi?void 0:n}function AI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new kI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ye||(Ye={}));const xI={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},NI=Ye.INFO,bI={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},DI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=bI[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yf{constructor(e){this.name=e,this._logLevel=NI,this._logHandler=DI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const VI=(n,e)=>e.some(t=>n instanceof t);let Gg,Kg;function OI(){return Gg||(Gg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LI(){return Kg||(Kg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zv=new WeakMap,jd=new WeakMap,e_=new WeakMap,Ed=new WeakMap,vf=new WeakMap;function MI(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t($s(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Zv.set(t,n)}).catch(()=>{}),vf.set(e,n),e}function jI(n){if(jd.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});jd.set(n,e)}let Fd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||e_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $s(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function FI(n){Fd=n(Fd)}function UI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Td(this),e,...t);return e_.set(s,e.sort?e.sort():[e]),$s(s)}:LI().includes(n)?function(...e){return n.apply(Td(this),e),$s(Zv.get(this))}:function(...e){return $s(n.apply(Td(this),e))}}function zI(n){return typeof n=="function"?UI(n):(n instanceof IDBTransaction&&jI(n),VI(n,OI())?new Proxy(n,Fd):n)}function $s(n){if(n instanceof IDBRequest)return MI(n);if(Ed.has(n))return Ed.get(n);const e=zI(n);return e!==n&&(Ed.set(n,e),vf.set(e,n)),e}const Td=n=>vf.get(n);function BI(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=$s(c);return s&&c.addEventListener("upgradeneeded",p=>{s($s(c.result),p.oldVersion,p.newVersion,$s(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),f}const $I=["get","getKey","getAll","getAllKeys","count"],WI=["put","add","delete","clear"],Id=new Map;function Qg(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Id.get(e))return Id.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=WI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||$I.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let m=p.store;return s&&(m=m.index(f.shift())),(await Promise.all([m[t](...f),o&&p.done]))[0]};return Id.set(e,l),l}FI(n=>({...n,get:(e,t,s)=>Qg(e,t)||n.get(e,t,s),has:(e,t)=>!!Qg(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(qI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function qI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ud="@firebase/app",Yg="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new yf("@firebase/app"),GI="@firebase/app-compat",KI="@firebase/analytics-compat",QI="@firebase/analytics",YI="@firebase/app-check-compat",JI="@firebase/app-check",XI="@firebase/auth",ZI="@firebase/auth-compat",eS="@firebase/database",tS="@firebase/data-connect",nS="@firebase/database-compat",rS="@firebase/functions",sS="@firebase/functions-compat",iS="@firebase/installations",oS="@firebase/installations-compat",aS="@firebase/messaging",lS="@firebase/messaging-compat",uS="@firebase/performance",cS="@firebase/performance-compat",hS="@firebase/remote-config",dS="@firebase/remote-config-compat",fS="@firebase/storage",pS="@firebase/storage-compat",mS="@firebase/firestore",gS="@firebase/ai",yS="@firebase/firestore-compat",vS="firebase",_S="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="[DEFAULT]",wS={[Ud]:"fire-core",[GI]:"fire-core-compat",[QI]:"fire-analytics",[KI]:"fire-analytics-compat",[JI]:"fire-app-check",[YI]:"fire-app-check-compat",[XI]:"fire-auth",[ZI]:"fire-auth-compat",[eS]:"fire-rtdb",[tS]:"fire-data-connect",[nS]:"fire-rtdb-compat",[rS]:"fire-fn",[sS]:"fire-fn-compat",[iS]:"fire-iid",[oS]:"fire-iid-compat",[aS]:"fire-fcm",[lS]:"fire-fcm-compat",[uS]:"fire-perf",[cS]:"fire-perf-compat",[hS]:"fire-rc",[dS]:"fire-rc-compat",[fS]:"fire-gcs",[pS]:"fire-gcs-compat",[mS]:"fire-fst",[yS]:"fire-fst-compat",[gS]:"fire-vertex","fire-js":"fire-js",[vS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Map,ES=new Map,Bd=new Map;function Jg(n,e){try{n.container.addComponent(e)}catch(t){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Fo(n){const e=n.name;if(Bd.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;Bd.set(e,n);for(const t of tc.values())Jg(t,n);for(const t of ES.values())Jg(t,n);return!0}function _f(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function dr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ws=new gl("app","Firebase",TS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=_S;function t_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:zd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Ws.create("bad-app-name",{appName:String(o)});if(t||(t=Qv()),!t)throw Ws.create("no-options");const l=tc.get(o);if(l){if(cs(t,l.options)&&cs(s,l.config))return l;throw Ws.create("duplicate-app",{appName:o})}const c=new PI(o);for(const p of Bd.values())c.addComponent(p);const f=new IS(t,s,c);return tc.set(o,f),f}function n_(n=zd){const e=tc.get(n);if(!e&&n===zd&&Qv())return t_();if(!e)throw Ws.create("no-app",{appName:n});return e}function Hs(n,e,t){let s=wS[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(c.join(" "));return}Fo(new ji(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS="firebase-heartbeat-database",CS=1,al="firebase-heartbeat-store";let Sd=null;function r_(){return Sd||(Sd=BI(SS,CS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ws.create("idb-open",{originalErrorMessage:n.message})})),Sd}async function kS(n){try{const t=(await r_()).transaction(al),s=await t.objectStore(al).get(s_(n));return await t.done,s}catch(e){if(e instanceof ms)hs.warn(e.message);else{const t=Ws.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hs.warn(t.message)}}}async function Xg(n,e){try{const s=(await r_()).transaction(al,"readwrite");await s.objectStore(al).put(e,s_(n)),await s.done}catch(t){if(t instanceof ms)hs.warn(t.message);else{const s=Ws.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hs.warn(s.message)}}}function s_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=1024,AS=30;class PS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new NS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Zg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>AS){const c=bS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){hs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zg(),{heartbeatsToSend:s,unsentEntries:o}=xS(this._heartbeatsCache.heartbeats),l=ec(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return hs.warn(t),""}}}function Zg(){return new Date().toISOString().substring(0,10)}function xS(n,e=RS){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),ey(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ey(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class NS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yI()?vI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await kS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Xg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ey(n){return ec(JSON.stringify({version:2,heartbeats:n})).length}function bS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(n){Fo(new ji("platform-logger",e=>new HI(e),"PRIVATE")),Fo(new ji("heartbeat",e=>new PS(e),"PRIVATE")),Hs(Ud,Yg,n),Hs(Ud,Yg,"esm2020"),Hs("fire-js","")}DS("");function i_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VS=i_,o_=new gl("auth","Firebase",i_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new yf("@firebase/auth");function OS(n,...e){nc.logLevel<=Ye.WARN&&nc.warn(`Auth (${Jo}): ${n}`,...e)}function $u(n,...e){nc.logLevel<=Ye.ERROR&&nc.error(`Auth (${Jo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Br(n,...e){throw Ef(n,...e)}function pr(n,...e){return Ef(n,...e)}function wf(n,e,t){const s={...VS(),[e]:t};return new gl("auth","Firebase",s).create(e,{appName:n.name})}function Li(n){return wf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LS(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Br(n,"argument-error"),wf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ef(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return o_.create(n,...e)}function je(n,e,...t){if(!n)throw Ef(e,...t)}function ls(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $u(e),new Error(e)}function ds(n,e){n||ls(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function MS(){return ty()==="http:"||ty()==="https:"}function ty(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(MS()||fI()||"connection"in navigator)?navigator.onLine:!0}function FS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(e,t){this.shortDelay=e,this.longDelay=t,ds(t>e,"Short delay should be less than long delay!"),this.isMobile=cI()||pI()}get(){return jS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n,e){ds(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ls("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ls("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ls("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BS=new vl(3e4,6e4);function If(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Xo(n,e,t,s,o={}){return l_(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=yl({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:p,...l};return dI()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&Yo(n.emulatorConfig.host)&&(m.credentials="include"),a_.fetch()(await u_(n,n.config.apiHost,t,f),m)})}async function l_(n,e,t){n._canInitEmulator=!1;const s={...US,...e};try{const o=new WS(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ou(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,m]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ou(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Ou(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Ou(n,"user-disabled",c);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw wf(n,_,m);Br(n,_)}}catch(o){if(o instanceof ms)throw o;Br(n,"network-request-failed",{message:String(o)})}}async function $S(n,e,t,s,o={}){const l=await Xo(n,e,t,s,o);return"mfaPendingCredential"in l&&Br(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function u_(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?Tf(n.config,o):`${n.config.apiScheme}://${o}`;return zS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class WS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(pr(this.auth,"network-request-failed")),BS.get())})}}function Ou(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=pr(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(n,e){return Xo(n,"POST","/v1/accounts:delete",e)}async function rc(n,e){return Xo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qS(n,e=!1){const t=Zt(n),s=await t.getIdToken(e),o=Sf(s);je(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:el(Cd(o.auth_time)),issuedAtTime:el(Cd(o.iat)),expirationTime:el(Cd(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Cd(n){return Number(n)*1e3}function Sf(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return $u("JWT malformed, contained fewer than 3 sections"),null;try{const o=Gv(t);return o?JSON.parse(o):($u("Failed to decode base64 JWT payload"),null)}catch(o){return $u("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function ny(n){const e=Sf(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ms&&GS(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function GS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=el(this.lastLoginAt),this.creationTime=el(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(n){var E;const e=n.auth,t=await n.getIdToken(),s=await ll(n,rc(e,{idToken:t}));je(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?c_(o.providerUserInfo):[],c=YS(n.providerData,l),f=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),m=f?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Wd(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(n,_)}async function QS(n){const e=Zt(n);await sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YS(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function c_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(n,e){const t=await l_(n,{},async()=>{const s=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await u_(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return n.emulatorConfig&&Yo(n.emulatorConfig.host)&&(p.credentials="include"),a_.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function XS(n,e){return Xo(n,"POST","/v2/accounts:revokeToken",If(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ny(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=ny(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await JS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new Do;return s&&(je(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(je(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(je(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class fr{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new KS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ll(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qS(this,e)}reload(){return QS(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new fr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await sc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(dr(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await ll(this,HS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,m=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:V,providerData:U,stsTokenManager:F}=t;je(E&&F,e,"internal-error");const O=Do.fromJSON(this.name,F);je(typeof E=="string",e,"internal-error"),Ls(s,e.name),Ls(o,e.name),je(typeof T=="boolean",e,"internal-error"),je(typeof V=="boolean",e,"internal-error"),Ls(l,e.name),Ls(c,e.name),Ls(f,e.name),Ls(p,e.name),Ls(m,e.name),Ls(_,e.name);const H=new fr({uid:E,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:V,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:O,createdAt:m,lastLoginAt:_});return U&&Array.isArray(U)&&(H.providerData=U.map(Y=>({...Y}))),p&&(H._redirectEventId=p),H}static async _fromIdTokenResponse(e,t,s=!1){const o=new Do;o.updateFromServerResponse(t);const l=new fr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await sc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];je(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?c_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Do;f.updateFromIdToken(s);const p=new fr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Wd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,m),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map;function us(n){ds(n instanceof Function,"Expected a class definition");let e=ry.get(n);return e?(ds(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ry.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}h_.type="NONE";const sy=h_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(n,e,t){return`firebase:${n}:${e}:${t}`}class Vo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Wu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Wu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rc(this.auth,{idToken:e}).catch(()=>{});return t?fr._fromGetAccountInfoResponse(this.auth,t,e):null}return fr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Vo(us(sy),e,s);const o=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let l=o[0]||us(sy);const c=Wu(s,e.config.apiKey,e.name);let f=null;for(const m of t)try{const _=await m._get(c);if(_){let E;if(typeof _=="string"){const T=await rc(e,{idToken:_}).catch(()=>{});if(!T)break;E=await fr._fromGetAccountInfoResponse(e,T,_)}else E=fr._fromJSON(e,_);m!==l&&(f=E),l=m;break}}catch{}const p=o.filter(m=>m._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Vo(l,e,s):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async m=>{if(m!==l)try{await m._remove(c)}catch{}})),new Vo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(m_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(d_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(y_(e))return"Blackberry";if(v_(e))return"Webos";if(f_(e))return"Safari";if((e.includes("chrome/")||p_(e))&&!e.includes("edge/"))return"Chrome";if(g_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function d_(n=_n()){return/firefox\//i.test(n)}function f_(n=_n()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function p_(n=_n()){return/crios\//i.test(n)}function m_(n=_n()){return/iemobile/i.test(n)}function g_(n=_n()){return/android/i.test(n)}function y_(n=_n()){return/blackberry/i.test(n)}function v_(n=_n()){return/webos/i.test(n)}function Cf(n=_n()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function ZS(n=_n()){var e;return Cf(n)&&!!((e=window.navigator)!=null&&e.standalone)}function eC(){return mI()&&document.documentMode===10}function __(n=_n()){return Cf(n)||g_(n)||v_(n)||y_(n)||/windows phone/i.test(n)||m_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w_(n,e=[]){let t;switch(n){case"Browser":t=iy(_n());break;case"Worker":t=`${iy(_n())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Jo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nC(n,e={}){return Xo(n,"GET","/v2/passwordPolicy",If(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=6;class sC{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??rC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new oy(this),this.idTokenSubscription=new oy(this),this.beforeStateQueue=new tC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=o_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=us(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rc(this,{idToken:e}),s=await fr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(dr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(dr(this.app))return Promise.reject(Li(this));const t=e?Zt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return dr(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return dr(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nC(this),t=new sC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await XS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&us(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[us(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=w_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(dr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&OS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function kc(n){return Zt(n)}class oy{constructor(e){this.auth=e,this.observer=null,this.addObserver=II(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oC(n){kf=n}function aC(n){return kf.loadJS(n)}function lC(){return kf.gapiScript}function uC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(n,e){const t=_f(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(cs(l,e??{}))return o;Br(o,"already-initialized")}return t.initialize({options:e})}function hC(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(us);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function dC(n,e,t){const s=kc(n);je(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=E_(e),{host:c,port:f}=fC(e),p=f===null?"":`:${f}`,m={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){je(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),je(cs(m,s.config.emulator)&&cs(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Yo(c)?(Jv(`${l}//${c}${p}`),Xv("Auth",!0)):pC()}function E_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fC(n){const e=E_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:ay(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:ay(c)}}}function ay(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function pC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ls("not implemented")}_getIdTokenResponse(e){return ls("not implemented")}_linkToIdToken(e,t){return ls("not implemented")}_getReauthenticationResolver(e){return ls("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(n,e){return $S(n,"POST","/v1/accounts:signInWithIdp",If(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="http://localhost";class Fi extends T_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Br("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Fi(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Oo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:mC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l extends Rf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends _l{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ms.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends _l{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fi._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return as.credential(t,s)}catch{return null}}}as.GOOGLE_SIGN_IN_METHOD="google.com";as.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends _l{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends _l{constructor(){super("twitter.com")}static credential(e,t){return Fi._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Fs.credential(t,s)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await fr._fromIdTokenResponse(e,s,o),c=ly(s);return new Uo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=ly(s);return new Uo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function ly(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends ms{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ic.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new ic(e,t,s,o)}}function I_(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ic._fromErrorAndOperation(n,l,e,s):l})}async function gC(n,e,t=!1){const s=await ll(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Uo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(n,e,t=!1){const{auth:s}=n;if(dr(s.app))return Promise.reject(Li(s));const o="reauthenticate";try{const l=await ll(n,I_(s,o,e,n),t);je(l.idToken,s,"internal-error");const c=Sf(l.idToken);je(c,s,"internal-error");const{sub:f}=c;return je(n.uid===f,s,"user-mismatch"),Uo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Br(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(n,e,t=!1){if(dr(n.app))return Promise.reject(Li(n));const s="signIn",o=await I_(n,s,e),l=await Uo._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}function _C(n,e,t,s){return Zt(n).onIdTokenChanged(e,t,s)}function wC(n,e,t){return Zt(n).beforeAuthStateChanged(e,t)}function EC(n,e,t,s){return Zt(n).onAuthStateChanged(e,t,s)}function TC(n){return Zt(n).signOut()}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=1e3,SC=10;class C_ extends S_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=__(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);eC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,SC):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},IC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}C_.type="LOCAL";const CC=C_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends S_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}k_.type="SESSION";const R_=k_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Rc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async m=>m(t.origin,l)),p=await kC(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const m=Af("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(){return window}function AC(n){Lr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(){return typeof Lr().WorkerGlobalScope<"u"&&typeof Lr().importScripts=="function"}async function PC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function xC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function NC(){return A_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_="firebaseLocalStorageDb",bC=1,ac="firebaseLocalStorage",x_="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ac(n,e){return n.transaction([ac],e?"readwrite":"readonly").objectStore(ac)}function DC(){const n=indexedDB.deleteDatabase(P_);return new wl(n).toPromise()}function Hd(){const n=indexedDB.open(P_,bC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(ac,{keyPath:x_})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(ac)?e(s):(s.close(),await DC(),e(await Hd()))})})}async function uy(n,e,t){const s=Ac(n,!0).put({[x_]:e,value:t});return new wl(s).toPromise()}async function VC(n,e){const t=Ac(n,!1).get(e),s=await new wl(t).toPromise();return s===void 0?null:s.value}function cy(n,e){const t=Ac(n,!0).delete(e);return new wl(t).toPromise()}const OC=800,LC=3;class N_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>LC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rc._getInstance(NC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await PC(),!this.activeServiceWorker)return;this.sender=new RC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||xC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hd();return await uy(e,oc,"1"),await cy(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>uy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>VC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Ac(o,!1).getAll();return new wl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),OC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}N_.type="LOCAL";const MC=N_;new vl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(n,e){return e?us(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends T_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jC(n){return vC(n.auth,new Pf(n),n.bypassAuthState)}function FC(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),yC(t,new Pf(n),n.bypassAuthState)}async function UC(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),gC(t,new Pf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jC;case"linkViaPopup":case"linkViaRedirect":return UC;case"reauthViaPopup":case"reauthViaRedirect":return FC;default:Br(this.auth,"internal-error")}}resolve(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ds(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new vl(2e3,1e4);async function BC(n,e,t){if(dr(n.app))return Promise.reject(pr(n,"operation-not-supported-in-this-environment"));const s=kc(n);LS(n,e,Rf);const o=b_(s,t);return new Vi(s,"signInViaPopup",e,o).executeNotNull()}class Vi extends D_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){ds(this.filter.length===1,"Popup operations only handle one event");const e=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(pr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(pr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zC.get())};e()}}Vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C="pendingRedirect",Hu=new Map;class WC extends D_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Hu.get(this.auth._key());if(!e){try{const s=await HC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Hu.set(this.auth._key(),e)}return this.bypassAuthState||Hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HC(n,e){const t=KC(e),s=GC(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function qC(n,e){Hu.set(n._key(),e)}function GC(n){return us(n._redirectPersistence)}function KC(n){return Wu($C,n.config.apiKey,n.name)}async function QC(n,e,t=!1){if(dr(n.app))return Promise.reject(Li(n));const s=kc(n),o=b_(s,e),c=await new WC(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=600*1e3;class JC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!V_(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(pr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YC&&this.cachedEventUids.clear(),this.cachedEventUids.has(hy(e))}saveEventToCache(e){this.cachedEventUids.add(hy(e)),this.lastProcessedEventTime=Date.now()}}function hy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function V_({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return V_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(n,e={}){return Xo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,t1=/^https?/;async function n1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await ZC(n);for(const t of e)try{if(r1(t))return}catch{}Br(n,"unauthorized-domain")}function r1(n){const e=$d(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!t1.test(t))return!1;if(e1.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=new vl(3e4,6e4);function dy(){const n=Lr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function i1(n){return new Promise((e,t)=>{var o,l,c;function s(){dy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{dy(),t(pr(n,"network-request-failed"))},timeout:s1.get()})}if((l=(o=Lr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Lr().gapi)!=null&&c.load)s();else{const f=uC("iframefcb");return Lr()[f]=()=>{gapi.load?s():t(pr(n,"network-request-failed"))},aC(`${lC()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw qu=null,e})}let qu=null;function o1(n){return qu=qu||i1(n),qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=new vl(5e3,15e3),l1="__/auth/iframe",u1="emulator/auth/iframe",c1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},h1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function d1(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tf(e,u1):`https://${n.config.authDomain}/${l1}`,s={apiKey:e.apiKey,appName:n.name,v:Jo},o=h1.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${yl(s).slice(1)}`}async function f1(n){const e=await o1(n),t=Lr().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:d1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:c1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=pr(n,"network-request-failed"),f=Lr().setTimeout(()=>{l(c)},a1.get());function p(){Lr().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},m1=500,g1=600,y1="_blank",v1="http://localhost";class fy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _1(n,e,t,s=m1,o=g1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p={...p1,width:s.toString(),height:o.toString(),top:l,left:c},m=_n().toLowerCase();t&&(f=p_(m)?y1:t),d_(m)&&(e=e||v1,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[V,U])=>`${T}${V}=${U},`,"");if(ZS(m)&&f!=="_self")return w1(e||"",f),new fy(null);const E=window.open(e||"",f,_);je(E,n,"popup-blocked");try{E.focus()}catch{}return new fy(E)}function w1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E1="__/auth/handler",T1="emulator/auth/handler",I1=encodeURIComponent("fac");async function py(n,e,t,s,o,l){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Jo,eventId:o};if(e instanceof Rf){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",TI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof _l){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await n._getAppCheckToken(),m=p?`#${I1}=${encodeURIComponent(p)}`:"";return`${S1(n)}?${yl(f).slice(1)}${m}`}function S1({config:n}){return n.emulator?Tf(n,T1):`https://${n.authDomain}/${E1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="webStorageSupport";class C1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R_,this._completeRedirectFn=QC,this._overrideRedirectResult=qC}async _openPopup(e,t,s,o){var c;ds((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await py(e,t,s,$d(),o);return _1(e,l,Af())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await py(e,t,s,$d(),o);return AC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(ds(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await f1(e),s=new JC(e);return t.register("authEvent",o=>(je(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kd,{type:kd},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[kd];l!==void 0&&t(!!l),Br(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=n1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return __()||f_()||Cf()}}const k1=C1;var my="@firebase/auth",gy="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function P1(n){Fo(new ji("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:w_(n)},m=new iC(s,o,l,p);return hC(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Fo(new ji("auth-internal",e=>{const t=kc(e.getProvider("auth").getImmediate());return(s=>new R1(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Hs(my,gy,A1(n)),Hs(my,gy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x1=300,N1=Yv("authIdTokenMaxAge")||x1;let yy=null;const b1=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>N1)return;const o=t==null?void 0:t.token;yy!==o&&(yy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function D1(n=n_()){const e=_f(n,"auth");if(e.isInitialized())return e.getImmediate();const t=cC(n,{popupRedirectResolver:k1,persistence:[MC,CC,R_]}),s=Yv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=b1(l.toString());wC(t,c,()=>c(t.currentUser)),_C(t,f=>c(f))}}const o=Kv("auth");return o&&dC(t,`http://${o}`),t}function V1(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}oC({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=pr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",V1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});P1("Browser");var O1="firebase",L1="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hs(O1,L1,"app");var vy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qs,O_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,k){function A(){}A.prototype=k.prototype,x.F=k.prototype,x.prototype=new A,x.prototype.constructor=x,x.D=function(L,S,b){for(var P=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)P[Ie-2]=arguments[Ie];return k.prototype[S].apply(L,P)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,k,A){A||(A=0);const L=Array(16);if(typeof k=="string")for(var S=0;S<16;++S)L[S]=k.charCodeAt(A++)|k.charCodeAt(A++)<<8|k.charCodeAt(A++)<<16|k.charCodeAt(A++)<<24;else for(S=0;S<16;++S)L[S]=k[A++]|k[A++]<<8|k[A++]<<16|k[A++]<<24;k=x.g[0],A=x.g[1],S=x.g[2];let b=x.g[3],P;P=k+(b^A&(S^b))+L[0]+3614090360&4294967295,k=A+(P<<7&4294967295|P>>>25),P=b+(S^k&(A^S))+L[1]+3905402710&4294967295,b=k+(P<<12&4294967295|P>>>20),P=S+(A^b&(k^A))+L[2]+606105819&4294967295,S=b+(P<<17&4294967295|P>>>15),P=A+(k^S&(b^k))+L[3]+3250441966&4294967295,A=S+(P<<22&4294967295|P>>>10),P=k+(b^A&(S^b))+L[4]+4118548399&4294967295,k=A+(P<<7&4294967295|P>>>25),P=b+(S^k&(A^S))+L[5]+1200080426&4294967295,b=k+(P<<12&4294967295|P>>>20),P=S+(A^b&(k^A))+L[6]+2821735955&4294967295,S=b+(P<<17&4294967295|P>>>15),P=A+(k^S&(b^k))+L[7]+4249261313&4294967295,A=S+(P<<22&4294967295|P>>>10),P=k+(b^A&(S^b))+L[8]+1770035416&4294967295,k=A+(P<<7&4294967295|P>>>25),P=b+(S^k&(A^S))+L[9]+2336552879&4294967295,b=k+(P<<12&4294967295|P>>>20),P=S+(A^b&(k^A))+L[10]+4294925233&4294967295,S=b+(P<<17&4294967295|P>>>15),P=A+(k^S&(b^k))+L[11]+2304563134&4294967295,A=S+(P<<22&4294967295|P>>>10),P=k+(b^A&(S^b))+L[12]+1804603682&4294967295,k=A+(P<<7&4294967295|P>>>25),P=b+(S^k&(A^S))+L[13]+4254626195&4294967295,b=k+(P<<12&4294967295|P>>>20),P=S+(A^b&(k^A))+L[14]+2792965006&4294967295,S=b+(P<<17&4294967295|P>>>15),P=A+(k^S&(b^k))+L[15]+1236535329&4294967295,A=S+(P<<22&4294967295|P>>>10),P=k+(S^b&(A^S))+L[1]+4129170786&4294967295,k=A+(P<<5&4294967295|P>>>27),P=b+(A^S&(k^A))+L[6]+3225465664&4294967295,b=k+(P<<9&4294967295|P>>>23),P=S+(k^A&(b^k))+L[11]+643717713&4294967295,S=b+(P<<14&4294967295|P>>>18),P=A+(b^k&(S^b))+L[0]+3921069994&4294967295,A=S+(P<<20&4294967295|P>>>12),P=k+(S^b&(A^S))+L[5]+3593408605&4294967295,k=A+(P<<5&4294967295|P>>>27),P=b+(A^S&(k^A))+L[10]+38016083&4294967295,b=k+(P<<9&4294967295|P>>>23),P=S+(k^A&(b^k))+L[15]+3634488961&4294967295,S=b+(P<<14&4294967295|P>>>18),P=A+(b^k&(S^b))+L[4]+3889429448&4294967295,A=S+(P<<20&4294967295|P>>>12),P=k+(S^b&(A^S))+L[9]+568446438&4294967295,k=A+(P<<5&4294967295|P>>>27),P=b+(A^S&(k^A))+L[14]+3275163606&4294967295,b=k+(P<<9&4294967295|P>>>23),P=S+(k^A&(b^k))+L[3]+4107603335&4294967295,S=b+(P<<14&4294967295|P>>>18),P=A+(b^k&(S^b))+L[8]+1163531501&4294967295,A=S+(P<<20&4294967295|P>>>12),P=k+(S^b&(A^S))+L[13]+2850285829&4294967295,k=A+(P<<5&4294967295|P>>>27),P=b+(A^S&(k^A))+L[2]+4243563512&4294967295,b=k+(P<<9&4294967295|P>>>23),P=S+(k^A&(b^k))+L[7]+1735328473&4294967295,S=b+(P<<14&4294967295|P>>>18),P=A+(b^k&(S^b))+L[12]+2368359562&4294967295,A=S+(P<<20&4294967295|P>>>12),P=k+(A^S^b)+L[5]+4294588738&4294967295,k=A+(P<<4&4294967295|P>>>28),P=b+(k^A^S)+L[8]+2272392833&4294967295,b=k+(P<<11&4294967295|P>>>21),P=S+(b^k^A)+L[11]+1839030562&4294967295,S=b+(P<<16&4294967295|P>>>16),P=A+(S^b^k)+L[14]+4259657740&4294967295,A=S+(P<<23&4294967295|P>>>9),P=k+(A^S^b)+L[1]+2763975236&4294967295,k=A+(P<<4&4294967295|P>>>28),P=b+(k^A^S)+L[4]+1272893353&4294967295,b=k+(P<<11&4294967295|P>>>21),P=S+(b^k^A)+L[7]+4139469664&4294967295,S=b+(P<<16&4294967295|P>>>16),P=A+(S^b^k)+L[10]+3200236656&4294967295,A=S+(P<<23&4294967295|P>>>9),P=k+(A^S^b)+L[13]+681279174&4294967295,k=A+(P<<4&4294967295|P>>>28),P=b+(k^A^S)+L[0]+3936430074&4294967295,b=k+(P<<11&4294967295|P>>>21),P=S+(b^k^A)+L[3]+3572445317&4294967295,S=b+(P<<16&4294967295|P>>>16),P=A+(S^b^k)+L[6]+76029189&4294967295,A=S+(P<<23&4294967295|P>>>9),P=k+(A^S^b)+L[9]+3654602809&4294967295,k=A+(P<<4&4294967295|P>>>28),P=b+(k^A^S)+L[12]+3873151461&4294967295,b=k+(P<<11&4294967295|P>>>21),P=S+(b^k^A)+L[15]+530742520&4294967295,S=b+(P<<16&4294967295|P>>>16),P=A+(S^b^k)+L[2]+3299628645&4294967295,A=S+(P<<23&4294967295|P>>>9),P=k+(S^(A|~b))+L[0]+4096336452&4294967295,k=A+(P<<6&4294967295|P>>>26),P=b+(A^(k|~S))+L[7]+1126891415&4294967295,b=k+(P<<10&4294967295|P>>>22),P=S+(k^(b|~A))+L[14]+2878612391&4294967295,S=b+(P<<15&4294967295|P>>>17),P=A+(b^(S|~k))+L[5]+4237533241&4294967295,A=S+(P<<21&4294967295|P>>>11),P=k+(S^(A|~b))+L[12]+1700485571&4294967295,k=A+(P<<6&4294967295|P>>>26),P=b+(A^(k|~S))+L[3]+2399980690&4294967295,b=k+(P<<10&4294967295|P>>>22),P=S+(k^(b|~A))+L[10]+4293915773&4294967295,S=b+(P<<15&4294967295|P>>>17),P=A+(b^(S|~k))+L[1]+2240044497&4294967295,A=S+(P<<21&4294967295|P>>>11),P=k+(S^(A|~b))+L[8]+1873313359&4294967295,k=A+(P<<6&4294967295|P>>>26),P=b+(A^(k|~S))+L[15]+4264355552&4294967295,b=k+(P<<10&4294967295|P>>>22),P=S+(k^(b|~A))+L[6]+2734768916&4294967295,S=b+(P<<15&4294967295|P>>>17),P=A+(b^(S|~k))+L[13]+1309151649&4294967295,A=S+(P<<21&4294967295|P>>>11),P=k+(S^(A|~b))+L[4]+4149444226&4294967295,k=A+(P<<6&4294967295|P>>>26),P=b+(A^(k|~S))+L[11]+3174756917&4294967295,b=k+(P<<10&4294967295|P>>>22),P=S+(k^(b|~A))+L[2]+718787259&4294967295,S=b+(P<<15&4294967295|P>>>17),P=A+(b^(S|~k))+L[9]+3951481745&4294967295,x.g[0]=x.g[0]+k&4294967295,x.g[1]=x.g[1]+(S+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+S&4294967295,x.g[3]=x.g[3]+b&4294967295}s.prototype.v=function(x,k){k===void 0&&(k=x.length);const A=k-this.blockSize,L=this.C;let S=this.h,b=0;for(;b<k;){if(S==0)for(;b<=A;)o(this,x,b),b+=this.blockSize;if(typeof x=="string"){for(;b<k;)if(L[S++]=x.charCodeAt(b++),S==this.blockSize){o(this,L),S=0;break}}else for(;b<k;)if(L[S++]=x[b++],S==this.blockSize){o(this,L),S=0;break}}this.h=S,this.o+=k},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var k=1;k<x.length-8;++k)x[k]=0;k=this.o*8;for(var A=x.length-8;A<x.length;++A)x[A]=k&255,k/=256;for(this.v(x),x=Array(16),k=0,A=0;A<4;++A)for(let L=0;L<32;L+=8)x[k++]=this.g[A]>>>L&255;return x};function l(x,k){var A=f;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=k(x)}function c(x,k){this.h=k;const A=[];let L=!0;for(let S=x.length-1;S>=0;S--){const b=x[S]|0;L&&b==k||(A[S]=b,L=!1)}this.g=A}var f={};function p(x){return-128<=x&&x<128?l(x,function(k){return new c([k|0],k<0?-1:0)}):new c([x|0],x<0?-1:0)}function m(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return O(m(-x));const k=[];let A=1;for(let L=0;x>=A;L++)k[L]=x/A|0,A*=4294967296;return new c(k,0)}function _(x,k){if(x.length==0)throw Error("number format error: empty string");if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(x.charAt(0)=="-")return O(_(x.substring(1),k));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=m(Math.pow(k,8));let L=E;for(let b=0;b<x.length;b+=8){var S=Math.min(8,x.length-b);const P=parseInt(x.substring(b,b+S),k);S<8?(S=m(Math.pow(k,S)),L=L.j(S).add(m(P))):(L=L.j(A),L=L.add(m(P)))}return L}var E=p(0),T=p(1),V=p(16777216);n=c.prototype,n.m=function(){if(F(this))return-O(this).m();let x=0,k=1;for(let A=0;A<this.g.length;A++){const L=this.i(A);x+=(L>=0?L:4294967296+L)*k,k*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(U(this))return"0";if(F(this))return"-"+O(this).toString(x);const k=m(Math.pow(x,6));var A=this;let L="";for(;;){const S=ue(A,k).g;A=H(A,S.j(k));let b=((A.g.length>0?A.g[0]:A.h)>>>0).toString(x);if(A=S,U(A))return b+L;for(;b.length<6;)b="0"+b;L=b+L}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function U(x){if(x.h!=0)return!1;for(let k=0;k<x.g.length;k++)if(x.g[k]!=0)return!1;return!0}function F(x){return x.h==-1}n.l=function(x){return x=H(this,x),F(x)?-1:U(x)?0:1};function O(x){const k=x.g.length,A=[];for(let L=0;L<k;L++)A[L]=~x.g[L];return new c(A,~x.h).add(T)}n.abs=function(){return F(this)?O(this):this},n.add=function(x){const k=Math.max(this.g.length,x.g.length),A=[];let L=0;for(let S=0;S<=k;S++){let b=L+(this.i(S)&65535)+(x.i(S)&65535),P=(b>>>16)+(this.i(S)>>>16)+(x.i(S)>>>16);L=P>>>16,b&=65535,P&=65535,A[S]=P<<16|b}return new c(A,A[A.length-1]&-2147483648?-1:0)};function H(x,k){return x.add(O(k))}n.j=function(x){if(U(this)||U(x))return E;if(F(this))return F(x)?O(this).j(O(x)):O(O(this).j(x));if(F(x))return O(this.j(O(x)));if(this.l(V)<0&&x.l(V)<0)return m(this.m()*x.m());const k=this.g.length+x.g.length,A=[];for(var L=0;L<2*k;L++)A[L]=0;for(L=0;L<this.g.length;L++)for(let S=0;S<x.g.length;S++){const b=this.i(L)>>>16,P=this.i(L)&65535,Ie=x.i(S)>>>16,Le=x.i(S)&65535;A[2*L+2*S]+=P*Le,Y(A,2*L+2*S),A[2*L+2*S+1]+=b*Le,Y(A,2*L+2*S+1),A[2*L+2*S+1]+=P*Ie,Y(A,2*L+2*S+1),A[2*L+2*S+2]+=b*Ie,Y(A,2*L+2*S+2)}for(x=0;x<k;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=k;x<2*k;x++)A[x]=0;return new c(A,0)};function Y(x,k){for(;(x[k]&65535)!=x[k];)x[k+1]+=x[k]>>>16,x[k]&=65535,k++}function ee(x,k){this.g=x,this.h=k}function ue(x,k){if(U(k))throw Error("division by zero");if(U(x))return new ee(E,E);if(F(x))return k=ue(O(x),k),new ee(O(k.g),O(k.h));if(F(k))return k=ue(x,O(k)),new ee(O(k.g),k.h);if(x.g.length>30){if(F(x)||F(k))throw Error("slowDivide_ only works with positive integers.");for(var A=T,L=k;L.l(x)<=0;)A=re(A),L=re(L);var S=se(A,1),b=se(L,1);for(L=se(L,2),A=se(A,2);!U(L);){var P=b.add(L);P.l(x)<=0&&(S=S.add(A),b=P),L=se(L,1),A=se(A,1)}return k=H(x,S.j(k)),new ee(S,k)}for(S=E;x.l(k)>=0;){for(A=Math.max(1,Math.floor(x.m()/k.m())),L=Math.ceil(Math.log(A)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),b=m(A),P=b.j(k);F(P)||P.l(x)>0;)A-=L,b=m(A),P=b.j(k);U(b)&&(b=T),S=S.add(b),x=H(x,P)}return new ee(S,x)}n.B=function(x){return ue(this,x).h},n.and=function(x){const k=Math.max(this.g.length,x.g.length),A=[];for(let L=0;L<k;L++)A[L]=this.i(L)&x.i(L);return new c(A,this.h&x.h)},n.or=function(x){const k=Math.max(this.g.length,x.g.length),A=[];for(let L=0;L<k;L++)A[L]=this.i(L)|x.i(L);return new c(A,this.h|x.h)},n.xor=function(x){const k=Math.max(this.g.length,x.g.length),A=[];for(let L=0;L<k;L++)A[L]=this.i(L)^x.i(L);return new c(A,this.h^x.h)};function re(x){const k=x.g.length+1,A=[];for(let L=0;L<k;L++)A[L]=x.i(L)<<1|x.i(L-1)>>>31;return new c(A,x.h)}function se(x,k){const A=k>>5;k%=32;const L=x.g.length-A,S=[];for(let b=0;b<L;b++)S[b]=k>0?x.i(b+A)>>>k|x.i(b+A+1)<<32-k:x.i(b+A);return new c(S,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,O_=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=_,qs=c}).apply(typeof vy<"u"?vy:typeof self<"u"?self:typeof window<"u"?window:{});var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L_,Ka,M_,Gu,qd,j_,F_,U_;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lu=="object"&&Lu];for(var y=0;y<u.length;++y){var v=u[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(u,y){if(y)e:{var v=s;u=u.split(".");for(var C=0;C<u.length-1;C++){var B=u[C];if(!(B in v))break e;v=v[B]}u=u[u.length-1],C=v[u],y=y(C),y!=C&&y!=null&&e(v,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var v=[],C;for(C in y)Object.prototype.hasOwnProperty.call(y,C)&&v.push([C,y[C]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function p(u,y,v){return u.call.apply(u.bind,arguments)}function m(u,y,v){return m=p,m.apply(null,arguments)}function _(u,y){var v=Array.prototype.slice.call(arguments,1);return function(){var C=v.slice();return C.push.apply(C,arguments),u.apply(this,C)}}function E(u,y){function v(){}v.prototype=y.prototype,u.Z=y.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(C,B,G){for(var me=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)me[ze-2]=arguments[ze];return y.prototype[B].apply(C,me)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function V(u){const y=u.length;if(y>0){const v=Array(y);for(let C=0;C<y;C++)v[C]=u[C];return v}return[]}function U(u,y){for(let C=1;C<arguments.length;C++){const B=arguments[C];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=u.length||0;const G=B.length||0;u.length=v+G;for(let me=0;me<G;me++)u[v+me]=B[me]}else u.push(B)}}class F{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function O(u){c.setTimeout(()=>{throw u},0)}function H(){var u=x;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class Y{constructor(){this.h=this.g=null}add(y,v){const C=ee.get();C.set(y,v),this.h?this.h.next=C:this.g=C,this.h=C}}var ee=new F(()=>new ue,u=>u.reset());class ue{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let re,se=!1,x=new Y,k=()=>{const u=Promise.resolve(void 0);re=()=>{u.then(A)}};function A(){for(var u;u=H();){try{u.h.call(u.g)}catch(v){O(v)}var y=ee;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}se=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function S(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}S.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return u})();function P(u){return/^[\s\xa0]*$/.test(u)}function Ie(u,y){S.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}E(Ie,S),Ie.prototype.init=function(u,y){const v=this.type=u.type,C=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(v=="mouseover"?y=u.fromElement:v=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Le="closure_listenable_"+(Math.random()*1e6|0),et=0;function ye(u,y,v,C,B){this.listener=u,this.proxy=null,this.src=y,this.type=v,this.capture=!!C,this.ha=B,this.key=++et,this.da=this.fa=!1}function ne(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function J(u,y,v){for(const C in u)y.call(v,u[C],C,u)}function X(u,y){for(const v in u)y.call(void 0,u[v],v,u)}function D(u){const y={};for(const v in u)y[v]=u[v];return y}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ke(u,y){let v,C;for(let B=1;B<arguments.length;B++){C=arguments[B];for(v in C)u[v]=C[v];for(let G=0;G<K.length;G++)v=K[G],Object.prototype.hasOwnProperty.call(C,v)&&(u[v]=C[v])}}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,y,v,C,B){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const me=$e(u,y,C,B);return me>-1?(y=u[me],v||(y.fa=!1)):(y=new ye(y,this.src,G,!!C,B),y.fa=v,u.push(y)),y};function Ue(u,y){const v=y.type;if(v in u.g){var C=u.g[v],B=Array.prototype.indexOf.call(C,y,void 0),G;(G=B>=0)&&Array.prototype.splice.call(C,B,1),G&&(ne(y),u.g[v].length==0&&(delete u.g[v],u.h--))}}function $e(u,y,v,C){for(let B=0;B<u.length;++B){const G=u[B];if(!G.da&&G.listener==y&&G.capture==!!v&&G.ha==C)return B}return-1}var We="closure_lm_"+(Math.random()*1e6|0),He={};function Qe(u,y,v,C,B){if(Array.isArray(y)){for(let G=0;G<y.length;G++)Qe(u,y[G],v,C,B);return null}return v=de(v),u&&u[Le]?u.J(y,v,f(C)?!!C.capture:!1,B):Tt(u,y,v,!1,C,B)}function Tt(u,y,v,C,B,G){if(!y)throw Error("Invalid event type");const me=f(B)?!!B.capture:!!B;let ze=ce(u);if(ze||(u[We]=ze=new xe(u)),v=ze.add(y,v,C,me,G),v.proxy)return v;if(C=Hn(),v.proxy=C,C.src=u,C.listener=v,u.addEventListener)b||(B=me),B===void 0&&(B=!1),u.addEventListener(y.toString(),C,B);else if(u.attachEvent)u.attachEvent(ae(y.toString()),C);else if(u.addListener&&u.removeListener)u.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Hn(){function u(v){return y.call(u.src,u.listener,v)}const y=W;return u}function nr(u,y,v,C,B){if(Array.isArray(y))for(var G=0;G<y.length;G++)nr(u,y[G],v,C,B);else C=f(C)?!!C.capture:!!C,v=de(v),u&&u[Le]?(u=u.i,G=String(y).toString(),G in u.g&&(y=u.g[G],v=$e(y,v,C,B),v>-1&&(ne(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete u.g[G],u.h--)))):u&&(u=ce(u))&&(y=u.g[y.toString()],u=-1,y&&(u=$e(y,v,C,B)),(v=u>-1?y[u]:null)&&Ht(v))}function Ht(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[Le])Ue(y.i,u);else{var v=u.type,C=u.proxy;y.removeEventListener?y.removeEventListener(v,C,u.capture):y.detachEvent?y.detachEvent(ae(v),C):y.addListener&&y.removeListener&&y.removeListener(C),(v=ce(y))?(Ue(v,u),v.h==0&&(v.src=null,y[We]=null)):ne(u)}}}function ae(u){return u in He?He[u]:He[u]="on"+u}function W(u,y){if(u.da)u=!0;else{y=new Ie(y,this);const v=u.listener,C=u.ha||u.src;u.fa&&Ht(u),u=v.call(C,y)}return u}function ce(u){return u=u[We],u instanceof xe?u:null}var ve="__closure_events_fn_"+(Math.random()*1e9>>>0);function de(u){return typeof u=="function"?u:(u[ve]||(u[ve]=function(y){return u.handleEvent(y)}),u[ve])}function ge(){L.call(this),this.i=new xe(this),this.M=this,this.G=null}E(ge,L),ge.prototype[Le]=!0,ge.prototype.removeEventListener=function(u,y,v,C){nr(this,u,y,v,C)};function Pe(u,y){var v,C=u.G;if(C)for(v=[];C;C=C.G)v.push(C);if(u=u.M,C=y.type||y,typeof y=="string")y=new S(y,u);else if(y instanceof S)y.target=y.target||u;else{var B=y;y=new S(C,u),ke(y,B)}B=!0;let G,me;if(v)for(me=v.length-1;me>=0;me--)G=y.g=v[me],B=It(G,C,!0,y)&&B;if(G=y.g=u,B=It(G,C,!0,y)&&B,B=It(G,C,!1,y)&&B,v)for(me=0;me<v.length;me++)G=y.g=v[me],B=It(G,C,!1,y)&&B}ge.prototype.N=function(){if(ge.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const v=u.g[y];for(let C=0;C<v.length;C++)ne(v[C]);delete u.g[y],u.h--}}this.G=null},ge.prototype.J=function(u,y,v,C){return this.i.add(String(u),y,!1,v,C)},ge.prototype.K=function(u,y,v,C){return this.i.add(String(u),y,!0,v,C)};function It(u,y,v,C){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let G=0;G<y.length;++G){const me=y[G];if(me&&!me.da&&me.capture==v){const ze=me.listener,Ot=me.ha||me.src;me.fa&&Ue(u.i,me),B=ze.call(Ot,C)!==!1&&B}}return B&&!C.defaultPrevented}function bt(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(u,y||0)}function Vn(u){u.g=bt(()=>{u.g=null,u.i&&(u.i=!1,Vn(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class In extends L{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Vn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function De(u){L.call(this),this.h=u,this.g={}}E(De,L);var gt=[];function qe(u){J(u.g,function(y,v){this.g.hasOwnProperty(v)&&Ht(y)},u),u.g={}}De.prototype.N=function(){De.Z.N.call(this),qe(this)},De.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=c.JSON.stringify,wn=c.JSON.parse,Sn=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function ct(){}function qn(){}var ln={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function St(){S.call(this,"d")}E(St,S);function ut(){S.call(this,"c")}E(ut,S);var un={},Wr=null;function rr(){return Wr=Wr||new ge}un.Ia="serverreachability";function Hr(u){S.call(this,un.Ia,u)}E(Hr,S);function Gn(u){const y=rr();Pe(y,new Hr(y))}un.STAT_EVENT="statevent";function Cn(u,y){S.call(this,un.STAT_EVENT,u),this.stat=y}E(Cn,S);function Ct(u){const y=rr();Pe(y,new Cn(y,u))}un.Ja="timingevent";function ii(u,y){S.call(this,un.Ja,u),this.size=y}E(ii,S);function yr(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},y)}function vr(){this.g=!0}vr.prototype.ua=function(){this.g=!1};function Q(u,y,v,C,B,G){u.info(function(){if(u.g)if(G){var me="",ze=G.split("&");for(let lt=0;lt<ze.length;lt++){var Ot=ze[lt].split("=");if(Ot.length>1){const jt=Ot[0];Ot=Ot[1];const Un=jt.split("_");me=Un.length>=2&&Un[1]=="type"?me+(jt+"="+Ot+"&"):me+(jt+"=redacted&")}}}else me=null;else me=G;return"XMLHTTP REQ ("+C+") [attempt "+B+"]: "+y+`
`+v+`
`+me})}function he(u,y,v,C,B,G,me){u.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+B+"]: "+y+`
`+v+`
`+G+" "+me})}function fe(u,y,v,C){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+at(u,v)+(C?" "+C:"")})}function Ve(u,y){u.info(function(){return"TIMEOUT: "+y})}vr.prototype.info=function(){};function at(u,y){if(!u.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var v=G[u];if(!(v.length<2)){var C=v[1];if(Array.isArray(C)&&!(C.length<1)){var B=C[0];if(B!="noop"&&B!="stop"&&B!="close")for(let me=1;me<C.length;me++)C[me]=""}}}}return At(G)}catch{return y}}var Ge={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ht={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ft;function rt(){}E(rt,ct),rt.prototype.g=function(){return new XMLHttpRequest},ft=new rt;function yt(u){return encodeURIComponent(String(u))}function kt(u){var y=1;u=u.split(":");const v=[];for(;y>0&&u.length;)v.push(u.shift()),y--;return u.length&&v.push(u.join(":")),v}function cn(u,y,v,C){this.j=u,this.i=y,this.l=v,this.S=C||1,this.V=new De(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Rl}function Rl(){this.i=null,this.g="",this.h=!1}var Al={},sa={};function sr(u,y,v){u.M=1,u.A=Gr(Kn(y)),u.u=v,u.R=!0,ia(u,null)}function ia(u,y){u.F=Date.now(),oi(u),u.B=Kn(u.A);var v=u.B,C=u.S;Array.isArray(C)||(C=[String(C)]),ma(v.i,"t",C),u.C=0,v=u.j.L,u.h=new Rl,u.g=jl(u.j,v?y:null,!u.u),u.P>0&&(u.O=new In(m(u.Y,u,u.g),u.P)),y=u.V,v=u.g,C=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(gt[0]=B.toString()),B=gt);for(let G=0;G<B.length;G++){const me=Qe(v,B[G],C||y.handleEvent,!1,y.h||y);if(!me)break;y.g[me.key]=me}y=u.J?D(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),Gn(),Q(u.i,u.v,u.B,u.l,u.S,u.u)}cn.prototype.ba=function(u){u=u.target;const y=this.O;y&&Cr(u)==3?y.j():this.Y(u)},cn.prototype.Y=function(u){try{if(u==this.g)e:{const ze=Cr(this.g),Ot=this.g.ya(),lt=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||Ll(this.g)))){this.K||ze!=4||Ot==7||(Ot==8||lt<=0?Gn(3):Gn(2)),Ki(this);var y=this.g.ca();this.X=y;var v=Pl(this);if(this.o=y==200,he(this.i,this.v,this.B,this.l,this.S,ze,y),this.o){if(this.U&&!this.L){t:{if(this.g){var C,B=this.g;if((C=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(C)){var G=C;break t}}G=null}if(u=G)fe(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vt(this,u);else{this.o=!1,this.m=3,Ct(12),qr(this),ai(this);break e}}if(this.R){u=!0;let jt;for(;!this.K&&this.C<v.length;)if(jt=Nl(this,v),jt==sa){ze==4&&(this.m=4,Ct(14),u=!1),fe(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Al){this.m=4,Ct(15),fe(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else fe(this.i,this.l,jt,null),vt(this,jt);if(xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||v.length!=0||this.h.h||(this.m=1,Ct(16),u=!1),this.o=this.o&&u,!u)fe(this.i,this.l,v,"[Invalid Chunked Response]"),qr(this),ai(this);else if(v.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),gi(me),me.P=!0,Ct(11))}}else fe(this.i,this.l,v,null),vt(this,v);ze==4&&qr(this),this.o&&!this.K&&(ze==4?so(this.j,this):(this.o=!1,oi(this)))}else ya(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ct(12)):(this.m=0,Ct(13)),qr(this),ai(this)}}}catch{}finally{}};function Pl(u){if(!xl(u))return u.g.la();const y=Ll(u.g);if(y==="")return"";let v="";const C=y.length,B=Cr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return qr(u),ai(u),"";u.h.i=new c.TextDecoder}for(let G=0;G<C;G++)u.h.h=!0,v+=u.h.i.decode(y[G],{stream:!(B&&G==C-1)});return y.length=0,u.h.g+=v,u.C=0,u.h.g}function xl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Nl(u,y){var v=u.C,C=y.indexOf(`
`,v);return C==-1?sa:(v=Number(y.substring(v,C)),isNaN(v)?Al:(C+=1,C+v>y.length?sa:(y=y.slice(C,C+v),u.C=C+v,y)))}cn.prototype.cancel=function(){this.K=!0,qr(this)};function oi(u){u.T=Date.now()+u.H,oa(u,u.H)}function oa(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=yr(m(u.aa,u),y)}function Ki(u){u.D&&(c.clearTimeout(u.D),u.D=null)}cn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ve(this.i,this.B),this.M!=2&&(Gn(),Ct(17)),qr(this),this.m=2,ai(this)):oa(this,this.T-u)};function ai(u){u.j.I==0||u.K||so(u.j,u)}function qr(u){Ki(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,qe(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function vt(u,y){try{var v=u.j;if(v.I!=0&&(v.g==u||la(v.h,u))){if(!u.L&&la(v.h,u)&&v.I==3){try{var C=v.Ba.g.parse(y)}catch{C=null}if(Array.isArray(C)&&C.length==3){var B=C;if(B[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)ro(v),jn(v);else break e;Ar(v),Ct(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=yr(m(v.Va,v),6e3));li(v.h)<=1&&v.ta&&(v.ta=void 0)}else Fn(v,11)}else if((u.L||v.g==u)&&ro(v),!P(y))for(B=v.Ba.g.parse(y),y=0;y<B.length;y++){let lt=B[y];const jt=lt[0];if(!(jt<=v.K))if(v.K=jt,lt=lt[1],v.I==2)if(lt[0]=="c"){v.M=lt[1],v.ba=lt[2];const Un=lt[3];Un!=null&&(v.ka=Un,v.j.info("VER="+v.ka));const Xr=lt[4];Xr!=null&&(v.za=Xr,v.j.info("SVER="+v.za));const Pr=lt[5];Pr!=null&&typeof Pr=="number"&&Pr>0&&(C=1.5*Pr,v.O=C,v.j.info("backChannelRequestTimeoutMs_="+C)),C=v;const xr=u.g;if(xr){const ao=xr.g?xr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ao){var G=C.h;G.g||ao.indexOf("spdy")==-1&&ao.indexOf("quic")==-1&&ao.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Yi(G,G.h),G.h=null))}if(C.G){const wa=xr.g?xr.g.getResponseHeader("X-HTTP-Session-Id"):null;wa&&(C.wa=wa,it(C.J,C.G,wa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),C=v;var me=u;if(C.na=_a(C,C.L?C.ba:null,C.W),me.L){ui(C.h,me);var ze=me,Ot=C.O;Ot&&(ze.H=Ot),ze.D&&(Ki(ze),oi(ze)),C.g=me}else hn(C);v.i.length>0&&Jr(v)}else lt[0]!="stop"&&lt[0]!="close"||Fn(v,7);else v.I==3&&(lt[0]=="stop"||lt[0]=="close"?lt[0]=="stop"?Fn(v,7):to(v):lt[0]!="noop"&&v.l&&v.l.qa(lt),v.A=0)}}Gn(4)}catch{}}var Hc=class{constructor(u,y){this.g=u,this.map=y}};function Qi(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function aa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function li(u){return u.h?1:u.g?u.g.size:0}function la(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Yi(u,y){u.g?u.g.add(y):u.h=y}function ui(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Qi.prototype.cancel=function(){if(this.i=On(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function On(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const v of u.g.values())y=y.concat(v.G);return y}return V(u.i)}var bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ln(u,y){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const C=u[v].indexOf("=");let B,G=null;C>=0?(B=u[v].substring(0,C),G=u[v].substring(C+1)):B=u[v],y(B,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function _r(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof _r?(this.l=u.l,ci(this,u.j),this.o=u.o,this.g=u.g,wr(this,u.u),this.h=u.h,gs(this,ga(u.i)),this.m=u.m):u&&(y=String(u).match(bl))?(this.l=!1,ci(this,y[1]||"",!0),this.o=hi(y[2]||""),this.g=hi(y[3]||"",!0),wr(this,y[4]),this.h=hi(y[5]||"",!0),gs(this,y[6]||"",!0),this.m=hi(y[7]||"")):(this.l=!1,this.i=new Ze(null,this.l))}_r.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(di(y,ca,!0),":");var v=this.g;return(v||y=="file")&&(u.push("//"),(y=this.o)&&u.push(di(y,ca,!0),"@"),u.push(yt(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(di(v,v.charAt(0)=="/"?fi:ha,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",di(v,da)),u.join("")},_r.prototype.resolve=function(u){const y=Kn(this);let v=!!u.j;v?ci(y,u.j):v=!!u.o,v?y.o=u.o:v=!!u.g,v?y.g=u.g:v=u.u!=null;var C=u.h;if(v)wr(y,u.u);else if(v=!!u.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var B=y.h.lastIndexOf("/");B!=-1&&(C=y.h.slice(0,B+1)+C)}if(B=C,B==".."||B==".")C="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){C=B.lastIndexOf("/",0)==0,B=B.split("/");const G=[];for(let me=0;me<B.length;){const ze=B[me++];ze=="."?C&&me==B.length&&G.push(""):ze==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),C&&me==B.length&&G.push("")):(G.push(ze),C=!0)}C=G.join("/")}else C=B}return v?y.h=C:v=u.i.toString()!=="",v?gs(y,ga(u.i)):v=!!u.m,v&&(y.m=u.m),y};function Kn(u){return new _r(u)}function ci(u,y,v){u.j=v?hi(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function wr(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function gs(u,y,v){y instanceof Ze?(u.i=y,Xi(u.i,u.l)):(v||(y=di(y,qc)),u.i=new Ze(y,u.l))}function it(u,y,v){u.i.set(y,v)}function Gr(u){return it(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function hi(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function di(u,y,v){return typeof u=="string"?(u=encodeURI(u).replace(y,ua),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ua(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ca=/[#\/\?@]/g,ha=/[#\?:]/g,fi=/[#\?]/g,qc=/[#\?@]/g,da=/#/g;function Ze(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Er(u){u.g||(u.g=new Map,u.h=0,u.i&&Ln(u.i,function(y,v){u.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=Ze.prototype,n.add=function(u,y){Er(this),this.i=null,u=Tr(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(y),this.h+=1,this};function fa(u,y){Er(u),y=Tr(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Ji(u,y){return Er(u),y=Tr(u,y),u.g.has(y)}n.forEach=function(u,y){Er(this),this.g.forEach(function(v,C){v.forEach(function(B){u.call(y,B,C,this)},this)},this)};function pa(u,y){Er(u);let v=[];if(typeof y=="string")Ji(u,y)&&(v=v.concat(u.g.get(Tr(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)v=v.concat(u[y]);return v}n.set=function(u,y){return Er(this),this.i=null,u=Tr(this,u),Ji(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},n.get=function(u,y){return u?(u=pa(this,u),u.length>0?String(u[0]):y):y};function ma(u,y,v){fa(u,y),v.length>0&&(u.i=null,u.g.set(Tr(u,y),V(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let C=0;C<y.length;C++){var v=y[C];const B=yt(v);v=pa(this,v);for(let G=0;G<v.length;G++){let me=B;v[G]!==""&&(me+="="+yt(v[G])),u.push(me)}}return this.i=u.join("&")};function ga(u){const y=new Ze;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function Tr(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Xi(u,y){y&&!u.j&&(Er(u),u.i=null,u.g.forEach(function(v,C){const B=C.toLowerCase();C!=B&&(fa(this,C),ma(this,B,v))},u)),u.j=y}function Ir(u,y){const v=new vr;if(c.Image){const C=new Image;C.onload=_(en,v,"TestLoadImage: loaded",!0,y,C),C.onerror=_(en,v,"TestLoadImage: error",!1,y,C),C.onabort=_(en,v,"TestLoadImage: abort",!1,y,C),C.ontimeout=_(en,v,"TestLoadImage: timeout",!1,y,C),c.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=u}else y(!1)}function Sr(u,y){const v=new vr,C=new AbortController,B=setTimeout(()=>{C.abort(),en(v,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:C.signal}).then(G=>{clearTimeout(B),G.ok?en(v,"TestPingServer: ok",!0,y):en(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),en(v,"TestPingServer: error",!1,y)})}function en(u,y,v,C,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),C(v)}catch{}}function pi(){this.g=new Sn}function Kr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Kr,ct),Kr.prototype.g=function(){return new Mn(this.i,this.h)};function Mn(u,y){ge.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Mn,ge),n=Mn.prototype,n.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,ir(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ys(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ir(this)),this.g&&(this.readyState=3,ir(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?ys(this):ir(this),this.readyState==3&&Dl(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,ys(this))},n.Na=function(u){this.g&&(this.response=u,ys(this))},n.ga=function(){this.g&&ys(this)};function ys(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ir(u)}n.setRequestHeader=function(u,y){this.A.append(u,y)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=y.next();return u.join(`\r
`)};function ir(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vl(u){let y="";return J(u,function(v,C){y+=C,y+=":",y+=v,y+=`\r
`}),y}function Zi(u,y,v){e:{for(C in v){var C=!1;break e}C=!0}C||(v=Vl(v),typeof u=="string"?v!=null&&yt(v):it(u,y,v))}function dt(u){ge.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(dt,ge);var Ol=/^https?$/i,Gc=["POST","PUT"];n=dt.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,y,v,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ft.g(),this.g.onreadystatechange=T(m(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(G){vs(this,G);return}if(u=v||"",v=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var B in C)v.set(B,C[B]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const G of C.keys())v.set(G,C.get(G));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),B=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(Gc,y,void 0)>=0)||C||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,me]of v)this.g.setRequestHeader(G,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){vs(this,G)}};function vs(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,_s(u),Yr(u)}function _s(u){u.A||(u.A=!0,Pe(u,"complete"),Pe(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Pe(this,"complete"),Pe(this,"abort"),Yr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yr(this,!0)),dt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Qr(this):this.Xa())},n.Xa=function(){Qr(this)};function Qr(u){if(u.h&&typeof l<"u"){if(u.v&&Cr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Pe(u,"readystatechange"),Cr(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var C;if(C=G===0){let me=String(u.D).match(bl)[1]||null;!me&&c.self&&c.self.location&&(me=c.self.location.protocol.slice(0,-1)),C=!Ol.test(me?me.toLowerCase():"")}v=C}if(v)Pe(u,"complete"),Pe(u,"success");else{u.o=6;try{var B=Cr(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",_s(u)}}finally{Yr(u)}}}}function Yr(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,y||Pe(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Cr(u){return u.g?u.g.readyState:0}n.ca=function(){try{return Cr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),wn(y)}};function Ll(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(u){const y={};u=(u.g&&Cr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<u.length;C++){if(P(u[C]))continue;var v=kt(u[C]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=y[B]||[];y[B]=G,G.push(v)}X(y,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function kr(u,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||y}function eo(u){this.za=0,this.i=[],this.j=new vr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=kr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=kr("baseRetryDelayMs",5e3,u),this.Za=kr("retryDelaySeedMs",1e4,u),this.Ta=kr("forwardChannelMaxRetries",2,u),this.va=kr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Qi(u&&u.concurrentRequestLimit),this.Ba=new pi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=eo.prototype,n.ka=8,n.I=1,n.connect=function(u,y,v,C){Ct(0),this.W=u,this.H=y||{},v&&C!==void 0&&(this.H.OSID=v,this.H.OAID=C),this.F=this.X,this.J=_a(this,null,this.W),Jr(this)};function to(u){if(no(u),u.I==3){var y=u.V++,v=Kn(u.J);if(it(v,"SID",u.M),it(v,"RID",y),it(v,"TYPE","terminate"),Rr(u,v),y=new cn(u,u.j,y),y.M=2,y.A=Gr(Kn(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=jl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),oi(y)}yi(u)}function jn(u){u.g&&(gi(u),u.g.cancel(),u.g=null)}function no(u){jn(u),u.v&&(c.clearTimeout(u.v),u.v=null),ro(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Jr(u){if(!aa(u.h)&&!u.m){u.m=!0;var y=u.Ea;re||k(),se||(re(),se=!0),x.add(y,u),u.D=0}}function Ml(u,y){return li(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=yr(m(u.Ea,u,y),io(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new cn(this,this.j,u);let G=this.o;if(this.U&&(G?(G=D(G),ke(G,this.U)):G=this.U),this.u!==null||this.R||(B.J=G,G=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var C=this.i[v];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(y+=C,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=va(this,B,y),v=Kn(this.J),it(v,"RID",u),it(v,"CVER",22),this.G&&it(v,"X-HTTP-Session-Id",this.G),Rr(this,v),G&&(this.R?y="headers="+yt(Vl(G))+"&"+y:this.u&&Zi(v,this.u,G)),Yi(this.h,B),this.Ra&&it(v,"TYPE","init"),this.S?(it(v,"$req",y),it(v,"SID","null"),B.U=!0,sr(B,v,null)):sr(B,v,y),this.I=2}}else this.I==3&&(u?mi(this,u):this.i.length==0||aa(this.h)||mi(this))};function mi(u,y){var v;y?v=y.l:v=u.V++;const C=Kn(u.J);it(C,"SID",u.M),it(C,"RID",v),it(C,"AID",u.K),Rr(u,C),u.u&&u.o&&Zi(C,u.u,u.o),v=new cn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),y&&(u.i=y.G.concat(u.i)),y=va(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Yi(u.h,v),sr(v,C,y)}function Rr(u,y){u.H&&J(u.H,function(v,C){it(y,C,v)}),u.l&&J({},function(v,C){it(y,C,v)})}function va(u,y,v){v=Math.min(u.i.length,v);const C=u.l?m(u.l.Ka,u.l,u):null;e:{var B=u.i;let ze=-1;for(;;){const Ot=["count="+v];ze==-1?v>0?(ze=B[0].g,Ot.push("ofs="+ze)):ze=0:Ot.push("ofs="+ze);let lt=!0;for(let jt=0;jt<v;jt++){var G=B[jt].g;const Un=B[jt].map;if(G-=ze,G<0)ze=Math.max(0,B[jt].g-100),lt=!1;else try{G="req"+G+"_"||"";try{var me=Un instanceof Map?Un:Object.entries(Un);for(const[Xr,Pr]of me){let xr=Pr;f(Pr)&&(xr=At(Pr)),Ot.push(G+Xr+"="+encodeURIComponent(xr))}}catch(Xr){throw Ot.push(G+"type="+encodeURIComponent("_badmap")),Xr}}catch{C&&C(Un)}}if(lt){me=Ot.join("&");break e}}me=void 0}return u=u.i.splice(0,v),y.G=u,me}function hn(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;re||k(),se||(re(),se=!0),x.add(y,u),u.A=0}}function Ar(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=yr(m(u.Da,u),io(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,ws(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=yr(m(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ct(10),jn(this),ws(this))};function gi(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function ws(u){u.g=new cn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=Kn(u.na);it(y,"RID","rpc"),it(y,"SID",u.M),it(y,"AID",u.K),it(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&it(y,"TO",u.ia),it(y,"TYPE","xmlhttp"),Rr(u,y),u.u&&u.o&&Zi(y,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Gr(Kn(y)),v.u=null,v.R=!0,ia(v,u)}n.Va=function(){this.C!=null&&(this.C=null,jn(this),Ar(this),Ct(19))};function ro(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function so(u,y){var v=null;if(u.g==y){ro(u),gi(u),u.g=null;var C=2}else if(la(u.h,y))v=y.G,ui(u.h,y),C=1;else return;if(u.I!=0){if(y.o)if(C==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var B=u.D;C=rr(),Pe(C,new ii(C,v)),Jr(u)}else hn(u);else if(B=y.m,B==3||B==0&&y.X>0||!(C==1&&Ml(u,y)||C==2&&Ar(u)))switch(v&&v.length>0&&(y=u.h,y.i=y.i.concat(v)),B){case 1:Fn(u,5);break;case 4:Fn(u,10);break;case 3:Fn(u,6);break;default:Fn(u,2)}}}function io(u,y){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*y}function Fn(u,y){if(u.j.info("Error code "+y),y==2){var v=m(u.bb,u),C=u.Ua;const B=!C;C=new _r(C||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ci(C,"https"),Gr(C),B?Ir(C.toString(),v):Sr(C.toString(),v)}else Ct(2);u.I=0,u.l&&u.l.pa(y),yi(u),no(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Ct(2)):(this.j.info("Failed to ping google.com"),Ct(1))};function yi(u){if(u.I=0,u.ja=[],u.l){const y=On(u.h);(y.length!=0||u.i.length!=0)&&(U(u.ja,y),U(u.ja,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.oa()}}function _a(u,y,v){var C=v instanceof _r?Kn(v):new _r(v);if(C.g!="")y&&(C.g=y+"."+C.g),wr(C,C.u);else{var B=c.location;C=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const G=new _r(null);C&&ci(G,C),y&&(G.g=y),B&&wr(G,B),v&&(G.h=v),C=G}return v=u.G,y=u.wa,v&&y&&it(C,v,y),it(C,"VER",u.ka),Rr(u,C),C}function jl(u,y,v){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new dt(new Kr({ab:v})):new dt(u.ma),y.Fa(u.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fl(){}n=Fl.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function oo(){}oo.prototype.g=function(u,y){return new tn(u,y)};function tn(u,y){ge.call(this),this.g=new eo(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!P(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!P(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Es(this)}E(tn,ge),tn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},tn.prototype.close=function(){to(this.g)},tn.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=At(u),u=v);y.i.push(new Hc(y.Ya++,u)),y.I==3&&Jr(y)},tn.prototype.N=function(){this.g.l=null,delete this.j,to(this.g),delete this.g,tn.Z.N.call(this)};function Ul(u){St.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const v in y){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}E(Ul,St);function zl(){ut.call(this),this.status=1}E(zl,ut);function Es(u){this.g=u}E(Es,Fl),Es.prototype.ra=function(){Pe(this.g,"a")},Es.prototype.qa=function(u){Pe(this.g,new Ul(u))},Es.prototype.pa=function(u){Pe(this.g,new zl)},Es.prototype.oa=function(){Pe(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,tn.prototype.send=tn.prototype.o,tn.prototype.open=tn.prototype.m,tn.prototype.close=tn.prototype.close,U_=function(){return new oo},F_=function(){return rr()},j_=un,qd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ge.NO_ERROR=0,Ge.TIMEOUT=8,Ge.HTTP_ERROR=6,Gu=Ge,ht.COMPLETE="complete",M_=ht,qn.EventType=ln,ln.OPEN="a",ln.CLOSE="b",ln.ERROR="c",ln.MESSAGE="d",ge.prototype.listen=ge.prototype.J,Ka=qn,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,L_=dt}).apply(typeof Lu<"u"?Lu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="12.9.0";function M1(n){Zo=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new yf("@firebase/firestore");function Po(){return Ui.logLevel}function Ee(n,...e){if(Ui.logLevel<=Ye.DEBUG){const t=e.map(xf);Ui.debug(`Firestore (${Zo}): ${n}`,...t)}}function fs(n,...e){if(Ui.logLevel<=Ye.ERROR){const t=e.map(xf);Ui.error(`Firestore (${Zo}): ${n}`,...t)}}function zi(n,...e){if(Ui.logLevel<=Ye.WARN){const t=e.map(xf);Ui.warn(`Firestore (${Zo}): ${n}`,...t)}}function xf(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oe(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,z_(n,s,t)}function z_(n,e,t){let s=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw fs(s),new Error(s)}function ot(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||z_(e,o,s)}function Be(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends ms{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class j1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(yn.UNAUTHENTICATED)))}shutdown(){}}class F1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class U1{constructor(e){this.t=e,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ot(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Gs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gs,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{Ee("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(Ee("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ee("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ot(typeof s.accessToken=="string",31837,{l:s}),new B_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ot(e===null||typeof e=="string",2055,{h:e}),new yn(e)}}class z1{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class B1{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new z1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _y{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,dr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ot(this.o===void 0,3512);const s=l=>{l.error!=null&&Ee("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ee("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{Ee("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Ee("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _y(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ot(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _y(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=W1(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Je(n,e){return n<e?-1:n>e?1:0}function Gd(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Rd(o)===Rd(l)?Je(o,l):Rd(o)?1:-1}return Je(n.length,e.length)}const H1=55296,q1=57343;function Rd(n){const e=n.charCodeAt(0);return e>=H1&&e<=q1}function zo(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="__name__";class Or{constructor(e,t,s){t===void 0?t=0:t>e.length&&Oe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Oe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Or.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Je(e.length,t.length)}static compareSegments(e,t){const s=Or.isNumericId(e),o=Or.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Or.extractNumericId(e).compare(Or.extractNumericId(t)):Gd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return qs.fromString(e.substring(4,e.length-2))}}class mt extends Or{construct(e,t,s){return new mt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new _e(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new mt(t)}static emptyPath(){return new mt([])}}const G1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends Or{construct(e,t,s){return new on(e,t,s)}static isValidIdentifier(e){return G1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wy}static keyField(){return new on([wy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new _e(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new _e(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new _e(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(s+=f,o++):(l(),o++)}if(l(),c)throw new _e(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(t)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(mt.fromString(e))}static fromName(e){return new Ae(mt.fromString(e).popFirst(5))}static empty(){return new Ae(mt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&mt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return mt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new mt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(n,e,t){if(!t)throw new _e(Z.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function K1(n,e,t,s){if(e===!0&&s===!0)throw new _e(Z.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ey(n){if(!Ae.isDocumentKey(n))throw new _e(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ty(n){if(Ae.isDocumentKey(n))throw new _e(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function W_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Pc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Oe(12329,{type:typeof n})}function Mr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pc(n);throw new _e(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Q1(n,e){if(e<=0)throw new _e(Z.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(n,e){const t={typeString:n};return e&&(t.value=e),t}function El(n,e){if(!W_(n))throw new _e(Z.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new _e(Z.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iy=-62135596800,Sy=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Sy);return new Et(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Iy)throw new _e(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Sy}_compareTo(e){return this.seconds===e.seconds?Je(this.nanoseconds,e.nanoseconds):Je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(El(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Iy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:$t("string",Et._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{static fromTimestamp(e){return new Fe(e)}static min(){return new Fe(new Et(0,0))}static max(){return new Fe(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=-1;function Y1(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Fe.fromTimestamp(s===1e9?new Et(t+1,0):new Et(t,s));return new Qs(o,Ae.empty(),e)}function J1(n){return new Qs(n.readTime,n.key,ul)}class Qs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Qs(Fe.min(),Ae.empty(),ul)}static max(){return new Qs(Fe.max(),Ae.empty(),ul)}}function X1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Je(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ek{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(n){if(n.code!==Z.FAILED_PRECONDITION||n.message!==Z1)throw n;Ee("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Oe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):te.reject(t)}static resolve(e){return new te(((t,s)=>{t(e)}))}static reject(e){return new te(((t,s)=>{s(e)}))}static waitFor(e){return new te(((t,s)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=te.resolve(!1);for(const s of e)t=t.next((o=>o?te.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new te(((s,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const m=p;t(e[m]).next((_=>{c[m]=_,++f,f===l&&s(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new te(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function tk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ta(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=-1;function Nc(n){return n==null}function lc(n){return n===0&&1/n==-1/0}function nk(n){return typeof n=="number"&&Number.isInteger(n)&&!lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_="";function rk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Cy(e)),e=sk(n.get(t),e);return Cy(e)}function sk(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case H_:t+="";break;default:t+=l}}return t}function Cy(n){return n+H_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ky(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ni(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function q_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,t){this.comparator=e,this.root=t||sn.EMPTY}insert(e,t){return new Nt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new Nt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}class Mu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??sn.RED,this.left=o??sn.EMPTY,this.right=l??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new sn(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Oe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Oe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Oe(27949);return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Oe(57766)}get value(){throw Oe(16141)}get color(){throw Oe(16727)}get left(){throw Oe(29726)}get right(){throw Oe(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new sn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.comparator=e,this.data=new Nt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ry(this.data.getIterator())}getIteratorFrom(e){return new Ry(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Kt(this.comparator);return t.data=e,t}}class Ry{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Wn([])}unionWith(e){let t=new Kt(on.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new G_("Invalid base64 string: "+l):l}})(e);return new an(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new an(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}an.EMPTY_BYTE_STRING=new an("");const ik=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ys(n){if(ot(!!n,39018),typeof n=="string"){let e=0;const t=ik.exec(n);if(ot(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Js(n){return typeof n=="string"?an.fromBase64String(n):an.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="server_timestamp",Q_="__type__",Y_="__previous_value__",J_="__local_write_time__";function Df(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Q_])==null?void 0:s.stringValue)===K_}function bc(n){const e=n.mapValue.fields[Y_];return Df(e)?bc(e):e}function cl(n){const e=Ys(n.mapValue.fields[J_].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t,s,o,l,c,f,p,m,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=m,this.isUsingEmulator=_,this.apiKey=E}}const uc="(default)";class hl{constructor(e,t){this.projectId=e,this.database=t||uc}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database===uc}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}function ak(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new _e(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="__type__",lk="__max__",ju={mapValue:{}},Z_="__vector__",cc="value";function Xs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Df(n)?4:ck(n)?9007199254740991:uk(n)?10:11:Oe(28295,{value:n})}function $r(n,e){if(n===e)return!0;const t=Xs(n);if(t!==Xs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cl(n).isEqual(cl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Ys(o.timestampValue),f=Ys(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Js(o.bytesValue).isEqual(Js(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Mt(o.geoPointValue.latitude)===Mt(l.geoPointValue.latitude)&&Mt(o.geoPointValue.longitude)===Mt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Mt(o.integerValue)===Mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Mt(o.doubleValue),f=Mt(l.doubleValue);return c===f?lc(c)===lc(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return zo(n.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(ky(c)!==ky(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!$r(c[p],f[p])))return!1;return!0})(n,e);default:return Oe(52216,{left:n})}}function dl(n,e){return(n.values||[]).find((t=>$r(t,e)))!==void 0}function Bo(n,e){if(n===e)return 0;const t=Xs(n),s=Xs(e);if(t!==s)return Je(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Je(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Mt(l.integerValue||l.doubleValue),p=Mt(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return Ay(n.timestampValue,e.timestampValue);case 4:return Ay(cl(n),cl(e));case 5:return Gd(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Js(l),p=Js(c);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),p=c.split("/");for(let m=0;m<f.length&&m<p.length;m++){const _=Je(f[m],p[m]);if(_!==0)return _}return Je(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Je(Mt(l.latitude),Mt(c.latitude));return f!==0?f:Je(Mt(l.longitude),Mt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Py(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var T,V,U,F;const f=l.fields||{},p=c.fields||{},m=(T=f[cc])==null?void 0:T.arrayValue,_=(V=p[cc])==null?void 0:V.arrayValue,E=Je(((U=m==null?void 0:m.values)==null?void 0:U.length)||0,((F=_==null?void 0:_.values)==null?void 0:F.length)||0);return E!==0?E:Py(m,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ju.mapValue&&c===ju.mapValue)return 0;if(l===ju.mapValue)return 1;if(c===ju.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),m=c.fields||{},_=Object.keys(m);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const T=Gd(p[E],_[E]);if(T!==0)return T;const V=Bo(f[p[E]],m[_[E]]);if(V!==0)return V}return Je(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Oe(23264,{he:t})}}function Ay(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Je(n,e);const t=Ys(n),s=Ys(e),o=Je(t.seconds,s.seconds);return o!==0?o:Je(t.nanos,s.nanos)}function Py(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Bo(t[o],s[o]);if(l)return l}return Je(t.length,s.length)}function $o(n){return Kd(n)}function Kd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Ys(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Js(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Kd(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Kd(t.fields[c])}`;return o+"}"})(n.mapValue):Oe(61005,{value:n})}function Ku(n){switch(Xs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bc(n);return e?16+Ku(e):16;case 5:return 2*n.stringValue.length;case 6:return Js(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Ku(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return ni(s.fields,((l,c)=>{o+=l.length+Ku(c)})),o})(n.mapValue);default:throw Oe(13486,{value:n})}}function xy(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qd(n){return!!n&&"integerValue"in n}function Vf(n){return!!n&&"arrayValue"in n}function Ny(n){return!!n&&"nullValue"in n}function by(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qu(n){return!!n&&"mapValue"in n}function uk(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[X_])==null?void 0:s.stringValue)===Z_}function tl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ni(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=tl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tl(n.arrayValue.values[t]);return e}return{...n}}function ck(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===lk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(t)}setAll(e){let t=on.emptyPath(),s={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}c?s[f.lastSegment()]=tl(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Qu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ni(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Dn(tl(this.value))}}function ew(n){const e=[];return ni(n.fields,((t,s)=>{const o=new on([t]);if(Qu(s)){const l=ew(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,t,s,o,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new vn(e,0,Fe.min(),Fe.min(),Fe.min(),Dn.empty(),0)}static newFoundDocument(e,t,s,o){return new vn(e,1,t,Fe.min(),s,o,0)}static newNoDocument(e,t){return new vn(e,2,t,Fe.min(),Fe.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new vn(e,3,t,Fe.min(),Fe.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t){this.position=e,this.inclusive=t}}function Dy(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=Ae.comparator(Ae.fromName(c.referenceValue),t.key):s=Bo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Vy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$r(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t="asc"){this.field=e,this.dir=t}}function hk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{}class Bt extends tw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new fk(e,t,s):t==="array-contains"?new gk(e,s):t==="in"?new yk(e,s):t==="not-in"?new vk(e,s):t==="array-contains-any"?new _k(e,s):new Bt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new pk(e,s):new mk(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&Xs(this.value)===Xs(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Oe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends tw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new gr(e,t)}matches(e){return nw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nw(n){return n.op==="and"}function rw(n){return dk(n)&&nw(n)}function dk(n){for(const e of n.filters)if(e instanceof gr)return!1;return!0}function Yd(n){if(n instanceof Bt)return n.field.canonicalString()+n.op.toString()+$o(n.value);if(rw(n))return n.filters.map((e=>Yd(e))).join(",");{const e=n.filters.map((t=>Yd(t))).join(",");return`${n.op}(${e})`}}function sw(n,e){return n instanceof Bt?(function(s,o){return o instanceof Bt&&s.op===o.op&&s.field.isEqual(o.field)&&$r(s.value,o.value)})(n,e):n instanceof gr?(function(s,o){return o instanceof gr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,f)=>l&&sw(c,o.filters[f])),!0):!1})(n,e):void Oe(19439)}function iw(n){return n instanceof Bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`})(n):n instanceof gr?(function(t){return t.op.toString()+" {"+t.getFilters().map(iw).join(" ,")+"}"})(n):"Filter"}class fk extends Bt{constructor(e,t,s){super(e,t,s),this.key=Ae.fromName(s.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class pk extends Bt{constructor(e,t){super(e,"in",t),this.keys=ow("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class mk extends Bt{constructor(e,t){super(e,"not-in",t),this.keys=ow("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ow(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>Ae.fromName(s.referenceValue)))}class gk extends Bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vf(t)&&dl(t.arrayValue,this.value)}}class yk extends Bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dl(this.value.arrayValue,t)}}class vk extends Bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dl(this.value.arrayValue,t)}}class _k extends Bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>dl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,t=null,s=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Oy(n,e=null,t=[],s=[],o=null,l=null,c=null){return new wk(n,e,t,s,o,l,c)}function Of(n){const e=Be(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Yd(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Nc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>$o(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>$o(s))).join(",")),e.Te=t}return e.Te}function Lf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!hk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Vy(n.startAt,e.startAt)&&Vy(n.endAt,e.endAt)}function Jd(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t=null,s=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Ek(n,e,t,s,o,l,c,f){return new na(n,e,t,s,o,l,c,f)}function Dc(n){return new na(n)}function Ly(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Tk(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function aw(n){return n.collectionGroup!==null}function nl(n){const e=Be(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Kt(on.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((m=>{m.isInequality()&&(f=f.add(m.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new fl(l,s))})),t.has(on.keyField().canonicalString())||e.Ie.push(new fl(on.keyField(),s))}return e.Ie}function jr(n){const e=Be(n);return e.Ee||(e.Ee=Ik(e,nl(n))),e.Ee}function Ik(n,e){if(n.limitType==="F")return Oy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new fl(o.field,l)}));const t=n.endAt?new hc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new hc(n.startAt.position,n.startAt.inclusive):null;return Oy(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Xd(n,e){const t=n.filters.concat([e]);return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Sk(n,e){const t=n.explicitOrderBy.concat([e]);return new na(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function dc(n,e,t){return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vc(n,e){return Lf(jr(n),jr(e))&&n.limitType===e.limitType}function lw(n){return`${Of(jr(n))}|lt:${n.limitType}`}function xo(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>iw(o))).join(", ")}]`),Nc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>$o(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>$o(o))).join(",")),`Target(${s})`})(jr(n))}; limitType=${n.limitType})`}function Oc(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ae.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of nl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,f,p){const m=Dy(c,f,p);return c.inclusive?m<=0:m<0})(s.startAt,nl(s),o)||s.endAt&&!(function(c,f,p){const m=Dy(c,f,p);return c.inclusive?m>=0:m>0})(s.endAt,nl(s),o))})(n,e)}function Ck(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uw(n){return(e,t)=>{let s=!1;for(const o of nl(n)){const l=kk(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function kk(n,e,t){const s=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(l,c,f){const p=c.data.field(l),m=f.data.field(l);return p!==null&&m!==null?Bo(p,m):Oe(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Oe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ni(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return q_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk=new Nt(Ae.comparator);function ps(){return Rk}const cw=new Nt(Ae.comparator);function Qa(...n){let e=cw;for(const t of n)e=e.insert(t.key,t);return e}function hw(n){let e=cw;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Oi(){return rl()}function dw(){return rl()}function rl(){return new Hi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Ak=new Nt(Ae.comparator),Pk=new Kt(Ae.comparator);function Xe(...n){let e=Pk;for(const t of n)e=e.add(t);return e}const xk=new Kt(Je);function Nk(){return xk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function fw(n){return{integerValue:""+n}}function bk(n,e){return nk(e)?fw(e):Mf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function Dk(n,e,t){return n instanceof fc?(function(o,l){const c={fields:{[Q_]:{stringValue:K_},[J_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Df(l)&&(l=bc(l)),l&&(c.fields[Y_]=l),{mapValue:c}})(t,e):n instanceof Wo?mw(n,e):n instanceof Ho?gw(n,e):(function(o,l){const c=pw(o,l),f=My(c)+My(o.Ae);return Qd(c)&&Qd(o.Ae)?fw(f):Mf(o.serializer,f)})(n,e)}function Vk(n,e,t){return n instanceof Wo?mw(n,e):n instanceof Ho?gw(n,e):t}function pw(n,e){return n instanceof pc?(function(s){return Qd(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class fc extends Lc{}class Wo extends Lc{constructor(e){super(),this.elements=e}}function mw(n,e){const t=yw(e);for(const s of n.elements)t.some((o=>$r(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Ho extends Lc{constructor(e){super(),this.elements=e}}function gw(n,e){let t=yw(e);for(const s of n.elements)t=t.filter((o=>!$r(o,s)));return{arrayValue:{values:t}}}class pc extends Lc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function My(n){return Mt(n.integerValue||n.doubleValue)}function yw(n){return Vf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(e,t){this.field=e,this.transform=t}}function Ok(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Wo&&o instanceof Wo||s instanceof Ho&&o instanceof Ho?zo(s.elements,o.elements,$r):s instanceof pc&&o instanceof pc?$r(s.Ae,o.Ae):s instanceof fc&&o instanceof fc})(n.transform,e.transform)}class Lk{constructor(e,t){this.version=e,this.transformResults=t}}class Fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mc{}function _w(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ew(n.key,Fr.none()):new Tl(n.key,n.data,Fr.none());{const t=n.data,s=Dn.empty();let o=new Kt(on.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new ri(n.key,s,new Wn(o.toArray()),Fr.none())}}function Mk(n,e,t){n instanceof Tl?(function(o,l,c){const f=o.value.clone(),p=Fy(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof ri?(function(o,l,c){if(!Yu(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Fy(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(ww(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function sl(n,e,t,s){return n instanceof Tl?(function(l,c,f,p){if(!Yu(l.precondition,c))return f;const m=l.value.clone(),_=Uy(l.fieldTransforms,p,c);return m.setAll(_),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,s):n instanceof ri?(function(l,c,f,p){if(!Yu(l.precondition,c))return f;const m=Uy(l.fieldTransforms,p,c),_=c.data;return _.setAll(ww(l)),_.setAll(m),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,f){return Yu(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function jk(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=pw(s.transform,o||null);l!=null&&(t===null&&(t=Dn.empty()),t.set(s.field,l))}return t||null}function jy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&zo(s,o,((l,c)=>Ok(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tl extends Mc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ri extends Mc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ww(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Fy(n,e,t){const s=new Map;ot(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);s.set(l.field,Vk(c,f,t[o]))}return s}function Uy(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,Dk(l,c,e))}return s}class Ew extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fk extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Mk(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=sl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=sl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=dw();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=_w(c,f);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Fe.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((t,s)=>jy(t,s)))&&zo(this.baseMutations,e.baseMutations,((t,s)=>jy(t,s)))}}class jf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ot(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return Ak})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new jf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,tt;function $k(n){switch(n){case Z.OK:return Oe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return Oe(15467,{code:n})}}function Tw(n){if(n===void 0)return fs("GRPC error has no .code"),Z.UNKNOWN;switch(n){case zt.OK:return Z.OK;case zt.CANCELLED:return Z.CANCELLED;case zt.UNKNOWN:return Z.UNKNOWN;case zt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case zt.INTERNAL:return Z.INTERNAL;case zt.UNAVAILABLE:return Z.UNAVAILABLE;case zt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case zt.NOT_FOUND:return Z.NOT_FOUND;case zt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case zt.ABORTED:return Z.ABORTED;case zt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case zt.DATA_LOSS:return Z.DATA_LOSS;default:return Oe(39323,{code:n})}}(tt=zt||(zt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new qs([4294967295,4294967295],0);function zy(n){const e=Wk().encode(n),t=new O_;return t.update(e),new Uint8Array(t.digest())}function By(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new qs([t,s],0),new qs([o,l],0)]}class Ff{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ya(`Invalid padding: ${t}`);if(s<0)throw new Ya(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ya(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ya(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=qs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(qs.fromNumber(s)));return o.compare(Hk)===1&&(o=new qs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=zy(e),[s,o]=By(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ff(l,o,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=zy(e),[s,o]=By(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.be(c)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new jc(Fe.min(),o,new Nt(Je),ps(),Xe())}}class Il{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Il(s,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Iw{constructor(e,t){this.targetId=e,this.Ce=t}}class Sw{constructor(e,t,s=an.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class $y{constructor(){this.ve=0,this.Fe=Wy(),this.Me=an.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),t=Xe(),s=Xe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Oe(38017,{changeType:l})}})),new Il(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=Wy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ot(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class qk{constructor(e){this.Ge=e,this.ze=new Map,this.je=ps(),this.He=Fu(),this.Je=Fu(),this.Ze=new Nt(Je)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Oe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Jd(l))if(s===0){const c=new Ae(l.path);this.et(t,c,vn.newNoDocument(c,Fe.min()))}else ot(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(t);const m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=Js(s).toUint8Array()}catch(p){if(p instanceof G_)return zi("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Ff(c,o,l)}catch(p){return zi(p instanceof Ya?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Jd(f.target)){const p=new Ae(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,vn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let s=Xe();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((p=>{const m=this.ot(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new jc(e,t,this.Ze,this.je,s);return this.je=ps(),this.He=Fu(),this.Je=Fu(),this.Ze=new Nt(Je),o}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new $y,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Kt(Je),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Kt(Je),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ee("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $y),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Fu(){return new Nt(Ae.comparator)}function Wy(){return new Nt(Ae.comparator)}const Gk={asc:"ASCENDING",desc:"DESCENDING"},Kk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qk={and:"AND",or:"OR"};class Yk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zd(n,e){return n.useProto3Json||Nc(e)?e:{value:e}}function mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Cw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Jk(n,e){return mc(n,e.toTimestamp())}function Ur(n){return ot(!!n,49232),Fe.fromTimestamp((function(t){const s=Ys(t);return new Et(s.seconds,s.nanos)})(n))}function Uf(n,e){return ef(n,e).canonicalString()}function ef(n,e){const t=(function(o){return new mt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kw(n){const e=mt.fromString(n);return ot(Nw(e),10190,{key:e.toString()}),e}function tf(n,e){return Uf(n.databaseId,e.path)}function Ad(n,e){const t=kw(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(Aw(t))}function Rw(n,e){return Uf(n.databaseId,e)}function Xk(n){const e=kw(n);return e.length===4?mt.emptyPath():Aw(e)}function nf(n){return new mt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Aw(n){return ot(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Hy(n,e,t){return{name:tf(n,e),fields:t.value.mapValue.fields}}function Zk(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Oe(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(m,_){return m.useProto3Json?(ot(_===void 0||typeof _=="string",58123),an.fromBase64String(_||"")):(ot(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),an.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(m){const _=m.code===void 0?Z.UNKNOWN:Tw(m.code);return new _e(_,m.message||"")})(c);t=new Sw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ad(n,s.document.name),l=Ur(s.document.updateTime),c=s.document.createTime?Ur(s.document.createTime):Fe.min(),f=new Dn({mapValue:{fields:s.document.fields}}),p=vn.newFoundDocument(o,l,c,f),m=s.targetIds||[],_=s.removedTargetIds||[];t=new Ju(m,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ad(n,s.document),l=s.readTime?Ur(s.readTime):Fe.min(),c=vn.newNoDocument(o,l),f=s.removedTargetIds||[];t=new Ju([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ad(n,s.document),l=s.removedTargetIds||[];t=new Ju([],l,o,null)}else{if(!("filter"in e))return Oe(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new Bk(o,l),f=s.targetId;t=new Iw(f,c)}}return t}function eR(n,e){let t;if(e instanceof Tl)t={update:Hy(n,e.key,e.value)};else if(e instanceof Ew)t={delete:tf(n,e.key)};else if(e instanceof ri)t={update:Hy(n,e.key,e.data),updateMask:uR(e.fieldMask)};else{if(!(e instanceof Fk))return Oe(16599,{dt:e.type});t={verify:tf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof fc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Wo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ho)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Oe(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Jk(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Oe(27497)})(n,e.precondition)),t}function tR(n,e){return n&&n.length>0?(ot(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?Ur(o.updateTime):Ur(l);return c.isEqual(Fe.min())&&(c=Ur(l)),new Lk(c,o.transformResults||[])})(t,e)))):[]}function nR(n,e){return{documents:[Rw(n,e.path)]}}function rR(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Rw(n,o);const l=(function(m){if(m.length!==0)return xw(gr.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((_=>(function(T){return{field:No(T.field),direction:oR(T.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Zd(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:o}}function sR(n){let e=Xk(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ot(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const T=Pw(E);return T instanceof gr&&rw(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((T=>(function(U){return new fl(bo(U.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let T;return T=typeof E=="object"?E.value:E,Nc(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(E){const T=!!E.before,V=E.values||[];return new hc(V,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(E){const T=!E.before,V=E.values||[];return new hc(V,T)})(t.endAt)),Ek(e,o,c,l,f,"F",p,m)}function iR(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Oe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Pw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=bo(t.unaryFilter.field);return Bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=bo(t.unaryFilter.field);return Bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=bo(t.unaryFilter.field);return Bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=bo(t.unaryFilter.field);return Bt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Oe(61313);default:return Oe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Bt.create(bo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Oe(58110);default:return Oe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return gr.create(t.compositeFilter.filters.map((s=>Pw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Oe(1026)}})(t.compositeFilter.op))})(n):Oe(30097,{filter:n})}function oR(n){return Gk[n]}function aR(n){return Kk[n]}function lR(n){return Qk[n]}function No(n){return{fieldPath:n.canonicalString()}}function bo(n){return on.fromServerFormat(n.fieldPath)}function xw(n){return n instanceof Bt?(function(t){if(t.op==="=="){if(by(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NAN"}};if(Ny(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(by(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NAN"}};if(Ny(t.value))return{unaryFilter:{field:No(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:No(t.field),op:aR(t.op),value:t.value}}})(n):n instanceof gr?(function(t){const s=t.getFilters().map((o=>xw(o)));return s.length===1?s[0]:{compositeFilter:{op:lR(t.op),filters:s}}})(n):Oe(54877,{filter:n})}function uR(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Nw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function bw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t,s,o,l=Fe.min(),c=Fe.min(),f=an.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new zs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.yt=e}}function hR(n){const e=sR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(){this.Sn=new fR}addToCollectionParentIndex(e,t){return this.Sn.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}deleteAllFieldIndexes(e){return te.resolve()}createTargetIndexes(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Qs.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Qs.min())}updateCollectionGroup(e,t,s){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class fR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Kt(mt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Kt(mt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dw=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(Dw,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new qo(0)}static ar(){return new qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="LruGarbageCollector",pR=1048576;function Ky([n,e],[t,s]){const o=Je(n,t);return o===0?Je(e,s):o}class mR{constructor(e){this.Pr=e,this.buffer=new Kt(Ky),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Ky(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ee(Gy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ta(t)?Ee(Gy,"Ignoring IndexedDB error during garbage collection: ",t):await ea(t)}await this.Ar(3e5)}))}}class yR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return te.resolve(xc.ce);const s=new mR(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ee("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(qy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ee("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qy):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,o,l,c,f,p,m;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ee("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(m=Date.now(),Po()<=Ye.DEBUG&&Ee("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(m-p)+`ms
Total Duration: ${m-_}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function vR(n,e){return new yR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(){this.changes=new Hi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?te.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&sl(s.mutation,o,Wn.empty(),Et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Xe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Xe()){const o=Oi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=Qa();return l.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Oi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Xe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,o){let l=ps();const c=rl(),f=(function(){return rl()})();return t.forEach(((p,m)=>{const _=s.get(m.key);o.has(m.key)&&(_===void 0||_.mutation instanceof ri)?l=l.insert(m.key,m):_!==void 0?(c.set(m.key,_.mutation.getFieldMask()),sl(_.mutation,m,_.mutation.getFieldMask(),Et.now())):c.set(m.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((m,_)=>c.set(m,_))),t.forEach(((m,_)=>f.set(m,new wR(_,c.get(m)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=rl();let o=new Nt(((c,f)=>c-f)),l=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const m=t.get(p);if(m===null)return;let _=s.get(p)||Wn.empty();_=f.applyToLocalView(m,_),s.set(p,_);const E=(o.get(f.batchId)||Xe()).add(p);o=o.insert(f.batchId,E)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),m=p.key,_=p.value,E=dw();_.forEach((T=>{if(!l.has(T)){const V=_w(t.get(T),s.get(T));V!==null&&E.set(T,V),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,E))}return te.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return Tk(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):te.resolve(Oi());let f=ul,p=l;return c.next((m=>te.forEach(m,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?te.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{p=p.insert(_,T)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,p,m,Xe()))).next((_=>({batchId:f,changes:hw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((s=>{let o=Qa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=Qa();return this.indexManager.getCollectionParents(e,l).next((f=>te.forEach(f,(p=>{const m=(function(E,T){return new na(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((_=>{_.forEach(((E,T)=>{c=c.insert(E,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,m)=>{const _=m.getKey();c.get(_)===null&&(c=c.insert(_,vn.newInvalidDocument(_)))}));let f=Qa();return c.forEach(((p,m)=>{const _=l.get(p);_!==void 0&&sl(_.mutation,m,Wn.empty(),Et.now()),Oc(t,m)&&(f=f.insert(p,m))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return te.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Ur(o.createTime)}})(t)),te.resolve()}getNamedQuery(e,t){return te.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:hR(o.bundledQuery),readTime:Ur(o.readTime)}})(t)),te.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.overlays=new Nt(Ae.comparator),this.Lr=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Oi();return te.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.bt(e,t,l)})),te.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),te.resolve()}getOverlaysForCollection(e,t,s){const o=Oi(),l=t.length+1,c=new Ae(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Nt(((m,_)=>m-_));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>s){let _=l.get(m.largestBatchId);_===null&&(_=Oi(),l=l.insert(m.largestBatchId,_)),_.set(m.getKey(),m)}}const f=Oi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((m,_)=>f.set(m,_))),!(f.size()>=o)););return te.resolve(f)}bt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new zk(t,s));let l=this.Lr.get(t);l===void 0&&(l=Xe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.sessionToken=an.EMPTY_BYTE_STRING}getSessionToken(e){return te.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,te.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(){this.kr=new Kt(Xt.Kr),this.qr=new Kt(Xt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Xt(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Xt(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new Ae(new mt([])),s=new Xt(t,e),o=new Xt(t,e+1),l=[];return this.qr.forEachInRange([s,o],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new Ae(new mt([])),s=new Xt(t,e),o=new Xt(t,e+1);let l=Xe();return this.qr.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Xt(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Xt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return Ae.comparator(e.key,t.key)||Je(e.Hr,t.Hr)}static Ur(e,t){return Je(e.Hr,t.Hr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Kt(Xt.Kr)}checkEmpty(e){return te.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Uk(l,t,s,o);this.mutationQueue.push(c);for(const f of o)this.Jr=this.Jr.add(new Xt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return te.resolve(c)}lookupMutationBatch(e,t){return te.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return te.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(this.mutationQueue.length===0?bf:this.Yn-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,o],(c=>{const f=this.Zr(c.Hr);l.push(f)})),te.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Kt(Je);return t.forEach((o=>{const l=new Xt(o,0),c=new Xt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{s=s.add(f.Hr)}))})),te.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ae.isDocumentKey(l)||(l=l.child(""));const c=new Xt(new Ae(l),0);let f=new Kt(Je);return this.Jr.forEachWhile((p=>{const m=p.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(f=f.add(p.Hr)),!0)}),c),te.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ot(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return te.forEach(t.mutations,(o=>{const l=new Xt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Xt(t,0),o=this.Jr.firstAfterOrEqual(s);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,te.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.ti=e,this.docs=(function(){return new Nt(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return te.resolve(s?s.document.mutableCopy():vn.newInvalidDocument(t))}getEntries(e,t){let s=ps();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():vn.newInvalidDocument(o))})),te.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=ps();const c=t.path,f=new Ae(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:m,value:{document:_}}=p.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||X1(J1(_),s)<=0||(o.has(_.key)||Oc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return te.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Oe(9500)}ni(e,t){return te.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new RR(this)}getSize(e){return te.resolve(this.size)}}class RR extends _R{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),te.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AR{constructor(e){this.persistence=e,this.ri=new Hi((t=>Of(t)),Lf),this.lastRemoteSnapshotVersion=Fe.min(),this.highestTargetId=0,this.ii=0,this.si=new zf,this.targetCount=0,this.oi=qo._r()}forEachTarget(e,t){return this.ri.forEach(((s,o)=>t(o))),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),te.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new qo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.lr(t),te.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),te.waitFor(l).next((()=>o))}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return te.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),te.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),te.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),te.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return te.resolve(s)}containsKey(e,t){return te.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(e,t){this._i={},this.overlays={},this.ai=new xc(0),this.ui=!1,this.ui=!0,this.ci=new SR,this.referenceDelegate=e(this),this.li=new AR(this),this.indexManager=new dR,this.remoteDocumentCache=(function(o){return new kR(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new cR(t),this.Pi=new TR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new IR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new CR(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){Ee("MemoryPersistence","Starting transaction:",e);const o=new PR(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return te.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class PR extends ek{constructor(e){super(),this.currentSequenceNumber=e}}class Bf{constructor(e){this.persistence=e,this.Ri=new zf,this.Ai=null}static Vi(e){return new Bf(e)}get di(){if(this.Ai)return this.Ai;throw Oe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),te.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),te.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.di,(s=>{const o=Ae.fromPath(s);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Fe.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return te.or([()=>te.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class gc{constructor(e,t){this.persistence=e,this.fi=new Hi((s=>rk(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=vR(this,t)}static Vi(e,t){return new gc(e,t)}Ti(){}Ii(e){return te.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return te.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((l=>l?te.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Fe.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),te.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),te.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),te.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),te.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ku(e.data.value)),t}wr(e,t,s){return te.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return te.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=o}static Es(e,t){let s=Xe(),o=Xe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new $f(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return gI()?8:tk(_n())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new xR;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,s,o){return s.documentReadCount<this.Vs?(Po()<=Ye.DEBUG&&Ee("QueryEngine","SDK will not create cache indexes for query:",xo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),te.resolve()):(Po()<=Ye.DEBUG&&Ee("QueryEngine","Query:",xo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Po()<=Ye.DEBUG&&Ee("QueryEngine","The SDK decides to create cache indexes for query:",xo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jr(t))):te.resolve())}gs(e,t){if(Ly(t))return te.resolve(null);let s=jr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=dc(t,null,"F"),s=jr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Xe(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const m=this.bs(t,f);return this.Ss(t,m,c,p.readTime)?this.gs(e,dc(t,null,"F")):this.Ds(e,m,t,p)}))))})))))}ps(e,t,s,o){return Ly(t)||o.isEqual(Fe.min())?te.resolve(null):this.fs.getDocuments(e,s).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,s,o)?te.resolve(null):(Po()<=Ye.DEBUG&&Ee("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),xo(t)),this.Ds(e,c,t,Y1(o,ul)).next((f=>f)))}))}bs(e,t){let s=new Kt(uw(e));return t.forEach(((o,l)=>{Oc(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,s){return Po()<=Ye.DEBUG&&Ee("QueryEngine","Using full collection scan to execute query:",xo(t)),this.fs.getDocumentsMatchingQuery(e,t,Qs.min(),s)}Ds(e,t,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="LocalStore",bR=3e8;class DR{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new Nt(Je),this.Fs=new Hi((l=>Of(l)),Lf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ER(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function VR(n,e,t,s){return new DR(n,e,t,s)}async function Ow(n,e){const t=Be(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let p=Xe();for(const m of o){c.push(m.batchId);for(const _ of m.mutations)p=p.add(_.key)}for(const m of l){f.push(m.batchId);for(const _ of m.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(s,p).next((m=>({Ns:m,removedBatchIds:c,addedBatchIds:f})))}))}))}function OR(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,p,m,_){const E=m.batch,T=E.keys();let V=te.resolve();return T.forEach((U=>{V=V.next((()=>_.getEntry(p,U))).next((F=>{const O=m.docVersions.get(U);ot(O!==null,48541),F.version.compareTo(O)<0&&(E.applyToRemoteDocument(F,m),F.isValidDocument()&&(F.setReadTime(m.commitVersion),_.addEntry(F)))}))})),V.next((()=>f.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=Xe();for(let m=0;m<f.mutationResults.length;++m)f.mutationResults[m].transformResults.length>0&&(p=p.add(f.batch.mutations[m].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Lw(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function LR(n,e){const t=Be(n),s=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const f=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;f.push(t.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,E))));let V=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?V=V.withResumeToken(an.EMPTY_BYTE_STRING,Fe.min()).withLastLimboFreeSnapshotVersion(Fe.min()):_.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(_.resumeToken,s)),o=o.insert(E,V),(function(F,O,H){return F.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=bR?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(T,V,_)&&f.push(t.li.updateTargetData(l,V))}));let p=ps(),m=Xe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(MR(l,c,e.documentUpdates).next((_=>{p=_.Bs,m=_.Ls}))),!s.isEqual(Fe.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(_)}return te.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,m))).next((()=>p))})).then((l=>(t.vs=o,l)))}function MR(n,e,t){let s=Xe(),o=Xe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=ps();return t.forEach(((f,p)=>{const m=l.get(f);p.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Fe.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):Ee(Wf,"Ignoring outdated watch update for ",f,". Current version:",m.version," Watch version:",p.version)})),{Bs:c,Ls:o}}))}function jR(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=bf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function FR(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.li.getTargetData(s,e).next((l=>l?(o=l,te.resolve(o)):t.li.allocateTargetId(s).next((c=>(o=new zs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function rf(n,e,t){const s=Be(n),o=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!ta(c))throw c;Ee(Wf,`Failed to update sequence numbers for target ${e}: ${c}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function Qy(n,e,t){const s=Be(n);let o=Fe.min(),l=Xe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,m,_){const E=Be(p),T=E.Fs.get(_);return T!==void 0?te.resolve(E.vs.get(T)):E.li.getTargetData(m,_)})(s,c,jr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(c,f.targetId).next((p=>{l=p}))})).next((()=>s.Cs.getDocumentsMatchingQuery(c,e,t?o:Fe.min(),t?l:Xe()))).next((f=>(UR(s,Ck(e),f),{documents:f,ks:l})))))}function UR(n,e,t){let s=n.Ms.get(e)||Fe.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Ms.set(e,s)}class Yy{constructor(){this.activeTargetIds=Nk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zR{constructor(){this.vo=new Yy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Yy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="ConnectivityMonitor";class Xy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ee(Jy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ee(Jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu=null;function sf(){return Uu===null?Uu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uu++,"0x"+Uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="RestConnection",$R={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class WR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===uc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const c=sf(),f=this.Qo(e,t.toUriEncodedString());Ee(Pd,`Sending RPC '${e}' ${c}:`,f,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,o,l);const{host:m}=new URL(f),_=Yo(m);return this.zo(e,f,p,s,_).then((E=>(Ee(Pd,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw zi(Pd,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",s),E}))}jo(e,t,s,o,l,c){return this.Wo(e,t,s,o,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const s=$R[e];let o=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="WebChannelConnection",qa=(n,e,t)=>{n.listen(e,(s=>{try{t(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Lo extends WR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Lo.c_){const e=F_();qa(e,j_.STAT_EVENT,(t=>{t.stat===qd.PROXY?Ee(gn,"STAT_EVENT: detected buffering proxy"):t.stat===qd.NOPROXY&&Ee(gn,"STAT_EVENT: detected no buffering proxy")})),Lo.c_=!0}}zo(e,t,s,o,l){const c=sf();return new Promise(((f,p)=>{const m=new L_;m.setWithCredentials(!0),m.listenOnce(M_.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Gu.NO_ERROR:const E=m.getResponseJson();Ee(gn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case Gu.TIMEOUT:Ee(gn,`RPC '${e}' ${c} timed out`),p(new _e(Z.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const T=m.getStatus();if(Ee(gn,`RPC '${e}' ${c} failed with status:`,T,"response text:",m.getResponseText()),T>0){let V=m.getResponseJson();Array.isArray(V)&&(V=V[0]);const U=V==null?void 0:V.error;if(U&&U.status&&U.message){const F=(function(H){const Y=H.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(Y)>=0?Y:Z.UNKNOWN})(U.status);p(new _e(F,U.message))}else p(new _e(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new _e(Z.UNAVAILABLE,"Connection failed."));break;default:Oe(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Ee(gn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);Ee(gn,`RPC '${e}' ${c} sending request:`,o),m.send(t,"POST",_,s,15)}))}T_(e,t,s){const o=sf(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const m=l.join("");Ee(gn,`Creating RPC '${e}' stream ${o}: ${m}`,f);const _=c.createWebChannel(m,f);this.I_(_);let E=!1,T=!1;const V=new HR({Ho:U=>{T?Ee(gn,`Not sending because RPC '${e}' stream ${o} is closed:`,U):(E||(Ee(gn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),Ee(gn,`RPC '${e}' stream ${o} sending:`,U),_.send(U))},Jo:()=>_.close()});return qa(_,Ka.EventType.OPEN,(()=>{T||(Ee(gn,`RPC '${e}' stream ${o} transport opened.`),V.i_())})),qa(_,Ka.EventType.CLOSE,(()=>{T||(T=!0,Ee(gn,`RPC '${e}' stream ${o} transport closed`),V.o_(),this.E_(_))})),qa(_,Ka.EventType.ERROR,(U=>{T||(T=!0,zi(gn,`RPC '${e}' stream ${o} transport errored. Name:`,U.name,"Message:",U.message),V.o_(new _e(Z.UNAVAILABLE,"The operation could not be completed")))})),qa(_,Ka.EventType.MESSAGE,(U=>{var F;if(!T){const O=U.data[0];ot(!!O,16349);const H=O,Y=(H==null?void 0:H.error)||((F=H[0])==null?void 0:F.error);if(Y){Ee(gn,`RPC '${e}' stream ${o} received error:`,Y);const ee=Y.status;let ue=(function(x){const k=zt[x];if(k!==void 0)return Tw(k)})(ee),re=Y.message;ee==="NOT_FOUND"&&re.includes("database")&&re.includes("does not exist")&&re.includes(this.databaseId.database)&&zi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),ue===void 0&&(ue=Z.INTERNAL,re="Unknown error status: "+ee+" with message "+Y.message),T=!0,V.o_(new _e(ue,re)),_.close()}else Ee(gn,`RPC '${e}' stream ${o} received:`,O),V.__(O)}})),Lo.u_(),setTimeout((()=>{V.s_()}),0),V}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return U_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n){return new Lo(n)}function xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(n){return new Yk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo.c_=!1;class Mw{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&Ee("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="PersistentStream";class jw{constructor(e,t,s,o,l,c,f,p){this.Ci=e,this.b_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Mw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===Z.RESOURCE_EXHAUSTED?(fs(t.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new _e(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ee(Zy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ee(Zy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class GR extends jw{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Zk(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Fe.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Fe.min():c.readTime?Ur(c.readTime):Fe.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=nf(this.serializer),t.addTarget=(function(l,c){let f;const p=c.target;if(f=Jd(p)?{documents:nR(l,p)}:{query:rR(l,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=Cw(l,c.resumeToken);const m=Zd(l,c.expectedCount);m!==null&&(f.expectedCount=m)}else if(c.snapshotVersion.compareTo(Fe.min())>0){f.readTime=mc(l,c.snapshotVersion.toTimestamp());const m=Zd(l,c.expectedCount);m!==null&&(f.expectedCount=m)}return f})(this.serializer,e);const s=iR(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=nf(this.serializer),t.removeTarget=e,this.K_(t)}}class KR extends jw{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ot(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ot(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ot(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=tR(e.writeResults,e.commitTime),s=Ur(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=nf(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>eR(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{}class YR extends QR{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new _e(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,ef(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new _e(Z.UNKNOWN,l.toString())}))}jo(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,ef(t,s),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new _e(Z.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function JR(n,e,t,s){return new YR(n,e,t,s)}class XR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fs(t),this.aa=!1):Ee("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="RemoteStore";class ZR{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{s.enqueueAndForget((async()=>{qi(this)&&(Ee(Bi,"Restarting streams for network reachability change."),await(async function(p){const m=Be(p);m.Ea.add(4),await Sl(m),m.Va.set("Unknown"),m.Ea.delete(4),await Uc(m)})(this))}))})),this.Va=new XR(s,o)}}async function Uc(n){if(qi(n))for(const e of n.Ra)await e(!0)}async function Sl(n){for(const e of n.Ra)await e(!1)}function Fw(n,e){const t=Be(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kf(t)?Gf(t):ra(t).O_()&&qf(t,e))}function Hf(n,e){const t=Be(n),s=ra(t);t.Ia.delete(e),s.O_()&&Uw(t,e),t.Ia.size===0&&(s.O_()?s.L_():qi(t)&&t.Va.set("Unknown"))}function qf(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Fe.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ra(n).Z_(e)}function Uw(n,e){n.da.$e(e),ra(n).X_(e)}function Gf(n){n.da=new qk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ra(n).start(),n.Va.ua()}function Kf(n){return qi(n)&&!ra(n).x_()&&n.Ia.size>0}function qi(n){return Be(n).Ea.size===0}function zw(n){n.da=void 0}async function eA(n){n.Va.set("Online")}async function tA(n){n.Ia.forEach(((e,t)=>{qf(n,e)}))}async function nA(n,e){zw(n),Kf(n)?(n.Va.ha(e),Gf(n)):n.Va.set("Unknown")}async function rA(n,e,t){if(n.Va.set("Online"),e instanceof Sw&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ia.delete(f),o.da.removeTarget(f))})(n,e)}catch(s){Ee(Bi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yc(n,s)}else if(e instanceof Ju?n.da.Xe(e):e instanceof Iw?n.da.st(e):n.da.tt(e),!t.isEqual(Fe.min()))try{const s=await Lw(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(m);_&&l.Ia.set(m,_.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,m)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(an.EMPTY_BYTE_STRING,_.snapshotVersion)),Uw(l,p);const E=new zs(_.target,p,m,_.sequenceNumber);qf(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){Ee(Bi,"Failed to raise snapshot:",s),await yc(n,s)}}async function yc(n,e,t){if(!ta(e))throw e;n.Ea.add(1),await Sl(n),n.Va.set("Offline"),t||(t=()=>Lw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ee(Bi,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Uc(n)}))}function Bw(n,e){return e().catch((t=>yc(n,t,e)))}async function zc(n){const e=Be(n),t=Zs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bf;for(;sA(e);)try{const o=await jR(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,iA(e,o)}catch(o){await yc(e,o)}$w(e)&&Ww(e)}function sA(n){return qi(n)&&n.Ta.length<10}function iA(n,e){n.Ta.push(e);const t=Zs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function $w(n){return qi(n)&&!Zs(n).x_()&&n.Ta.length>0}function Ww(n){Zs(n).start()}async function oA(n){Zs(n).ra()}async function aA(n){const e=Zs(n);for(const t of n.Ta)e.ea(t.mutations)}async function lA(n,e,t){const s=n.Ta.shift(),o=jf.from(s,e,t);await Bw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await zc(n)}async function uA(n,e){e&&Zs(n).Y_&&await(async function(s,o){if((function(c){return $k(c)&&c!==Z.ABORTED})(o.code)){const l=s.Ta.shift();Zs(s).B_(),await Bw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await zc(s)}})(n,e),$w(n)&&Ww(n)}async function ev(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),Ee(Bi,"RemoteStore received new credentials");const s=qi(t);t.Ea.add(3),await Sl(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Uc(t)}async function cA(n,e){const t=Be(n);e?(t.Ea.delete(2),await Uc(t)):e||(t.Ea.add(2),await Sl(t),t.Va.set("Unknown"))}function ra(n){return n.ma||(n.ma=(function(t,s,o){const l=Be(t);return l.sa(),new GR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:eA.bind(null,n),Yo:tA.bind(null,n),t_:nA.bind(null,n),J_:rA.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Kf(n)?Gf(n):n.Va.set("Unknown")):(await n.ma.stop(),zw(n))}))),n.ma}function Zs(n){return n.fa||(n.fa=(function(t,s,o){const l=Be(t);return l.sa(),new KR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:oA.bind(null,n),t_:uA.bind(null,n),ta:aA.bind(null,n),na:lA.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await zc(n)):(await n.fa.stop(),n.Ta.length>0&&(Ee(Bi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Gs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,f=new Qf(e,t,c,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yf(n,e){if(fs("AsyncQueue",`${e}: ${n}`),ta(n))return new _e(Z.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ae.comparator(t.key,s.key):(t,s)=>Ae.comparator(t.key,s.key),this.keyedMap=Qa(),this.sortedSet=new Nt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Mo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(){this.ga=new Nt(Ae.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Oe(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Go{constructor(e,t,s,o,l,c,f,p,m){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Go(e,t,Mo.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class dA{constructor(){this.queries=nv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Be(t),l=o.queries;o.queries=nv(),l.forEach(((c,f)=>{for(const p of f.ba)p.onError(s)}))})(this,new _e(Z.ABORTED,"Firestore shutting down"))}}function nv(){return new Hi((n=>lw(n)),Vc)}async function Hw(n,e){const t=Be(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(s=2):(l=new hA,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=Yf(c,`Initialization of query '${xo(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Jf(t)}async function qw(n,e){const t=Be(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function fA(n,e){const t=Be(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(o)&&(s=!0);c.wa=o}}s&&Jf(t)}function pA(n,e,t){const s=Be(n),o=s.queries.get(e);if(o)for(const l of o.ba)l.onError(t);s.queries.delete(e)}function Jf(n){n.Ca.forEach((e=>{e.next()}))}var of,rv;(rv=of||(of={})).Ma="default",rv.Cache="cache";class Gw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Go(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(e){this.key=e}}class Qw{constructor(e){this.key=e}}class mA{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Xe(),this.mutatedKeys=Xe(),this.eu=uw(e),this.tu=new Mo(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new tv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),V=Oc(this.query,E)?E:null,U=!!T&&this.mutatedKeys.has(T.key),F=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let O=!1;T&&V?T.data.isEqual(V.data)?U!==F&&(s.track({type:3,doc:V}),O=!0):this.su(T,V)||(s.track({type:2,doc:V}),O=!0,(p&&this.eu(V,p)>0||m&&this.eu(V,m)<0)&&(f=!0)):!T&&V?(s.track({type:0,doc:V}),O=!0):T&&!V&&(s.track({type:1,doc:T}),O=!0,(p||m)&&(f=!0)),O&&(V?(c=c.add(V),l=F?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{tu:c,iu:s,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(V,U){const F=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Oe(20277,{Vt:O})}};return F(V)-F(U)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],p=this.Ya.size===0&&this.current&&!o?1:0,m=p!==this.Xa;return this.Xa=p,c.length!==0||m?{snapshot:new Go(this.query,e.tu,l,c,e.mutatedKeys,p===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Xe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new Qw(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new Kw(s))})),t}cu(e){this.Za=e.ks,this.Ya=Xe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Go.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xf="SyncEngine";class gA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class yA{constructor(e){this.key=e,this.hu=!1}}class vA{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Hi((f=>lw(f)),Vc),this.Iu=new Map,this.Eu=new Set,this.Ru=new Nt(Ae.comparator),this.Au=new Map,this.Vu=new zf,this.du={},this.mu=new Map,this.fu=qo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _A(n,e,t=!0){const s=tE(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Yw(s,e,t,!0),o}async function wA(n,e){const t=tE(n);await Yw(t,e,!0,!1)}async function Yw(n,e,t,s){const o=await FR(n.localStore,jr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await EA(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&Fw(n.remoteStore,o),f}async function EA(n,e,t,s,o){n.pu=(E,T,V)=>(async function(F,O,H,Y){let ee=O.view.ru(H);ee.Ss&&(ee=await Qy(F.localStore,O.query,!1).then((({documents:x})=>O.view.ru(x,ee))));const ue=Y&&Y.targetChanges.get(O.targetId),re=Y&&Y.targetMismatches.get(O.targetId)!=null,se=O.view.applyChanges(ee,F.isPrimaryClient,ue,re);return iv(F,O.targetId,se.au),se.snapshot})(n,E,T,V);const l=await Qy(n.localStore,e,!0),c=new mA(e,l.ks),f=c.ru(l.documents),p=Il.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),m=c.applyChanges(f,n.isPrimaryClient,p);iv(n,t,m.au);const _=new gA(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function TA(n,e,t){const s=Be(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!Vc(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await rf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Hf(s.remoteStore,o.targetId),af(s,o.targetId)})).catch(ea)):(af(s,o.targetId),await rf(s.localStore,o.targetId,!0))}async function IA(n,e){const t=Be(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Hf(t.remoteStore,s.targetId))}async function SA(n,e,t){const s=NA(n);try{const o=await(function(c,f){const p=Be(c),m=Et.now(),_=f.reduce(((V,U)=>V.add(U.key)),Xe());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let U=ps(),F=Xe();return p.xs.getEntries(V,_).next((O=>{U=O,U.forEach(((H,Y)=>{Y.isValidDocument()||(F=F.add(H))}))})).next((()=>p.localDocuments.getOverlayedDocuments(V,U))).next((O=>{E=O;const H=[];for(const Y of f){const ee=jk(Y,E.get(Y.key).overlayedDocument);ee!=null&&H.push(new ri(Y.key,ee,ew(ee.value.mapValue),Fr.exists(!0)))}return p.mutationQueue.addMutationBatch(V,m,H,f)})).next((O=>{T=O;const H=O.applyToLocalDocumentSet(E,F);return p.documentOverlayCache.saveOverlays(V,O.batchId,H)}))})).then((()=>({batchId:T.batchId,changes:hw(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,f,p){let m=c.du[c.currentUser.toKey()];m||(m=new Nt(Je)),m=m.insert(f,p),c.du[c.currentUser.toKey()]=m})(s,o.batchId,t),await Cl(s,o.changes),await zc(s.remoteStore)}catch(o){const l=Yf(o,"Failed to persist write");t.reject(l)}}async function Jw(n,e){const t=Be(n);try{const s=await LR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(ot(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?ot(c.hu,14607):o.removedDocuments.size>0&&(ot(c.hu,42227),c.hu=!1))})),await Cl(t,s,e)}catch(s){await ea(s)}}function sv(n,e,t){const s=Be(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const p=Be(c);p.onlineState=f;let m=!1;p.queries.forEach(((_,E)=>{for(const T of E.ba)T.va(f)&&(m=!0)})),m&&Jf(p)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function CA(n,e,t){const s=Be(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new Nt(Ae.comparator);c=c.insert(l,vn.newNoDocument(l,Fe.min()));const f=Xe().add(l),p=new jc(Fe.min(),new Map,new Nt(Je),c,f);await Jw(s,p),s.Ru=s.Ru.remove(l),s.Au.delete(e),Zf(s)}else await rf(s.localStore,e,!1).then((()=>af(s,e,t))).catch(ea)}async function kA(n,e){const t=Be(n),s=e.batch.batchId;try{const o=await OR(t.localStore,e);Zw(t,s,null),Xw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Cl(t,o)}catch(o){await ea(o)}}async function RA(n,e,t){const s=Be(n);try{const o=await(function(c,f){const p=Be(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let _;return p.mutationQueue.lookupMutationBatch(m,f).next((E=>(ot(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(m,E)))).next((()=>p.mutationQueue.performConsistencyCheck(m))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(m,_,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,_))).next((()=>p.localDocuments.getDocuments(m,_)))}))})(s.localStore,e);Zw(s,e,t),Xw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Cl(s,o)}catch(o){await ea(o)}}function Xw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Zw(n,e,t){const s=Be(n);let o=s.du[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function af(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((s=>{n.Vu.containsKey(s)||eE(n,s)}))}function eE(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Hf(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Zf(n))}function iv(n,e,t){for(const s of t)s instanceof Kw?(n.Vu.addReference(s.key,e),AA(n,s)):s instanceof Qw?(Ee(Xf,"Document no longer in limbo: "+s.key),n.Vu.removeReference(s.key,e),n.Vu.containsKey(s.key)||eE(n,s.key)):Oe(19791,{wu:s})}function AA(n,e){const t=e.key,s=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(s)||(Ee(Xf,"New document in limbo: "+t),n.Eu.add(s),Zf(n))}function Zf(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ae(mt.fromString(e)),s=n.fu.next();n.Au.set(s,new yA(t)),n.Ru=n.Ru.insert(t,s),Fw(n.remoteStore,new zs(jr(Dc(t.path)),s,"TargetPurposeLimboResolution",xc.ce))}}async function Cl(n,e,t){const s=Be(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,p)=>{c.push(s.pu(p,e,t).then((m=>{var _;if((m||t)&&s.isPrimaryClient){const E=m?!m.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(m){o.push(m);const E=$f.Es(p.targetId,m);l.push(E)}})))})),await Promise.all(c),s.Pu.J_(o),await(async function(p,m){const _=Be(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>te.forEach(m,(T=>te.forEach(T.Ts,(V=>_.persistence.referenceDelegate.addReference(E,T.targetId,V))).next((()=>te.forEach(T.Is,(V=>_.persistence.referenceDelegate.removeReference(E,T.targetId,V)))))))))}catch(E){if(!ta(E))throw E;Ee(Wf,"Failed to update sequence numbers: "+E)}for(const E of m){const T=E.targetId;if(!E.fromCache){const V=_.vs.get(T),U=V.snapshotVersion,F=V.withLastLimboFreeSnapshotVersion(U);_.vs=_.vs.insert(T,F)}}})(s.localStore,l))}async function PA(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Ee(Xf,"User change. New user:",e.toKey());const s=await Ow(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new _e(Z.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Cl(t,s.Ns)}}function xA(n,e){const t=Be(n),s=t.Au.get(e);if(s&&s.hu)return Xe().add(s.key);{let o=Xe();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const f=t.Tu.get(c);o=o.unionWith(f.view.nu)}return o}}function tE(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CA.bind(null,e),e.Pu.J_=fA.bind(null,e.eventManager),e.Pu.yu=pA.bind(null,e.eventManager),e}function NA(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RA.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return VR(this.persistence,new NR,e.initialUser,this.serializer)}Cu(e){return new Vw(Bf.Vi,this.serializer)}Du(e){return new zR}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class bA extends vc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ot(this.persistence.referenceDelegate instanceof gc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new gR(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new Vw((s=>gc.Vi(s,t)),this.serializer)}}class lf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>sv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=PA.bind(null,this.syncEngine),await cA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new dA})()}createDatastore(e){const t=Fc(e.databaseInfo.databaseId),s=qR(e.databaseInfo);return JR(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,f){return new ZR(s,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>sv(this.syncEngine,t,0)),(function(){return Xy.v()?new Xy:new BR})())}createSyncEngine(e,t){return(function(o,l,c,f,p,m,_){const E=new vA(o,l,c,f,p,m);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Be(o);Ee(Bi,"RemoteStore shutting down."),l.Ea.add(5),await Sl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}lf.provider={build:()=>new lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="FirestoreClient";class DA{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=o,this.user=yn.UNAUTHENTICATED,this.clientId=Nf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{Ee(ei,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(Ee(ei,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Yf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Nd(n,e){n.asyncQueue.verifyOperationInProgress(),Ee(ei,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Ow(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function ov(n,e){n.asyncQueue.verifyOperationInProgress();const t=await VA(n);Ee(ei,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>ev(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>ev(e.remoteStore,o))),n._onlineComponents=e}async function VA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ee(ei,"Using user provided OfflineComponentProvider");try{await Nd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;zi("Error using user provided cache. Falling back to memory cache: "+t),await Nd(n,new vc)}}else Ee(ei,"Using default OfflineComponentProvider"),await Nd(n,new bA(void 0));return n._offlineComponents}async function rE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ee(ei,"Using user provided OnlineComponentProvider"),await ov(n,n._uninitializedComponentsProvider._online)):(Ee(ei,"Using default OnlineComponentProvider"),await ov(n,new lf))),n._onlineComponents}function OA(n){return rE(n).then((e=>e.syncEngine))}async function uf(n){const e=await rE(n),t=e.eventManager;return t.onListen=_A.bind(null,e.syncEngine),t.onUnlisten=TA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=wA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=IA.bind(null,e.syncEngine),t}function LA(n,e,t,s){const o=new nE(s),l=new Gw(e,o,t);return n.asyncQueue.enqueueAndForget((async()=>Hw(await uf(n),l))),()=>{o.Nu(),n.asyncQueue.enqueueAndForget((async()=>qw(await uf(n),l)))}}function MA(n,e,t={}){const s=new Gs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,p,m){const _=new nE({next:T=>{_.Nu(),c.enqueueAndForget((()=>qw(l,E)));const V=T.docs.has(f);!V&&T.fromCache?m.reject(new _e(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&T.fromCache&&p&&p.source==="server"?m.reject(new _e(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(T)},error:T=>m.reject(T)}),E=new Gw(Dc(f.path),_,{includeMetadataChanges:!0,Ka:!0});return Hw(l,E)})(await uf(n),n.asyncQueue,e,t,s))),s.promise}function jA(n,e){const t=new Gs;return n.asyncQueue.enqueueAndForget((async()=>SA(await OA(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="ComponentProvider",av=new Map;function UA(n,e,t,s,o){return new ok(n,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,sE(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="firestore.googleapis.com",lv=!0;class uv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new _e(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=iE,this.ssl=lv}else this.host=e.host,this.ssl=e.ssl??lv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Dw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pR)throw new _e(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}K1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new _e(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new _e(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new _e(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new uv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new uv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new j1;switch(s.type){case"firstParty":return new B1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new _e(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=av.get(t);s&&(Ee(FA,"Removing Datastore"),av.delete(t),s.terminate())})(this),Promise.resolve()}}function zA(n,e,t,s={}){var m;n=Mr(n,Bc);const o=Yo(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(Jv(`https://${f}`),Xv("Firestore",!0)),l.host!==iE&&l.host!==f&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:o,emulatorOptions:s};if(!cs(p,c)&&(n._setSettings(p),s.mockUserToken)){let _,E;if(typeof s.mockUserToken=="string")_=s.mockUserToken,E=yn.MOCK_USER;else{_=aI(s.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new _e(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new yn(T)}n._authCredentials=new F1(new B_(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new si(this.firestore,e,this._query)}}class Vt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}toJSON(){return{type:Vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(El(t,Vt._jsonSchema))return new Vt(e,s||null,new Ae(mt.fromString(t.referencePath)))}}Vt._jsonSchemaVersion="firestore/documentReference/1.0",Vt._jsonSchema={type:$t("string",Vt._jsonSchemaVersion),referencePath:$t("string")};class Ks extends si{constructor(e,t,s){super(e,t,Dc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new Ae(e))}withConverter(e){return new Ks(this.firestore,e,this._path)}}function BA(n,e,...t){if(n=Zt(n),$_("collection","path",e),n instanceof Bc){const s=mt.fromString(e,...t);return Ty(s),new Ks(n,null,s)}{if(!(n instanceof Vt||n instanceof Ks))throw new _e(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(mt.fromString(e,...t));return Ty(s),new Ks(n.firestore,null,s)}}function zu(n,e,...t){if(n=Zt(n),arguments.length===1&&(e=Nf.newId()),$_("doc","path",e),n instanceof Bc){const s=mt.fromString(e,...t);return Ey(s),new Vt(n,null,new Ae(s))}{if(!(n instanceof Vt||n instanceof Ks))throw new _e(Z.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(mt.fromString(e,...t));return Ey(s),new Vt(n.firestore,n instanceof Ks?n.converter:null,new Ae(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="AsyncQueue";class hv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Mw(this,"async_queue_retry"),this._c=()=>{const s=xd();s&&Ee(cv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=xd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=xd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Gs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ta(e))throw e;Ee(cv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,fs("INTERNAL UNHANDLED ERROR: ",dv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Qf.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Oe(47125,{Pc:dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function dv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ko extends Bc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new hv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new hv(e),this._firestoreClient=void 0,await e}}}function $A(n,e){const t=typeof n=="object"?n:n_(),s=typeof n=="string"?n:uc,o=_f(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=iI("firestore");l&&zA(o,...l)}return o}function ep(n){if(n._terminated)throw new _e(Z.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||WA(n),n._firestoreClient}function WA(n){var s,o,l,c;const e=n._freezeSettings(),t=UA(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,(o=n._app)==null?void 0:o.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new DA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const m=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(m),_online:m}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new tr(an.fromBase64String(e))}catch(t){throw new _e(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new tr(an.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(El(e,tr._jsonSchema))return tr.fromBase64String(e.bytes)}}tr._jsonSchemaVersion="firestore/bytes/1.0",tr._jsonSchema={type:$t("string",tr._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Je(this._lat,e._lat)||Je(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zr._jsonSchemaVersion}}static fromJSON(e){if(El(e,zr._jsonSchema))return new zr(e.latitude,e.longitude)}}zr._jsonSchemaVersion="firestore/geoPoint/1.0",zr._jsonSchema={type:$t("string",zr._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:mr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(El(e,mr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new mr(e.vectorValues);throw new _e(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mr._jsonSchemaVersion="firestore/vectorValue/1.0",mr._jsonSchema={type:$t("string",mr._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA=/^__.*__$/;class qA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ri(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}class oE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ri(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function aE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Oe(40011,{dataSource:n})}}class $c{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new $c({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return _c(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(aE(this.dataSource)&&HA.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class GA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Fc(e)}createContext(e,t,s,o=!1){return new $c({dataSource:e,methodName:t,targetDoc:s,path:on.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function np(n){const e=n._freezeSettings(),t=Fc(n._databaseId);return new GA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function KA(n,e,t,s,o,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,o);ip("Data must be an object, but it was:",c,s);const f=uE(s,c);let p,m;if(l.merge)p=new Wn(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const T=Qo(e,E,t);if(!c.contains(T))throw new _e(Z.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);dE(_,T)||_.push(T)}p=new Wn(_),m=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,m=c.fieldTransforms;return new qA(new Dn(f),p,m)}class Wc extends kl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wc}}function lE(n,e,t){return new $c({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rp extends kl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=lE(this,e,!0),s=this.Ac.map((l=>Gi(l,t))),o=new Wo(s);return new vw(e.path,o)}isEqual(e){return e instanceof rp&&cs(this.Ac,e.Ac)}}class sp extends kl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=lE(this,e,!0),s=this.Ac.map((l=>Gi(l,t))),o=new Ho(s);return new vw(e.path,o)}isEqual(e){return e instanceof sp&&cs(this.Ac,e.Ac)}}function QA(n,e,t,s){const o=n.createContext(1,e,t);ip("Data must be an object, but it was:",o,s);const l=[],c=Dn.empty();ni(s,((p,m)=>{const _=hE(e,p,t);m=Zt(m);const E=o.childContextForFieldPath(_);if(m instanceof Wc)l.push(_);else{const T=Gi(m,E);T!=null&&(l.push(_),c.set(_,T))}}));const f=new Wn(l);return new oE(c,f,o.fieldTransforms)}function YA(n,e,t,s,o,l){const c=n.createContext(1,e,t),f=[Qo(e,s,t)],p=[o];if(l.length%2!=0)throw new _e(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)f.push(Qo(e,l[T])),p.push(l[T+1]);const m=[],_=Dn.empty();for(let T=f.length-1;T>=0;--T)if(!dE(m,f[T])){const V=f[T];let U=p[T];U=Zt(U);const F=c.childContextForFieldPath(V);if(U instanceof Wc)m.push(V);else{const O=Gi(U,F);O!=null&&(m.push(V),_.set(V,O))}}const E=new Wn(m);return new oE(_,E,c.fieldTransforms)}function JA(n,e,t,s=!1){return Gi(t,n.createContext(s?4:3,e))}function Gi(n,e){if(cE(n=Zt(n)))return ip("Unsupported field value:",e,n),uE(n,e);if(n instanceof kl)return(function(s,o){if(!aE(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const f of s){let p=Gi(f,o.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=Zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return bk(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Et.fromDate(s);return{timestampValue:mc(o.serializer,l)}}if(s instanceof Et){const l=new Et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:mc(o.serializer,l)}}if(s instanceof zr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof tr)return{bytesValue:Cw(o.serializer,s._byteString)};if(s instanceof Vt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Uf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof mr)return(function(c,f){const p=c instanceof mr?c.toArray():c;return{mapValue:{fields:{[X_]:{stringValue:Z_},[cc]:{arrayValue:{values:p.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return Mf(f.serializer,_)}))}}}}}})(s,o);if(bw(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Pc(s)}`)})(n,e)}function uE(n,e){const t={};return q_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ni(n,((s,o)=>{const l=Gi(o,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function cE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof zr||n instanceof tr||n instanceof Vt||n instanceof kl||n instanceof mr||bw(n))}function ip(n,e,t){if(!cE(t)||!W_(t)){const s=Pc(t);throw s==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+s)}}function Qo(n,e,t){if((e=Zt(e))instanceof tp)return e._internalPath;if(typeof e=="string")return hE(n,e);throw _c("Field path arguments must be of type string or ",n,!1,void 0,t)}const XA=new RegExp("[~\\*/\\[\\]]");function hE(n,e,t){if(e.search(XA)>=0)throw _c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tp(...e.split("."))._internalPath}catch{throw _c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _c(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new _e(Z.INVALID_ARGUMENT,f+n+p)}function dE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{convertValue(e,t="none"){switch(Xs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Oe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ni(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[cc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>Mt(c.doubleValue)));return new mr(t)}convertGeoPoint(e){return new zr(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=bc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(cl(e));default:return null}}convertTimestamp(e){const t=Ys(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=mt.fromString(e);ot(Nw(s),9688,{name:e});const o=new hl(s.get(1),s.get(3)),l=new Ae(s.popFirst(5));return o.isEqual(t)||fs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE extends ZA{constructor(e){super(),this.firestore=e}convertBytes(e){return new tr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}}function eP(...n){return new rp("arrayUnion",n)}function tP(...n){return new sp("arrayRemove",n)}const fv="@firebase/firestore",pv="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new nP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Qo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class nP extends pE{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class ap extends op{}function sP(n,e,...t){let s=[];e instanceof op&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((p=>p instanceof up)).length,f=l.filter((p=>p instanceof lp)).length;if(c>1||c>0&&f>0)throw new _e(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class lp extends ap{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new lp(e,t,s)}_apply(e){const t=this._parse(e);return mE(e._query,t),new si(e.firestore,e.converter,Xd(e._query,t))}_parse(e){const t=np(e.firestore);return(function(l,c,f,p,m,_,E){let T;if(m.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new _e(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){yv(E,_);const U=[];for(const F of E)U.push(gv(p,l,F));T={arrayValue:{values:U}}}else T=gv(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||yv(E,_),T=JA(f,c,E,_==="in"||_==="not-in");return Bt.create(m,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class up extends op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new up(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:gr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const f=l.getFlattenedFilters();for(const p of f)mE(c,p),c=Xd(c,p)})(e._query,t),new si(e.firestore,e.converter,Xd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cp extends ap{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cp(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new _e(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new _e(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fl(l,c)})(e._query,this._field,this._direction);return new si(e.firestore,e.converter,Sk(e._query,t))}}function iP(n,e="asc"){const t=e,s=Qo("orderBy",n);return cp._create(s,t)}class hp extends ap{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new hp(e,t,s)}_apply(e){return new si(e.firestore,e.converter,dc(e._query,this._limit,this._limitType))}}function oP(n){return Q1("limit",n),hp._create("limit",n,"F")}function gv(n,e,t){if(typeof(t=Zt(t))=="string"){if(t==="")throw new _e(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aw(e)&&t.indexOf("/")!==-1)throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(mt.fromString(t));if(!Ae.isDocumentKey(s))throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return xy(n,new Ae(s))}if(t instanceof Vt)return xy(n,t._key);throw new _e(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pc(t)}.`)}function yv(n,e){if(!Array.isArray(n)||n.length===0)throw new _e(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function mE(n,e){const t=(function(o,l){for(const c of o)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new _e(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new _e(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function aP(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Ja{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mi extends pE{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Qo("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Mi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mi._jsonSchema={type:$t("string",Mi._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class Xu extends Mi{data(e={}){return super.data(e)}}class jo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ja(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Xu(this._firestore,this._userDataWriter,s.key,s,new Ja(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const p=new Xu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ja(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new Xu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ja(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,_=-1;return f.type!==0&&(m=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:lP(f.type),doc:p,oldIndex:m,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new _e(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=jo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function lP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Oe(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jo._jsonSchemaVersion="firestore/querySnapshot/1.0",jo._jsonSchema={type:$t("string",jo._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vv(n){n=Mr(n,Vt);const e=Mr(n.firestore,Ko),t=ep(e);return MA(t,n._key).then((s=>vE(e,n,s)))}function bd(n,e,t){n=Mr(n,Vt);const s=Mr(n.firestore,Ko),o=aP(n.converter,e),l=np(s);return yE(s,[KA(l,"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Fr.none())])}function Bu(n,e,t,...s){n=Mr(n,Vt);const o=Mr(n.firestore,Ko),l=np(o);let c;return c=typeof(e=Zt(e))=="string"||e instanceof tp?YA(l,"updateDoc",n._key,e,t,s):QA(l,"updateDoc",n._key,e),yE(o,[c.toMutation(n._key,Fr.exists(!0))])}function gE(n,...e){var m,_,E;n=Zt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||mv(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(mv(e[s])){const T=e[s];e[s]=(m=T.next)==null?void 0:m.bind(T),e[s+1]=(_=T.error)==null?void 0:_.bind(T),e[s+2]=(E=T.complete)==null?void 0:E.bind(T)}let l,c,f;if(n instanceof Vt)c=Mr(n.firestore,Ko),f=Dc(n._key.path),l={next:T=>{e[s]&&e[s](vE(c,n,T))},error:e[s+1],complete:e[s+2]};else{const T=Mr(n,si);c=Mr(T.firestore,Ko),f=T._query;const V=new fE(c);l={next:U=>{e[s]&&e[s](new jo(c,V,T,U))},error:e[s+1],complete:e[s+2]},rP(n._query)}const p=ep(c);return LA(p,f,o,l)}function yE(n,e){const t=ep(n);return jA(t,e)}function vE(n,e,t){const s=t.docs.get(e._key),o=new fE(n);return new Mi(n,o,e._key,s,new Ja(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){M1(Jo),Fo(new ji("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new Ko(new U1(s.getProvider("auth-internal")),new $1(c,s.getProvider("app-check-internal")),ak(c,o),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Hs(fv,pv,e),Hs(fv,pv,"esm2020")})();const uP={apiKey:"AIzaSyA8xoktIzGgpPEklg_e_vWgkMU6E3Bjlkw",authDomain:"color-73b3e.firebaseapp.com",projectId:"color-73b3e",storageBucket:"color-73b3e.firebasestorage.app",messagingSenderId:"450293394727",appId:"1:450293394727:web:8486e1ff4d1c083275cd02"},_E=t_(uP),Dd=D1(_E),Xa=$A(_E),cP=new as,wE=R.createContext({user:null,loading:!0,signIn:async()=>{},signOut:async()=>{}});function hP({children:n}){const[e,t]=R.useState(null),[s,o]=R.useState(!0);R.useEffect(()=>EC(Dd,f=>{t(f),o(!1)}),[]);const l=async()=>{await BC(Dd,cP)},c=async()=>{await TC(Dd)};return I.jsx(wE.Provider,{value:{user:e,loading:s,signIn:l,signOut:c},children:n})}function EE(){return R.useContext(wE)}const dp="/4color/";function cf(n,e){return Array.from({length:n},()=>Array.from({length:e},()=>({value:null,notes:[],fixedValue:null,fixedColor:null,borders:[0,0,0,0],fixedBorders:[0,0,0,0],color:null,label:null,crossed:!1,mark:null,selected:!1,image:null})))}function dP(n,e){var f;const t=new Map;let s=0;for(const p of n)for(const m of p)m.image&&!t.has(m.image)&&t.set(m.image,`img${s++}`);const o=[];for(let p=0;p<n.length;p++)for(let m=0;m<n[p].length;m++){const _=n[p][m],E=_.borders.some(T=>T>0);if(_.fixedValue||_.fixedColor||_.color||E||_.label||_.crossed||_.mark||_.image){const T={row:p,col:m};_.fixedValue&&(T.fixedValue=_.fixedValue),_.fixedColor&&(T.fixedColor=_.fixedColor),_.color&&(T.color=_.color),E&&(T.borders=_.borders),_.label&&(T.label=_.label),_.crossed&&(T.crossed=_.crossed),_.mark&&(T.mark=_.mark),_.image&&(T.image=t.get(_.image)),o.push(T)}}const l={};for(const[p,m]of t)l[m]=p;const c={...e,gridSize:{rows:n.length,cols:n[0].length},cells:o,rules:e.rules,clues:e.clues,createdAt:new Date().toISOString().split("T")[0]};return Object.keys(l).length>0&&(c.images=l),(f=e.autoCrossRules)!=null&&f.length&&(c.autoCrossRules=e.autoCrossRules),e.forcedInputLayout&&(c.forcedInputLayout=e.forcedInputLayout),c}function hf(n){const e=cf(n.gridSize.rows,n.gridSize.cols),t=n.images||{};for(const s of n.cells)s.fixedValue&&(e[s.row][s.col].fixedValue=s.fixedValue),s.fixedColor&&(e[s.row][s.col].fixedColor=s.fixedColor),s.color&&(e[s.row][s.col].color=s.color),s.borders&&(e[s.row][s.col].borders=s.borders,e[s.row][s.col].fixedBorders=[...s.borders]),s.label&&(e[s.row][s.col].label=s.label),s.crossed&&(e[s.row][s.col].crossed=s.crossed),s.mark&&(e[s.row][s.col].mark=s.mark),s.image&&(e[s.row][s.col].image=t[s.image]??s.image);return e}function fP(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`${n.id}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(s),1e3)}async function fp(){const n=await fetch(`${dp}puzzles/index.json`);return n.ok?n.json():[]}function pP(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`${n.id}-solution.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(s),1e3)}async function TE(n){try{const e=await fetch(`${dp}puzzles/solutions/${n}-solution.json`);if(!e.ok)return null;const t=await e.text();return JSON.parse(t)}catch{return null}}async function IE(n){const t=(await fp()).find(l=>l.id===n),s=(t==null?void 0:t.file)??`${n}.json`,o=await fetch(`${dp}puzzles/${s}`);return o.ok?o.json():null}const _v="4color-theme";function pp(){const[n,e]=R.useState(()=>{const s=localStorage.getItem(_v);return s==="dark"||s==="light"?s:"light"});return R.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),localStorage.setItem(_v,n)},[n]),{theme:n,toggle:()=>e(s=>s==="light"?"dark":"light")}}function SE(){const{user:n}=EE(),[e,t]=R.useState(new Set),[s,o]=R.useState(new Map),[l,c]=R.useState(""),f=R.useRef(e);f.current=e;const p=R.useRef(s);p.current=s,R.useEffect(()=>{if(!n){t(new Set),c("");return}const T=zu(Xa,"completions_index",n.uid);return gE(T,V=>{if(V.exists()){const U=V.data(),F=U.puzzleIds||[];t(new Set(F)),c(U.displayName||n.displayName||"");const O=U.times||{};o(new Map(Object.entries(O))),U.count!==F.length&&Bu(T,{count:F.length}).catch(()=>{})}else t(new Set),o(new Map),c(n.displayName||"")},()=>{t(new Set),o(new Map),c(n.displayName||"")})},[n]);const m=R.useCallback(async(T,V)=>{if(!n||f.current.has(T))return;const U=zu(Xa,"completions_index",n.uid);try{const F=await vv(U);if(F.exists()){const O=F.data(),H=O.puzzleIds||[];if(H.includes(T))return;const Y={puzzleIds:eP(T),count:H.length+1};V!=null&&!(O.times&&O.times[T])&&(Y[`times.${T}`]=V),await Bu(U,Y)}else{const O=n.displayName||"Anonymous",H={uid:n.uid,puzzleIds:[T],count:1,displayName:O};V!=null&&(H.times={[T]:V}),await bd(U,H)}}catch{const F=n.displayName||"Anonymous",O={uid:n.uid,puzzleIds:[T],count:1,displayName:F};V!=null&&(O.times={[T]:V}),await bd(U,O).catch(()=>{})}},[n]),_=R.useCallback(async T=>{if(!n||!f.current.has(T))return;const V=zu(Xa,"completions_index",n.uid);try{const U=await vv(V);if(U.exists()){const F=U.data().puzzleIds||[],O=Math.max(0,F.filter(H=>H!==T).length);await Bu(V,{puzzleIds:tP(T),count:O})}}catch{}},[n]),E=R.useCallback(async T=>{if(!n)return;const V=T.trim();if(!V)return;const U=zu(Xa,"completions_index",n.uid);try{await Bu(U,{displayName:V})}catch{await bd(U,{uid:n.uid,puzzleIds:[],count:0,displayName:V})}},[n]);return{completedPuzzleIds:e,completionTimes:s,displayName:l,setDisplayName:E,markCompleted:m,unmarkCompleted:_}}function mp(n){const e=Math.floor(n/1e3),t=Math.floor(e/3600),s=Math.floor(e%3600/60),o=e%60;return t>0?`${t}:${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`:`${s}:${String(o).padStart(2,"0")}`}function mP(n=10){const[e,t]=R.useState([]);return R.useEffect(()=>{const s=sP(BA(Xa,"completions_index"),iP("count","desc"),oP(n));return gE(s,o=>{const l=[];o.forEach(c=>{const f=c.data();f.count>0&&l.push({uid:c.id,displayName:f.displayName||"Anonymous",count:f.count})}),t(l)},()=>{t([])})},[n]),e}function gp(){const[n,e]=R.useState({open:!1,message:"",hasCancel:!1}),t=R.useRef(null),s=R.useCallback(f=>{var p;e(m=>({...m,open:!1})),(p=t.current)==null||p.call(t,f),t.current=null},[]),o=R.useCallback((f,p)=>new Promise(m=>{var _;(_=t.current)==null||_.call(t,!1),t.current=()=>m(),e({open:!0,message:f,title:p,hasCancel:!1})}),[]),l=R.useCallback((f,p,m,_)=>new Promise(E=>{var T;(T=t.current)==null||T.call(t,!1),t.current=E,e({open:!0,message:f,title:p,confirmLabel:m,cancelLabel:_,hasCancel:!0})}),[]);return{modalProps:{open:n.open,title:n.title,message:n.message,confirmLabel:n.confirmLabel,cancelLabel:n.cancelLabel,onConfirm:()=>s(!0),onCancel:n.hasCancel?()=>s(!1):void 0},showAlert:o,showConfirm:l}}function wc({open:n,title:e,message:t,confirmLabel:s="OK",cancelLabel:o="Cancel",onConfirm:l,onCancel:c}){const f=R.useCallback(()=>{c?c():l()},[c,l]);return R.useEffect(()=>{if(!n)return;const p=m=>{m.key==="Escape"&&f()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[n,f]),n?I.jsx("div",{className:"modal-backdrop",onMouseDown:f,children:I.jsxs("div",{className:"modal-card",onMouseDown:p=>p.stopPropagation(),children:[e&&I.jsx("h3",{className:"modal-title",children:e}),I.jsx("p",{className:"modal-message",children:t}),I.jsxs("div",{className:"modal-actions",children:[c&&I.jsx("button",{className:"modal-btn",onClick:c,children:o}),I.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:l,children:s})]})]})}):null}const wv=[{code:"",label:"English"},{code:"fr",label:"Franais"},{code:"es",label:"Espaol"},{code:"de",label:"Deutsch"},{code:"pt",label:"Portugus"},{code:"it",label:"Italiano"},{code:"nl",label:"Nederlands"},{code:"ru",label:""},{code:"ja",label:""},{code:"ko",label:""},{code:"zh-CN",label:""},{code:"ar",label:""},{code:"hi",label:""},{code:"pl",label:"Polski"},{code:"tr",label:"Trke"},{code:"sv",label:"Svenska"}];function gP(){return document.querySelector("#google_translate_element select")}function yP(){const n=document.cookie.match(/googtrans=\/en\/([^;]+)/);return n?n[1]:""}function vP(n){const e=gP();if(e){if(!n){document.cookie="googtrans=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC",document.cookie="googtrans=; path=/; domain="+window.location.hostname+"; expires=Thu, 01 Jan 1970 00:00:00 UTC",e.value="",e.dispatchEvent(new Event("change")),window.location.reload();return}e.value=n,e.dispatchEvent(new Event("change"))}}function Ec(){var _;const[n,e]=R.useState(yP),[t,s]=R.useState(!1),o=R.useRef(null),l=R.useRef(null),c=R.useRef(null),[f,p]=R.useState(null);R.useEffect(()=>{const E=T=>{const V=T.target;o.current&&!o.current.contains(V)&&(!l.current||!l.current.contains(V))&&s(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),R.useEffect(()=>{if(t&&c.current){const E=c.current.getBoundingClientRect();p({top:E.bottom+4,right:window.innerWidth-E.right})}},[t]);const m=((_=wv.find(E=>E.code===n))==null?void 0:_.label)||"English";return I.jsxs("div",{className:"lang-picker notranslate",ref:o,children:[I.jsx("button",{ref:c,className:"lang-picker-btn",onClick:()=>s(E=>!E),title:"Change language",children:m}),t&&f&&G0.createPortal(I.jsx("div",{ref:l,className:"lang-picker-menu",style:{position:"fixed",top:f.top,right:f.right,zIndex:9999},children:wv.map(E=>I.jsx("button",{className:`lang-picker-item${E.code===n?" active":""}`,onClick:()=>{e(E.code),vP(E.code),s(!1)},children:E.label},E.code))}),document.body)]})}function _P(){const n=new URLSearchParams(window.location.hash.split("?")[1]||"").get("debug")==="true",{theme:e,toggle:t}=pp(),{user:s,signIn:o,signOut:l}=EE(),{completedPuzzleIds:c,completionTimes:f,displayName:p,setDisplayName:m}=SE(),_=mP(10),{modalProps:E,showConfirm:T}=gp(),[V,U]=R.useState(!1),[F,O]=R.useState(""),[H,Y]=R.useState([]),[ee,ue]=R.useState(!0),[re,se]=R.useState(new Set),[x,k]=R.useState("or"),[A,L]=R.useState(new Set),[S,b]=R.useState(!1);R.useEffect(()=>{fp().then(J=>{Y(J),ue(!1)})},[]);const P=R.useMemo(()=>{const J=new Set;for(const X of H)for(const D of X.tags||[])J.add(D);return[...J].sort()},[H]),Ie=R.useMemo(()=>{const J=["Very easy","Easy","Medium","Hard","Very hard"],X=new Set;for(const K of H)K.difficulty&&X.add(K.difficulty);const D=J.filter(K=>X.has(K));for(const K of X)D.includes(K)||D.push(K);return D},[H]),Le=R.useMemo(()=>{let J=H;return re.size>0&&(J=J.filter(X=>{const D=X.tags||[];return x==="or"?D.some(K=>re.has(K)):[...re].every(K=>D.includes(K))})),A.size>0&&(J=J.filter(X=>X.difficulty!=null&&A.has(X.difficulty))),S&&(J=J.filter(X=>!c.has(X.id))),J},[H,re,x,A,S,c]),et=R.useMemo(()=>{const J=["Very easy","Easy","Medium","Hard","Very hard"],X=[],D=new Map;for(const K of Le){const ke=K.difficulty||"Unrated";D.has(ke)||D.set(ke,[]),D.get(ke).push(K)}for(const K of J)D.has(K)&&(X.push({difficulty:K,puzzles:D.get(K)}),D.delete(K));for(const[K,ke]of D)X.push({difficulty:K,puzzles:ke});return X},[Le]),ye=J=>{se(X=>{const D=new Set(X);return D.has(J)?D.delete(J):D.add(J),D})},ne=J=>{L(X=>{const D=new Set(X);return D.has(J)?D.delete(J):D.add(J),D})};return I.jsxs("div",{className:"puzzle-list-layout",children:[I.jsxs("aside",{className:"puzzle-list-sidebar",children:[I.jsx("div",{className:"sidebar-section",children:s?I.jsx("button",{className:"auth-btn auth-btn-full notranslate",onClick:()=>{O(p),U(!0)},children:p||s.displayName||"User"}):I.jsx("button",{className:"auth-btn auth-btn-full",onClick:o,children:"Sign in with Google"})}),I.jsxs("div",{className:"sidebar-section",children:[I.jsx("h3",{className:"sidebar-title",children:"Leaderboard"}),_.length===0?I.jsx("p",{className:"sidebar-empty",children:"No completions yet"}):I.jsx("ol",{className:"leaderboard-list",children:_.map((J,X)=>I.jsxs("li",{className:`leaderboard-entry${s&&J.uid===s.uid?" leaderboard-self":""}`,children:[I.jsxs("span",{className:"leaderboard-rank",children:[X+1,"."]}),I.jsx("span",{className:"leaderboard-name notranslate",children:J.displayName}),I.jsx("span",{className:"leaderboard-count",children:J.count})]},J.uid))})]}),I.jsx("div",{className:"sidebar-spacer"})]}),I.jsxs("div",{className:"puzzle-list-main",children:[I.jsxs("div",{className:"puzzle-list-topbar",children:[I.jsx("span",{className:"discord-link notranslate",title:"Click to copy Discord username",onClick:()=>{navigator.clipboard.writeText("pmlemay"),alert("Copied pmlemay to clipboard!")},children:"Contact me on Discord : pmlemay"}),I.jsx(Ec,{}),I.jsx("button",{className:"puzzle-list-theme-btn",onClick:t,title:"Toggle theme",children:e==="light"?"":""})]}),I.jsx("div",{className:"puzzle-list-header",children:I.jsx("h1",{children:"4Color Puzzles"})}),I.jsx("div",{className:"puzzle-list-actions",children:I.jsx(Di,{to:"/edit",className:"new-puzzle-btn",children:"Create New Puzzle"})}),(P.length>0||Ie.length>0)&&I.jsxs("div",{className:"filter-bars",children:[I.jsxs("div",{className:"tag-filter-bar",children:[c.size>0&&I.jsxs(I.Fragment,{children:[I.jsx("button",{className:`tag-chip${S?" selected":""}`,onClick:()=>b(J=>!J),children:"Hide completed"}),Ie.length>0&&I.jsx("span",{className:"filter-separator",children:"|"})]}),Ie.map(J=>I.jsx("button",{className:`tag-chip difficulty${A.has(J)?" selected":""}`,onClick:()=>ne(J),children:J},J))]}),P.length>0&&I.jsxs("div",{className:"tag-filter-bar",children:[P.map(J=>I.jsx("button",{className:`tag-chip${re.has(J)?" selected":""}`,onClick:()=>ye(J),children:J},J)),re.size>=2&&I.jsx("button",{className:"tag-mode-toggle",onClick:()=>k(J=>J==="or"?"and":"or"),title:x==="or"?"Showing puzzles matching ANY tag":"Showing puzzles matching ALL tags",children:x.toUpperCase()})]})]}),ee?I.jsx("p",{children:"Loading puzzles..."}):H.length===0?I.jsxs("p",{className:"empty-state",children:["No puzzles yet. ",I.jsx(Di,{to:"/edit",children:"Create one"})," to get started!"]}):I.jsx("div",{className:"puzzle-sections",children:et.map(J=>I.jsxs("div",{className:"puzzle-section",children:[I.jsx("h2",{className:"puzzle-section-title",children:J.difficulty}),I.jsx("div",{className:"puzzle-cards",children:J.puzzles.map(X=>I.jsxs("div",{className:"puzzle-card-row",children:[I.jsxs(Di,{to:`/play/${X.id}`,className:`puzzle-card${c.has(X.id)?" puzzle-completed":""}`,children:[I.jsxs("h3",{children:[X.title,c.has(X.id)&&I.jsx("span",{className:"completed-badge",title:"Completed",children:""}),f.has(X.id)&&I.jsx("span",{className:"completion-time",children:mp(f.get(X.id))})]}),I.jsxs("p",{className:"puzzle-meta",children:["by ",X.author,"  ",X.gridSize.rows,"",X.gridSize.cols]}),X.tags&&X.tags.length>0&&I.jsx("div",{className:"puzzle-tags",children:X.tags.map(D=>I.jsx("span",{className:"puzzle-tag",children:D},D))})]}),n&&I.jsx(Di,{to:`/edit/${X.id}`,className:"puzzle-edit-btn",title:"Edit puzzle",children:""})]},X.id))})]},J.difficulty))})]}),V&&s&&I.jsx("div",{className:"modal-backdrop",onClick:()=>U(!1),children:I.jsxs("div",{className:"modal-card",onClick:J=>J.stopPropagation(),children:[I.jsx("h2",{className:"modal-title",children:"Account"}),I.jsxs("p",{className:"account-info",children:["Signed in with Google as ",s.email]}),I.jsxs("div",{className:"account-name-field",children:[I.jsx("label",{children:"Display name"}),I.jsx("input",{value:F,onChange:J=>O(J.target.value),onKeyDown:J=>{J.key==="Enter"&&F.trim()&&(m(F.trim()),U(!1))},placeholder:s.displayName||"Enter a name"})]}),I.jsxs("div",{className:"modal-actions",children:[I.jsx("button",{className:"modal-btn",onClick:()=>{F.trim()&&m(F.trim()),U(!1)},children:"Save"}),I.jsx("button",{className:"modal-btn modal-btn-danger",onClick:async()=>{U(!1),await T("Are you sure you want to sign out?","Sign Out","Sign out","Cancel")&&l()},children:"Sign out"})]})]})}),I.jsx(wc,{...E})]})}function Ev(n,e){const t=n.map(l=>l.map(c=>({...c}))),s=2,o=new Set(e.map(l=>`${l.row},${l.col}`));for(const l of e){const c=t[l.row][l.col].fixedBorders;t[l.row][l.col].borders=[c[0]>0?c[0]:o.has(`${l.row-1},${l.col}`)?0:s,c[1]>0?c[1]:o.has(`${l.row},${l.col+1}`)?0:s,c[2]>0?c[2]:o.has(`${l.row+1},${l.col}`)?0:s,c[3]>0?c[3]:o.has(`${l.row},${l.col-1}`)?0:s]}return t}function wP(n,e,t,s){const o=[];for(let l=0;l<t;l++)l!==n&&o.push({row:l,col:e});for(let l=0;l<s;l++)l!==e&&o.push({row:n,col:l});return o}function EP(n,e,t,s){const o=[],l=[[-1,-1],[-1,1],[1,-1],[1,1]];for(const[c,f]of l){let p=n+c,m=e+f;for(;p>=0&&p<t&&m>=0&&m<s;)o.push({row:p,col:m}),p+=c,m+=f}return o}function TP(n,e,t,s){const o=[];for(let l=-1;l<=1;l++)for(let c=-1;c<=1;c++){if(l===0&&c===0)continue;const f=n+l,p=e+c;f>=0&&f<t&&p>=0&&p<s&&o.push({row:f,col:p})}return o}function IP(n,e,t,s){const o=[],l=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[c,f]of l){const p=n+c,m=e+f;p>=0&&p<t&&m>=0&&m<s&&o.push({row:p,col:m})}return o}function SP(n,e,t,s){if(e.length===0)return[];const o=new Set(e),l=new Set,c=[];for(const f of n)l.add(`${f.row},${f.col}`);for(const f of n){const p=[];o.has("rook")&&p.push(...wP(f.row,f.col,t,s)),o.has("bishop")&&p.push(...EP(f.row,f.col,t,s)),o.has("king")&&p.push(...TP(f.row,f.col,t,s)),o.has("knight")&&p.push(...IP(f.row,f.col,t,s));for(const m of p){const _=`${m.row},${m.col}`;l.has(_)||(l.add(_),c.push(m))}}return c}const CP=16,xi=500;function Ut(n){return n.map(e=>e.map(t=>({...t,notes:[...t.notes],borders:[...t.borders],fixedBorders:[...t.fixedBorders]})))}function Ni(n){return n.map(e=>e.map(t=>({...t,selected:!1,notes:[...t.notes],borders:[...t.borders],fixedBorders:[...t.fixedBorders]})))}function CE(n,e){const[t,s]=R.useState(()=>cf(n,e)),o=R.useRef(t);o.current=t;const[l,c]=R.useState([]),[f,p]=R.useState("normal"),m=R.useRef([]),_=R.useRef([]),E=R.useRef(!0),T=R.useRef(!1),V=R.useRef(null),U=R.useRef(!1),F=R.useRef(!1),O=R.useRef(null),H=R.useRef(!1),Y=R.useRef(null),[ee,ue]=R.useState(null),[re,se]=R.useState(null),x=R.useRef([]),k=R.useRef(""),A=R.useCallback(ae=>{x.current=ae},[]),L=R.useCallback(ae=>{k.current=ae},[]),S=R.useCallback(ae=>{p(ae),ae!=="color"&&ae!=="fixedColor"&&ue(null),ae!=="mark"&&se(null)},[]),b=R.useCallback(ae=>{m.current.push(Ni(o.current)),m.current.length>xi&&m.current.shift(),_.current=[],s(W=>typeof ae=="function"?ae(W):ae)},[]),P=R.useCallback(()=>{const ae=m.current.pop();ae&&(_.current.push(Ni(o.current)),_.current.length>xi&&_.current.shift(),s(ae),c([]))},[]),Ie=R.useCallback(()=>{const ae=_.current.pop();ae&&(m.current.push(Ni(o.current)),m.current.length>xi&&m.current.shift(),s(ae),c([]))},[]),Le=R.useCallback(()=>{s(ae=>ae.map(W=>W.map(ce=>({...ce,selected:!1})))),c([])},[]),et=R.useCallback(ae=>{if(ae.length!==0){if((f==="color"||f==="fixedColor")&&ee!==null){const W=f==="fixedColor"?"fixedColor":"color",ce=ee==="0";s(ve=>{F.current||(F.current=!0,m.current.push(Ni(ve)),m.current.length>xi&&m.current.shift(),_.current=[],ce?O.current=null:O.current=ve[ae[0].row][ae[0].col][W]===ee?null:ee);const de=O.current,ge=k.current==="nurikabe";if(!ae.some(bt=>ve[bt.row][bt.col][W]!==de||ge&&de&&ve[bt.row][bt.col].mark==="dot"))return ve;const It=Ut(ve);for(const bt of ae)It[bt.row][bt.col][W]=de,ge&&de&&(It[bt.row][bt.col].mark=null);return It});return}if(f==="cross"){s(W=>{T.current||(T.current=!0,m.current.push(Ni(W)),m.current.length>xi&&m.current.shift(),_.current=[],E.current=!W[ae[0].row][ae[0].col].crossed);const ce=ae.filter(ge=>!W[ge.row][ge.col].value&&!W[ge.row][ge.col].fixedValue&&!W[ge.row][ge.col].mark);if(!ce.some(ge=>W[ge.row][ge.col].crossed!==E.current))return W;const de=Ut(W);for(const ge of ce)de[ge.row][ge.col].crossed=E.current;return de});return}if(f==="mark"&&re!==null){s(W=>{H.current||(H.current=!0,m.current.push(Ni(W)),m.current.length>xi&&m.current.shift(),_.current=[],Y.current=W[ae[0].row][ae[0].col].mark===re?null:re);const ce=Y.current,ve=ae.filter(Pe=>!W[Pe.row][Pe.col].crossed&&!W[Pe.row][Pe.col].value&&!W[Pe.row][Pe.col].fixedValue&&W[Pe.row][Pe.col].notes.length===0);if(!ve.some(Pe=>W[Pe.row][Pe.col].mark!==ce))return W;const ge=Ut(W);for(const Pe of ve)ge[Pe.row][Pe.col].mark=ce;return ge});return}if(f==="border"){s(W=>{if(!V.current){V.current=Ut(W),m.current.push(Ni(W)),m.current.length>xi&&m.current.shift(),_.current=[];const ve=V.current[ae[0].row][ae[0].col];U.current=ve.borders.some((de,ge)=>de>0&&ve.fixedBorders[ge]===0)}const ce=V.current;if(U.current){const ve=Ut(ce);for(const de of ae){const ge=ve[de.row][de.col].fixedBorders;ve[de.row][de.col].borders=[...ge]}return ve}else return Ev(ce,ae)});return}}},[f,ee,re]),ye=R.useCallback(ae=>{if((f==="color"||f==="fixedColor")&&ee!==null){F.current=!1;return}if(f==="cross"){T.current=!1;return}if(f==="mark"&&re!==null){H.current=!1;return}if(f==="border"){V.current=null;return}s(W=>{var ve;const ce=W.map(de=>de.map(ge=>({...ge})));for(const de of ae)(ve=ce[de.row])!=null&&ve[de.col]&&(ce[de.row][de.col].selected=!0);return ce}),c(ae)},[f,ee,re,b]),ne=R.useCallback(ae=>{l.length!==0&&b(W=>{const ce=Ut(W),de=l.every(Pe=>ce[Pe.row][Pe.col].value===ae)?null:ae;for(const Pe of l)ce[Pe.row][Pe.col].value=de;const ge=x.current;if(de!==null&&ge.length>0){const Pe=ce.length,It=ce[0].length,bt=SP(l,ge,Pe,It);for(const Vn of bt){const In=ce[Vn.row][Vn.col];!In.value&&!In.fixedValue&&!In.mark&&(In.crossed=!0)}}return ce})},[l,b]),J=R.useCallback(ae=>{l.length!==0&&b(W=>{const ce=Ut(W),ve=l.every(de=>ce[de.row][de.col].color===ae);for(const de of l)ce[de.row][de.col].color=ve?null:ae;return ce})},[l,b]),X=R.useCallback(()=>{if(l.length===0)return;const ae=f==="fixedColor"?"fixedColor":"color";b(W=>{const ce=Ut(W);for(const ve of l)ce[ve.row][ve.col][ae]=null;return ce})},[l,f,b]),D=R.useCallback(ae=>{l.length!==0&&b(W=>{const ce=Ut(W),ve=l.every(de=>ce[de.row][de.col].fixedValue===ae);for(const de of l)ce[de.row][de.col].fixedValue=ve?null:ae;return ce})},[l,b]),K=R.useCallback(ae=>{l.length!==0&&b(W=>{const ce=Ut(W),ve=l.every(de=>ce[de.row][de.col].fixedColor===ae);for(const de of l)ce[de.row][de.col].fixedColor=ve?null:ae;return ce})},[l,b]),ke=R.useCallback(ae=>{l.length!==0&&b(W=>{const ce=Ut(W);for(const ve of l){const de=ce[ve.row][ve.col],ge=de.notes.indexOf(ae);ge!==-1?de.notes.splice(ge,1):de.notes.length<CP&&de.notes.push(ae)}return ce})},[l,b]),xe=R.useCallback((ae,W)=>{if(l.length===0)return;const ce=l[0];b(ve=>{var Pe,It;const de=Ut(ve),ge=de[ce.row][ce.col];return((Pe=ge.label)==null?void 0:Pe.text)===ae&&((It=ge.label)==null?void 0:It.align)===W?ge.label=null:ge.label={text:ae,align:W},de})},[l,b]),Ue=R.useCallback(()=>{l.length!==0&&b(ae=>{const W=Ut(ae);for(const ce of l)W[ce.row][ce.col].label=null;return W})},[l,b]),$e=R.useCallback(()=>{l.length!==0&&b(ae=>{const W=Ut(ae),ce=l.filter(de=>!W[de.row][de.col].value&&!W[de.row][de.col].fixedValue&&!W[de.row][de.col].mark);if(ce.length===0)return ae;const ve=ce.every(de=>W[de.row][de.col].crossed);for(const de of ce)W[de.row][de.col].crossed=!ve;return W})},[l,b]),We=R.useCallback(ae=>{l.length!==0&&b(W=>{const ce=Ut(W),ve=l.filter(ge=>!ce[ge.row][ge.col].crossed&&!ce[ge.row][ge.col].value&&!ce[ge.row][ge.col].fixedValue&&ce[ge.row][ge.col].notes.length===0);if(ve.length===0)return W;const de=ve.every(ge=>ce[ge.row][ge.col].mark===ae);for(const ge of ve)ce[ge.row][ge.col].mark=de?null:ae;return ce})},[l,b]),He=R.useCallback(()=>{l.length!==0&&b(ae=>{const W=Ut(ae);for(const ce of l)W[ce.row][ce.col].mark=null;return W})},[l,b]),Qe=R.useCallback(ae=>{l.length!==0&&b(W=>{const ce=Ut(W),ve=l.every(de=>ce[de.row][de.col].image===ae);for(const de of l)ce[de.row][de.col].image=ve?null:ae;return ce})},[l,b]),Tt=R.useCallback(()=>{l.length!==0&&b(ae=>{const W=Ut(ae);for(const ce of l)W[ce.row][ce.col].image=null;return W})},[l,b]),Hn=R.useCallback(()=>{l.length!==0&&b(ae=>{const W=Ut(ae);for(const ce of l){const ve=W[ce.row][ce.col];ve.value=null,ve.notes=[],ve.color=null,ve.crossed=!1,ve.mark=null,ve.borders=[...ve.fixedBorders]}return W})},[l,b]),nr=R.useCallback(()=>{l.length!==0&&b(ae=>{if(l.some(ce=>{const ve=ae[ce.row][ce.col];return ve.borders.some((de,ge)=>de>0&&ve.fixedBorders[ge]===0)})){const ce=Ut(ae);for(const ve of l){const de=ce[ve.row][ve.col].fixedBorders;ce[ve.row][ve.col].borders=[...de]}return ce}else return Ev(ae,l)})},[l,b]),Ht=R.useCallback((ae,W)=>{m.current=[],s(cf(ae,W)),c([])},[]);return{grid:t,setGrid:s,setGridWithUndo:b,selection:l,setSelection:c,inputMode:f,setInputMode:S,activeColor:ee,setActiveColor:ue,activeMark:re,setActiveMark:se,clearSelection:Le,commitSelection:ye,onDragChange:et,applyValue:ne,applyColor:J,eraseColor:X,applyFixedValue:D,applyFixedColor:K,addNote:ke,applyLabel:xe,removeLabel:Ue,toggleCross:$e,toggleMark:We,eraseMark:He,applyImage:Qe,removeImage:Tt,clearValues:Hn,applyBorders:nr,resetGrid:Ht,setAutoCrossRules:A,setForcedInputLayout:L,undo:P,redo:Ie}}function kP(n){return n.startsWith("Digit")?n.charAt(5):n.startsWith("Key")?n.charAt(3).toUpperCase():null}function RP(n){return n.key.length===1&&!n.ctrlKey&&!n.altKey&&!n.metaKey?n.key.toUpperCase():null}function kE(n){const e=R.useRef(null);R.useEffect(()=>{n.inputMode!=="fixedDouble"&&(e.current=null)},[n.inputMode]),R.useEffect(()=>{const t=s=>{var l,c,f,p,m,_,E,T,V;if(s.target.tagName==="INPUT")return;if((s.ctrlKey||s.metaKey)&&s.key==="z"){s.preventDefault(),n.undo();return}if((s.ctrlKey||s.metaKey)&&s.key==="y"){s.preventDefault(),n.redo();return}if(s.key==="Delete"||s.key==="Backspace"){s.preventDefault(),n.clearValues();return}if(s.key==="Enter"){s.preventDefault(),(l=n.onEnter)==null||l.call(n);return}if(!s.shiftKey&&!s.ctrlKey&&!s.altKey&&!s.metaKey&&n.hasSelection===!1&&n.onInputModeChange){const U={N:"normal",C:"color",X:"cross",B:"border",M:"mark"},F=s.key.toUpperCase();if(F in U){s.preventDefault(),n.onInputModeChange(U[F]);return}}const o=RP(s);if(o){if(s.preventDefault(),s.shiftKey){const U=kP(s.code);U&&n.addNote(U);return}switch(n.inputMode){case"normal":n.applyValue(o);break;case"color":o==="0"?((c=n.onActiveColorChange)==null||c.call(n,o),(f=n.eraseColor)==null||f.call(n)):o>="1"&&o<="9"&&((p=n.onActiveColorChange)==null||p.call(n,o),n.applyColor(o));break;case"fixed":n.applyFixedValue(o);break;case"fixedDouble":o>="0"&&o<="9"&&(e.current===null?e.current=o:(n.applyFixedValue(e.current+o),e.current=null));break;case"fixedColor":o==="0"?((m=n.onActiveColorChange)==null||m.call(n,o),(_=n.eraseColor)==null||_.call(n)):o>="1"&&o<="9"&&((E=n.onActiveColorChange)==null||E.call(n,o),n.applyFixedColor(o));break;case"note":n.addNote(o);break;case"mark":{const U=["circle","square","triangle","diamond","pentagon","hexagon","dot"],F=parseInt(o)-1;if(F>=0&&F<U.length){const O=U[F];(T=n.onActiveMarkChange)==null||T.call(n,O),(V=n.toggleMark)==null||V.call(n,O)}break}}}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[n.inputMode,n.applyValue,n.applyColor,n.applyFixedValue,n.applyFixedColor,n.addNote,n.clearValues,n.eraseColor,n.undo,n.redo,n.onEnter,n.onActiveColorChange,n.onActiveMarkChange,n.toggleMark,n.hasSelection,n.onInputModeChange])}function AP(n){const e=R.useRef(!1),t=R.useRef(!1),s=R.useRef([]),o=R.useRef([]),l=R.useRef(!1),c=R.useRef(null),f=R.useRef(n);f.current=n;const p=(V,U)=>{var ee;let F=document.elementFromPoint(V,U);if(!F)return null;for(;F&&F.tagName!=="TD";)F=F.parentElement;if(!F||F.tagName!=="TD")return null;const O=F,H=(ee=O.parentElement)==null?void 0:ee.rowIndex,Y=O.cellIndex;return H==null||Y==null||H<0||Y<0?null:{row:H,col:Y}},m=R.useCallback(V=>{var Y;let U=V.target;for(;U&&U.tagName!=="TD";)U=U.parentElement;if(!U||U.tagName!=="TD")return null;const F=U,O=(Y=F.parentElement)==null?void 0:Y.rowIndex,H=F.cellIndex;return O==null||H==null||O<0||H<0?null:{row:O,col:H}},[]),_=R.useCallback(V=>{if(V.target.closest(".toolbar"))return;if(V.button===2&&f.current.onRightClickCell){V.preventDefault();const F=m(V);F&&(t.current=!0,o.current=[F],f.current.onRightClickCell(F));return}if(V.button!==0)return;V.preventDefault(),l.current=V.ctrlKey,V.ctrlKey||f.current.onSelectionStart();const U=m(V);U&&(e.current=!0,s.current=[U],f.current.onSelectionChange([U]))},[m]),E=R.useCallback(V=>{var F,O;if(t.current){V.preventDefault();const H=m(V);if(!H||o.current.some(Y=>Y.row===H.row&&Y.col===H.col))return;o.current=[...o.current,H],(O=(F=f.current).onRightClickCell)==null||O.call(F,H);return}if(!e.current)return;V.preventDefault();const U=m(V);U&&(s.current.some(H=>H.row===U.row&&H.col===U.col)||(s.current=[...s.current,U],f.current.onSelectionChange(s.current)))},[m]),T=R.useCallback(()=>{if(t.current){t.current=!1,o.current=[];return}e.current&&(e.current=!1,f.current.onSelectionEnd(s.current))},[]);return R.useEffect(()=>{const V=c.current;if(!V)return;const U=O=>{if(O.target.closest(".toolbar")||f.current.isPinching||O.touches.length>=2)return;O.preventDefault(),f.current.onSelectionStart();const H=O.touches[0],Y=p(H.clientX,H.clientY);Y&&(e.current=!0,s.current=[Y],f.current.onSelectionChange([Y]))},F=O=>{if(!e.current||f.current.isPinching||O.touches.length>=2)return;O.preventDefault();const H=O.touches[0],Y=p(H.clientX,H.clientY);Y&&(s.current.some(ee=>ee.row===Y.row&&ee.col===Y.col)||(s.current=[...s.current,Y],f.current.onSelectionChange(s.current)))};return V.addEventListener("touchstart",U,{passive:!1}),V.addEventListener("touchmove",F,{passive:!1}),()=>{V.removeEventListener("touchstart",U),V.removeEventListener("touchmove",F)}},[]),{tableRef:c,handleCellMouseDown:_,handleCellMouseMove:E,handleMouseUp:T,ctrlHeld:l}}const PP={circle:"M25,8 a17,17 0 1,0 0.001,0 Z",square:"M8,8 h34 v34 h-34 Z",triangle:"M25,6 L44,42 L6,42 Z",diamond:"M25,6 L44,25 L25,44 L6,25 Z",pentagon:"M25,6 L43,20 L36,42 L14,42 L7,20 Z",hexagon:"M25,6 L41,15.5 L41,34.5 L25,44 L9,34.5 L9,15.5 Z",dot:"M25,25 m-6,0 a6,6 0 1,0 12,0 a6,6 0 1,0 -12,0 Z"},xP=pf.memo(function({data:e,beingSelected:t,debug:s,row:o,col:l}){const{selected:c,value:f,notes:p,fixedValue:m,fixedColor:_,color:E,borders:T,fixedBorders:V,label:U,crossed:F,mark:O,image:H}=e;let Y="grid-cell cell-enabled";c&&(Y+=" cell-selected"),t&&(Y+=" cell-being-selected");let ee="cell-inner";_?ee+=` color${_}`:E&&(ee+=` color${E}`),m&&(ee+=" cell-fixed-value");const ue=k=>T[k]>0?V[k]>0?3:2:0,re={borderTopWidth:`${ue(0)}px`,borderRightWidth:`${ue(1)}px`,borderBottomWidth:`${ue(2)}px`,borderLeftWidth:`${ue(3)}px`},se=m||f||"",x=p.length>0;return I.jsx("td",{className:Y,children:I.jsxs("div",{className:ee,style:re,children:[H&&I.jsx("img",{src:H,className:"cell-image",alt:"",draggable:!1}),F&&I.jsx("span",{className:"cell-cross",children:""}),O&&I.jsx("span",{className:"cell-mark","aria-hidden":"true",children:I.jsx("svg",{viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:I.jsx("path",{d:PP[O],fill:O==="dot"?"currentColor":"none",stroke:"currentColor",strokeWidth:"2.5"})})}),x&&!se&&!F?I.jsx("div",{className:"notes-grid notranslate",children:p.map((k,A)=>I.jsx("span",{className:"note-item",children:k},A))}):!F&&se&&I.jsx("span",{className:"cell-value notranslate",children:se}),U&&I.jsx("span",{className:`cell-label cell-label-${U.align}`,children:U.text}),s&&I.jsxs("span",{className:"debug-overlay",children:[o,",",l]})]})})});function RE({grid:n,selection:e,debug:t,inputMode:s,activeColor:o,activeMark:l,clearSelection:c,commitSelection:f,onDragChange:p,onRightClickCell:m,forcedInputLayout:_,isPinching:E}){const T=R.useRef([]),[,V]=R.useState(0),U=(s==="color"||s==="fixedColor")&&o!==null,F=s==="mark"&&l!=null,O=s==="cross"||s==="border"||U||F,H=AP({onSelectionStart:()=>{c(),T.current=[]},onSelectionChange:Y=>{T.current=Y,O?p==null||p(Y):V(ee=>ee+1)},onSelectionEnd:Y=>{T.current=[],f(Y)},onRightClickCell:m,isPinching:E});return R.useEffect(()=>{const Y=()=>H.handleMouseUp();return window.addEventListener("mouseup",Y),window.addEventListener("touchend",Y),()=>{window.removeEventListener("mouseup",Y),window.removeEventListener("touchend",Y)}},[H.handleMouseUp]),I.jsx("div",{className:"grid-container",children:I.jsx("table",{className:"puzzle-grid",ref:H.tableRef,onMouseDown:H.handleCellMouseDown,onMouseMove:H.handleCellMouseMove,onContextMenu:_?Y=>Y.preventDefault():void 0,children:I.jsx("tbody",{children:n.map((Y,ee)=>I.jsx("tr",{children:Y.map((ue,re)=>I.jsx(xP,{data:ue,row:ee,col:re,debug:t,beingSelected:!O&&T.current.some(se=>se.row===ee&&se.col===re)},re))},ee))})})})}const NP=[{mode:"normal",label:"Normal (N)"},{mode:"note",label:"Note (Shift+Key)"},{mode:"color",label:"Color (C)"},{mode:"cross",label:"X Cross (X)"},{mode:"border",label:"Border (B)"},{mode:"mark",label:"Marks (M)"}],bP=["circle","square","triangle","diamond","pentagon","hexagon","dot"],DP={circle:"",square:"",triangle:"",diamond:"",pentagon:"",hexagon:"",dot:""},VP=[{mode:"fixed",label:"Fixed Normal"},{mode:"fixedDouble",label:"Fixed 2-Digit"},{mode:"fixedColor",label:"Fixed Color"},{mode:"label",label:"Label"}];function AE({inputMode:n,onInputModeChange:e,onColorSelect:t,onColorErase:s,activeColor:o=null,onActiveColorChange:l,onLabelApply:c,onLabelRemove:f,onUndo:p,onRedo:m,onErase:_,isEditor:E=!1,theme:T,onThemeToggle:V,imageLibrary:U=[],selectedImageIndex:F=null,onImageSelect:O,onImageApply:H,onImageRemove:Y,onImageImport:ee,activeMark:ue=null,onActiveMarkChange:re,onMarkSelect:se,onMarkErase:x,onSubmit:k,forcedInputLayout:A}){const L=n==="color"||n==="fixedColor",S=n==="label",[b,P]=R.useState(""),[Ie,Le]=R.useState("top"),et=ye=>I.jsx("button",{className:`tb-btn ${n===ye.mode?"selected":""}`,onClick:()=>e(n===ye.mode?"normal":ye.mode),children:ye.label},ye.mode);return I.jsxs("div",{className:"toolbar",children:[!A&&I.jsxs("div",{className:"tb-section",children:[I.jsx("div",{className:"tb-section-title",children:"Input Mode"}),NP.map(et)]}),I.jsxs("div",{className:"tb-section",children:[I.jsx("div",{className:"tb-section-title",children:"Actions"}),I.jsx("button",{className:"tb-btn",onClick:_,title:"Delete/Backspace",children:"Erase (Del)"}),I.jsx("button",{className:"tb-btn",onClick:p,title:"Ctrl+Z",children:"Undo (Ctrl+Z)"}),I.jsx("button",{className:"tb-btn",onClick:m,title:"Ctrl+Y",children:"Redo (Ctrl+Y)"})]}),L&&!A&&I.jsxs("div",{className:"tb-section",children:[I.jsx("div",{className:"tb-section-title",children:"Colors"}),I.jsxs("div",{className:"tb-palette",children:[I.jsx("button",{className:`palette-swatch color-erase ${o==="0"?"active-color":""}`,onClick:()=>{o==="0"?l==null||l(null):(l==null||l("0"),s==null||s())},title:`No color (erase)${o==="0"?"  drag to erase":""}`,children:""}),Array.from({length:9},(ye,ne)=>ne+1).map(ye=>I.jsx("button",{className:`palette-swatch color${ye} ${o===String(ye)?"active-color":""}`,onClick:()=>{const ne=String(ye);o===ne?l==null||l(null):(l==null||l(ne),t==null||t(ne))},title:`Color ${ye}${o===String(ye)?" (active  drag to paint)":""}`,children:ye},ye))]}),o!==null&&I.jsx("button",{className:"tb-btn",onClick:()=>l==null?void 0:l(null),children:"Deselect Color"})]}),n==="mark"&&!A&&I.jsxs("div",{className:"tb-section",children:[I.jsx("div",{className:"tb-section-title",children:"Shape"}),I.jsxs("div",{className:"tb-mark-palette",children:[I.jsx("button",{className:`mark-swatch mark-erase ${ue===null?"active-mark":""}`,onClick:()=>{x==null||x(),re==null||re(null)},title:"Erase mark",children:""}),bP.map(ye=>I.jsx("button",{className:`mark-swatch ${ue===ye?"active-mark":""}`,onClick:()=>{ue===ye?re==null||re(null):(re==null||re(ye),se==null||se(ye))},title:ye,children:DP[ye]},ye))]}),ue!==null&&I.jsx("button",{className:"tb-btn",onClick:()=>re==null?void 0:re(null),children:"Deselect Shape"})]}),E&&I.jsxs("div",{className:"tb-section",children:[I.jsx("div",{className:"tb-section-title",children:"Editor"}),VP.map(et)]}),E&&I.jsxs("div",{className:"tb-section",children:[I.jsx("div",{className:"tb-section-title",children:"Images"}),U.length>0&&I.jsx("div",{className:"tb-image-grid",children:U.map((ye,ne)=>I.jsx("button",{className:`tb-image-thumb ${F===ne?"selected":""}`,onClick:()=>O==null?void 0:O(F===ne?null:ne),title:`Image ${ne+1}`,children:I.jsx("img",{src:ye,alt:"",draggable:!1})},ne))}),I.jsx("button",{className:"tb-btn",onClick:ee,children:"Import Image"}),F!==null&&I.jsx("button",{className:"tb-btn",onClick:H,children:"Apply to Cells"}),I.jsx("button",{className:"tb-btn",onClick:Y,children:"Remove Image"})]}),S&&I.jsxs("div",{className:"tb-section",children:[I.jsx("div",{className:"tb-section-title",children:"Label"}),I.jsx("input",{className:"tb-input",value:b,onChange:ye=>P(ye.target.value),placeholder:"Label text..."}),I.jsxs("div",{className:"tb-row",children:[I.jsx("button",{className:`tb-btn-sm ${Ie==="top"?"selected":""}`,onClick:()=>Le("top"),children:"Top"}),I.jsx("button",{className:`tb-btn-sm ${Ie==="bottom"?"selected":""}`,onClick:()=>Le("bottom"),children:"Bottom"})]}),I.jsx("button",{className:"tb-btn",onClick:()=>{b.trim()&&(c==null||c(b.trim(),Ie))},children:"Apply"}),I.jsx("button",{className:"tb-btn",onClick:()=>f==null?void 0:f(),children:"Remove"})]}),I.jsxs("div",{className:"tb-hint",children:[n==="fixed"&&"Type any key for fixed clue.",n==="fixedDouble"&&"Type two digits for a 2-digit fixed clue.",n==="fixedColor"&&(o!==null?"Drag to paint. Click swatch again to deselect.":"Press 0-9 or click swatch. Click to lock color for drag painting."),n==="label"&&"Enter text, pick alignment, Apply.",A&&n!=="fixed"&&n!=="fixedDouble"&&n!=="fixedColor"&&n!=="label"&&I.jsxs(I.Fragment,{children:[I.jsx("div",{children:"Left-click: black  dot  clear"}),I.jsx("div",{children:"Right-click: toggle dot"})]}),!A&&n==="normal"&&"Type any key to set value. Same key to remove.",!A&&n==="color"&&(o!==null?"Drag to paint. Click swatch again to deselect.":"Press 0-9 or click swatch. Click to lock color for drag painting."),!A&&n==="note"&&"Type to add/remove notes (max 16).",!A&&n==="cross"&&"Click/drag to toggle X marks.",!A&&n==="border"&&"Drag to create/remove borders.",!A&&n==="mark"&&(ue!==null?"Drag to paint mark. Click swatch again to deselect.":"Press 1-6 or click swatch to select shape.")]}),I.jsx("div",{className:"tb-spacer"}),k&&I.jsx("div",{className:"tb-submit",children:I.jsx("button",{className:"tb-submit-btn",onClick:k,children:"Submit"})}),I.jsx("div",{className:"tb-theme-toggle",children:I.jsx("button",{className:"tb-btn",onClick:V,title:"Toggle theme",children:T==="light"?" Dark":" Light"})})]})}function Tv(){return/googtrans=\/en\/[^;]/.test(document.cookie)}function df({title:n,author:e,gridSize:t,difficulty:s,rulesList:o,cluesList:l,backLink:c=!0,headerRight:f,children:p,struckRuleWords:m,onStruckRuleWordsChange:_,struckClueWords:E,onStruckClueWordsChange:T}){const[V,U]=R.useState(new Set),[F,O]=R.useState(new Set),[H,Y]=R.useState(!0),[ee,ue]=R.useState(!0),[re,se]=R.useState(Tv);R.useEffect(()=>{const Ie=setInterval(()=>se(Tv()),1e3);return()=>clearInterval(Ie)},[]);const x=m??V,k=_??U,A=E??F,L=T??O,S=(Ie,Le)=>{Ie(et=>{const ye=new Set(et);return ye.has(Le)?ye.delete(Le):ye.add(Le),ye})},b=(Ie,Le,et,ye)=>{const ne=Ie.split(/(\s+)/).map((X,D)=>/^\s+$/.test(X)?null:`${Le}:${D}`).filter(Boolean),J=ne.every(X=>et.has(X));ye(X=>{const D=new Set(X);for(const K of ne)J?D.delete(K):D.add(K);return D})},P=(Ie,Le,et,ye)=>Ie.split(/(\s+)/).map((ne,J)=>{if(/^\s+$/.test(ne))return ne;const X=`${Le}:${J}`,D=et.has(X);return I.jsx("span",{className:`info-word ${D?"info-word-struck":""}`,onClick:K=>{K.stopPropagation(),S(ye,X)},children:ne},J)});return I.jsxs("div",{className:"info-panel",children:[(c||f)&&I.jsxs("div",{className:"info-header-row",children:[c&&I.jsx(Di,{to:"/",className:"info-back-link",children:" Puzzles"}),f&&I.jsx("div",{className:"info-header-right",children:f})]}),n&&I.jsxs("div",{className:"info-section",children:[I.jsx("h2",{className:"info-title",children:n}),e&&I.jsxs("p",{className:"info-meta",children:["by ",e]}),t&&I.jsxs("p",{className:"info-meta",children:[t.rows,"",t.cols]}),s&&I.jsxs("p",{className:"info-meta",children:["Difficulty: ",s]})]}),o&&o.length>0&&I.jsxs("div",{className:"info-section",children:[I.jsxs("div",{className:"info-section-title info-collapsible",onClick:()=>Y(Ie=>!Ie),children:[I.jsx("span",{className:`info-chevron ${H?"open":""}`,children:""}),"Rules"]}),H&&I.jsx("ul",{className:"info-list",children:o.map((Ie,Le)=>I.jsx("li",{className:"info-list-text info-list-bullet",onClick:re?void 0:()=>b(Ie,Le,x,k),children:re?Ie:P(Ie,Le,x,k)},Le))})]}),l&&l.length>0&&I.jsxs("div",{className:"info-section",children:[I.jsxs("div",{className:"info-section-title info-collapsible",onClick:()=>ue(Ie=>!Ie),children:[I.jsx("span",{className:`info-chevron ${ee?"open":""}`,children:""}),"Clues"]}),ee&&I.jsx("ul",{className:"info-list",children:l.map((Ie,Le)=>I.jsx("li",{className:"info-list-text info-list-bullet",onClick:re?void 0:()=>b(Ie,Le,A,L),children:re?Ie:P(Ie,Le,A,L)},Le))})]}),p&&I.jsx("div",{className:"info-section",children:p})]})}function PE({children:n,defaultWidth:e=400,storageKey:t="4color:leftWidth"}){const[s,o]=R.useState(()=>{const m=localStorage.getItem(t);return m?Number(m):e}),l=R.useRef(!1),c=R.useRef(0),f=R.useRef(0),p=R.useCallback(m=>{m.preventDefault(),l.current=!0,c.current=m.clientX,f.current=s,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[s]);return R.useEffect(()=>{const m=E=>{if(!l.current)return;const T=Math.max(180,Math.min(800,f.current+E.clientX-c.current));o(T)},_=()=>{l.current&&(l.current=!1,document.body.style.cursor="",document.body.style.userSelect="",localStorage.setItem(t,String(s)))};return window.addEventListener("mousemove",m),window.addEventListener("mouseup",_),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",_)}},[s,t]),R.useEffect(()=>{const m=()=>{const _=Math.min(800,window.innerWidth*.4);s>_&&o(_)};return window.addEventListener("resize",m),m(),()=>window.removeEventListener("resize",m)},[s]),I.jsxs("div",{className:"panel-left-wrapper",children:[I.jsx("aside",{className:"panel-left",style:{width:s},children:n}),I.jsx("div",{className:`panel-left-handle ${l.current?"dragging":""}`,onMouseDown:p})]})}function Iv(){const{puzzleId:n}=Fv();Sc();const[e]=Wv(),t=e.get("debug")==="true",s=Number(e.get("rows"))||10,o=Number(e.get("cols"))||10,{theme:l,toggle:c}=pp(),[f,p]=R.useState(s),[m,_]=R.useState(o),[E,T]=R.useState(""),[V,U]=R.useState(""),[F,O]=R.useState(""),[H,Y]=R.useState([]),[ee,ue]=R.useState([]),[re,se]=R.useState([]),[x,k]=R.useState(""),[A,L]=R.useState(""),[S,b]=R.useState([]),[P,Ie]=R.useState(null),[Le,et]=R.useState([]),[ye,ne]=R.useState([]),[J,X]=R.useState(""),[D,K]=R.useState(""),[ke,xe]=R.useState(-1),Ue=R.useRef(null),[$e,We]=R.useState(n||""),[He,Qe]=R.useState(!1),[Tt,Hn]=R.useState(""),{modalProps:nr,showAlert:Ht,showConfirm:ae}=gp(),W=CE(f,m),ce=R.useRef(null),ve=R.useRef(null);R.useEffect(()=>{fp().then(Q=>{const he=new Set;for(const fe of Q)for(const Ve of fe.tags||[])he.add(Ve);et([...he].sort())})},[]),R.useEffect(()=>{n&&IE(n).then(Q=>{var he;if(Q){T(Q.title),U(Q.author),p(Q.gridSize.rows),_(Q.gridSize.cols),O(Q.difficulty||""),Y(Q.tags||[]),ne(Q.autoCrossRules||[]),X(Q.forcedInputLayout||""),ue(Q.rules||[]),se(Q.clues||[]),W.setGrid(hf(Q));const fe=new Set;for(const Ve of Q.cells)if(Ve.image){const at=((he=Q.images)==null?void 0:he[Ve.image])??Ve.image;fe.add(at)}b(Array.from(fe))}})},[n]),R.useEffect(()=>{W.setAutoCrossRules(ye)},[ye]),R.useEffect(()=>{W.setForcedInputLayout(J),J==="nurikabe"&&(W.setInputMode("color"),W.setActiveColor("9"))},[J]),kE({inputMode:W.inputMode,applyValue:W.applyValue,applyColor:W.applyColor,applyFixedValue:W.applyFixedValue,applyFixedColor:W.applyFixedColor,addNote:W.addNote,clearValues:W.clearValues,eraseColor:W.eraseColor,undo:W.undo,redo:W.redo,onActiveColorChange:W.setActiveColor,onActiveMarkChange:W.setActiveMark,toggleMark:W.toggleMark,hasSelection:W.selection.length>0,onInputModeChange:W.setInputMode,onEnter:()=>{P!==null&&S[P]&&W.applyImage(S[P])}});const de=R.useMemo(()=>{const Q=D.toLowerCase().trim();return Q?Le.filter(he=>he.toLowerCase().includes(Q)&&!H.includes(he)):[]},[D,Le,H]),ge=Q=>{var fe;const he=Q.trim().toLowerCase();he&&!H.includes(he)&&Y(Ve=>[...Ve,he]),K(""),xe(-1),(fe=Ue.current)==null||fe.focus()},Pe=Q=>{Y(he=>he.filter(fe=>fe!==Q))},It=Q=>{Q.key==="Enter"?(Q.preventDefault(),ke>=0&&de[ke]?ge(de[ke]):D.trim()&&ge(D)):Q.key==="ArrowDown"?(Q.preventDefault(),xe(he=>Math.min(he+1,de.length-1))):Q.key==="ArrowUp"?(Q.preventDefault(),xe(he=>Math.max(he-1,-1))):Q.key==="Backspace"&&!D&&H.length>0?Pe(H[H.length-1]):Q.key==="Escape"&&(K(""),xe(-1))},bt=async()=>{if(!F){await Ht("Please select a difficulty before saving.");return}const Q=E.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")||"untitled",he=dP(W.grid,{id:Q,title:E||"Untitled",author:V,rules:ee,clues:re,difficulty:F,tags:H,autoCrossRules:ye,forcedInputLayout:J||void 0});n&&(he.id=n),We(he.id),fP(he)},Vn=async()=>{await ae("Are you sure you want to clear all? This cannot be undone.","Clear All")&&W.resetGrid(f,m)},In=async()=>{await ae("Clear all player input? Puzzle layout (fixed values, colors, borders, images, labels) will be kept.","Clear Player Input")&&W.setGrid(Q=>Q.map(he=>he.map(fe=>({...fe,value:null,notes:[],color:fe.fixedColor?fe.color:null,crossed:!1,mark:null,selected:!1,borders:[...fe.fixedBorders]}))))},De=()=>{W.setGrid(Q=>Q.map(he=>he.map(fe=>({...fe,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...fe.fixedBorders]}))))};function gt(Q){return Q.map(he=>he.map(fe=>({fv:fe.fixedValue,fc:fe.fixedColor,fb:fe.fixedBorders,l:fe.label,i:fe.image})))}const qe=async()=>{const Q=JSON.stringify(gt(W.grid));if(Hn(Q),W.setGrid(he=>he.map(fe=>fe.map(Ve=>({...Ve,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...Ve.fixedBorders]})))),J==="nurikabe"?(W.setInputMode("color"),W.setActiveColor("9")):W.setInputMode("normal"),n){const he=await TE(n);he&&(Object.keys(he.cells).length>0||Object.keys(he.borders||{}).length>0||Object.keys(he.colors||{}).length>0)&&W.setGrid(fe=>{var at,Ge,ht;const Ve=fe.map(ft=>ft.map(rt=>({...rt})));for(const[ft,rt]of Object.entries(he.cells)){const[yt,kt]=ft.split(",").map(Number);(at=Ve[yt])!=null&&at[kt]&&(Ve[yt][kt].value=rt)}if(he.borders)for(const[ft,rt]of Object.entries(he.borders)){const[yt,kt]=ft.split(",").map(Number);(Ge=Ve[yt])!=null&&Ge[kt]&&(Ve[yt][kt].borders=rt)}if(he.colors)for(const[ft,rt]of Object.entries(he.colors)){const[yt,kt]=ft.split(",").map(Number);(ht=Ve[yt])!=null&&ht[kt]&&(Ve[yt][kt].color=rt)}return Ve})}Qe(!0)},At=()=>{W.setGrid(Q=>Q.map(he=>he.map(fe=>({...fe,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...fe.fixedBorders]})))),Qe(!1)},wn=async()=>{const Q=$e||"untitled";if(JSON.stringify(gt(W.grid))!==Tt&&!await ae("The puzzle definition has changed since entering solution mode. The solution may be invalid. Save anyway?","Definition Changed"))return;const fe={},Ve={},at={};for(let ht=0;ht<W.grid.length;ht++)for(let ft=0;ft<W.grid[ht].length;ft++){const rt=W.grid[ht][ft];rt.value&&(fe[`${ht},${ft}`]=rt.value);const yt=rt.fixedBorders,kt=rt.borders;(kt[0]!==yt[0]||kt[1]!==yt[1]||kt[2]!==yt[2]||kt[3]!==yt[3])&&(Ve[`${ht},${ft}`]=kt),rt.color&&!rt.fixedColor&&(at[`${ht},${ft}`]=rt.color)}if(Object.keys(fe).length===0&&Object.keys(Ve).length===0&&Object.keys(at).length===0){await Ht("No solution values, borders, or colors entered.");return}const Ge={id:Q,cells:fe};Object.keys(Ve).length>0&&(Ge.borders=Ve),Object.keys(at).length>0&&(Ge.colors=at),pP(Ge)},Sn=Q=>{var Ve;const he=(Ve=Q.target.files)==null?void 0:Ve[0];if(!he)return;if(he.size>200*1024){Ht("Image must be under 200KB.");return}const fe=new Image;fe.onload=()=>{const Ge=50/Math.max(fe.width,fe.height),ht=Math.round(fe.width*Ge),ft=Math.round(fe.height*Ge),rt=document.createElement("canvas");rt.width=ht,rt.height=ft,rt.getContext("2d").drawImage(fe,0,0,ht,ft);const kt=rt.toDataURL("image/png");b(cn=>cn.includes(kt)?cn:[...cn,kt]),URL.revokeObjectURL(fe.src)},fe.src=URL.createObjectURL(he),Q.target.value=""},[ct,qn]=R.useState(null),[ln,St]=R.useState(""),ut=R.useRef(null),un=R.useRef(null),Wr=R.useCallback((Q,he)=>{ut.current={type:Q,index:he}},[]),rr=R.useCallback((Q,he)=>{Q.preventDefault(),un.current=he},[]),Hr=R.useCallback(Q=>{if(!ut.current||un.current===null||ut.current.type!==Q)return;const he=ut.current.index,fe=un.current;if(he===fe)return;(Q==="rule"?ue:se)(at=>{const Ge=[...at],[ht]=Ge.splice(he,1);return Ge.splice(fe,0,ht),Ge}),ut.current=null,un.current=null},[]),Gn=R.useCallback((Q,he,fe)=>{qn({type:Q,index:he}),St(fe)},[]),Cn=R.useCallback(()=>{if(!ct)return;const Q=ln.trim(),he=ct.type==="rule"?ue:se;he(Q?fe=>fe.map((Ve,at)=>at===ct.index?Q:Ve):fe=>fe.filter((Ve,at)=>at!==ct.index)),qn(null),St("")},[ct,ln]),Ct=R.useCallback(Q=>{Ie(Q),Q!==null&&W.setInputMode("normal")},[W]),ii=R.useCallback(Q=>{J==="nurikabe"&&W.setGrid(he=>{const fe=he.map(at=>at.map(Ge=>({...Ge}))),Ve=fe[Q.row][Q.col];return Ve.mark=Ve.mark==="dot"?null:"dot",Ve.mark==="dot"&&(Ve.color=null),fe})},[J,W]),yr=()=>{P===null||!S[P]||W.applyImage(S[P])},vr=Q=>{var Ve;const he=(Ve=Q.target.files)==null?void 0:Ve[0];if(!he)return;const fe=new FileReader;fe.onload=()=>{var at;try{const Ge=JSON.parse(fe.result);We(Ge.id),T(Ge.title),U(Ge.author),p(Ge.gridSize.rows),_(Ge.gridSize.cols),O(Ge.difficulty||""),Y(Ge.tags||[]),ne(Ge.autoCrossRules||[]),X(Ge.forcedInputLayout||""),ue(Ge.rules||[]),se(Ge.clues||[]),W.setGrid(hf(Ge));const ht=new Set;for(const ft of Ge.cells)if(ft.image){const rt=((at=Ge.images)==null?void 0:at[ft.image])??ft.image;ht.add(rt)}b(Array.from(ht))}catch{Ht("Invalid puzzle JSON file")}},fe.readAsText(he)};return I.jsxs("div",{className:"page-layout",children:[I.jsx(PE,{children:I.jsx(df,{title:He?"Solution Mode":"Puzzle Editor",backLink:!0,headerRight:I.jsx(Ec,{}),children:He?I.jsxs(I.Fragment,{children:[I.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",margin:"0 0 8px"},children:"Place the correct values for each cell. Only normal inputs (values) and borders will be saved as the solution."}),I.jsx("button",{className:"info-btn",onClick:wn,children:"Save Solution"}),I.jsx("button",{className:"info-btn",onClick:De,children:"Clear Solution Input"}),I.jsx("button",{className:"info-btn",onClick:At,children:"Exit Solution Mode"}),re.length>0&&I.jsxs(I.Fragment,{children:[I.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),I.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Clues"}),re.map((Q,he)=>I.jsx("div",{className:"info-list-item",children:I.jsx("span",{className:"info-list-text",children:Q})},he))]})]}):I.jsxs(I.Fragment,{children:[I.jsxs("div",{className:"info-editor-field",children:[I.jsx("label",{children:"Title"}),I.jsx("input",{value:E,onChange:Q=>T(Q.target.value),placeholder:"My Puzzle"})]}),I.jsxs("div",{className:"info-editor-field",children:[I.jsx("label",{children:"Author"}),I.jsx("input",{value:V,onChange:Q=>U(Q.target.value)})]}),I.jsxs("div",{className:"info-editor-field",children:[I.jsx("label",{children:"Difficulty"}),I.jsxs("select",{value:F,onChange:Q=>O(Q.target.value),children:[I.jsx("option",{value:"",children:" None "}),I.jsx("option",{value:"Very easy",children:"Very easy"}),I.jsx("option",{value:"Easy",children:"Easy"}),I.jsx("option",{value:"Medium",children:"Medium"}),I.jsx("option",{value:"Hard",children:"Hard"}),I.jsx("option",{value:"Very hard",children:"Very hard"})]})]}),I.jsxs("div",{className:"info-editor-field",children:[I.jsx("label",{children:"Tags"}),I.jsxs("div",{className:"tag-input-wrapper",children:[H.map(Q=>I.jsxs("span",{className:"tag-input-pill",children:[Q,I.jsx("button",{onClick:()=>Pe(Q),children:""})]},Q)),I.jsx("input",{ref:Ue,value:D,onChange:Q=>{K(Q.target.value),xe(-1)},onKeyDown:It,onBlur:()=>setTimeout(()=>xe(-1),150),placeholder:H.length===0?"Add tags...":"",className:"tag-input-bare"}),de.length>0&&I.jsx("div",{className:"tag-suggestions",children:de.map((Q,he)=>I.jsx("div",{className:`tag-suggestion${he===ke?" active":""}`,onMouseDown:()=>ge(Q),children:Q},Q))})]})]}),I.jsxs("div",{className:"info-editor-field",children:[I.jsx("label",{children:"Auto-Cross Rules"}),I.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px 10px"},children:["king","rook","bishop","knight"].map(Q=>I.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13,cursor:"pointer"},children:[I.jsx("input",{type:"checkbox",checked:ye.includes(Q),onChange:he=>{ne(fe=>he.target.checked?[...fe,Q]:fe.filter(Ve=>Ve!==Q)),he.target.blur()}}),Q.charAt(0).toUpperCase()+Q.slice(1)]},Q))})]}),I.jsxs("div",{className:"info-editor-field",children:[I.jsx("label",{children:"Forced Input Layout"}),I.jsxs("select",{value:J,onChange:Q=>X(Q.target.value),children:[I.jsx("option",{value:"",children:" None "}),I.jsx("option",{value:"nurikabe",children:"Nurikabe"})]})]}),I.jsxs("div",{className:"info-editor-row",children:[I.jsxs("div",{className:"info-editor-field",children:[I.jsx("label",{children:"Rows"}),I.jsx("input",{type:"number",value:f,onChange:Q=>p(Math.min(99,Math.max(1,Number(Q.target.value)))),min:1,max:99})]}),I.jsxs("div",{className:"info-editor-field",children:[I.jsx("label",{children:"Cols"}),I.jsx("input",{type:"number",value:m,onChange:Q=>_(Math.min(99,Math.max(1,Number(Q.target.value)))),min:1,max:99})]})]}),I.jsx("button",{className:"info-btn",onClick:()=>W.resetGrid(f,m),children:"Resize Grid"}),I.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),I.jsx("button",{className:"info-btn",onClick:bt,children:"Save (Download JSON)"}),I.jsx("button",{className:"info-btn",onClick:()=>{var Q;return(Q=ce.current)==null?void 0:Q.click()},children:"Load JSON"}),I.jsx("input",{ref:ce,type:"file",accept:".json",style:{display:"none"},onChange:vr}),I.jsx("button",{className:"info-btn",onClick:Vn,children:"Clear All"}),I.jsx("button",{className:"info-btn",onClick:In,children:"Clear Player Input"}),I.jsx("button",{className:"info-btn",onClick:qe,children:"Enter Solution Mode"}),I.jsx("input",{ref:ve,type:"file",accept:"image/*",style:{display:"none"},onChange:Sn}),I.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),I.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Rules"}),ee.map((Q,he)=>I.jsxs("div",{className:"info-list-item info-list-draggable",draggable:!0,onDragStart:()=>Wr("rule",he),onDragOver:fe=>rr(fe,he),onDrop:()=>Hr("rule"),children:[I.jsx("span",{className:"info-drag-handle",title:"Drag to reorder",children:""}),(ct==null?void 0:ct.type)==="rule"&&ct.index===he?I.jsx("input",{className:"info-edit-input",value:ln,onChange:fe=>St(fe.target.value),onBlur:Cn,onKeyDown:fe=>{fe.key==="Enter"&&Cn(),fe.key==="Escape"&&(qn(null),St(""))},autoFocus:!0}):I.jsx("span",{className:"info-list-text info-list-editable",onClick:()=>Gn("rule",he,Q),children:Q}),I.jsx("button",{className:"info-list-remove",onClick:()=>ue(ee.filter((fe,Ve)=>Ve!==he)),title:"Remove",children:""})]},he)),I.jsxs("div",{className:"info-add-row",children:[I.jsx("input",{className:"info-add-input",value:x,onChange:Q=>k(Q.target.value),placeholder:"Add a rule...",onKeyDown:Q=>{Q.key==="Enter"&&x.trim()&&(ue([...ee,x.trim()]),k(""))}}),I.jsx("button",{className:"info-add-btn",onClick:()=>{x.trim()&&(ue([...ee,x.trim()]),k(""))},children:"+"})]}),I.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),I.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Clues"}),re.map((Q,he)=>I.jsxs("div",{className:"info-list-item info-list-draggable",draggable:!0,onDragStart:()=>Wr("clue",he),onDragOver:fe=>rr(fe,he),onDrop:()=>Hr("clue"),children:[I.jsx("span",{className:"info-drag-handle",title:"Drag to reorder",children:""}),(ct==null?void 0:ct.type)==="clue"&&ct.index===he?I.jsx("input",{className:"info-edit-input",value:ln,onChange:fe=>St(fe.target.value),onBlur:Cn,onKeyDown:fe=>{fe.key==="Enter"&&Cn(),fe.key==="Escape"&&(qn(null),St(""))},autoFocus:!0}):I.jsx("span",{className:"info-list-text info-list-editable",onClick:()=>Gn("clue",he,Q),children:Q}),I.jsx("button",{className:"info-list-remove",onClick:()=>se(re.filter((fe,Ve)=>Ve!==he)),title:"Remove",children:""})]},he)),I.jsxs("div",{className:"info-add-row",children:[I.jsx("input",{className:"info-add-input",value:A,onChange:Q=>L(Q.target.value),placeholder:"Add a clue...",onKeyDown:Q=>{Q.key==="Enter"&&A.trim()&&(se([...re,A.trim()]),L(""))}}),I.jsx("button",{className:"info-add-btn",onClick:()=>{A.trim()&&(se([...re,A.trim()]),L(""))},children:"+"})]})]})})}),I.jsx("main",{className:"panel-center",onMouseDown:Q=>{Q.target.closest(".puzzle-grid")||W.clearSelection()},children:I.jsx(RE,{grid:W.grid,selection:W.selection,debug:t,inputMode:W.inputMode,activeColor:W.activeColor,activeMark:W.activeMark,clearSelection:W.clearSelection,commitSelection:W.commitSelection,onDragChange:W.onDragChange,onRightClickCell:J?ii:void 0,forcedInputLayout:J||void 0})}),I.jsx("aside",{className:"panel-right",children:I.jsx(AE,{inputMode:W.inputMode,onInputModeChange:Q=>{Q==="normal"&&J==="nurikabe"?(W.setInputMode("color"),W.setActiveColor("9")):W.setInputMode(Q),Q!=="normal"&&Ie(null)},onColorSelect:Q=>{W.inputMode==="fixedColor"?W.applyFixedColor(Q):W.applyColor(Q)},onColorErase:W.eraseColor,activeColor:W.activeColor,onActiveColorChange:W.setActiveColor,activeMark:W.activeMark,onActiveMarkChange:W.setActiveMark,onMarkSelect:Q=>W.toggleMark(Q),onMarkErase:W.eraseMark,onLabelApply:(Q,he)=>W.applyLabel(Q,he),onLabelRemove:()=>W.removeLabel(),onUndo:W.undo,onRedo:W.redo,onErase:W.clearValues,isEditor:!He,theme:l,onThemeToggle:c,imageLibrary:S,selectedImageIndex:P,onImageSelect:Ct,onImageApply:yr,onImageRemove:W.removeImage,onImageImport:()=>{var Q;return(Q=ve.current)==null?void 0:Q.click()},forcedInputLayout:J||void 0})}),I.jsx(wc,{...nr})]})}const Sv=768;function OP(){const[n,e]=R.useState(()=>window.innerWidth<=Sv);return R.useEffect(()=>{const t=window.matchMedia(`(max-width: ${Sv}px)`),s=o=>e(o.matches);return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[]),n}const Cv=.3,kv=3,LP=.002,Rv=50,Av=2;function MP({rows:n,cols:e}){const t=R.useRef(null),[s,o]=R.useState(1),[l,c]=R.useState(1),[f,p]=R.useState(!1),[m,_]=R.useState({x:0,y:0}),E=R.useRef(0),T=R.useRef(1),V=R.useRef({x:0,y:0}),U=R.useRef({x:0,y:0}),F=R.useRef(!1),O=e*Rv+Av,H=n*Rv+Av;R.useEffect(()=>{const x=t.current;if(!x||n===0||e===0)return;const k=()=>{const L=x.clientWidth,S=x.clientHeight;if(L===0||S===0)return;const b=Math.min(L/O,S/H,1.5)*.92;o(Math.max(.1,b))},A=new ResizeObserver(k);return A.observe(x),k(),()=>A.disconnect()},[n,e,O,H]),R.useEffect(()=>{c(1),_({x:0,y:0})},[n,e]),R.useEffect(()=>{const x=k=>{if(!k.ctrlKey&&!k.metaKey)return;const A=t.current;!A||!A.contains(k.target)||(k.preventDefault(),k.stopPropagation(),c(L=>{const S=-k.deltaY*LP;return Math.min(kv,Math.max(Cv,L+S))}))};return window.addEventListener("wheel",x,{passive:!1,capture:!0}),()=>window.removeEventListener("wheel",x,{capture:!0})},[]),R.useEffect(()=>{const x=(S,b)=>Math.hypot(b.clientX-S.clientX,b.clientY-S.clientY),k=S=>{const b=t.current;!b||!b.contains(S.target)||(S.touches.length===2?(p(!0),E.current=x(S.touches[0],S.touches[1]),T.current=Y.current):S.touches.length===1&&Y.current>1.05&&(F.current=!0,V.current={x:S.touches[0].clientX,y:S.touches[0].clientY},U.current={...ee.current}))},A=S=>{if(S.touches.length===2){S.preventDefault();const P=x(S.touches[0],S.touches[1])/E.current,Ie=Math.min(kv,Math.max(Cv,T.current*P));c(Ie)}else if(S.touches.length===1&&F.current){S.preventDefault();const b=S.touches[0].clientX-V.current.x,P=S.touches[0].clientY-V.current.y;_({x:U.current.x+b,y:U.current.y+P})}},L=S=>{S.touches.length<2&&setTimeout(()=>p(!1),50),S.touches.length===0&&(F.current=!1)};return document.addEventListener("touchstart",k,{passive:!0}),document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("touchend",L,{passive:!0}),()=>{document.removeEventListener("touchstart",k),document.removeEventListener("touchmove",A),document.removeEventListener("touchend",L)}},[]);const Y=R.useRef(l);Y.current=l;const ee=R.useRef(m);ee.current=m;const ue=s*l,re=R.useCallback(()=>{c(1),_({x:0,y:0})},[]),se={transform:`translate(${m.x}px, ${m.y}px) scale(${ue})`,transformOrigin:"center center"};return{containerRef:t,scale:ue,zoomLevel:l,style:se,isPinching:f,resetZoom:re}}const jP=["circle","square","triangle","diamond","pentagon","hexagon","dot"],FP={circle:"",square:"",triangle:"",diamond:"",pentagon:"",hexagon:"",dot:""},UP=[{mode:"normal",label:"Normal",icon:""},{mode:"note",label:"Note",icon:""},{mode:"color",label:"Color",icon:""},{mode:"cross",label:"Cross",icon:""},{mode:"border",label:"Border",icon:""},{mode:"mark",label:"Mark",icon:""}];function zP({inputMode:n,onInputModeChange:e,onValueInput:t,onNoteInput:s,valueSet:o,onColorSelect:l,onColorErase:c,activeColor:f=null,onActiveColorChange:p,activeMark:m=null,onActiveMarkChange:_,onMarkSelect:E,onMarkErase:T,onUndo:V,onRedo:U,onErase:F,onSubmit:O,forcedInputLayout:H}){const Y=n==="note",ee=n==="color",ue=n==="mark",re=se=>{Y?s(se):t(se)};return I.jsxs("div",{className:"input-panel",onMouseDown:se=>se.preventDefault(),children:[!H&&I.jsx("div",{className:"ip-modes",children:UP.map(se=>I.jsxs("button",{className:`ip-mode-btn ${n===se.mode?"selected":""}`,onClick:()=>e(n===se.mode?"normal":se.mode),children:[I.jsx("span",{className:"ip-mode-icon",children:se.icon}),I.jsx("span",{className:"ip-mode-label",children:se.label})]},se.mode))}),I.jsxs("div",{className:"ip-context",children:[(n==="normal"||Y)&&!H&&I.jsx("div",{className:"ip-values",children:o.map(se=>I.jsx("button",{className:"ip-val-btn",onClick:()=>re(se),children:se},se))}),ee&&!H&&I.jsxs("div",{className:"ip-colors",children:[I.jsx("button",{className:`ip-color-swatch color-erase ${f==="0"?"active-color":""}`,onClick:()=>{f==="0"?p==null||p(null):(p==null||p("0"),c==null||c())},children:""}),Array.from({length:9},(se,x)=>x+1).map(se=>I.jsx("button",{className:`ip-color-swatch color${se} ${f===String(se)?"active-color":""}`,onClick:()=>{const x=String(se);f===x?p==null||p(null):(p==null||p(x),l==null||l(x))},children:se},se))]}),ue&&!H&&I.jsxs("div",{className:"ip-marks",children:[I.jsx("button",{className:`ip-mark-swatch ${m===null?"active-mark":""}`,onClick:()=>{T==null||T(),_==null||_(null)},children:""}),jP.map(se=>I.jsx("button",{className:`ip-mark-swatch ${m===se?"active-mark":""}`,onClick:()=>{m===se?_==null||_(null):(_==null||_(se),E==null||E(se))},children:FP[se]},se))]}),H==="nurikabe"&&I.jsx("div",{className:"ip-hint",children:"Tap: black  dot  clear"}),(n==="cross"||n==="border")&&!H&&I.jsx("div",{className:"ip-hint",children:n==="cross"?"Tap/drag cells to toggle X marks":"Drag between cells to create borders"})]}),I.jsxs("div",{className:"ip-actions",children:[I.jsx("button",{className:"ip-action-btn",onClick:F,title:"Erase",children:""}),I.jsx("button",{className:"ip-action-btn",onClick:V,title:"Undo",children:""}),I.jsx("button",{className:"ip-action-btn",onClick:U,title:"Redo",children:""}),O&&I.jsx("button",{className:"ip-submit-btn",onClick:O,children:"Submit"})]})]})}function BP({cluesList:n,struckClueWords:e,onStruckClueWordsChange:t}){if(!n.length)return null;const s=c=>{t(f=>{const p=new Set(f);return p.has(c)?p.delete(c):p.add(c),p})},o=(c,f)=>{const p=c.split(/(\s+)/).map((_,E)=>/^\s+$/.test(_)?null:`${f}:${E}`).filter(Boolean),m=p.every(_=>e.has(_));t(_=>{const E=new Set(_);for(const T of p)m?E.delete(T):E.add(T);return E})},l=(c,f)=>c.split(/(\s+)/).map((p,m)=>{if(/^\s+$/.test(p))return p;const _=`${f}:${m}`,E=e.has(_);return I.jsx("span",{className:`info-word ${E?"info-word-struck":""}`,onClick:T=>{T.stopPropagation(),s(_)},children:p},m)});return I.jsx("div",{className:"clues-bar",children:I.jsx("ul",{className:"clues-bar-list",children:n.map((c,f)=>I.jsx("li",{className:"clues-bar-item",onClick:()=>o(c,f),children:l(c,f)},f))})})}function $P({title:n,timerDisplay:e,onMenuToggle:t}){return I.jsxs("div",{className:"mobile-header",children:[I.jsx("button",{className:"mobile-menu-btn",onClick:t,children:""}),I.jsx(Di,{to:"/",className:"mobile-back-btn",children:""}),I.jsx("div",{className:"mobile-header-title",children:n||"Puzzle"}),e&&I.jsx("div",{className:"mobile-header-timer",children:e})]})}function WP({open:n,onClose:e,children:t}){return R.useEffect(()=>{if(!n)return;const s=o=>{o.key==="Escape"&&e()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[n,e]),I.jsx("div",{className:`slide-panel-backdrop ${n?"open":""}`,onClick:e,children:I.jsx("div",{className:`slide-panel ${n?"open":""}`,onClick:s=>s.stopPropagation(),children:t})})}const yp="4color:play:";function Pv(n,e,t,s,o){const l=[];for(let f=0;f<e.length;f++)for(let p=0;p<e[f].length;p++){const m=e[f][p];if(!(m.value||m.notes.length>0||m.color||m.crossed||m.mark))continue;const E={row:f,col:p};m.value&&(E.value=m.value),m.notes.length>0&&(E.notes=m.notes),m.color&&(E.color=m.color),m.crossed&&(E.crossed=m.crossed),m.mark&&(E.mark=m.mark),l.push(E)}const c={cells:l,struckRules:Array.from(t),struckClues:Array.from(s),elapsedMs:o};try{localStorage.setItem(yp+n,JSON.stringify(c))}catch{}}function HP(n){try{const e=localStorage.getItem(yp+n);return e?JSON.parse(e):null}catch{return null}}function qP(n){localStorage.removeItem(yp+n)}function GP(n,e){var s;const t=n.map(o=>o.map(l=>({...l,notes:[...l.notes]})));for(const o of e.cells){const l=(s=t[o.row])==null?void 0:s[o.col];l&&(o.value&&(l.value=o.value),o.notes&&(l.notes=o.notes),o.color&&(l.color=o.color),o.crossed&&(l.crossed=o.crossed),o.mark&&(l.mark=o.mark))}return t}function KP(n){return n.color||n.fixedColor||null}function QP(n){const e=n.length,t=n[0].length,s=Array.from({length:e},()=>Array(t).fill(-1));let o=0;for(let l=0;l<e;l++)for(let c=0;c<t;c++){if(s[l][c]!==-1)continue;const f=[[l,c]];for(s[l][c]=o;f.length>0;){const[p,m]=f.shift(),_=n[p][m].fixedBorders;p>0&&_[0]===0&&s[p-1][m]===-1&&(s[p-1][m]=o,f.push([p-1,m])),m<t-1&&_[1]===0&&s[p][m+1]===-1&&(s[p][m+1]=o,f.push([p,m+1])),p<e-1&&_[2]===0&&s[p+1][m]===-1&&(s[p+1][m]=o,f.push([p+1,m])),m>0&&_[3]===0&&s[p][m-1]===-1&&(s[p][m-1]=o,f.push([p,m-1]))}o++}return s}function YP(n){const e=n.length,t=n[0].length,s=QP(n),o=new Map;for(let c=0;c<e;c++)for(let f=0;f<t;f++){const p=s[c][f],m=KP(n[c][f]),_=o.get(p);if(_===void 0)o.set(p,m);else if(_!==m)return _===null||m===null?{valid:!1,error:"Some regions have uncolored cells."}:{valid:!1,error:"All cells in a region must be the same color."}}for(const[,c]of o)if(c===null)return{valid:!1,error:"Some regions are not colored."};const l=new Set(o.values());if(l.size>4)return{valid:!1,error:`Used ${l.size} colors  maximum is 4.`};for(let c=0;c<e;c++)for(let f=0;f<t;f++){const p=s[c][f],m=o.get(p);if(f<t-1){const _=s[c][f+1];if(_!==p&&o.get(_)===m)return{valid:!1,error:"Two adjacent regions share the same color."}}if(c<e-1){const _=s[c+1][f];if(_!==p&&o.get(_)===m)return{valid:!1,error:"Two adjacent regions share the same color."}}}return{valid:!0}}function JP(n,e){var E,T,V,U,F,O,H,Y,ee;const t=Object.keys(e.cells).length;let s=0;const o=n.length,l=n[0].length;for(let ue=0;ue<o;ue++)for(let re=0;re<l;re++)n[ue][re].value&&s++;const c=Object.keys(e.borders||{}).length;let f=0;if(c>0)for(const[ue,re]of Object.entries(e.borders)){const[se,x]=ue.split(",").map(Number),k=(T=(E=n[se])==null?void 0:E[x])==null?void 0:T.borders,A=(U=(V=n[se])==null?void 0:V[x])==null?void 0:U.fixedBorders;k&&A&&(k[0]!==A[0]||k[1]!==A[1]||k[2]!==A[2]||k[3]!==A[3])&&f++}const p=Object.keys(e.colors||{}).length;let m=0;if(p>0)for(const[ue]of Object.entries(e.colors)){const[re,se]=ue.split(",").map(Number),x=(F=n[re])==null?void 0:F[se];(x!=null&&x.color||x!=null&&x.fixedColor)&&m++}if(s!==t||f!==c||m!==p){const ue=[];return t>0&&ue.push(`${s}/${t} values`),c>0&&ue.push(`${f}/${c} borders`),p>0&&ue.push(`${m}/${p} colors`),{valid:!1,error:`Not ready: ${ue.join(", ")}.`}}let _=0;for(const[ue,re]of Object.entries(e.cells)){const[se,x]=ue.split(",").map(Number),k=(O=n[se])==null?void 0:O[x],A=(k==null?void 0:k.value)||(k==null?void 0:k.fixedValue);(!A||A.toUpperCase()!==re.toUpperCase())&&_++}if(e.borders)for(const[ue,re]of Object.entries(e.borders)){const[se,x]=ue.split(",").map(Number),k=(Y=(H=n[se])==null?void 0:H[x])==null?void 0:Y.borders;(!k||k[0]!==re[0]||k[1]!==re[1]||k[2]!==re[2]||k[3]!==re[3])&&_++}if(e.colors)for(const[ue,re]of Object.entries(e.colors)){const[se,x]=ue.split(",").map(Number),k=(ee=n[se])==null?void 0:ee[x];((k==null?void 0:k.color)||(k==null?void 0:k.fixedColor)||null)!==re&&_++}return _>0?{valid:!1,error:`${_} wrong.`}:{valid:!0}}function XP(n=0){const[e,t]=R.useState(n),[s,o]=R.useState(!1),l=R.useRef(0),c=R.useRef(n),f=R.useRef(null),p=R.useCallback(()=>{f.current&&(clearInterval(f.current),f.current=null)},[]),m=R.useCallback(()=>{l.current=Date.now(),c.current=e,o(!0)},[e]),_=R.useCallback(()=>{if(p(),l.current){const T=Date.now();c.current+=T-l.current,t(c.current),l.current=0}o(!1)},[p]),E=R.useCallback((T=0)=>{p(),c.current=T,l.current=0,t(T),o(!1)},[p]);return R.useEffect(()=>(s&&(f.current=setInterval(()=>{t(c.current+(Date.now()-l.current))},1e3)),p),[s,p]),R.useEffect(()=>()=>{p()},[p]),{elapsedMs:e,formatted:mp(e),running:s,start:m,pause:_,reset:E}}function ZP(){var bt,Vn,In;const{puzzleId:n}=Fv(),e=Sc(),[t]=Wv(),s=t.get("debug")==="true",{theme:o,toggle:l}=pp(),c=OP(),[f,p]=R.useState(!1),[m,_]=R.useState(null),[E,T]=R.useState(!0),[V,U]=R.useState(!1),[F,O]=R.useState(new Set),[H,Y]=R.useState(new Set),[ee,ue]=R.useState(null),{modalProps:re,showAlert:se,showConfirm:x}=gp(),{completedPuzzleIds:k,completionTimes:A,markCompleted:L}=SE(),S=CE(1,1),b=XP(0),P=R.useRef(b);P.current=b;const Ie=R.useRef(S.grid);Ie.current=S.grid;const Le=R.useRef(F);Le.current=F;const et=R.useRef(H);et.current=H;const ye=R.useRef(null),ne=R.useRef(!1),[J,X]=R.useState(!1),D=((bt=m==null?void 0:m.gridSize)==null?void 0:bt.rows)||1,K=((Vn=m==null?void 0:m.gridSize)==null?void 0:Vn.cols)||1,ke=MP({rows:D,cols:K}),xe=R.useMemo(()=>{if(!m)return[];if(ee!=null&&ee.cells&&Object.keys(ee.cells).length>0)return[...new Set(Object.values(ee.cells))].sort();const De=Math.max(m.gridSize.rows,m.gridSize.cols),gt=[];for(let qe=1;qe<=De&&qe<=9;qe++)gt.push(String(qe));for(let qe=10;qe<=De;qe++)gt.push(String.fromCharCode(55+qe));return gt},[m,ee]);R.useEffect(()=>{n&&IE(n).then(De=>{if(De){_(De);let gt=hf(De);const qe=HP(n);let At=0;qe&&(gt=GP(gt,qe),O(new Set(qe.struckRules)),Y(new Set(qe.struckClues)),At=qe.elapsedMs||0),S.setGrid(gt),S.setAutoCrossRules(De.autoCrossRules||[]),S.setForcedInputLayout(De.forcedInputLayout||""),De.forcedInputLayout==="nurikabe"&&(S.setInputMode("color"),S.setActiveColor("9")),TE(n).then(wn=>{wn&&ue(wn)}),k.has(n)?X(!0):(P.current.reset(At),setTimeout(()=>{P.current.start()},0)),setTimeout(()=>{ne.current=!0},0)}else U(!0);T(!1)})},[n]),R.useEffect(()=>{n&&k.has(n)&&!J&&(X(!0),P.current.pause())},[n,k,J]),R.useEffect(()=>{if(!(!n||!ne.current))return ye.current&&clearTimeout(ye.current),ye.current=setTimeout(()=>{Pv(n,S.grid,F,H,P.current.elapsedMs)},500),()=>{ye.current&&clearTimeout(ye.current)}},[S.grid,F,H,n]),R.useEffect(()=>()=>{n&&ne.current&&Pv(n,Ie.current,Le.current,et.current,P.current.elapsedMs)},[n]),kE({inputMode:S.inputMode,applyValue:S.applyValue,applyColor:S.applyColor,applyFixedValue:S.applyFixedValue,applyFixedColor:S.applyFixedColor,addNote:S.addNote,clearValues:S.clearValues,eraseColor:S.eraseColor,undo:S.undo,redo:S.redo,onActiveColorChange:S.setActiveColor,onActiveMarkChange:S.setActiveMark,toggleMark:S.toggleMark,hasSelection:S.selection.length>0,onInputModeChange:S.setInputMode});const Ue=()=>{S.setGrid(De=>De.map(gt=>gt.map(qe=>({...qe,value:qe.fixedValue?qe.value:null,notes:qe.fixedValue?qe.notes:[],color:qe.fixedValue?qe.color:null,crossed:qe.fixedValue?qe.crossed:!1,mark:qe.fixedValue?qe.mark:null,borders:[...qe.fixedBorders]})))),O(new Set),Y(new Set),n&&qP(n)},$e=async()=>{await x("Are you sure you want to reset all your input?","Reset Input")&&Ue()},We=(m==null?void 0:m.forcedInputLayout)||"",He=R.useCallback(De=>{We==="nurikabe"&&S.setGrid(gt=>{const qe=gt.map(wn=>wn.map(Sn=>({...Sn}))),At=qe[De.row][De.col];return At.mark=At.mark==="dot"?null:"dot",At.mark==="dot"&&(At.color=null),qe})},[We,S]),Qe=R.useRef(!1),Tt=R.useRef("black"),Hn=R.useCallback(De=>{if(De.length===0)return;const gt=!Qe.current,qe=gt?S.setGridWithUndo:S.setGrid;gt&&(Qe.current=!0),qe(At=>{var qn,ln;if(gt){const St=(qn=At[De[0].row])==null?void 0:qn[De[0].col];if(!St||St.fixedValue)return At;St.color==="9"&&!St.mark?Tt.current="dot":St.mark==="dot"?Tt.current="clear":Tt.current="black"}const wn=Tt.current,Sn=At.map(St=>St.map(ut=>({...ut})));let ct=!1;for(const St of De){const ut=(ln=Sn[St.row])==null?void 0:ln[St.col];!ut||ut.fixedValue||(wn==="black"&&(ut.color!=="9"||ut.mark)?(ut.color="9",ut.mark=null,ct=!0):wn==="dot"&&(ut.mark!=="dot"||ut.color)?(ut.color=null,ut.mark="dot",ct=!0):wn==="clear"&&(ut.color||ut.mark)&&(ut.color=null,ut.mark=null,ct=!0))}return ct?Sn:At})},[S]),nr=R.useCallback(De=>{Qe.current=!1},[]),Ht=((In=m==null?void 0:m.tags)==null?void 0:In.includes("4color"))??!1,ae=Ht||!!ee,W=R.useCallback(async()=>{let De;if(Ht)De=YP(S.grid);else if(ee)De=JP(S.grid,ee);else return;De.valid?(b.pause(),n&&L(n,b.elapsedMs),X(!0),await x("Congratulations!","Puzzle Solved!","Clear Puzzle","Keep")&&Ue()):await se(De.error||"Not quite right. Keep trying!","Not Quite")},[S.grid,Ht,ee,x,se,n,L,b]),ce=We==="nurikabe";if(E)return I.jsx("p",{style:{textAlign:"center",marginTop:40},children:"Loading puzzle..."});if(V||!m)return I.jsxs("div",{style:{textAlign:"center",marginTop:40},children:[I.jsx("p",{children:"Puzzle not found."}),I.jsx(Di,{to:"/",children:"Back to puzzle list"})]});const ve=J?n&&A.has(n)?I.jsx("div",{className:"info-timer completed",children:mp(A.get(n))}):null:I.jsx("div",{className:"info-timer",children:b.formatted}),de=I.jsxs(df,{title:m.title,author:m.author,gridSize:m.gridSize,difficulty:m.difficulty,rulesList:m.rules,cluesList:m.clues,backLink:!c,headerRight:I.jsx(Ec,{}),struckRuleWords:F,onStruckRuleWordsChange:O,struckClueWords:H,onStruckClueWordsChange:Y,children:[!c&&ve,I.jsx("button",{className:"info-btn",onClick:$e,children:"Reset My Input"}),s&&I.jsx("button",{className:"info-btn",onClick:()=>e(`/edit/${n}`),children:"Edit Puzzle"})]}),ge=I.jsxs(df,{title:m.title,author:m.author,gridSize:m.gridSize,difficulty:m.difficulty,rulesList:m.rules,backLink:!1,headerRight:I.jsx(Ec,{}),struckRuleWords:F,onStruckRuleWordsChange:O,children:[ve,I.jsx("button",{className:"info-btn",onClick:$e,children:"Reset My Input"}),s&&I.jsx("button",{className:"info-btn",onClick:()=>e(`/edit/${n}`),children:"Edit Puzzle"})]}),Pe=I.jsx(RE,{grid:S.grid,selection:S.selection,debug:s,inputMode:ce?"cross":S.inputMode,activeColor:ce?null:S.activeColor,activeMark:S.activeMark,clearSelection:S.clearSelection,commitSelection:ce?nr:S.commitSelection,onDragChange:ce?Hn:S.onDragChange,onRightClickCell:We?He:void 0,forcedInputLayout:We||void 0,isPinching:ke.isPinching}),It=I.jsx(zP,{inputMode:S.inputMode,onInputModeChange:S.setInputMode,onValueInput:S.applyValue,onNoteInput:S.addNote,valueSet:xe,onColorSelect:De=>S.applyColor(De),onColorErase:S.eraseColor,activeColor:S.activeColor,onActiveColorChange:S.setActiveColor,activeMark:S.activeMark,onActiveMarkChange:S.setActiveMark,onMarkSelect:De=>S.toggleMark(De),onMarkErase:S.eraseMark,onUndo:S.undo,onRedo:S.redo,onErase:S.clearValues,onSubmit:ae?W:void 0,forcedInputLayout:We||void 0});return c?I.jsxs("div",{className:"mobile-layout",children:[I.jsx($P,{title:m.title,timerDisplay:ve,onMenuToggle:()=>p(De=>!De)}),m.clues&&m.clues.length>0&&I.jsx(BP,{cluesList:m.clues,struckClueWords:H,onStruckClueWordsChange:Y}),I.jsx("div",{className:"grid-scale-area",ref:ke.containerRef,onMouseDown:De=>{De.target.closest(".puzzle-grid")||S.clearSelection()},children:I.jsx("div",{className:"grid-scale-wrapper",style:ke.style,children:Pe})}),It,I.jsx(WP,{open:f,onClose:()=>p(!1),children:ge}),I.jsx(wc,{...re})]}):I.jsxs("div",{className:"page-layout",children:[I.jsx(PE,{children:de}),I.jsx("div",{className:"panel-center-col",children:I.jsx("div",{className:"grid-scale-area",ref:ke.containerRef,onMouseDown:De=>{De.target.closest(".puzzle-grid")||S.clearSelection()},children:I.jsx("div",{className:"grid-scale-wrapper",style:ke.style,children:Pe})})}),I.jsx("aside",{className:"panel-right",children:I.jsx(AE,{isEditor:!1,theme:o,onThemeToggle:l,inputMode:S.inputMode,onInputModeChange:S.setInputMode,onColorSelect:De=>S.applyColor(De),onColorErase:S.eraseColor,activeColor:S.activeColor,onActiveColorChange:S.setActiveColor,activeMark:S.activeMark,onActiveMarkChange:S.setActiveMark,onMarkSelect:De=>S.toggleMark(De),onMarkErase:S.eraseMark,onUndo:S.undo,onRedo:S.redo,onErase:S.clearValues,onSubmit:ae?W:void 0,forcedInputLayout:We||void 0})}),I.jsx(wc,{...re})]})}function ex(){return I.jsx(hP,{children:I.jsx(GT,{children:I.jsxs(FT,{children:[I.jsx(Ga,{path:"/",element:I.jsx(_P,{})}),I.jsx(Ga,{path:"/edit",element:I.jsx(Iv,{})}),I.jsx(Ga,{path:"/edit/:puzzleId",element:I.jsx(Iv,{})}),I.jsx(Ga,{path:"/play/:puzzleId",element:I.jsx(ZP,{})})]})})})}q0.createRoot(document.getElementById("root")).render(I.jsx(pf.StrictMode,{children:I.jsx(ex,{})}));
