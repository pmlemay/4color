function A0(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function v_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dd={exports:{}},Ha={},fd={exports:{}},We={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function k0(){if(Ig)return We;Ig=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function T(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var M={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,$={};function L(F,Y,De){this.props=F,this.context=Y,this.refs=$,this.updater=De||M}L.prototype.isReactComponent={},L.prototype.setState=function(F,Y){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Y,"setState")},L.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function te(){}te.prototype=L.prototype;function se(F,Y,De){this.props=F,this.context=Y,this.refs=$,this.updater=De||M}var ae=se.prototype=new te;ae.constructor=se,B(ae,L.prototype),ae.isPureReactComponent=!0;var oe=Array.isArray,me=Object.prototype.hasOwnProperty,ne={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(F,Y,De){var Oe,ze={},Ue=null,Je=null;if(Y!=null)for(Oe in Y.ref!==void 0&&(Je=Y.ref),Y.key!==void 0&&(Ue=""+Y.key),Y)me.call(Y,Oe)&&!N.hasOwnProperty(Oe)&&(ze[Oe]=Y[Oe]);var He=arguments.length-2;if(He===1)ze.children=De;else if(1<He){for(var nt=Array(He),Lt=0;Lt<He;Lt++)nt[Lt]=arguments[Lt+2];ze.children=nt}if(F&&F.defaultProps)for(Oe in He=F.defaultProps,He)ze[Oe]===void 0&&(ze[Oe]=He[Oe]);return{$$typeof:n,type:F,key:Ue,ref:Je,props:ze,_owner:ne.current}}function R(F,Y){return{$$typeof:n,type:F.type,key:Y,ref:F.ref,props:F.props,_owner:F._owner}}function P(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function x(F){var Y={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(De){return Y[De]})}var V=/\/+/g;function C(F,Y){return typeof F=="object"&&F!==null&&F.key!=null?x(""+F.key):Y.toString(36)}function Ne(F,Y,De,Oe,ze){var Ue=typeof F;(Ue==="undefined"||Ue==="boolean")&&(F=null);var Je=!1;if(F===null)Je=!0;else switch(Ue){case"string":case"number":Je=!0;break;case"object":switch(F.$$typeof){case n:case e:Je=!0}}if(Je)return Je=F,ze=ze(Je),F=Oe===""?"."+C(Je,0):Oe,oe(ze)?(De="",F!=null&&(De=F.replace(V,"$&/")+"/"),Ne(ze,Y,De,"",function(Lt){return Lt})):ze!=null&&(P(ze)&&(ze=R(ze,De+(!ze.key||Je&&Je.key===ze.key?"":(""+ze.key).replace(V,"$&/")+"/")+F)),Y.push(ze)),1;if(Je=0,Oe=Oe===""?".":Oe+":",oe(F))for(var He=0;He<F.length;He++){Ue=F[He];var nt=Oe+C(Ue,He);Je+=Ne(Ue,Y,De,nt,ze)}else if(nt=T(F),typeof nt=="function")for(F=nt.call(F),He=0;!(Ue=F.next()).done;)Ue=Ue.value,nt=Oe+C(Ue,He++),Je+=Ne(Ue,Y,De,nt,ze);else if(Ue==="object")throw Y=String(F),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.");return Je}function $e(F,Y,De){if(F==null)return F;var Oe=[],ze=0;return Ne(F,Oe,"","",function(Ue){return Y.call(De,Ue,ze++)}),Oe}function Ae(F){if(F._status===-1){var Y=F._result;Y=Y(),Y.then(function(De){(F._status===0||F._status===-1)&&(F._status=1,F._result=De)},function(De){(F._status===0||F._status===-1)&&(F._status=2,F._result=De)}),F._status===-1&&(F._status=0,F._result=Y)}if(F._status===1)return F._result.default;throw F._result}var G={current:null},Q={transition:null},Z={ReactCurrentDispatcher:G,ReactCurrentBatchConfig:Q,ReactCurrentOwner:ne};function de(){throw Error("act(...) is not supported in production builds of React.")}return We.Children={map:$e,forEach:function(F,Y,De){$e(F,function(){Y.apply(this,arguments)},De)},count:function(F){var Y=0;return $e(F,function(){Y++}),Y},toArray:function(F){return $e(F,function(Y){return Y})||[]},only:function(F){if(!P(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},We.Component=L,We.Fragment=t,We.Profiler=o,We.PureComponent=se,We.StrictMode=s,We.Suspense=p,We.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z,We.act=de,We.cloneElement=function(F,Y,De){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var Oe=B({},F.props),ze=F.key,Ue=F.ref,Je=F._owner;if(Y!=null){if(Y.ref!==void 0&&(Ue=Y.ref,Je=ne.current),Y.key!==void 0&&(ze=""+Y.key),F.type&&F.type.defaultProps)var He=F.type.defaultProps;for(nt in Y)me.call(Y,nt)&&!N.hasOwnProperty(nt)&&(Oe[nt]=Y[nt]===void 0&&He!==void 0?He[nt]:Y[nt])}var nt=arguments.length-2;if(nt===1)Oe.children=De;else if(1<nt){He=Array(nt);for(var Lt=0;Lt<nt;Lt++)He[Lt]=arguments[Lt+2];Oe.children=He}return{$$typeof:n,type:F.type,key:ze,ref:Ue,props:Oe,_owner:Je}},We.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},We.createElement=S,We.createFactory=function(F){var Y=S.bind(null,F);return Y.type=F,Y},We.createRef=function(){return{current:null}},We.forwardRef=function(F){return{$$typeof:f,render:F}},We.isValidElement=P,We.lazy=function(F){return{$$typeof:_,_payload:{_status:-1,_result:F},_init:Ae}},We.memo=function(F,Y){return{$$typeof:y,type:F,compare:Y===void 0?null:Y}},We.startTransition=function(F){var Y=Q.transition;Q.transition={};try{F()}finally{Q.transition=Y}},We.unstable_act=de,We.useCallback=function(F,Y){return G.current.useCallback(F,Y)},We.useContext=function(F){return G.current.useContext(F)},We.useDebugValue=function(){},We.useDeferredValue=function(F){return G.current.useDeferredValue(F)},We.useEffect=function(F,Y){return G.current.useEffect(F,Y)},We.useId=function(){return G.current.useId()},We.useImperativeHandle=function(F,Y,De){return G.current.useImperativeHandle(F,Y,De)},We.useInsertionEffect=function(F,Y){return G.current.useInsertionEffect(F,Y)},We.useLayoutEffect=function(F,Y){return G.current.useLayoutEffect(F,Y)},We.useMemo=function(F,Y){return G.current.useMemo(F,Y)},We.useReducer=function(F,Y,De){return G.current.useReducer(F,Y,De)},We.useRef=function(F){return G.current.useRef(F)},We.useState=function(F){return G.current.useState(F)},We.useSyncExternalStore=function(F,Y,De){return G.current.useSyncExternalStore(F,Y,De)},We.useTransition=function(){return G.current.useTransition()},We.version="18.3.1",We}var Sg;function cf(){return Sg||(Sg=1,fd.exports=k0()),fd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function R0(){if(Cg)return Ha;Cg=1;var n=cf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,y){var _,E={},T=null,M=null;y!==void 0&&(T=""+y),p.key!==void 0&&(T=""+p.key),p.ref!==void 0&&(M=p.ref);for(_ in p)s.call(p,_)&&!l.hasOwnProperty(_)&&(E[_]=p[_]);if(f&&f.defaultProps)for(_ in p=f.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:f,key:T,ref:M,props:E,_owner:o.current}}return Ha.Fragment=t,Ha.jsx=c,Ha.jsxs=c,Ha}var Ag;function P0(){return Ag||(Ag=1,dd.exports=R0()),dd.exports}var A=P0(),D=cf();const hf=v_(D),x0=A0({__proto__:null,default:hf},[D]);var Vu={},pd={exports:{}},vn={},md={exports:{}},gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kg;function N0(){return kg||(kg=1,(function(n){function e(Q,Z){var de=Q.length;Q.push(Z);e:for(;0<de;){var F=de-1>>>1,Y=Q[F];if(0<o(Y,Z))Q[F]=Z,Q[de]=Y,de=F;else break e}}function t(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var Z=Q[0],de=Q.pop();if(de!==Z){Q[0]=de;e:for(var F=0,Y=Q.length,De=Y>>>1;F<De;){var Oe=2*(F+1)-1,ze=Q[Oe],Ue=Oe+1,Je=Q[Ue];if(0>o(ze,de))Ue<Y&&0>o(Je,ze)?(Q[F]=Je,Q[Ue]=de,F=Ue):(Q[F]=ze,Q[Oe]=de,F=Oe);else if(Ue<Y&&0>o(Je,de))Q[F]=Je,Q[Ue]=de,F=Ue;else break e}}return Z}function o(Q,Z){var de=Q.sortIndex-Z.sortIndex;return de!==0?de:Q.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],y=[],_=1,E=null,T=3,M=!1,B=!1,$=!1,L=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ae(Q){for(var Z=t(y);Z!==null;){if(Z.callback===null)s(y);else if(Z.startTime<=Q)s(y),Z.sortIndex=Z.expirationTime,e(p,Z);else break;Z=t(y)}}function oe(Q){if($=!1,ae(Q),!B)if(t(p)!==null)B=!0,Ae(me);else{var Z=t(y);Z!==null&&G(oe,Z.startTime-Q)}}function me(Q,Z){B=!1,$&&($=!1,te(S),S=-1),M=!0;var de=T;try{for(ae(Z),E=t(p);E!==null&&(!(E.expirationTime>Z)||Q&&!x());){var F=E.callback;if(typeof F=="function"){E.callback=null,T=E.priorityLevel;var Y=F(E.expirationTime<=Z);Z=n.unstable_now(),typeof Y=="function"?E.callback=Y:E===t(p)&&s(p),ae(Z)}else s(p);E=t(p)}if(E!==null)var De=!0;else{var Oe=t(y);Oe!==null&&G(oe,Oe.startTime-Z),De=!1}return De}finally{E=null,T=de,M=!1}}var ne=!1,N=null,S=-1,R=5,P=-1;function x(){return!(n.unstable_now()-P<R)}function V(){if(N!==null){var Q=n.unstable_now();P=Q;var Z=!0;try{Z=N(!0,Q)}finally{Z?C():(ne=!1,N=null)}}else ne=!1}var C;if(typeof se=="function")C=function(){se(V)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,$e=Ne.port2;Ne.port1.onmessage=V,C=function(){$e.postMessage(null)}}else C=function(){L(V,0)};function Ae(Q){N=Q,ne||(ne=!0,C())}function G(Q,Z){S=L(function(){Q(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){B||M||(B=!0,Ae(me))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var Z=3;break;default:Z=T}var de=T;T=Z;try{return Q()}finally{T=de}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,Z){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var de=T;T=Q;try{return Z()}finally{T=de}},n.unstable_scheduleCallback=function(Q,Z,de){var F=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?F+de:F):de=F,Q){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=de+Y,Q={id:_++,callback:Z,priorityLevel:Q,startTime:de,expirationTime:Y,sortIndex:-1},de>F?(Q.sortIndex=de,e(y,Q),t(p)===null&&Q===t(y)&&($?(te(S),S=-1):$=!0,G(oe,de-F))):(Q.sortIndex=Y,e(p,Q),B||M||(B=!0,Ae(me))),Q},n.unstable_shouldYield=x,n.unstable_wrapCallback=function(Q){var Z=T;return function(){var de=T;T=Z;try{return Q.apply(this,arguments)}finally{T=de}}}})(gd)),gd}var Rg;function D0(){return Rg||(Rg=1,md.exports=N0()),md.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function b0(){if(Pg)return vn;Pg=1;var n=cf(),e=D0();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function T(r){return p.call(E,r)?!0:p.call(_,r)?!1:y.test(r)?E[r]=!0:(_[r]=!0,!1)}function M(r,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function B(r,i,a,h){if(i===null||typeof i>"u"||M(r,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(r,i,a,h,d,m,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=m,this.removeEmptyString=w}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){L[r]=new $(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];L[i]=new $(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){L[r]=new $(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){L[r]=new $(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){L[r]=new $(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){L[r]=new $(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){L[r]=new $(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){L[r]=new $(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){L[r]=new $(r,5,!1,r.toLowerCase(),null,!1,!1)});var te=/[\-:]([a-z])/g;function se(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(te,se);L[i]=new $(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(te,se);L[i]=new $(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(te,se);L[i]=new $(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){L[r]=new $(r,1,!1,r.toLowerCase(),null,!1,!1)}),L.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){L[r]=new $(r,1,!1,r.toLowerCase(),null,!0,!0)});function ae(r,i,a,h){var d=L.hasOwnProperty(i)?L[i]:null;(d!==null?d.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(B(i,a,d,h)&&(a=null),h||d===null?T(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,h=d.attributeNamespace,a===null?r.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?r.setAttributeNS(h,i,a):r.setAttribute(i,a))))}var oe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,me=Symbol.for("react.element"),ne=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),x=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),Ne=Symbol.for("react.suspense_list"),$e=Symbol.for("react.memo"),Ae=Symbol.for("react.lazy"),G=Symbol.for("react.offscreen"),Q=Symbol.iterator;function Z(r){return r===null||typeof r!="object"?null:(r=Q&&r[Q]||r["@@iterator"],typeof r=="function"?r:null)}var de=Object.assign,F;function Y(r){if(F===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);F=i&&i[1]||""}return`
`+F+r}var De=!1;function Oe(r,i){if(!r||De)return"";De=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(W){var h=W}Reflect.construct(r,[],i)}else{try{i.call()}catch(W){h=W}r.call(i.prototype)}else{try{throw Error()}catch(W){h=W}r()}}catch(W){if(W&&h&&typeof W.stack=="string"){for(var d=W.stack.split(`
`),m=h.stack.split(`
`),w=d.length-1,k=m.length-1;1<=w&&0<=k&&d[w]!==m[k];)k--;for(;1<=w&&0<=k;w--,k--)if(d[w]!==m[k]){if(w!==1||k!==1)do if(w--,k--,0>k||d[w]!==m[k]){var b=`
`+d[w].replace(" at new "," at ");return r.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",r.displayName)),b}while(1<=w&&0<=k);break}}}finally{De=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Y(r):""}function ze(r){switch(r.tag){case 5:return Y(r.type);case 16:return Y("Lazy");case 13:return Y("Suspense");case 19:return Y("SuspenseList");case 0:case 2:case 15:return r=Oe(r.type,!1),r;case 11:return r=Oe(r.type.render,!1),r;case 1:return r=Oe(r.type,!0),r;default:return""}}function Ue(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case N:return"Fragment";case ne:return"Portal";case R:return"Profiler";case S:return"StrictMode";case C:return"Suspense";case Ne:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case x:return(r.displayName||"Context")+".Consumer";case P:return(r._context.displayName||"Context")+".Provider";case V:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case $e:return i=r.displayName||null,i!==null?i:Ue(r.type)||"Memo";case Ae:i=r._payload,r=r._init;try{return Ue(r(i))}catch{}}return null}function Je(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ue(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function He(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function nt(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Lt(r){var i=nt(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){h=""+w,m.call(this,w)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Tn(r){r._valueTracker||(r._valueTracker=Lt(r))}function ue(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return r&&(h=nt(r)?r.checked?"true":"false":r.value),r=h,r!==a?(i.setValue(r),!0):!1}function H(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ce(r,i){var a=i.checked;return de({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function we(r,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=He(i.value!=null?i.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function fe(r,i){i=i.checked,i!=null&&ae(r,"checked",i,!1)}function Ie(r,i){fe(r,i);var a=He(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?Ze(r,i.type,a):i.hasOwnProperty("defaultValue")&&Ze(r,i.type,He(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function qe(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function Ze(r,i,a){(i!=="number"||H(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var ct=Array.isArray;function Zt(r,i,a,h){if(r=r.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=i.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&h&&(r[a].defaultSelected=!0)}else{for(a=""+He(a),i=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,h&&(r[d].defaultSelected=!0);return}i!==null||r[d].disabled||(i=r[d])}i!==null&&(i.selected=!0)}}function On(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return de({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ti(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ct(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:He(a)}}function ni(r,i){var a=He(i.value),h=He(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function hr(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function ri(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cs(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?ri(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var dr,jt=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,d){MSApp.execUnsafeLocalFunction(function(){return r(i,a,h,d)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(dr=dr||document.createElement("div"),dr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=dr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Ln(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var In={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qn=["Webkit","ms","Moz","O"];Object.keys(In).forEach(function(r){qn.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),In[i]=In[r]})});function dn(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||In.hasOwnProperty(r)&&In[r]?(""+i).trim():i+"px"}function Gn(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=dn(a,i[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,d):r[a]=d}}var hs=de({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fn(r,i){if(i){if(hs[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Ur(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kn=null;function Qn(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Jn=null,Yn=null,gt=null;function K(r){if(r=xa(r)){if(typeof Jn!="function")throw Error(t(280));var i=r.stateNode;i&&(i=Ql(i),Jn(r.stateNode,r.type,i))}}function le(r){Yn?gt?gt.push(r):gt=[r]:Yn=r}function pe(){if(Yn){var r=Yn,i=gt;if(gt=Yn=null,K(r),i)for(r=0;r<i.length;r++)K(i[r])}}function je(r,i){return r(i)}function Tt(){}var Be=!1;function yt(r,i,a){if(Be)return r(i,a);Be=!0;try{return je(r,i,a)}finally{Be=!1,(Yn!==null||gt!==null)&&(Tt(),pe())}}function ht(r,i){var a=r.stateNode;if(a===null)return null;var h=Ql(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var at=!1;if(f)try{var Ct={};Object.defineProperty(Ct,"passive",{get:function(){at=!0}}),window.addEventListener("test",Ct,Ct),window.removeEventListener("test",Ct,Ct)}catch{at=!1}function si(r,i,a,h,d,m,w,k,b){var W=Array.prototype.slice.call(arguments,3);try{i.apply(a,W)}catch(re){this.onError(re)}}var Sn=!1,fr=null,qi=!1,Mn=null,kl={onError:function(r){Sn=!0,fr=r}};function Rl(r,i,a,h,d,m,w,k,b){Sn=!1,fr=null,si.apply(kl,arguments)}function sa(r,i,a,h,d,m,w,k,b){if(Rl.apply(this,arguments),Sn){if(Sn){var W=fr;Sn=!1,fr=null}else throw Error(t(198));qi||(qi=!0,Mn=W)}}function Xn(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function ia(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Pl(r){if(Xn(r)!==r)throw Error(t(188))}function xl(r){var i=r.alternate;if(!i){if(i=Xn(r),i===null)throw Error(t(188));return i!==r?null:r}for(var a=r,h=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Pl(d),r;if(m===h)return Pl(d),i;m=m.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=m;else{for(var w=!1,k=d.child;k;){if(k===a){w=!0,a=d,h=m;break}if(k===h){w=!0,h=d,a=m;break}k=k.sibling}if(!w){for(k=m.child;k;){if(k===a){w=!0,a=m,h=d;break}if(k===h){w=!0,h=m,a=d;break}k=k.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:i}function Nl(r){return r=xl(r),r!==null?ii(r):null}function ii(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=ii(r);if(i!==null)return i;r=r.sibling}return null}var oa=e.unstable_scheduleCallback,Gi=e.unstable_cancelCallback,oi=e.unstable_shouldYield,jr=e.unstable_requestPaint,dt=e.unstable_now,$c=e.unstable_getCurrentPriorityLevel,Ki=e.unstable_ImmediatePriority,aa=e.unstable_UserBlockingPriority,ai=e.unstable_NormalPriority,la=e.unstable_LowPriority,Qi=e.unstable_IdlePriority,li=null,Cn=null;function Dl(r){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(li,r,void 0,(r.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:ui,pr=Math.log,Fn=Math.LN2;function ui(r){return r>>>=0,r===0?32:31-(pr(r)/Fn|0)|0}var mr=64,ds=4194304;function rt(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function zr(r,i){var a=r.pendingLanes;if(a===0)return 0;var h=0,d=r.suspendedLanes,m=r.pingedLanes,w=a&268435455;if(w!==0){var k=w&~d;k!==0?h=rt(k):(m&=w,m!==0&&(h=rt(m)))}else w=a&~d,w!==0?h=rt(w):m!==0&&(h=rt(m));if(h===0)return 0;if(i!==0&&i!==h&&(i&d)===0&&(d=h&-h,m=i&-i,d>=m||d===16&&(m&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)a=31-An(i),d=1<<a,h|=r[a],i&=~d;return h}function ci(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hi(r,i){for(var a=r.suspendedLanes,h=r.pingedLanes,d=r.expirationTimes,m=r.pendingLanes;0<m;){var w=31-An(m),k=1<<w,b=d[w];b===-1?((k&a)===0||(k&h)!==0)&&(d[w]=ci(k,i)):b<=i&&(r.expiredLanes|=k),m&=~k}}function ua(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ca(){var r=mr;return mr<<=1,(mr&4194240)===0&&(mr=64),r}function ha(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function di(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-An(i),r[i]=a}function Wc(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-An(a),m=1<<d;i[d]=0,h[d]=-1,r[d]=-1,a&=~m}}function da(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var h=31-An(a),d=1<<h;d&i|r[h]&i&&(r[h]|=i),a&=~d}}var Ye=0;function gr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var fa,Ji,pa,ma,ga,yr=!1,Yi=[],_r=null,vr=null,qt=null,fi=new Map,Br=new Map,kn=[],bl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fs(r,i){switch(r){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":qt=null;break;case"pointerover":case"pointerout":fi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Br.delete(i.pointerId)}}function Zn(r,i,a,h,d,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:m,targetContainers:[d]},i!==null&&(i=xa(i),i!==null&&Ji(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),r)}function Vl(r,i,a,h,d){switch(i){case"focusin":return _r=Zn(_r,r,i,a,h,d),!0;case"dragenter":return vr=Zn(vr,r,i,a,h,d),!0;case"mouseover":return qt=Zn(qt,r,i,a,h,d),!0;case"pointerover":var m=d.pointerId;return fi.set(m,Zn(fi.get(m)||null,r,i,a,h,d)),!0;case"gotpointercapture":return m=d.pointerId,Br.set(m,Zn(Br.get(m)||null,r,i,a,h,d)),!0}return!1}function Xi(r){var i=yi(r.target);if(i!==null){var a=Xn(i);if(a!==null){if(i=a.tag,i===13){if(i=ia(a),i!==null){r.blockedOn=i,ga(r.priority,function(){pa(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function ot(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=Zi(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Kn=h,a.target.dispatchEvent(h),Kn=null}else return i=xa(a),i!==null&&Ji(i),r.blockedOn=a,!1;i.shift()}return!0}function Ol(r,i,a){ot(r)&&a.delete(i)}function Hc(){yr=!1,_r!==null&&ot(_r)&&(_r=null),vr!==null&&ot(vr)&&(vr=null),qt!==null&&ot(qt)&&(qt=null),fi.forEach(Ol),Br.forEach(Ol)}function ps(r,i){r.blockedOn===i&&(r.blockedOn=null,yr||(yr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hc)))}function ms(r){function i(d){return ps(d,r)}if(0<Yi.length){ps(Yi[0],r);for(var a=1;a<Yi.length;a++){var h=Yi[a];h.blockedOn===r&&(h.blockedOn=null)}}for(_r!==null&&ps(_r,r),vr!==null&&ps(vr,r),qt!==null&&ps(qt,r),fi.forEach(i),Br.forEach(i),a=0;a<kn.length;a++)h=kn[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<kn.length&&(a=kn[0],a.blockedOn===null);)Xi(a),a.blockedOn===null&&kn.shift()}var $r=oe.ReactCurrentBatchConfig,Wr=!0;function wr(r,i,a,h){var d=Ye,m=$r.transition;$r.transition=null;try{Ye=1,ya(r,i,a,h)}finally{Ye=d,$r.transition=m}}function Ll(r,i,a,h){var d=Ye,m=$r.transition;$r.transition=null;try{Ye=4,ya(r,i,a,h)}finally{Ye=d,$r.transition=m}}function ya(r,i,a,h){if(Wr){var d=Zi(r,i,a,h);if(d===null)nh(r,i,h,Er,a),fs(r,h);else if(Vl(d,r,i,a,h))h.stopPropagation();else if(fs(r,h),i&4&&-1<bl.indexOf(r)){for(;d!==null;){var m=xa(d);if(m!==null&&fa(m),m=Zi(r,i,a,h),m===null&&nh(r,i,h,Er,a),m===d)break;d=m}d!==null&&h.stopPropagation()}else nh(r,i,h,null,a)}}var Er=null;function Zi(r,i,a,h){if(Er=null,r=Qn(h),r=yi(r),r!==null)if(i=Xn(r),i===null)r=null;else if(a=i.tag,a===13){if(r=ia(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Er=r,null}function eo(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($c()){case Ki:return 1;case aa:return 4;case ai:case la:return 16;case Qi:return 536870912;default:return 16}default:return 16}}var Rn=null,to=null,Hr=null;function Ml(){if(Hr)return Hr;var r,i=to,a=i.length,h,d="value"in Rn?Rn.value:Rn.textContent,m=d.length;for(r=0;r<a&&i[r]===d[r];r++);var w=a-r;for(h=1;h<=w&&i[a-h]===d[m-h];h++);return Hr=d.slice(r,1<h?1-h:void 0)}function pi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Tr(){return!0}function _a(){return!1}function en(r){function i(a,h,d,m,w){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var k in r)r.hasOwnProperty(k)&&(a=r[k],this[k]=a?a(m):m[k]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Tr:_a,this.isPropagationStopped=_a,this}return de(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Tr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Tr)},persist:function(){},isPersistent:Tr}),i}var Ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=en(Ir),gs=de({},Ir,{view:0,detail:0}),no=en(gs),ro,so,Pn,gi=de({},gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Me,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Pn&&(Pn&&r.type==="mousemove"?(ro=r.screenX-Pn.screenX,so=r.screenY-Pn.screenY):so=ro=0,Pn=r),ro)},movementY:function(r){return"movementY"in r?r.movementY:so}}),va=en(gi),Fl=de({},gi,{dataTransfer:0}),Ul=en(Fl),io=de({},gs,{relatedTarget:0}),Gt=en(io),jl=de({},Ir,{animationName:0,elapsedTime:0,pseudoElement:0}),zl=en(jl),ys=de({},Ir,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=en(ys),g=de({},Ir,{data:0}),v=en(g),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},j={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=q[r])?!!i[r]:!1}function Me(){return ge}var At=de({},gs,{key:function(r){if(r.key){var i=I[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=pi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?j[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Me,charCode:function(r){return r.type==="keypress"?pi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?pi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),it=en(At),Pt=de({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xn=en(Pt),qr=de({},gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Me}),Sr=en(qr),Cr=de({},Ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),oo=en(Cr),wa=de({},gi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),wE=en(wa),EE=[9,13,27,32],qc=f&&"CompositionEvent"in window,Ea=null;f&&"documentMode"in document&&(Ea=document.documentMode);var TE=f&&"TextEvent"in window&&!Ea,mp=f&&(!qc||Ea&&8<Ea&&11>=Ea),gp=" ",yp=!1;function _p(r,i){switch(r){case"keyup":return EE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vp(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ao=!1;function IE(r,i){switch(r){case"compositionend":return vp(i);case"keypress":return i.which!==32?null:(yp=!0,gp);case"textInput":return r=i.data,r===gp&&yp?null:r;default:return null}}function SE(r,i){if(ao)return r==="compositionend"||!qc&&_p(r,i)?(r=Ml(),Hr=to=Rn=null,ao=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return mp&&i.locale!=="ko"?null:i.data;default:return null}}var CE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wp(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!CE[r.type]:i==="textarea"}function Ep(r,i,a,h){le(h),i=ql(i,"onChange"),0<i.length&&(a=new mi("onChange","change",null,a,h),r.push({event:a,listeners:i}))}var Ta=null,Ia=null;function AE(r){Up(r,0)}function Bl(r){var i=fo(r);if(ue(i))return r}function kE(r,i){if(r==="change")return i}var Tp=!1;if(f){var Gc;if(f){var Kc="oninput"in document;if(!Kc){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),Kc=typeof Ip.oninput=="function"}Gc=Kc}else Gc=!1;Tp=Gc&&(!document.documentMode||9<document.documentMode)}function Sp(){Ta&&(Ta.detachEvent("onpropertychange",Cp),Ia=Ta=null)}function Cp(r){if(r.propertyName==="value"&&Bl(Ia)){var i=[];Ep(i,Ia,r,Qn(r)),yt(AE,i)}}function RE(r,i,a){r==="focusin"?(Sp(),Ta=i,Ia=a,Ta.attachEvent("onpropertychange",Cp)):r==="focusout"&&Sp()}function PE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bl(Ia)}function xE(r,i){if(r==="click")return Bl(i)}function NE(r,i){if(r==="input"||r==="change")return Bl(i)}function DE(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var er=typeof Object.is=="function"?Object.is:DE;function Sa(r,i){if(er(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!p.call(i,d)||!er(r[d],i[d]))return!1}return!0}function Ap(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function kp(r,i){var a=Ap(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=i&&h>=i)return{node:a,offset:i-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ap(a)}}function Rp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Rp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Pp(){for(var r=window,i=H();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=H(r.document)}return i}function Qc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function bE(r){var i=Pp(),a=r.focusedElem,h=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&Rp(a.ownerDocument.documentElement,a)){if(h!==null&&Qc(a)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,m=Math.min(h.start,d);h=h.end===void 0?m:Math.min(h.end,d),!r.extend&&m>h&&(d=h,h=m,m=d),d=kp(a,m);var w=kp(a,h);d&&w&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),r.removeAllRanges(),m>h?(r.addRange(i),r.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var VE=f&&"documentMode"in document&&11>=document.documentMode,lo=null,Jc=null,Ca=null,Yc=!1;function xp(r,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yc||lo==null||lo!==H(h)||(h=lo,"selectionStart"in h&&Qc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ca&&Sa(Ca,h)||(Ca=h,h=ql(Jc,"onSelect"),0<h.length&&(i=new mi("onSelect","select",null,i,a),r.push({event:i,listeners:h}),i.target=lo)))}function $l(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var uo={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},Xc={},Np={};f&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Wl(r){if(Xc[r])return Xc[r];if(!uo[r])return r;var i=uo[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Np)return Xc[r]=i[a];return r}var Dp=Wl("animationend"),bp=Wl("animationiteration"),Vp=Wl("animationstart"),Op=Wl("transitionend"),Lp=new Map,Mp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(r,i){Lp.set(r,i),l(i,[r])}for(var Zc=0;Zc<Mp.length;Zc++){var eh=Mp[Zc],OE=eh.toLowerCase(),LE=eh[0].toUpperCase()+eh.slice(1);_s(OE,"on"+LE)}_s(Dp,"onAnimationEnd"),_s(bp,"onAnimationIteration"),_s(Vp,"onAnimationStart"),_s("dblclick","onDoubleClick"),_s("focusin","onFocus"),_s("focusout","onBlur"),_s(Op,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ME=new Set("cancel close invalid load scroll toggle".split(" ").concat(Aa));function Fp(r,i,a){var h=r.type||"unknown-event";r.currentTarget=a,sa(h,i,void 0,r),r.currentTarget=null}function Up(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],d=h.event;h=h.listeners;e:{var m=void 0;if(i)for(var w=h.length-1;0<=w;w--){var k=h[w],b=k.instance,W=k.currentTarget;if(k=k.listener,b!==m&&d.isPropagationStopped())break e;Fp(d,k,W),m=b}else for(w=0;w<h.length;w++){if(k=h[w],b=k.instance,W=k.currentTarget,k=k.listener,b!==m&&d.isPropagationStopped())break e;Fp(d,k,W),m=b}}}if(qi)throw r=Mn,qi=!1,Mn=null,r}function ft(r,i){var a=i[lh];a===void 0&&(a=i[lh]=new Set);var h=r+"__bubble";a.has(h)||(jp(i,r,2,!1),a.add(h))}function th(r,i,a){var h=0;i&&(h|=4),jp(a,r,h,i)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function ka(r){if(!r[Hl]){r[Hl]=!0,s.forEach(function(a){a!=="selectionchange"&&(ME.has(a)||th(a,!1,r),th(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Hl]||(i[Hl]=!0,th("selectionchange",!1,i))}}function jp(r,i,a,h){switch(eo(i)){case 1:var d=wr;break;case 4:d=Ll;break;default:d=ya}a=d.bind(null,i,a,r),d=void 0,!at||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),h?d!==void 0?r.addEventListener(i,a,{capture:!0,passive:d}):r.addEventListener(i,a,!0):d!==void 0?r.addEventListener(i,a,{passive:d}):r.addEventListener(i,a,!1)}function nh(r,i,a,h,d){var m=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var k=h.stateNode.containerInfo;if(k===d||k.nodeType===8&&k.parentNode===d)break;if(w===4)for(w=h.return;w!==null;){var b=w.tag;if((b===3||b===4)&&(b=w.stateNode.containerInfo,b===d||b.nodeType===8&&b.parentNode===d))return;w=w.return}for(;k!==null;){if(w=yi(k),w===null)return;if(b=w.tag,b===5||b===6){h=m=w;continue e}k=k.parentNode}}h=h.return}yt(function(){var W=m,re=Qn(a),ie=[];e:{var ee=Lp.get(r);if(ee!==void 0){var _e=mi,Te=r;switch(r){case"keypress":if(pi(a)===0)break e;case"keydown":case"keyup":_e=it;break;case"focusin":Te="focus",_e=Gt;break;case"focusout":Te="blur",_e=Gt;break;case"beforeblur":case"afterblur":_e=Gt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=va;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Ul;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=Sr;break;case Dp:case bp:case Vp:_e=zl;break;case Op:_e=oo;break;case"scroll":_e=no;break;case"wheel":_e=wE;break;case"copy":case"cut":case"paste":_e=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=xn}var Se=(i&4)!==0,kt=!Se&&r==="scroll",U=Se?ee!==null?ee+"Capture":null:ee;Se=[];for(var O=W,z;O!==null;){z=O;var he=z.stateNode;if(z.tag===5&&he!==null&&(z=he,U!==null&&(he=ht(O,U),he!=null&&Se.push(Ra(O,he,z)))),kt)break;O=O.return}0<Se.length&&(ee=new _e(ee,Te,null,a,re),ie.push({event:ee,listeners:Se}))}}if((i&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",_e=r==="mouseout"||r==="pointerout",ee&&a!==Kn&&(Te=a.relatedTarget||a.fromElement)&&(yi(Te)||Te[Gr]))break e;if((_e||ee)&&(ee=re.window===re?re:(ee=re.ownerDocument)?ee.defaultView||ee.parentWindow:window,_e?(Te=a.relatedTarget||a.toElement,_e=W,Te=Te?yi(Te):null,Te!==null&&(kt=Xn(Te),Te!==kt||Te.tag!==5&&Te.tag!==6)&&(Te=null)):(_e=null,Te=W),_e!==Te)){if(Se=va,he="onMouseLeave",U="onMouseEnter",O="mouse",(r==="pointerout"||r==="pointerover")&&(Se=xn,he="onPointerLeave",U="onPointerEnter",O="pointer"),kt=_e==null?ee:fo(_e),z=Te==null?ee:fo(Te),ee=new Se(he,O+"leave",_e,a,re),ee.target=kt,ee.relatedTarget=z,he=null,yi(re)===W&&(Se=new Se(U,O+"enter",Te,a,re),Se.target=z,Se.relatedTarget=kt,he=Se),kt=he,_e&&Te)t:{for(Se=_e,U=Te,O=0,z=Se;z;z=co(z))O++;for(z=0,he=U;he;he=co(he))z++;for(;0<O-z;)Se=co(Se),O--;for(;0<z-O;)U=co(U),z--;for(;O--;){if(Se===U||U!==null&&Se===U.alternate)break t;Se=co(Se),U=co(U)}Se=null}else Se=null;_e!==null&&zp(ie,ee,_e,Se,!1),Te!==null&&kt!==null&&zp(ie,kt,Te,Se,!0)}}e:{if(ee=W?fo(W):window,_e=ee.nodeName&&ee.nodeName.toLowerCase(),_e==="select"||_e==="input"&&ee.type==="file")var Ce=kE;else if(wp(ee))if(Tp)Ce=NE;else{Ce=PE;var Re=RE}else(_e=ee.nodeName)&&_e.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(Ce=xE);if(Ce&&(Ce=Ce(r,W))){Ep(ie,Ce,a,re);break e}Re&&Re(r,ee,W),r==="focusout"&&(Re=ee._wrapperState)&&Re.controlled&&ee.type==="number"&&Ze(ee,"number",ee.value)}switch(Re=W?fo(W):window,r){case"focusin":(wp(Re)||Re.contentEditable==="true")&&(lo=Re,Jc=W,Ca=null);break;case"focusout":Ca=Jc=lo=null;break;case"mousedown":Yc=!0;break;case"contextmenu":case"mouseup":case"dragend":Yc=!1,xp(ie,a,re);break;case"selectionchange":if(VE)break;case"keydown":case"keyup":xp(ie,a,re)}var Pe;if(qc)e:{switch(r){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else ao?_p(r,a)&&(be="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(be="onCompositionStart");be&&(mp&&a.locale!=="ko"&&(ao||be!=="onCompositionStart"?be==="onCompositionEnd"&&ao&&(Pe=Ml()):(Rn=re,to="value"in Rn?Rn.value:Rn.textContent,ao=!0)),Re=ql(W,be),0<Re.length&&(be=new v(be,r,null,a,re),ie.push({event:be,listeners:Re}),Pe?be.data=Pe:(Pe=vp(a),Pe!==null&&(be.data=Pe)))),(Pe=TE?IE(r,a):SE(r,a))&&(W=ql(W,"onBeforeInput"),0<W.length&&(re=new v("onBeforeInput","beforeinput",null,a,re),ie.push({event:re,listeners:W}),re.data=Pe))}Up(ie,i)})}function Ra(r,i,a){return{instance:r,listener:i,currentTarget:a}}function ql(r,i){for(var a=i+"Capture",h=[];r!==null;){var d=r,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=ht(r,a),m!=null&&h.unshift(Ra(r,m,d)),m=ht(r,i),m!=null&&h.push(Ra(r,m,d))),r=r.return}return h}function co(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function zp(r,i,a,h,d){for(var m=i._reactName,w=[];a!==null&&a!==h;){var k=a,b=k.alternate,W=k.stateNode;if(b!==null&&b===h)break;k.tag===5&&W!==null&&(k=W,d?(b=ht(a,m),b!=null&&w.unshift(Ra(a,b,k))):d||(b=ht(a,m),b!=null&&w.push(Ra(a,b,k)))),a=a.return}w.length!==0&&r.push({event:i,listeners:w})}var FE=/\r\n?/g,UE=/\u0000|\uFFFD/g;function Bp(r){return(typeof r=="string"?r:""+r).replace(FE,`
`).replace(UE,"")}function Gl(r,i,a){if(i=Bp(i),Bp(r)!==i&&a)throw Error(t(425))}function Kl(){}var rh=null,sh=null;function ih(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var oh=typeof setTimeout=="function"?setTimeout:void 0,jE=typeof clearTimeout=="function"?clearTimeout:void 0,$p=typeof Promise=="function"?Promise:void 0,zE=typeof queueMicrotask=="function"?queueMicrotask:typeof $p<"u"?function(r){return $p.resolve(null).then(r).catch(BE)}:oh;function BE(r){setTimeout(function(){throw r})}function ah(r,i){var a=i,h=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){r.removeChild(d),ms(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);ms(i)}function vs(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Wp(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var ho=Math.random().toString(36).slice(2),Ar="__reactFiber$"+ho,Pa="__reactProps$"+ho,Gr="__reactContainer$"+ho,lh="__reactEvents$"+ho,$E="__reactListeners$"+ho,WE="__reactHandles$"+ho;function yi(r){var i=r[Ar];if(i)return i;for(var a=r.parentNode;a;){if(i=a[Gr]||a[Ar]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=Wp(r);r!==null;){if(a=r[Ar])return a;r=Wp(r)}return i}r=a,a=r.parentNode}return null}function xa(r){return r=r[Ar]||r[Gr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function fo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Ql(r){return r[Pa]||null}var uh=[],po=-1;function ws(r){return{current:r}}function pt(r){0>po||(r.current=uh[po],uh[po]=null,po--)}function lt(r,i){po++,uh[po]=r.current,r.current=i}var Es={},tn=ws(Es),pn=ws(!1),_i=Es;function mo(r,i){var a=r.type.contextTypes;if(!a)return Es;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=i[m];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=d),d}function mn(r){return r=r.childContextTypes,r!=null}function Jl(){pt(pn),pt(tn)}function Hp(r,i,a){if(tn.current!==Es)throw Error(t(168));lt(tn,i),lt(pn,a)}function qp(r,i,a){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in i))throw Error(t(108,Je(r)||"Unknown",d));return de({},a,h)}function Yl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Es,_i=tn.current,lt(tn,r),lt(pn,pn.current),!0}function Gp(r,i,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=qp(r,i,_i),h.__reactInternalMemoizedMergedChildContext=r,pt(pn),pt(tn),lt(tn,r)):pt(pn),lt(pn,a)}var Kr=null,Xl=!1,ch=!1;function Kp(r){Kr===null?Kr=[r]:Kr.push(r)}function HE(r){Xl=!0,Kp(r)}function Ts(){if(!ch&&Kr!==null){ch=!0;var r=0,i=Ye;try{var a=Kr;for(Ye=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Kr=null,Xl=!1}catch(d){throw Kr!==null&&(Kr=Kr.slice(r+1)),oa(Ki,Ts),d}finally{Ye=i,ch=!1}}return null}var go=[],yo=0,Zl=null,eu=0,Un=[],jn=0,vi=null,Qr=1,Jr="";function wi(r,i){go[yo++]=eu,go[yo++]=Zl,Zl=r,eu=i}function Qp(r,i,a){Un[jn++]=Qr,Un[jn++]=Jr,Un[jn++]=vi,vi=r;var h=Qr;r=Jr;var d=32-An(h)-1;h&=~(1<<d),a+=1;var m=32-An(i)+d;if(30<m){var w=d-d%5;m=(h&(1<<w)-1).toString(32),h>>=w,d-=w,Qr=1<<32-An(i)+d|a<<d|h,Jr=m+r}else Qr=1<<m|a<<d|h,Jr=r}function hh(r){r.return!==null&&(wi(r,1),Qp(r,1,0))}function dh(r){for(;r===Zl;)Zl=go[--yo],go[yo]=null,eu=go[--yo],go[yo]=null;for(;r===vi;)vi=Un[--jn],Un[jn]=null,Jr=Un[--jn],Un[jn]=null,Qr=Un[--jn],Un[jn]=null}var Nn=null,Dn=null,_t=!1,tr=null;function Jp(r,i){var a=Wn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function Yp(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,Nn=r,Dn=vs(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,Nn=r,Dn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=vi!==null?{id:Qr,overflow:Jr}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Wn(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,Nn=r,Dn=null,!0):!1;default:return!1}}function fh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ph(r){if(_t){var i=Dn;if(i){var a=i;if(!Yp(r,i)){if(fh(r))throw Error(t(418));i=vs(a.nextSibling);var h=Nn;i&&Yp(r,i)?Jp(h,a):(r.flags=r.flags&-4097|2,_t=!1,Nn=r)}}else{if(fh(r))throw Error(t(418));r.flags=r.flags&-4097|2,_t=!1,Nn=r}}}function Xp(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;Nn=r}function tu(r){if(r!==Nn)return!1;if(!_t)return Xp(r),_t=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!ih(r.type,r.memoizedProps)),i&&(i=Dn)){if(fh(r))throw Zp(),Error(t(418));for(;i;)Jp(r,i),i=vs(i.nextSibling)}if(Xp(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){Dn=vs(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}Dn=null}}else Dn=Nn?vs(r.stateNode.nextSibling):null;return!0}function Zp(){for(var r=Dn;r;)r=vs(r.nextSibling)}function _o(){Dn=Nn=null,_t=!1}function mh(r){tr===null?tr=[r]:tr.push(r)}var qE=oe.ReactCurrentBatchConfig;function Na(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var d=h,m=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(w){var k=d.refs;w===null?delete k[m]:k[m]=w},i._stringRef=m,i)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function nu(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function em(r){var i=r._init;return i(r._payload)}function tm(r){function i(U,O){if(r){var z=U.deletions;z===null?(U.deletions=[O],U.flags|=16):z.push(O)}}function a(U,O){if(!r)return null;for(;O!==null;)i(U,O),O=O.sibling;return null}function h(U,O){for(U=new Map;O!==null;)O.key!==null?U.set(O.key,O):U.set(O.index,O),O=O.sibling;return U}function d(U,O){return U=xs(U,O),U.index=0,U.sibling=null,U}function m(U,O,z){return U.index=z,r?(z=U.alternate,z!==null?(z=z.index,z<O?(U.flags|=2,O):z):(U.flags|=2,O)):(U.flags|=1048576,O)}function w(U){return r&&U.alternate===null&&(U.flags|=2),U}function k(U,O,z,he){return O===null||O.tag!==6?(O=od(z,U.mode,he),O.return=U,O):(O=d(O,z),O.return=U,O)}function b(U,O,z,he){var Ce=z.type;return Ce===N?re(U,O,z.props.children,he,z.key):O!==null&&(O.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Ae&&em(Ce)===O.type)?(he=d(O,z.props),he.ref=Na(U,O,z),he.return=U,he):(he=Au(z.type,z.key,z.props,null,U.mode,he),he.ref=Na(U,O,z),he.return=U,he)}function W(U,O,z,he){return O===null||O.tag!==4||O.stateNode.containerInfo!==z.containerInfo||O.stateNode.implementation!==z.implementation?(O=ad(z,U.mode,he),O.return=U,O):(O=d(O,z.children||[]),O.return=U,O)}function re(U,O,z,he,Ce){return O===null||O.tag!==7?(O=Ri(z,U.mode,he,Ce),O.return=U,O):(O=d(O,z),O.return=U,O)}function ie(U,O,z){if(typeof O=="string"&&O!==""||typeof O=="number")return O=od(""+O,U.mode,z),O.return=U,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case me:return z=Au(O.type,O.key,O.props,null,U.mode,z),z.ref=Na(U,null,O),z.return=U,z;case ne:return O=ad(O,U.mode,z),O.return=U,O;case Ae:var he=O._init;return ie(U,he(O._payload),z)}if(ct(O)||Z(O))return O=Ri(O,U.mode,z,null),O.return=U,O;nu(U,O)}return null}function ee(U,O,z,he){var Ce=O!==null?O.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return Ce!==null?null:k(U,O,""+z,he);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case me:return z.key===Ce?b(U,O,z,he):null;case ne:return z.key===Ce?W(U,O,z,he):null;case Ae:return Ce=z._init,ee(U,O,Ce(z._payload),he)}if(ct(z)||Z(z))return Ce!==null?null:re(U,O,z,he,null);nu(U,z)}return null}function _e(U,O,z,he,Ce){if(typeof he=="string"&&he!==""||typeof he=="number")return U=U.get(z)||null,k(O,U,""+he,Ce);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case me:return U=U.get(he.key===null?z:he.key)||null,b(O,U,he,Ce);case ne:return U=U.get(he.key===null?z:he.key)||null,W(O,U,he,Ce);case Ae:var Re=he._init;return _e(U,O,z,Re(he._payload),Ce)}if(ct(he)||Z(he))return U=U.get(z)||null,re(O,U,he,Ce,null);nu(O,he)}return null}function Te(U,O,z,he){for(var Ce=null,Re=null,Pe=O,be=O=0,$t=null;Pe!==null&&be<z.length;be++){Pe.index>be?($t=Pe,Pe=null):$t=Pe.sibling;var tt=ee(U,Pe,z[be],he);if(tt===null){Pe===null&&(Pe=$t);break}r&&Pe&&tt.alternate===null&&i(U,Pe),O=m(tt,O,be),Re===null?Ce=tt:Re.sibling=tt,Re=tt,Pe=$t}if(be===z.length)return a(U,Pe),_t&&wi(U,be),Ce;if(Pe===null){for(;be<z.length;be++)Pe=ie(U,z[be],he),Pe!==null&&(O=m(Pe,O,be),Re===null?Ce=Pe:Re.sibling=Pe,Re=Pe);return _t&&wi(U,be),Ce}for(Pe=h(U,Pe);be<z.length;be++)$t=_e(Pe,U,be,z[be],he),$t!==null&&(r&&$t.alternate!==null&&Pe.delete($t.key===null?be:$t.key),O=m($t,O,be),Re===null?Ce=$t:Re.sibling=$t,Re=$t);return r&&Pe.forEach(function(Ns){return i(U,Ns)}),_t&&wi(U,be),Ce}function Se(U,O,z,he){var Ce=Z(z);if(typeof Ce!="function")throw Error(t(150));if(z=Ce.call(z),z==null)throw Error(t(151));for(var Re=Ce=null,Pe=O,be=O=0,$t=null,tt=z.next();Pe!==null&&!tt.done;be++,tt=z.next()){Pe.index>be?($t=Pe,Pe=null):$t=Pe.sibling;var Ns=ee(U,Pe,tt.value,he);if(Ns===null){Pe===null&&(Pe=$t);break}r&&Pe&&Ns.alternate===null&&i(U,Pe),O=m(Ns,O,be),Re===null?Ce=Ns:Re.sibling=Ns,Re=Ns,Pe=$t}if(tt.done)return a(U,Pe),_t&&wi(U,be),Ce;if(Pe===null){for(;!tt.done;be++,tt=z.next())tt=ie(U,tt.value,he),tt!==null&&(O=m(tt,O,be),Re===null?Ce=tt:Re.sibling=tt,Re=tt);return _t&&wi(U,be),Ce}for(Pe=h(U,Pe);!tt.done;be++,tt=z.next())tt=_e(Pe,U,be,tt.value,he),tt!==null&&(r&&tt.alternate!==null&&Pe.delete(tt.key===null?be:tt.key),O=m(tt,O,be),Re===null?Ce=tt:Re.sibling=tt,Re=tt);return r&&Pe.forEach(function(C0){return i(U,C0)}),_t&&wi(U,be),Ce}function kt(U,O,z,he){if(typeof z=="object"&&z!==null&&z.type===N&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case me:e:{for(var Ce=z.key,Re=O;Re!==null;){if(Re.key===Ce){if(Ce=z.type,Ce===N){if(Re.tag===7){a(U,Re.sibling),O=d(Re,z.props.children),O.return=U,U=O;break e}}else if(Re.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===Ae&&em(Ce)===Re.type){a(U,Re.sibling),O=d(Re,z.props),O.ref=Na(U,Re,z),O.return=U,U=O;break e}a(U,Re);break}else i(U,Re);Re=Re.sibling}z.type===N?(O=Ri(z.props.children,U.mode,he,z.key),O.return=U,U=O):(he=Au(z.type,z.key,z.props,null,U.mode,he),he.ref=Na(U,O,z),he.return=U,U=he)}return w(U);case ne:e:{for(Re=z.key;O!==null;){if(O.key===Re)if(O.tag===4&&O.stateNode.containerInfo===z.containerInfo&&O.stateNode.implementation===z.implementation){a(U,O.sibling),O=d(O,z.children||[]),O.return=U,U=O;break e}else{a(U,O);break}else i(U,O);O=O.sibling}O=ad(z,U.mode,he),O.return=U,U=O}return w(U);case Ae:return Re=z._init,kt(U,O,Re(z._payload),he)}if(ct(z))return Te(U,O,z,he);if(Z(z))return Se(U,O,z,he);nu(U,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,O!==null&&O.tag===6?(a(U,O.sibling),O=d(O,z),O.return=U,U=O):(a(U,O),O=od(z,U.mode,he),O.return=U,U=O),w(U)):a(U,O)}return kt}var vo=tm(!0),nm=tm(!1),ru=ws(null),su=null,wo=null,gh=null;function yh(){gh=wo=su=null}function _h(r){var i=ru.current;pt(ru),r._currentValue=i}function vh(r,i,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===a)break;r=r.return}}function Eo(r,i){su=r,gh=wo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(gn=!0),r.firstContext=null)}function zn(r){var i=r._currentValue;if(gh!==r)if(r={context:r,memoizedValue:i,next:null},wo===null){if(su===null)throw Error(t(308));wo=r,su.dependencies={lanes:0,firstContext:r}}else wo=wo.next=r;return i}var Ei=null;function wh(r){Ei===null?Ei=[r]:Ei.push(r)}function rm(r,i,a,h){var d=i.interleaved;return d===null?(a.next=a,wh(i)):(a.next=d.next,d.next=a),i.interleaved=a,Yr(r,h)}function Yr(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Is=!1;function Eh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Xr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Ss(r,i,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(et&2)!==0){var d=h.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),h.pending=i,Yr(r,a)}return d=h.interleaved,d===null?(i.next=i,wh(h)):(i.next=d.next,d.next=i),h.interleaved=i,Yr(r,a)}function iu(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,da(r,a)}}function im(r,i){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function ou(r,i,a,h){var d=r.updateQueue;Is=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,k=d.shared.pending;if(k!==null){d.shared.pending=null;var b=k,W=b.next;b.next=null,w===null?m=W:w.next=W,w=b;var re=r.alternate;re!==null&&(re=re.updateQueue,k=re.lastBaseUpdate,k!==w&&(k===null?re.firstBaseUpdate=W:k.next=W,re.lastBaseUpdate=b))}if(m!==null){var ie=d.baseState;w=0,re=W=b=null,k=m;do{var ee=k.lane,_e=k.eventTime;if((h&ee)===ee){re!==null&&(re=re.next={eventTime:_e,lane:0,tag:k.tag,payload:k.payload,callback:k.callback,next:null});e:{var Te=r,Se=k;switch(ee=i,_e=a,Se.tag){case 1:if(Te=Se.payload,typeof Te=="function"){ie=Te.call(_e,ie,ee);break e}ie=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=Se.payload,ee=typeof Te=="function"?Te.call(_e,ie,ee):Te,ee==null)break e;ie=de({},ie,ee);break e;case 2:Is=!0}}k.callback!==null&&k.lane!==0&&(r.flags|=64,ee=d.effects,ee===null?d.effects=[k]:ee.push(k))}else _e={eventTime:_e,lane:ee,tag:k.tag,payload:k.payload,callback:k.callback,next:null},re===null?(W=re=_e,b=ie):re=re.next=_e,w|=ee;if(k=k.next,k===null){if(k=d.shared.pending,k===null)break;ee=k,k=ee.next,ee.next=null,d.lastBaseUpdate=ee,d.shared.pending=null}}while(!0);if(re===null&&(b=ie),d.baseState=b,d.firstBaseUpdate=W,d.lastBaseUpdate=re,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else m===null&&(d.shared.lanes=0);Si|=w,r.lanes=w,r.memoizedState=ie}}function om(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var Da={},kr=ws(Da),ba=ws(Da),Va=ws(Da);function Ti(r){if(r===Da)throw Error(t(174));return r}function Th(r,i){switch(lt(Va,i),lt(ba,r),lt(kr,Da),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:cs(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=cs(i,r)}pt(kr),lt(kr,i)}function To(){pt(kr),pt(ba),pt(Va)}function am(r){Ti(Va.current);var i=Ti(kr.current),a=cs(i,r.type);i!==a&&(lt(ba,r),lt(kr,a))}function Ih(r){ba.current===r&&(pt(kr),pt(ba))}var vt=ws(0);function au(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Sh=[];function Ch(){for(var r=0;r<Sh.length;r++)Sh[r]._workInProgressVersionPrimary=null;Sh.length=0}var lu=oe.ReactCurrentDispatcher,Ah=oe.ReactCurrentBatchConfig,Ii=0,wt=null,Mt=null,zt=null,uu=!1,Oa=!1,La=0,GE=0;function nn(){throw Error(t(321))}function kh(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!er(r[a],i[a]))return!1;return!0}function Rh(r,i,a,h,d,m){if(Ii=m,wt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,lu.current=r===null||r.memoizedState===null?YE:XE,r=a(h,d),Oa){m=0;do{if(Oa=!1,La=0,25<=m)throw Error(t(301));m+=1,zt=Mt=null,i.updateQueue=null,lu.current=ZE,r=a(h,d)}while(Oa)}if(lu.current=du,i=Mt!==null&&Mt.next!==null,Ii=0,zt=Mt=wt=null,uu=!1,i)throw Error(t(300));return r}function Ph(){var r=La!==0;return La=0,r}function Rr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?wt.memoizedState=zt=r:zt=zt.next=r,zt}function Bn(){if(Mt===null){var r=wt.alternate;r=r!==null?r.memoizedState:null}else r=Mt.next;var i=zt===null?wt.memoizedState:zt.next;if(i!==null)zt=i,Mt=r;else{if(r===null)throw Error(t(310));Mt=r,r={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},zt===null?wt.memoizedState=zt=r:zt=zt.next=r}return zt}function Ma(r,i){return typeof i=="function"?i(r):i}function xh(r){var i=Bn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=Mt,d=h.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}h.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,h=h.baseState;var k=w=null,b=null,W=m;do{var re=W.lane;if((Ii&re)===re)b!==null&&(b=b.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),h=W.hasEagerState?W.eagerState:r(h,W.action);else{var ie={lane:re,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};b===null?(k=b=ie,w=h):b=b.next=ie,wt.lanes|=re,Si|=re}W=W.next}while(W!==null&&W!==m);b===null?w=h:b.next=k,er(h,i.memoizedState)||(gn=!0),i.memoizedState=h,i.baseState=w,i.baseQueue=b,a.lastRenderedState=h}if(r=a.interleaved,r!==null){d=r;do m=d.lane,wt.lanes|=m,Si|=m,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Nh(r){var i=Bn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=r(m,w.action),w=w.next;while(w!==d);er(m,i.memoizedState)||(gn=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,h]}function lm(){}function um(r,i){var a=wt,h=Bn(),d=i(),m=!er(h.memoizedState,d);if(m&&(h.memoizedState=d,gn=!0),h=h.queue,Dh(dm.bind(null,a,h,r),[r]),h.getSnapshot!==i||m||zt!==null&&zt.memoizedState.tag&1){if(a.flags|=2048,Fa(9,hm.bind(null,a,h,d,i),void 0,null),Bt===null)throw Error(t(349));(Ii&30)!==0||cm(a,i,d)}return d}function cm(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=wt.updateQueue,i===null?(i={lastEffect:null,stores:null},wt.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function hm(r,i,a,h){i.value=a,i.getSnapshot=h,fm(i)&&pm(r)}function dm(r,i,a){return a(function(){fm(i)&&pm(r)})}function fm(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!er(r,a)}catch{return!0}}function pm(r){var i=Yr(r,1);i!==null&&ir(i,r,1,-1)}function mm(r){var i=Rr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:r},i.queue=r,r=r.dispatch=JE.bind(null,wt,r),[i.memoizedState,r]}function Fa(r,i,a,h){return r={tag:r,create:i,destroy:a,deps:h,next:null},i=wt.updateQueue,i===null?(i={lastEffect:null,stores:null},wt.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,i.lastEffect=r)),r}function gm(){return Bn().memoizedState}function cu(r,i,a,h){var d=Rr();wt.flags|=r,d.memoizedState=Fa(1|i,a,void 0,h===void 0?null:h)}function hu(r,i,a,h){var d=Bn();h=h===void 0?null:h;var m=void 0;if(Mt!==null){var w=Mt.memoizedState;if(m=w.destroy,h!==null&&kh(h,w.deps)){d.memoizedState=Fa(i,a,m,h);return}}wt.flags|=r,d.memoizedState=Fa(1|i,a,m,h)}function ym(r,i){return cu(8390656,8,r,i)}function Dh(r,i){return hu(2048,8,r,i)}function _m(r,i){return hu(4,2,r,i)}function vm(r,i){return hu(4,4,r,i)}function wm(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Em(r,i,a){return a=a!=null?a.concat([r]):null,hu(4,4,wm.bind(null,i,r),a)}function bh(){}function Tm(r,i){var a=Bn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&kh(i,h[1])?h[0]:(a.memoizedState=[r,i],r)}function Im(r,i){var a=Bn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&kh(i,h[1])?h[0]:(r=r(),a.memoizedState=[r,i],r)}function Sm(r,i,a){return(Ii&21)===0?(r.baseState&&(r.baseState=!1,gn=!0),r.memoizedState=a):(er(a,i)||(a=ca(),wt.lanes|=a,Si|=a,r.baseState=!0),i)}function KE(r,i){var a=Ye;Ye=a!==0&&4>a?a:4,r(!0);var h=Ah.transition;Ah.transition={};try{r(!1),i()}finally{Ye=a,Ah.transition=h}}function Cm(){return Bn().memoizedState}function QE(r,i,a){var h=Rs(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Am(r))km(i,a);else if(a=rm(r,i,a,h),a!==null){var d=hn();ir(a,r,h,d),Rm(a,i,h)}}function JE(r,i,a){var h=Rs(r),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Am(r))km(i,d);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,k=m(w,a);if(d.hasEagerState=!0,d.eagerState=k,er(k,w)){var b=i.interleaved;b===null?(d.next=d,wh(i)):(d.next=b.next,b.next=d),i.interleaved=d;return}}catch{}finally{}a=rm(r,i,d,h),a!==null&&(d=hn(),ir(a,r,h,d),Rm(a,i,h))}}function Am(r){var i=r.alternate;return r===wt||i!==null&&i===wt}function km(r,i){Oa=uu=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Rm(r,i,a){if((a&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,da(r,a)}}var du={readContext:zn,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},YE={readContext:zn,useCallback:function(r,i){return Rr().memoizedState=[r,i===void 0?null:i],r},useContext:zn,useEffect:ym,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,cu(4194308,4,wm.bind(null,i,r),a)},useLayoutEffect:function(r,i){return cu(4194308,4,r,i)},useInsertionEffect:function(r,i){return cu(4,2,r,i)},useMemo:function(r,i){var a=Rr();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var h=Rr();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=QE.bind(null,wt,r),[h.memoizedState,r]},useRef:function(r){var i=Rr();return r={current:r},i.memoizedState=r},useState:mm,useDebugValue:bh,useDeferredValue:function(r){return Rr().memoizedState=r},useTransition:function(){var r=mm(!1),i=r[0];return r=KE.bind(null,r[1]),Rr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var h=wt,d=Rr();if(_t){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Bt===null)throw Error(t(349));(Ii&30)!==0||cm(h,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,ym(dm.bind(null,h,m,r),[r]),h.flags|=2048,Fa(9,hm.bind(null,h,m,a,i),void 0,null),a},useId:function(){var r=Rr(),i=Bt.identifierPrefix;if(_t){var a=Jr,h=Qr;a=(h&~(1<<32-An(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=La++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=GE++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},XE={readContext:zn,useCallback:Tm,useContext:zn,useEffect:Dh,useImperativeHandle:Em,useInsertionEffect:_m,useLayoutEffect:vm,useMemo:Im,useReducer:xh,useRef:gm,useState:function(){return xh(Ma)},useDebugValue:bh,useDeferredValue:function(r){var i=Bn();return Sm(i,Mt.memoizedState,r)},useTransition:function(){var r=xh(Ma)[0],i=Bn().memoizedState;return[r,i]},useMutableSource:lm,useSyncExternalStore:um,useId:Cm,unstable_isNewReconciler:!1},ZE={readContext:zn,useCallback:Tm,useContext:zn,useEffect:Dh,useImperativeHandle:Em,useInsertionEffect:_m,useLayoutEffect:vm,useMemo:Im,useReducer:Nh,useRef:gm,useState:function(){return Nh(Ma)},useDebugValue:bh,useDeferredValue:function(r){var i=Bn();return Mt===null?i.memoizedState=r:Sm(i,Mt.memoizedState,r)},useTransition:function(){var r=Nh(Ma)[0],i=Bn().memoizedState;return[r,i]},useMutableSource:lm,useSyncExternalStore:um,useId:Cm,unstable_isNewReconciler:!1};function nr(r,i){if(r&&r.defaultProps){i=de({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function Vh(r,i,a,h){i=r.memoizedState,a=a(h,i),a=a==null?i:de({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var fu={isMounted:function(r){return(r=r._reactInternals)?Xn(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var h=hn(),d=Rs(r),m=Xr(h,d);m.payload=i,a!=null&&(m.callback=a),i=Ss(r,m,d),i!==null&&(ir(i,r,d,h),iu(i,r,d))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var h=hn(),d=Rs(r),m=Xr(h,d);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=Ss(r,m,d),i!==null&&(ir(i,r,d,h),iu(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=hn(),h=Rs(r),d=Xr(a,h);d.tag=2,i!=null&&(d.callback=i),i=Ss(r,d,h),i!==null&&(ir(i,r,h,a),iu(i,r,h))}};function Pm(r,i,a,h,d,m,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,m,w):i.prototype&&i.prototype.isPureReactComponent?!Sa(a,h)||!Sa(d,m):!0}function xm(r,i,a){var h=!1,d=Es,m=i.contextType;return typeof m=="object"&&m!==null?m=zn(m):(d=mn(i)?_i:tn.current,h=i.contextTypes,m=(h=h!=null)?mo(r,d):Es),i=new i(a,m),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=fu,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=m),i}function Nm(r,i,a,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==r&&fu.enqueueReplaceState(i,i.state,null)}function Oh(r,i,a,h){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Eh(r);var m=i.contextType;typeof m=="object"&&m!==null?d.context=zn(m):(m=mn(i)?_i:tn.current,d.context=mo(r,m)),d.state=r.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Vh(r,i,m,a),d.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&fu.enqueueReplaceState(d,d.state,null),ou(r,a,d,h),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function Io(r,i){try{var a="",h=i;do a+=ze(h),h=h.return;while(h);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:i,stack:d,digest:null}}function Lh(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function Mh(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var e0=typeof WeakMap=="function"?WeakMap:Map;function Dm(r,i,a){a=Xr(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){wu||(wu=!0,Xh=h),Mh(r,i)},a}function bm(r,i,a){a=Xr(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=i.value;a.payload=function(){return h(d)},a.callback=function(){Mh(r,i)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Mh(r,i),typeof h!="function"&&(As===null?As=new Set([this]):As.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Vm(r,i,a){var h=r.pingCache;if(h===null){h=r.pingCache=new e0;var d=new Set;h.set(i,d)}else d=h.get(i),d===void 0&&(d=new Set,h.set(i,d));d.has(a)||(d.add(a),r=p0.bind(null,r,i,a),i.then(r,r))}function Om(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Lm(r,i,a,h,d){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Xr(-1,1),i.tag=2,Ss(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var t0=oe.ReactCurrentOwner,gn=!1;function cn(r,i,a,h){i.child=r===null?nm(i,null,a,h):vo(i,r.child,a,h)}function Mm(r,i,a,h,d){a=a.render;var m=i.ref;return Eo(i,d),h=Rh(r,i,a,h,m,d),a=Ph(),r!==null&&!gn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,Zr(r,i,d)):(_t&&a&&hh(i),i.flags|=1,cn(r,i,h,d),i.child)}function Fm(r,i,a,h,d){if(r===null){var m=a.type;return typeof m=="function"&&!id(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,Um(r,i,m,h,d)):(r=Au(a.type,null,h,i,i.mode,d),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,(r.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Sa,a(w,h)&&r.ref===i.ref)return Zr(r,i,d)}return i.flags|=1,r=xs(m,h),r.ref=i.ref,r.return=i,i.child=r}function Um(r,i,a,h,d){if(r!==null){var m=r.memoizedProps;if(Sa(m,h)&&r.ref===i.ref)if(gn=!1,i.pendingProps=h=m,(r.lanes&d)!==0)(r.flags&131072)!==0&&(gn=!0);else return i.lanes=r.lanes,Zr(r,i,d)}return Fh(r,i,a,h,d)}function jm(r,i,a){var h=i.pendingProps,d=h.children,m=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(Co,bn),bn|=a;else{if((a&1073741824)===0)return r=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,lt(Co,bn),bn|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:a,lt(Co,bn),bn|=h}else m!==null?(h=m.baseLanes|a,i.memoizedState=null):h=a,lt(Co,bn),bn|=h;return cn(r,i,d,a),i.child}function zm(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Fh(r,i,a,h,d){var m=mn(a)?_i:tn.current;return m=mo(i,m),Eo(i,d),a=Rh(r,i,a,h,m,d),h=Ph(),r!==null&&!gn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,Zr(r,i,d)):(_t&&h&&hh(i),i.flags|=1,cn(r,i,a,d),i.child)}function Bm(r,i,a,h,d){if(mn(a)){var m=!0;Yl(i)}else m=!1;if(Eo(i,d),i.stateNode===null)mu(r,i),xm(i,a,h),Oh(i,a,h,d),h=!0;else if(r===null){var w=i.stateNode,k=i.memoizedProps;w.props=k;var b=w.context,W=a.contextType;typeof W=="object"&&W!==null?W=zn(W):(W=mn(a)?_i:tn.current,W=mo(i,W));var re=a.getDerivedStateFromProps,ie=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function";ie||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==h||b!==W)&&Nm(i,w,h,W),Is=!1;var ee=i.memoizedState;w.state=ee,ou(i,h,w,d),b=i.memoizedState,k!==h||ee!==b||pn.current||Is?(typeof re=="function"&&(Vh(i,a,re,h),b=i.memoizedState),(k=Is||Pm(i,a,k,h,ee,b,W))?(ie||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=b),w.props=h,w.state=b,w.context=W,h=k):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,sm(r,i),k=i.memoizedProps,W=i.type===i.elementType?k:nr(i.type,k),w.props=W,ie=i.pendingProps,ee=w.context,b=a.contextType,typeof b=="object"&&b!==null?b=zn(b):(b=mn(a)?_i:tn.current,b=mo(i,b));var _e=a.getDerivedStateFromProps;(re=typeof _e=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(k!==ie||ee!==b)&&Nm(i,w,h,b),Is=!1,ee=i.memoizedState,w.state=ee,ou(i,h,w,d);var Te=i.memoizedState;k!==ie||ee!==Te||pn.current||Is?(typeof _e=="function"&&(Vh(i,a,_e,h),Te=i.memoizedState),(W=Is||Pm(i,a,W,h,ee,Te,b)||!1)?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Te,b),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Te,b)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=Te),w.props=h,w.state=Te,w.context=b,h=W):(typeof w.componentDidUpdate!="function"||k===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||k===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),h=!1)}return Uh(r,i,a,h,m,d)}function Uh(r,i,a,h,d,m){zm(r,i);var w=(i.flags&128)!==0;if(!h&&!w)return d&&Gp(i,a,!1),Zr(r,i,m);h=i.stateNode,t0.current=i;var k=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&w?(i.child=vo(i,r.child,null,m),i.child=vo(i,null,k,m)):cn(r,i,k,m),i.memoizedState=h.state,d&&Gp(i,a,!0),i.child}function $m(r){var i=r.stateNode;i.pendingContext?Hp(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Hp(r,i.context,!1),Th(r,i.containerInfo)}function Wm(r,i,a,h,d){return _o(),mh(d),i.flags|=256,cn(r,i,a,h),i.child}var jh={dehydrated:null,treeContext:null,retryLane:0};function zh(r){return{baseLanes:r,cachePool:null,transitions:null}}function Hm(r,i,a){var h=i.pendingProps,d=vt.current,m=!1,w=(i.flags&128)!==0,k;if((k=w)||(k=r!==null&&r.memoizedState===null?!1:(d&2)!==0),k?(m=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),lt(vt,d&1),r===null)return ph(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=h.children,r=h.fallback,m?(h=i.mode,m=i.child,w={mode:"hidden",children:w},(h&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=ku(w,h,0,null),r=Ri(r,h,a,null),m.return=i,r.return=i,m.sibling=r,i.child=m,i.child.memoizedState=zh(a),i.memoizedState=jh,r):Bh(i,w));if(d=r.memoizedState,d!==null&&(k=d.dehydrated,k!==null))return n0(r,i,w,h,k,d,a);if(m){m=h.fallback,w=i.mode,d=r.child,k=d.sibling;var b={mode:"hidden",children:h.children};return(w&1)===0&&i.child!==d?(h=i.child,h.childLanes=0,h.pendingProps=b,i.deletions=null):(h=xs(d,b),h.subtreeFlags=d.subtreeFlags&14680064),k!==null?m=xs(k,m):(m=Ri(m,w,a,null),m.flags|=2),m.return=i,h.return=i,h.sibling=m,i.child=h,h=m,m=i.child,w=r.child.memoizedState,w=w===null?zh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=r.childLanes&~a,i.memoizedState=jh,h}return m=r.child,r=m.sibling,h=xs(m,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=h,i.memoizedState=null,h}function Bh(r,i){return i=ku({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function pu(r,i,a,h){return h!==null&&mh(h),vo(i,r.child,null,a),r=Bh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function n0(r,i,a,h,d,m,w){if(a)return i.flags&256?(i.flags&=-257,h=Lh(Error(t(422))),pu(r,i,w,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(m=h.fallback,d=i.mode,h=ku({mode:"visible",children:h.children},d,0,null),m=Ri(m,d,w,null),m.flags|=2,h.return=i,m.return=i,h.sibling=m,i.child=h,(i.mode&1)!==0&&vo(i,r.child,null,w),i.child.memoizedState=zh(w),i.memoizedState=jh,m);if((i.mode&1)===0)return pu(r,i,w,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var k=h.dgst;return h=k,m=Error(t(419)),h=Lh(m,h,void 0),pu(r,i,w,h)}if(k=(w&r.childLanes)!==0,gn||k){if(h=Bt,h!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(h.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,Yr(r,d),ir(h,r,d,-1))}return sd(),h=Lh(Error(t(421))),pu(r,i,w,h)}return d.data==="$?"?(i.flags|=128,i.child=r.child,i=m0.bind(null,r),d._reactRetry=i,null):(r=m.treeContext,Dn=vs(d.nextSibling),Nn=i,_t=!0,tr=null,r!==null&&(Un[jn++]=Qr,Un[jn++]=Jr,Un[jn++]=vi,Qr=r.id,Jr=r.overflow,vi=i),i=Bh(i,h.children),i.flags|=4096,i)}function qm(r,i,a){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),vh(r.return,i,a)}function $h(r,i,a,h,d){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=a,m.tailMode=d)}function Gm(r,i,a){var h=i.pendingProps,d=h.revealOrder,m=h.tail;if(cn(r,i,h.children,a),h=vt.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&qm(r,a,i);else if(r.tag===19)qm(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(lt(vt,h),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)r=a.alternate,r!==null&&au(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),$h(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(r=d.alternate,r!==null&&au(r)===null){i.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}$h(i,!0,a,null,m);break;case"together":$h(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function mu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Zr(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Si|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,a=xs(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=xs(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function r0(r,i,a){switch(i.tag){case 3:$m(i),_o();break;case 5:am(i);break;case 1:mn(i.type)&&Yl(i);break;case 4:Th(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,d=i.memoizedProps.value;lt(ru,h._currentValue),h._currentValue=d;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(lt(vt,vt.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Hm(r,i,a):(lt(vt,vt.current&1),r=Zr(r,i,a),r!==null?r.sibling:null);lt(vt,vt.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(r.flags&128)!==0){if(h)return Gm(r,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),lt(vt,vt.current),h)break;return null;case 22:case 23:return i.lanes=0,jm(r,i,a)}return Zr(r,i,a)}var Km,Wh,Qm,Jm;Km=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Wh=function(){},Qm=function(r,i,a,h){var d=r.memoizedProps;if(d!==h){r=i.stateNode,Ti(kr.current);var m=null;switch(a){case"input":d=ce(r,d),h=ce(r,h),m=[];break;case"select":d=de({},d,{value:void 0}),h=de({},h,{value:void 0}),m=[];break;case"textarea":d=On(r,d),h=On(r,h),m=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Kl)}fn(a,h);var w;a=null;for(W in d)if(!h.hasOwnProperty(W)&&d.hasOwnProperty(W)&&d[W]!=null)if(W==="style"){var k=d[W];for(w in k)k.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(o.hasOwnProperty(W)?m||(m=[]):(m=m||[]).push(W,null));for(W in h){var b=h[W];if(k=d!=null?d[W]:void 0,h.hasOwnProperty(W)&&b!==k&&(b!=null||k!=null))if(W==="style")if(k){for(w in k)!k.hasOwnProperty(w)||b&&b.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in b)b.hasOwnProperty(w)&&k[w]!==b[w]&&(a||(a={}),a[w]=b[w])}else a||(m||(m=[]),m.push(W,a)),a=b;else W==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,k=k?k.__html:void 0,b!=null&&k!==b&&(m=m||[]).push(W,b)):W==="children"?typeof b!="string"&&typeof b!="number"||(m=m||[]).push(W,""+b):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(o.hasOwnProperty(W)?(b!=null&&W==="onScroll"&&ft("scroll",r),m||k===b||(m=[])):(m=m||[]).push(W,b))}a&&(m=m||[]).push("style",a);var W=m;(i.updateQueue=W)&&(i.flags|=4)}},Jm=function(r,i,a,h){a!==h&&(i.flags|=4)};function Ua(r,i){if(!_t)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function rn(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(i)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=h,r.childLanes=a,i}function s0(r,i,a){var h=i.pendingProps;switch(dh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rn(i),null;case 1:return mn(i.type)&&Jl(),rn(i),null;case 3:return h=i.stateNode,To(),pt(pn),pt(tn),Ch(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(tu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,tr!==null&&(td(tr),tr=null))),Wh(r,i),rn(i),null;case 5:Ih(i);var d=Ti(Va.current);if(a=i.type,r!==null&&i.stateNode!=null)Qm(r,i,a,h,d),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return rn(i),null}if(r=Ti(kr.current),tu(i)){h=i.stateNode,a=i.type;var m=i.memoizedProps;switch(h[Ar]=i,h[Pa]=m,r=(i.mode&1)!==0,a){case"dialog":ft("cancel",h),ft("close",h);break;case"iframe":case"object":case"embed":ft("load",h);break;case"video":case"audio":for(d=0;d<Aa.length;d++)ft(Aa[d],h);break;case"source":ft("error",h);break;case"img":case"image":case"link":ft("error",h),ft("load",h);break;case"details":ft("toggle",h);break;case"input":we(h,m),ft("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},ft("invalid",h);break;case"textarea":ti(h,m),ft("invalid",h)}fn(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var k=m[w];w==="children"?typeof k=="string"?h.textContent!==k&&(m.suppressHydrationWarning!==!0&&Gl(h.textContent,k,r),d=["children",k]):typeof k=="number"&&h.textContent!==""+k&&(m.suppressHydrationWarning!==!0&&Gl(h.textContent,k,r),d=["children",""+k]):o.hasOwnProperty(w)&&k!=null&&w==="onScroll"&&ft("scroll",h)}switch(a){case"input":Tn(h),qe(h,m,!0);break;case"textarea":Tn(h),hr(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=Kl)}h=d,i.updateQueue=h,h!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=ri(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[Ar]=i,r[Pa]=h,Km(r,i,!1,!1),i.stateNode=r;e:{switch(w=Ur(a,h),a){case"dialog":ft("cancel",r),ft("close",r),d=h;break;case"iframe":case"object":case"embed":ft("load",r),d=h;break;case"video":case"audio":for(d=0;d<Aa.length;d++)ft(Aa[d],r);d=h;break;case"source":ft("error",r),d=h;break;case"img":case"image":case"link":ft("error",r),ft("load",r),d=h;break;case"details":ft("toggle",r),d=h;break;case"input":we(r,h),d=ce(r,h),ft("invalid",r);break;case"option":d=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},d=de({},h,{value:void 0}),ft("invalid",r);break;case"textarea":ti(r,h),d=On(r,h),ft("invalid",r);break;default:d=h}fn(a,d),k=d;for(m in k)if(k.hasOwnProperty(m)){var b=k[m];m==="style"?Gn(r,b):m==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&jt(r,b)):m==="children"?typeof b=="string"?(a!=="textarea"||b!=="")&&Ln(r,b):typeof b=="number"&&Ln(r,""+b):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?b!=null&&m==="onScroll"&&ft("scroll",r):b!=null&&ae(r,m,b,w))}switch(a){case"input":Tn(r),qe(r,h,!1);break;case"textarea":Tn(r),hr(r);break;case"option":h.value!=null&&r.setAttribute("value",""+He(h.value));break;case"select":r.multiple=!!h.multiple,m=h.value,m!=null?Zt(r,!!h.multiple,m,!1):h.defaultValue!=null&&Zt(r,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=Kl)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return rn(i),null;case 6:if(r&&i.stateNode!=null)Jm(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ti(Va.current),Ti(kr.current),tu(i)){if(h=i.stateNode,a=i.memoizedProps,h[Ar]=i,(m=h.nodeValue!==a)&&(r=Nn,r!==null))switch(r.tag){case 3:Gl(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Gl(h.nodeValue,a,(r.mode&1)!==0)}m&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Ar]=i,i.stateNode=h}return rn(i),null;case 13:if(pt(vt),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(_t&&Dn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Zp(),_o(),i.flags|=98560,m=!1;else if(m=tu(i),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Ar]=i}else _o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;rn(i),m=!1}else tr!==null&&(td(tr),tr=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(vt.current&1)!==0?Ft===0&&(Ft=3):sd())),i.updateQueue!==null&&(i.flags|=4),rn(i),null);case 4:return To(),Wh(r,i),r===null&&ka(i.stateNode.containerInfo),rn(i),null;case 10:return _h(i.type._context),rn(i),null;case 17:return mn(i.type)&&Jl(),rn(i),null;case 19:if(pt(vt),m=i.memoizedState,m===null)return rn(i),null;if(h=(i.flags&128)!==0,w=m.rendering,w===null)if(h)Ua(m,!1);else{if(Ft!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=au(r),w!==null){for(i.flags|=128,Ua(m,!1),h=w.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)m=a,r=h,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,r=w.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return lt(vt,vt.current&1|2),i.child}r=r.sibling}m.tail!==null&&dt()>Ao&&(i.flags|=128,h=!0,Ua(m,!1),i.lanes=4194304)}else{if(!h)if(r=au(w),r!==null){if(i.flags|=128,h=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ua(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!_t)return rn(i),null}else 2*dt()-m.renderingStartTime>Ao&&a!==1073741824&&(i.flags|=128,h=!0,Ua(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(a=m.last,a!==null?a.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=dt(),i.sibling=null,a=vt.current,lt(vt,h?a&1|2:a&1),i):(rn(i),null);case 22:case 23:return rd(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(bn&1073741824)!==0&&(rn(i),i.subtreeFlags&6&&(i.flags|=8192)):rn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function i0(r,i){switch(dh(i),i.tag){case 1:return mn(i.type)&&Jl(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return To(),pt(pn),pt(tn),Ch(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Ih(i),null;case 13:if(pt(vt),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));_o()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return pt(vt),null;case 4:return To(),null;case 10:return _h(i.type._context),null;case 22:case 23:return rd(),null;case 24:return null;default:return null}}var gu=!1,sn=!1,o0=typeof WeakSet=="function"?WeakSet:Set,Ee=null;function So(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){It(r,i,h)}else a.current=null}function Hh(r,i,a){try{a()}catch(h){It(r,i,h)}}var Ym=!1;function a0(r,i){if(rh=Wr,r=Pp(),Qc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,k=-1,b=-1,W=0,re=0,ie=r,ee=null;t:for(;;){for(var _e;ie!==a||d!==0&&ie.nodeType!==3||(k=w+d),ie!==m||h!==0&&ie.nodeType!==3||(b=w+h),ie.nodeType===3&&(w+=ie.nodeValue.length),(_e=ie.firstChild)!==null;)ee=ie,ie=_e;for(;;){if(ie===r)break t;if(ee===a&&++W===d&&(k=w),ee===m&&++re===h&&(b=w),(_e=ie.nextSibling)!==null)break;ie=ee,ee=ie.parentNode}ie=_e}a=k===-1||b===-1?null:{start:k,end:b}}else a=null}a=a||{start:0,end:0}}else a=null;for(sh={focusedElem:r,selectionRange:a},Wr=!1,Ee=i;Ee!==null;)if(i=Ee,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Ee=r;else for(;Ee!==null;){i=Ee;try{var Te=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Te!==null){var Se=Te.memoizedProps,kt=Te.memoizedState,U=i.stateNode,O=U.getSnapshotBeforeUpdate(i.elementType===i.type?Se:nr(i.type,Se),kt);U.__reactInternalSnapshotBeforeUpdate=O}break;case 3:var z=i.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(he){It(i,i.return,he)}if(r=i.sibling,r!==null){r.return=i.return,Ee=r;break}Ee=i.return}return Te=Ym,Ym=!1,Te}function ja(r,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&r)===r){var m=d.destroy;d.destroy=void 0,m!==void 0&&Hh(i,a,m)}d=d.next}while(d!==h)}}function yu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function qh(r){var i=r.ref;if(i!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof i=="function"?i(r):i.current=r}}function Xm(r){var i=r.alternate;i!==null&&(r.alternate=null,Xm(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Ar],delete i[Pa],delete i[lh],delete i[$E],delete i[WE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Zm(r){return r.tag===5||r.tag===3||r.tag===4}function eg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Zm(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Gh(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Kl));else if(h!==4&&(r=r.child,r!==null))for(Gh(r,i,a),r=r.sibling;r!==null;)Gh(r,i,a),r=r.sibling}function Kh(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Kh(r,i,a),r=r.sibling;r!==null;)Kh(r,i,a),r=r.sibling}var Kt=null,rr=!1;function Cs(r,i,a){for(a=a.child;a!==null;)tg(r,i,a),a=a.sibling}function tg(r,i,a){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(li,a)}catch{}switch(a.tag){case 5:sn||So(a,i);case 6:var h=Kt,d=rr;Kt=null,Cs(r,i,a),Kt=h,rr=d,Kt!==null&&(rr?(r=Kt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Kt.removeChild(a.stateNode));break;case 18:Kt!==null&&(rr?(r=Kt,a=a.stateNode,r.nodeType===8?ah(r.parentNode,a):r.nodeType===1&&ah(r,a),ms(r)):ah(Kt,a.stateNode));break;case 4:h=Kt,d=rr,Kt=a.stateNode.containerInfo,rr=!0,Cs(r,i,a),Kt=h,rr=d;break;case 0:case 11:case 14:case 15:if(!sn&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&Hh(a,i,w),d=d.next}while(d!==h)}Cs(r,i,a);break;case 1:if(!sn&&(So(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(k){It(a,i,k)}Cs(r,i,a);break;case 21:Cs(r,i,a);break;case 22:a.mode&1?(sn=(h=sn)||a.memoizedState!==null,Cs(r,i,a),sn=h):Cs(r,i,a);break;default:Cs(r,i,a)}}function ng(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new o0),i.forEach(function(h){var d=g0.bind(null,r,h);a.has(h)||(a.add(h),h.then(d,d))})}}function sr(r,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var m=r,w=i,k=w;e:for(;k!==null;){switch(k.tag){case 5:Kt=k.stateNode,rr=!1;break e;case 3:Kt=k.stateNode.containerInfo,rr=!0;break e;case 4:Kt=k.stateNode.containerInfo,rr=!0;break e}k=k.return}if(Kt===null)throw Error(t(160));tg(m,w,d),Kt=null,rr=!1;var b=d.alternate;b!==null&&(b.return=null),d.return=null}catch(W){It(d,i,W)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)rg(i,r),i=i.sibling}function rg(r,i){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(sr(i,r),Pr(r),h&4){try{ja(3,r,r.return),yu(3,r)}catch(Se){It(r,r.return,Se)}try{ja(5,r,r.return)}catch(Se){It(r,r.return,Se)}}break;case 1:sr(i,r),Pr(r),h&512&&a!==null&&So(a,a.return);break;case 5:if(sr(i,r),Pr(r),h&512&&a!==null&&So(a,a.return),r.flags&32){var d=r.stateNode;try{Ln(d,"")}catch(Se){It(r,r.return,Se)}}if(h&4&&(d=r.stateNode,d!=null)){var m=r.memoizedProps,w=a!==null?a.memoizedProps:m,k=r.type,b=r.updateQueue;if(r.updateQueue=null,b!==null)try{k==="input"&&m.type==="radio"&&m.name!=null&&fe(d,m),Ur(k,w);var W=Ur(k,m);for(w=0;w<b.length;w+=2){var re=b[w],ie=b[w+1];re==="style"?Gn(d,ie):re==="dangerouslySetInnerHTML"?jt(d,ie):re==="children"?Ln(d,ie):ae(d,re,ie,W)}switch(k){case"input":Ie(d,m);break;case"textarea":ni(d,m);break;case"select":var ee=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var _e=m.value;_e!=null?Zt(d,!!m.multiple,_e,!1):ee!==!!m.multiple&&(m.defaultValue!=null?Zt(d,!!m.multiple,m.defaultValue,!0):Zt(d,!!m.multiple,m.multiple?[]:"",!1))}d[Pa]=m}catch(Se){It(r,r.return,Se)}}break;case 6:if(sr(i,r),Pr(r),h&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,m=r.memoizedProps;try{d.nodeValue=m}catch(Se){It(r,r.return,Se)}}break;case 3:if(sr(i,r),Pr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{ms(i.containerInfo)}catch(Se){It(r,r.return,Se)}break;case 4:sr(i,r),Pr(r);break;case 13:sr(i,r),Pr(r),d=r.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Yh=dt())),h&4&&ng(r);break;case 22:if(re=a!==null&&a.memoizedState!==null,r.mode&1?(sn=(W=sn)||re,sr(i,r),sn=W):sr(i,r),Pr(r),h&8192){if(W=r.memoizedState!==null,(r.stateNode.isHidden=W)&&!re&&(r.mode&1)!==0)for(Ee=r,re=r.child;re!==null;){for(ie=Ee=re;Ee!==null;){switch(ee=Ee,_e=ee.child,ee.tag){case 0:case 11:case 14:case 15:ja(4,ee,ee.return);break;case 1:So(ee,ee.return);var Te=ee.stateNode;if(typeof Te.componentWillUnmount=="function"){h=ee,a=ee.return;try{i=h,Te.props=i.memoizedProps,Te.state=i.memoizedState,Te.componentWillUnmount()}catch(Se){It(h,a,Se)}}break;case 5:So(ee,ee.return);break;case 22:if(ee.memoizedState!==null){og(ie);continue}}_e!==null?(_e.return=ee,Ee=_e):og(ie)}re=re.sibling}e:for(re=null,ie=r;;){if(ie.tag===5){if(re===null){re=ie;try{d=ie.stateNode,W?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(k=ie.stateNode,b=ie.memoizedProps.style,w=b!=null&&b.hasOwnProperty("display")?b.display:null,k.style.display=dn("display",w))}catch(Se){It(r,r.return,Se)}}}else if(ie.tag===6){if(re===null)try{ie.stateNode.nodeValue=W?"":ie.memoizedProps}catch(Se){It(r,r.return,Se)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===r)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===r)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===r)break e;re===ie&&(re=null),ie=ie.return}re===ie&&(re=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:sr(i,r),Pr(r),h&4&&ng(r);break;case 21:break;default:sr(i,r),Pr(r)}}function Pr(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(Zm(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(Ln(d,""),h.flags&=-33);var m=eg(r);Kh(r,m,d);break;case 3:case 4:var w=h.stateNode.containerInfo,k=eg(r);Gh(r,k,w);break;default:throw Error(t(161))}}catch(b){It(r,r.return,b)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function l0(r,i,a){Ee=r,sg(r)}function sg(r,i,a){for(var h=(r.mode&1)!==0;Ee!==null;){var d=Ee,m=d.child;if(d.tag===22&&h){var w=d.memoizedState!==null||gu;if(!w){var k=d.alternate,b=k!==null&&k.memoizedState!==null||sn;k=gu;var W=sn;if(gu=w,(sn=b)&&!W)for(Ee=d;Ee!==null;)w=Ee,b=w.child,w.tag===22&&w.memoizedState!==null?ag(d):b!==null?(b.return=w,Ee=b):ag(d);for(;m!==null;)Ee=m,sg(m),m=m.sibling;Ee=d,gu=k,sn=W}ig(r)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,Ee=m):ig(r)}}function ig(r){for(;Ee!==null;){var i=Ee;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:sn||yu(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!sn)if(a===null)h.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:nr(i.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&om(i,m,h);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}om(i,w,a)}break;case 5:var k=i.stateNode;if(a===null&&i.flags&4){a=k;var b=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&a.focus();break;case"img":b.src&&(a.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var W=i.alternate;if(W!==null){var re=W.memoizedState;if(re!==null){var ie=re.dehydrated;ie!==null&&ms(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}sn||i.flags&512&&qh(i)}catch(ee){It(i,i.return,ee)}}if(i===r){Ee=null;break}if(a=i.sibling,a!==null){a.return=i.return,Ee=a;break}Ee=i.return}}function og(r){for(;Ee!==null;){var i=Ee;if(i===r){Ee=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Ee=a;break}Ee=i.return}}function ag(r){for(;Ee!==null;){var i=Ee;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{yu(4,i)}catch(b){It(i,a,b)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var d=i.return;try{h.componentDidMount()}catch(b){It(i,d,b)}}var m=i.return;try{qh(i)}catch(b){It(i,m,b)}break;case 5:var w=i.return;try{qh(i)}catch(b){It(i,w,b)}}}catch(b){It(i,i.return,b)}if(i===r){Ee=null;break}var k=i.sibling;if(k!==null){k.return=i.return,Ee=k;break}Ee=i.return}}var u0=Math.ceil,_u=oe.ReactCurrentDispatcher,Qh=oe.ReactCurrentOwner,$n=oe.ReactCurrentBatchConfig,et=0,Bt=null,xt=null,Qt=0,bn=0,Co=ws(0),Ft=0,za=null,Si=0,vu=0,Jh=0,Ba=null,yn=null,Yh=0,Ao=1/0,es=null,wu=!1,Xh=null,As=null,Eu=!1,ks=null,Tu=0,$a=0,Zh=null,Iu=-1,Su=0;function hn(){return(et&6)!==0?dt():Iu!==-1?Iu:Iu=dt()}function Rs(r){return(r.mode&1)===0?1:(et&2)!==0&&Qt!==0?Qt&-Qt:qE.transition!==null?(Su===0&&(Su=ca()),Su):(r=Ye,r!==0||(r=window.event,r=r===void 0?16:eo(r.type)),r)}function ir(r,i,a,h){if(50<$a)throw $a=0,Zh=null,Error(t(185));di(r,a,h),((et&2)===0||r!==Bt)&&(r===Bt&&((et&2)===0&&(vu|=a),Ft===4&&Ps(r,Qt)),_n(r,h),a===1&&et===0&&(i.mode&1)===0&&(Ao=dt()+500,Xl&&Ts()))}function _n(r,i){var a=r.callbackNode;hi(r,i);var h=zr(r,r===Bt?Qt:0);if(h===0)a!==null&&Gi(a),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(a!=null&&Gi(a),i===1)r.tag===0?HE(ug.bind(null,r)):Kp(ug.bind(null,r)),zE(function(){(et&6)===0&&Ts()}),a=null;else{switch(gr(h)){case 1:a=Ki;break;case 4:a=aa;break;case 16:a=ai;break;case 536870912:a=Qi;break;default:a=ai}a=yg(a,lg.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function lg(r,i){if(Iu=-1,Su=0,(et&6)!==0)throw Error(t(327));var a=r.callbackNode;if(ko()&&r.callbackNode!==a)return null;var h=zr(r,r===Bt?Qt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=Cu(r,h);else{i=h;var d=et;et|=2;var m=hg();(Bt!==r||Qt!==i)&&(es=null,Ao=dt()+500,Ai(r,i));do try{d0();break}catch(k){cg(r,k)}while(!0);yh(),_u.current=m,et=d,xt!==null?i=0:(Bt=null,Qt=0,i=Ft)}if(i!==0){if(i===2&&(d=ua(r),d!==0&&(h=d,i=ed(r,d))),i===1)throw a=za,Ai(r,0),Ps(r,h),_n(r,dt()),a;if(i===6)Ps(r,h);else{if(d=r.current.alternate,(h&30)===0&&!c0(d)&&(i=Cu(r,h),i===2&&(m=ua(r),m!==0&&(h=m,i=ed(r,m))),i===1))throw a=za,Ai(r,0),Ps(r,h),_n(r,dt()),a;switch(r.finishedWork=d,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:ki(r,yn,es);break;case 3:if(Ps(r,h),(h&130023424)===h&&(i=Yh+500-dt(),10<i)){if(zr(r,0)!==0)break;if(d=r.suspendedLanes,(d&h)!==h){hn(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=oh(ki.bind(null,r,yn,es),i);break}ki(r,yn,es);break;case 4:if(Ps(r,h),(h&4194240)===h)break;for(i=r.eventTimes,d=-1;0<h;){var w=31-An(h);m=1<<w,w=i[w],w>d&&(d=w),h&=~m}if(h=d,h=dt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*u0(h/1960))-h,10<h){r.timeoutHandle=oh(ki.bind(null,r,yn,es),h);break}ki(r,yn,es);break;case 5:ki(r,yn,es);break;default:throw Error(t(329))}}}return _n(r,dt()),r.callbackNode===a?lg.bind(null,r):null}function ed(r,i){var a=Ba;return r.current.memoizedState.isDehydrated&&(Ai(r,i).flags|=256),r=Cu(r,i),r!==2&&(i=yn,yn=a,i!==null&&td(i)),r}function td(r){yn===null?yn=r:yn.push.apply(yn,r)}function c0(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],m=d.getSnapshot;d=d.value;try{if(!er(m(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ps(r,i){for(i&=~Jh,i&=~vu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-An(i),h=1<<a;r[a]=-1,i&=~h}}function ug(r){if((et&6)!==0)throw Error(t(327));ko();var i=zr(r,0);if((i&1)===0)return _n(r,dt()),null;var a=Cu(r,i);if(r.tag!==0&&a===2){var h=ua(r);h!==0&&(i=h,a=ed(r,h))}if(a===1)throw a=za,Ai(r,0),Ps(r,i),_n(r,dt()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,ki(r,yn,es),_n(r,dt()),null}function nd(r,i){var a=et;et|=1;try{return r(i)}finally{et=a,et===0&&(Ao=dt()+500,Xl&&Ts())}}function Ci(r){ks!==null&&ks.tag===0&&(et&6)===0&&ko();var i=et;et|=1;var a=$n.transition,h=Ye;try{if($n.transition=null,Ye=1,r)return r()}finally{Ye=h,$n.transition=a,et=i,(et&6)===0&&Ts()}}function rd(){bn=Co.current,pt(Co)}function Ai(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,jE(a)),xt!==null)for(a=xt.return;a!==null;){var h=a;switch(dh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Jl();break;case 3:To(),pt(pn),pt(tn),Ch();break;case 5:Ih(h);break;case 4:To();break;case 13:pt(vt);break;case 19:pt(vt);break;case 10:_h(h.type._context);break;case 22:case 23:rd()}a=a.return}if(Bt=r,xt=r=xs(r.current,null),Qt=bn=i,Ft=0,za=null,Jh=vu=Si=0,yn=Ba=null,Ei!==null){for(i=0;i<Ei.length;i++)if(a=Ei[i],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,h.next=w}a.pending=h}Ei=null}return r}function cg(r,i){do{var a=xt;try{if(yh(),lu.current=du,uu){for(var h=wt.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}uu=!1}if(Ii=0,zt=Mt=wt=null,Oa=!1,La=0,Qh.current=null,a===null||a.return===null){Ft=1,za=i,xt=null;break}e:{var m=r,w=a.return,k=a,b=i;if(i=Qt,k.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var W=b,re=k,ie=re.tag;if((re.mode&1)===0&&(ie===0||ie===11||ie===15)){var ee=re.alternate;ee?(re.updateQueue=ee.updateQueue,re.memoizedState=ee.memoizedState,re.lanes=ee.lanes):(re.updateQueue=null,re.memoizedState=null)}var _e=Om(w);if(_e!==null){_e.flags&=-257,Lm(_e,w,k,m,i),_e.mode&1&&Vm(m,W,i),i=_e,b=W;var Te=i.updateQueue;if(Te===null){var Se=new Set;Se.add(b),i.updateQueue=Se}else Te.add(b);break e}else{if((i&1)===0){Vm(m,W,i),sd();break e}b=Error(t(426))}}else if(_t&&k.mode&1){var kt=Om(w);if(kt!==null){(kt.flags&65536)===0&&(kt.flags|=256),Lm(kt,w,k,m,i),mh(Io(b,k));break e}}m=b=Io(b,k),Ft!==4&&(Ft=2),Ba===null?Ba=[m]:Ba.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var U=Dm(m,b,i);im(m,U);break e;case 1:k=b;var O=m.type,z=m.stateNode;if((m.flags&128)===0&&(typeof O.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(As===null||!As.has(z)))){m.flags|=65536,i&=-i,m.lanes|=i;var he=bm(m,k,i);im(m,he);break e}}m=m.return}while(m!==null)}fg(a)}catch(Ce){i=Ce,xt===a&&a!==null&&(xt=a=a.return);continue}break}while(!0)}function hg(){var r=_u.current;return _u.current=du,r===null?du:r}function sd(){(Ft===0||Ft===3||Ft===2)&&(Ft=4),Bt===null||(Si&268435455)===0&&(vu&268435455)===0||Ps(Bt,Qt)}function Cu(r,i){var a=et;et|=2;var h=hg();(Bt!==r||Qt!==i)&&(es=null,Ai(r,i));do try{h0();break}catch(d){cg(r,d)}while(!0);if(yh(),et=a,_u.current=h,xt!==null)throw Error(t(261));return Bt=null,Qt=0,Ft}function h0(){for(;xt!==null;)dg(xt)}function d0(){for(;xt!==null&&!oi();)dg(xt)}function dg(r){var i=gg(r.alternate,r,bn);r.memoizedProps=r.pendingProps,i===null?fg(r):xt=i,Qh.current=null}function fg(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=s0(a,i,bn),a!==null){xt=a;return}}else{if(a=i0(a,i),a!==null){a.flags&=32767,xt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Ft=6,xt=null;return}}if(i=i.sibling,i!==null){xt=i;return}xt=i=r}while(i!==null);Ft===0&&(Ft=5)}function ki(r,i,a){var h=Ye,d=$n.transition;try{$n.transition=null,Ye=1,f0(r,i,a,h)}finally{$n.transition=d,Ye=h}return null}function f0(r,i,a,h){do ko();while(ks!==null);if((et&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var m=a.lanes|a.childLanes;if(Wc(r,m),r===Bt&&(xt=Bt=null,Qt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Eu||(Eu=!0,yg(ai,function(){return ko(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=$n.transition,$n.transition=null;var w=Ye;Ye=1;var k=et;et|=4,Qh.current=null,a0(r,a),rg(a,r),bE(sh),Wr=!!rh,sh=rh=null,r.current=a,l0(a),jr(),et=k,Ye=w,$n.transition=m}else r.current=a;if(Eu&&(Eu=!1,ks=r,Tu=d),m=r.pendingLanes,m===0&&(As=null),Dl(a.stateNode),_n(r,dt()),i!==null)for(h=r.onRecoverableError,a=0;a<i.length;a++)d=i[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(wu)throw wu=!1,r=Xh,Xh=null,r;return(Tu&1)!==0&&r.tag!==0&&ko(),m=r.pendingLanes,(m&1)!==0?r===Zh?$a++:($a=0,Zh=r):$a=0,Ts(),null}function ko(){if(ks!==null){var r=gr(Tu),i=$n.transition,a=Ye;try{if($n.transition=null,Ye=16>r?16:r,ks===null)var h=!1;else{if(r=ks,ks=null,Tu=0,(et&6)!==0)throw Error(t(331));var d=et;for(et|=4,Ee=r.current;Ee!==null;){var m=Ee,w=m.child;if((Ee.flags&16)!==0){var k=m.deletions;if(k!==null){for(var b=0;b<k.length;b++){var W=k[b];for(Ee=W;Ee!==null;){var re=Ee;switch(re.tag){case 0:case 11:case 15:ja(8,re,m)}var ie=re.child;if(ie!==null)ie.return=re,Ee=ie;else for(;Ee!==null;){re=Ee;var ee=re.sibling,_e=re.return;if(Xm(re),re===W){Ee=null;break}if(ee!==null){ee.return=_e,Ee=ee;break}Ee=_e}}}var Te=m.alternate;if(Te!==null){var Se=Te.child;if(Se!==null){Te.child=null;do{var kt=Se.sibling;Se.sibling=null,Se=kt}while(Se!==null)}}Ee=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,Ee=w;else e:for(;Ee!==null;){if(m=Ee,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:ja(9,m,m.return)}var U=m.sibling;if(U!==null){U.return=m.return,Ee=U;break e}Ee=m.return}}var O=r.current;for(Ee=O;Ee!==null;){w=Ee;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,Ee=z;else e:for(w=O;Ee!==null;){if(k=Ee,(k.flags&2048)!==0)try{switch(k.tag){case 0:case 11:case 15:yu(9,k)}}catch(Ce){It(k,k.return,Ce)}if(k===w){Ee=null;break e}var he=k.sibling;if(he!==null){he.return=k.return,Ee=he;break e}Ee=k.return}}if(et=d,Ts(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(li,r)}catch{}h=!0}return h}finally{Ye=a,$n.transition=i}}return!1}function pg(r,i,a){i=Io(a,i),i=Dm(r,i,1),r=Ss(r,i,1),i=hn(),r!==null&&(di(r,1,i),_n(r,i))}function It(r,i,a){if(r.tag===3)pg(r,r,a);else for(;i!==null;){if(i.tag===3){pg(i,r,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(As===null||!As.has(h))){r=Io(a,r),r=bm(i,r,1),i=Ss(i,r,1),r=hn(),i!==null&&(di(i,1,r),_n(i,r));break}}i=i.return}}function p0(r,i,a){var h=r.pingCache;h!==null&&h.delete(i),i=hn(),r.pingedLanes|=r.suspendedLanes&a,Bt===r&&(Qt&a)===a&&(Ft===4||Ft===3&&(Qt&130023424)===Qt&&500>dt()-Yh?Ai(r,0):Jh|=a),_n(r,i)}function mg(r,i){i===0&&((r.mode&1)===0?i=1:(i=ds,ds<<=1,(ds&130023424)===0&&(ds=4194304)));var a=hn();r=Yr(r,i),r!==null&&(di(r,i,a),_n(r,a))}function m0(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),mg(r,a)}function g0(r,i){var a=0;switch(r.tag){case 13:var h=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),mg(r,a)}var gg;gg=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||pn.current)gn=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return gn=!1,r0(r,i,a);gn=(r.flags&131072)!==0}else gn=!1,_t&&(i.flags&1048576)!==0&&Qp(i,eu,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;mu(r,i),r=i.pendingProps;var d=mo(i,tn.current);Eo(i,a),d=Rh(null,i,h,r,d,a);var m=Ph();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,mn(h)?(m=!0,Yl(i)):m=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Eh(i),d.updater=fu,i.stateNode=d,d._reactInternals=i,Oh(i,h,r,a),i=Uh(null,i,h,!0,m,a)):(i.tag=0,_t&&m&&hh(i),cn(null,i,d,a),i=i.child),i;case 16:h=i.elementType;e:{switch(mu(r,i),r=i.pendingProps,d=h._init,h=d(h._payload),i.type=h,d=i.tag=_0(h),r=nr(h,r),d){case 0:i=Fh(null,i,h,r,a);break e;case 1:i=Bm(null,i,h,r,a);break e;case 11:i=Mm(null,i,h,r,a);break e;case 14:i=Fm(null,i,h,nr(h.type,r),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:nr(h,d),Fh(r,i,h,d,a);case 1:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:nr(h,d),Bm(r,i,h,d,a);case 3:e:{if($m(i),r===null)throw Error(t(387));h=i.pendingProps,m=i.memoizedState,d=m.element,sm(r,i),ou(i,h,null,a);var w=i.memoizedState;if(h=w.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){d=Io(Error(t(423)),i),i=Wm(r,i,h,a,d);break e}else if(h!==d){d=Io(Error(t(424)),i),i=Wm(r,i,h,a,d);break e}else for(Dn=vs(i.stateNode.containerInfo.firstChild),Nn=i,_t=!0,tr=null,a=nm(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(_o(),h===d){i=Zr(r,i,a);break e}cn(r,i,h,a)}i=i.child}return i;case 5:return am(i),r===null&&ph(i),h=i.type,d=i.pendingProps,m=r!==null?r.memoizedProps:null,w=d.children,ih(h,d)?w=null:m!==null&&ih(h,m)&&(i.flags|=32),zm(r,i),cn(r,i,w,a),i.child;case 6:return r===null&&ph(i),null;case 13:return Hm(r,i,a);case 4:return Th(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=vo(i,null,h,a):cn(r,i,h,a),i.child;case 11:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:nr(h,d),Mm(r,i,h,d,a);case 7:return cn(r,i,i.pendingProps,a),i.child;case 8:return cn(r,i,i.pendingProps.children,a),i.child;case 12:return cn(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,d=i.pendingProps,m=i.memoizedProps,w=d.value,lt(ru,h._currentValue),h._currentValue=w,m!==null)if(er(m.value,w)){if(m.children===d.children&&!pn.current){i=Zr(r,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var k=m.dependencies;if(k!==null){w=m.child;for(var b=k.firstContext;b!==null;){if(b.context===h){if(m.tag===1){b=Xr(-1,a&-a),b.tag=2;var W=m.updateQueue;if(W!==null){W=W.shared;var re=W.pending;re===null?b.next=b:(b.next=re.next,re.next=b),W.pending=b}}m.lanes|=a,b=m.alternate,b!==null&&(b.lanes|=a),vh(m.return,a,i),k.lanes|=a;break}b=b.next}}else if(m.tag===10)w=m.type===i.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,k=w.alternate,k!==null&&(k.lanes|=a),vh(w,a,i),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}cn(r,i,d.children,a),i=i.child}return i;case 9:return d=i.type,h=i.pendingProps.children,Eo(i,a),d=zn(d),h=h(d),i.flags|=1,cn(r,i,h,a),i.child;case 14:return h=i.type,d=nr(h,i.pendingProps),d=nr(h.type,d),Fm(r,i,h,d,a);case 15:return Um(r,i,i.type,i.pendingProps,a);case 17:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:nr(h,d),mu(r,i),i.tag=1,mn(h)?(r=!0,Yl(i)):r=!1,Eo(i,a),xm(i,h,d),Oh(i,h,d,a),Uh(null,i,h,!0,r,a);case 19:return Gm(r,i,a);case 22:return jm(r,i,a)}throw Error(t(156,i.tag))};function yg(r,i){return oa(r,i)}function y0(r,i,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,i,a,h){return new y0(r,i,a,h)}function id(r){return r=r.prototype,!(!r||!r.isReactComponent)}function _0(r){if(typeof r=="function")return id(r)?1:0;if(r!=null){if(r=r.$$typeof,r===V)return 11;if(r===$e)return 14}return 2}function xs(r,i){var a=r.alternate;return a===null?(a=Wn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function Au(r,i,a,h,d,m){var w=2;if(h=r,typeof r=="function")id(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case N:return Ri(a.children,d,m,i);case S:w=8,d|=8;break;case R:return r=Wn(12,a,i,d|2),r.elementType=R,r.lanes=m,r;case C:return r=Wn(13,a,i,d),r.elementType=C,r.lanes=m,r;case Ne:return r=Wn(19,a,i,d),r.elementType=Ne,r.lanes=m,r;case G:return ku(a,d,m,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case P:w=10;break e;case x:w=9;break e;case V:w=11;break e;case $e:w=14;break e;case Ae:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Wn(w,a,i,d),i.elementType=r,i.type=h,i.lanes=m,i}function Ri(r,i,a,h){return r=Wn(7,r,h,i),r.lanes=a,r}function ku(r,i,a,h){return r=Wn(22,r,h,i),r.elementType=G,r.lanes=a,r.stateNode={isHidden:!1},r}function od(r,i,a){return r=Wn(6,r,null,i),r.lanes=a,r}function ad(r,i,a){return i=Wn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function v0(r,i,a,h,d){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function ld(r,i,a,h,d,m,w,k,b){return r=new v0(r,i,a,k,b),i===1?(i=1,m===!0&&(i|=8)):i=0,m=Wn(3,null,null,i),r.current=m,m.stateNode=r,m.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eh(m),r}function w0(r,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ne,key:h==null?null:""+h,children:r,containerInfo:i,implementation:a}}function _g(r){if(!r)return Es;r=r._reactInternals;e:{if(Xn(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(mn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(mn(a))return qp(r,a,i)}return i}function vg(r,i,a,h,d,m,w,k,b){return r=ld(a,h,!0,r,d,m,w,k,b),r.context=_g(null),a=r.current,h=hn(),d=Rs(a),m=Xr(h,d),m.callback=i??null,Ss(a,m,d),r.current.lanes=d,di(r,d,h),_n(r,h),r}function Ru(r,i,a,h){var d=i.current,m=hn(),w=Rs(d);return a=_g(a),i.context===null?i.context=a:i.pendingContext=a,i=Xr(m,w),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=Ss(d,i,w),r!==null&&(ir(r,d,w,m),iu(r,d,w)),w}function Pu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function wg(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function ud(r,i){wg(r,i),(r=r.alternate)&&wg(r,i)}function E0(){return null}var Eg=typeof reportError=="function"?reportError:function(r){console.error(r)};function cd(r){this._internalRoot=r}xu.prototype.render=cd.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));Ru(r,i,null,null)},xu.prototype.unmount=cd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Ci(function(){Ru(null,r,null,null)}),i[Gr]=null}};function xu(r){this._internalRoot=r}xu.prototype.unstable_scheduleHydration=function(r){if(r){var i=ma();r={blockedOn:null,target:r,priority:i};for(var a=0;a<kn.length&&i!==0&&i<kn[a].priority;a++);kn.splice(a,0,r),a===0&&Xi(r)}};function hd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Nu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Tg(){}function T0(r,i,a,h,d){if(d){if(typeof h=="function"){var m=h;h=function(){var W=Pu(w);m.call(W)}}var w=vg(i,h,r,0,null,!1,!1,"",Tg);return r._reactRootContainer=w,r[Gr]=w.current,ka(r.nodeType===8?r.parentNode:r),Ci(),w}for(;d=r.lastChild;)r.removeChild(d);if(typeof h=="function"){var k=h;h=function(){var W=Pu(b);k.call(W)}}var b=ld(r,0,!1,null,null,!1,!1,"",Tg);return r._reactRootContainer=b,r[Gr]=b.current,ka(r.nodeType===8?r.parentNode:r),Ci(function(){Ru(i,b,a,h)}),b}function Du(r,i,a,h,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var k=d;d=function(){var b=Pu(w);k.call(b)}}Ru(i,w,r,d)}else w=T0(a,i,r,d,h);return Pu(w)}fa=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=rt(i.pendingLanes);a!==0&&(da(i,a|1),_n(i,dt()),(et&6)===0&&(Ao=dt()+500,Ts()))}break;case 13:Ci(function(){var h=Yr(r,1);if(h!==null){var d=hn();ir(h,r,1,d)}}),ud(r,1)}},Ji=function(r){if(r.tag===13){var i=Yr(r,134217728);if(i!==null){var a=hn();ir(i,r,134217728,a)}ud(r,134217728)}},pa=function(r){if(r.tag===13){var i=Rs(r),a=Yr(r,i);if(a!==null){var h=hn();ir(a,r,i,h)}ud(r,i)}},ma=function(){return Ye},ga=function(r,i){var a=Ye;try{return Ye=r,i()}finally{Ye=a}},Jn=function(r,i,a){switch(i){case"input":if(Ie(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==r&&h.form===r.form){var d=Ql(h);if(!d)throw Error(t(90));ue(h),Ie(h,d)}}}break;case"textarea":ni(r,a);break;case"select":i=a.value,i!=null&&Zt(r,!!a.multiple,i,!1)}},je=nd,Tt=Ci;var I0={usingClientEntryPoint:!1,Events:[xa,fo,Ql,le,pe,nd]},Wa={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S0={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Nl(r),r===null?null:r.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||E0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bu.isDisabled&&bu.supportsFiber)try{li=bu.inject(S0),Cn=bu}catch{}}return vn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I0,vn.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hd(i))throw Error(t(200));return w0(r,i,null,a)},vn.createRoot=function(r,i){if(!hd(r))throw Error(t(299));var a=!1,h="",d=Eg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=ld(r,1,!1,null,null,a,!1,h,d),r[Gr]=i.current,ka(r.nodeType===8?r.parentNode:r),new cd(i)},vn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Nl(i),r=r===null?null:r.stateNode,r},vn.flushSync=function(r){return Ci(r)},vn.hydrate=function(r,i,a){if(!Nu(i))throw Error(t(200));return Du(null,r,i,!0,a)},vn.hydrateRoot=function(r,i,a){if(!hd(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,m="",w=Eg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=vg(i,null,r,1,a??null,d,!1,m,w),r[Gr]=i.current,ka(r),h)for(r=0;r<h.length;r++)a=h[r],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new xu(i)},vn.render=function(r,i,a){if(!Nu(i))throw Error(t(200));return Du(null,r,i,!1,a)},vn.unmountComponentAtNode=function(r){if(!Nu(r))throw Error(t(40));return r._reactRootContainer?(Ci(function(){Du(null,null,r,!1,function(){r._reactRootContainer=null,r[Gr]=null})}),!0):!1},vn.unstable_batchedUpdates=nd,vn.unstable_renderSubtreeIntoContainer=function(r,i,a,h){if(!Nu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return Du(r,i,a,!1,h)},vn.version="18.3.1-next-f1338f8080-20240426",vn}var xg;function w_(){if(xg)return pd.exports;xg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pd.exports=b0(),pd.exports}var Ng;function V0(){if(Ng)return Vu;Ng=1;var n=w_();return Vu.createRoot=n.createRoot,Vu.hydrateRoot=n.hydrateRoot,Vu}var O0=V0();const L0=v_(O0);w_();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},il.apply(this,arguments)}var Ls;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Ls||(Ls={}));const Dg="popstate";function M0(n){n===void 0&&(n={});function e(o,l){let{pathname:c="/",search:f="",hash:p=""}=zi(o.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Dd("",{pathname:c,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let c=o.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");f=y===-1?p:p.slice(0,y)}return f+"#"+(typeof l=="string"?l:Zu(l))}function s(o,l){wc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return U0(e,t,s,n)}function Ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function F0(){return Math.random().toString(36).substr(2,8)}function bg(n,e){return{usr:n.state,key:n.key,idx:e}}function Dd(n,e,t,s){return t===void 0&&(t=null),il({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?zi(e):e,{state:t,key:e&&e.key||s||F0()})}function Zu(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function zi(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function U0(n,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,f=Ls.Pop,p=null,y=_();y==null&&(y=0,c.replaceState(il({},c.state,{idx:y}),""));function _(){return(c.state||{idx:null}).idx}function E(){f=Ls.Pop;let L=_(),te=L==null?null:L-y;y=L,p&&p({action:f,location:$.location,delta:te})}function T(L,te){f=Ls.Push;let se=Dd($.location,L,te);t&&t(se,L),y=_()+1;let ae=bg(se,y),oe=$.createHref(se);try{c.pushState(ae,"",oe)}catch(me){if(me instanceof DOMException&&me.name==="DataCloneError")throw me;o.location.assign(oe)}l&&p&&p({action:f,location:$.location,delta:1})}function M(L,te){f=Ls.Replace;let se=Dd($.location,L,te);t&&t(se,L),y=_();let ae=bg(se,y),oe=$.createHref(se);c.replaceState(ae,"",oe),l&&p&&p({action:f,location:$.location,delta:0})}function B(L){let te=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof L=="string"?L:Zu(L);return se=se.replace(/ $/,"%20"),Ot(te,"No window.location.(origin|href) available to create URL for href: "+se),new URL(se,te)}let $={get action(){return f},get location(){return n(o,c)},listen(L){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Dg,E),p=L,()=>{o.removeEventListener(Dg,E),p=null}},createHref(L){return e(o,L)},createURL:B,encodeLocation(L){let te=B(L);return{pathname:te.pathname,search:te.search,hash:te.hash}},push:T,replace:M,go(L){return c.go(L)}};return $}var Vg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Vg||(Vg={}));function j0(n,e,t){return t===void 0&&(t="/"),z0(n,e,t)}function z0(n,e,t,s){let o=typeof e=="string"?zi(e):e,l=df(o.pathname||"/",t);if(l==null)return null;let c=E_(n);B0(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let y=eT(l);f=Y0(c[p],y)}return f}function E_(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,c,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Ot(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let y=Fs([s,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(Ot(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),E_(l.children,e,_,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:Q0(y,l.index),routesMeta:_})};return n.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,c);else for(let p of T_(l.path))o(l,c,p)}),e}function T_(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=T_(s.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...c),f.map(p=>n.startsWith("/")&&p===""?"/":p)}function B0(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:J0(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const $0=/^:[\w-]+$/,W0=3,H0=2,q0=1,G0=10,K0=-2,Og=n=>n==="*";function Q0(n,e){let t=n.split("/"),s=t.length;return t.some(Og)&&(s+=K0),e&&(s+=H0),t.filter(o=>!Og(o)).reduce((o,l)=>o+($0.test(l)?W0:l===""?q0:G0),s)}function J0(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function Y0(n,e,t){let{routesMeta:s}=n,o={},l="/",c=[];for(let f=0;f<s.length;++f){let p=s[f],y=f===s.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=X0({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},_),T=p.route;if(!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:Fs([l,E.pathname]),pathnameBase:iT(Fs([l,E.pathnameBase])),route:T}),E.pathnameBase!=="/"&&(l=Fs([l,E.pathnameBase]))}return c}function X0(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=Z0(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,_,E)=>{let{paramName:T,isOptional:M}=_;if(T==="*"){let $=f[E]||"";c=l.slice(0,l.length-$.length).replace(/(.)\/+$/,"$1")}const B=f[E];return M&&!B?y[T]=void 0:y[T]=(B||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function Z0(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),wc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function eT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wc(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function df(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const tT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nT=n=>tT.test(n);function rT(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?zi(n):n,l;if(t)if(nT(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),wc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?l=Lg(t.substring(1),"/"):l=Lg(t,e)}else l=e;return{pathname:l,search:oT(s),hash:aT(o)}}function Lg(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function yd(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function I_(n,e){let t=sT(n);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function S_(n,e,t,s){s===void 0&&(s=!1);let o;typeof n=="string"?o=zi(n):(o=il({},n),Ot(!o.pathname||!o.pathname.includes("?"),yd("?","pathname","search",o)),Ot(!o.pathname||!o.pathname.includes("#"),yd("#","pathname","hash",o)),Ot(!o.search||!o.search.includes("#"),yd("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,f;if(c==null)f=t;else{let E=e.length-1;if(!s&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),E-=1;o.pathname=T.join("/")}f=E>=0?e[E]:"/"}let p=rT(o,f),y=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||_)&&(p.pathname+="/"),p}const Fs=n=>n.join("/").replace(/\/\/+/g,"/"),iT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),oT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,aT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function lT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const C_=["post","put","patch","delete"];new Set(C_);const uT=["get",...C_];new Set(uT);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ol.apply(this,arguments)}const ff=D.createContext(null),cT=D.createContext(null),Bi=D.createContext(null),Ec=D.createContext(null),Ys=D.createContext({outlet:null,matches:[],isDataRoute:!1}),A_=D.createContext(null);function hT(n,e){let{relative:t}=e===void 0?{}:e;pl()||Ot(!1);let{basename:s,navigator:o}=D.useContext(Bi),{hash:l,pathname:c,search:f}=P_(n,{relative:t}),p=c;return s!=="/"&&(p=c==="/"?s:Fs([s,c])),o.createHref({pathname:p,search:f,hash:l})}function pl(){return D.useContext(Ec)!=null}function ml(){return pl()||Ot(!1),D.useContext(Ec).location}function k_(n){D.useContext(Bi).static||D.useLayoutEffect(n)}function Tc(){let{isDataRoute:n}=D.useContext(Ys);return n?ST():dT()}function dT(){pl()||Ot(!1);let n=D.useContext(ff),{basename:e,future:t,navigator:s}=D.useContext(Bi),{matches:o}=D.useContext(Ys),{pathname:l}=ml(),c=JSON.stringify(I_(o,t.v7_relativeSplatPath)),f=D.useRef(!1);return k_(()=>{f.current=!0}),D.useCallback(function(y,_){if(_===void 0&&(_={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let E=S_(y,JSON.parse(c),l,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:Fs([e,E.pathname])),(_.replace?s.replace:s.push)(E,_.state,_)},[e,s,c,l,n])}function R_(){let{matches:n}=D.useContext(Ys),e=n[n.length-1];return e?e.params:{}}function P_(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=D.useContext(Bi),{matches:o}=D.useContext(Ys),{pathname:l}=ml(),c=JSON.stringify(I_(o,s.v7_relativeSplatPath));return D.useMemo(()=>S_(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function fT(n,e){return pT(n,e)}function pT(n,e,t,s){pl()||Ot(!1);let{navigator:o}=D.useContext(Bi),{matches:l}=D.useContext(Ys),c=l[l.length-1],f=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let y=ml(),_;if(e){var E;let L=typeof e=="string"?zi(e):e;p==="/"||(E=L.pathname)!=null&&E.startsWith(p)||Ot(!1),_=L}else _=y;let T=_.pathname||"/",M=T;if(p!=="/"){let L=p.replace(/^\//,"").split("/");M="/"+T.replace(/^\//,"").split("/").slice(L.length).join("/")}let B=j0(n,{pathname:M}),$=vT(B&&B.map(L=>Object.assign({},L,{params:Object.assign({},f,L.params),pathname:Fs([p,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?p:Fs([p,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,t,s);return e&&$?D.createElement(Ec.Provider,{value:{location:ol({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Ls.Pop}},$):$}function mT(){let n=IT(),e=lT(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},e),t?D.createElement("pre",{style:o},t):null,null)}const gT=D.createElement(mT,null);class yT extends D.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?D.createElement(Ys.Provider,{value:this.props.routeContext},D.createElement(A_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _T(n){let{routeContext:e,match:t,children:s}=n,o=D.useContext(ff);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),D.createElement(Ys.Provider,{value:e},s)}function vT(n,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,f=(o=t)==null?void 0:o.errors;if(f!=null){let _=c.findIndex(E=>E.route.id&&(f==null?void 0:f[E.route.id])!==void 0);_>=0||Ot(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(y=_),E.route.id){let{loaderData:T,errors:M}=t,B=E.route.loader&&T[E.route.id]===void 0&&(!M||M[E.route.id]===void 0);if(E.route.lazy||B){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((_,E,T)=>{let M,B=!1,$=null,L=null;t&&(M=f&&E.route.id?f[E.route.id]:void 0,$=E.route.errorElement||gT,p&&(y<0&&T===0?(CT("route-fallback"),B=!0,L=null):y===T&&(B=!0,L=E.route.hydrateFallbackElement||null)));let te=e.concat(c.slice(0,T+1)),se=()=>{let ae;return M?ae=$:B?ae=L:E.route.Component?ae=D.createElement(E.route.Component,null):E.route.element?ae=E.route.element:ae=_,D.createElement(_T,{match:E,routeContext:{outlet:_,matches:te,isDataRoute:t!=null},children:ae})};return t&&(E.route.ErrorBoundary||E.route.errorElement||T===0)?D.createElement(yT,{location:t.location,revalidation:t.revalidation,component:$,error:M,children:se(),routeContext:{outlet:null,matches:te,isDataRoute:!0}}):se()},null)}var x_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(x_||{}),N_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(N_||{});function wT(n){let e=D.useContext(ff);return e||Ot(!1),e}function ET(n){let e=D.useContext(cT);return e||Ot(!1),e}function TT(n){let e=D.useContext(Ys);return e||Ot(!1),e}function D_(n){let e=TT(),t=e.matches[e.matches.length-1];return t.route.id||Ot(!1),t.route.id}function IT(){var n;let e=D.useContext(A_),t=ET(),s=D_();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function ST(){let{router:n}=wT(x_.UseNavigateStable),e=D_(N_.UseNavigateStable),t=D.useRef(!1);return k_(()=>{t.current=!0}),D.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,ol({fromRouteId:e},l)))},[n,e])}const Mg={};function CT(n,e,t){Mg[n]||(Mg[n]=!0)}function AT(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Ga(n){Ot(!1)}function kT(n){let{basename:e="/",children:t=null,location:s,navigationType:o=Ls.Pop,navigator:l,static:c=!1,future:f}=n;pl()&&Ot(!1);let p=e.replace(/^\/*/,"/"),y=D.useMemo(()=>({basename:p,navigator:l,static:c,future:ol({v7_relativeSplatPath:!1},f)}),[p,f,l,c]);typeof s=="string"&&(s=zi(s));let{pathname:_="/",search:E="",hash:T="",state:M=null,key:B="default"}=s,$=D.useMemo(()=>{let L=df(_,p);return L==null?null:{location:{pathname:L,search:E,hash:T,state:M,key:B},navigationType:o}},[p,_,E,T,M,B,o]);return $==null?null:D.createElement(Bi.Provider,{value:y},D.createElement(Ec.Provider,{children:t,value:$}))}function RT(n){let{children:e,location:t}=n;return fT(bd(e),t)}new Promise(()=>{});function bd(n,e){e===void 0&&(e=[]);let t=[];return D.Children.forEach(n,(s,o)=>{if(!D.isValidElement(s))return;let l=[...e,o];if(s.type===D.Fragment){t.push.apply(t,bd(s.props.children,l));return}s.type!==Ga&&Ot(!1),!s.props.index||!s.props.children||Ot(!1);let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=bd(s.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vd(){return Vd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Vd.apply(this,arguments)}function PT(n,e){if(n==null)return{};var t={},s=Object.keys(n),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function xT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function NT(n,e){return n.button===0&&(!e||e==="_self")&&!xT(n)}function Od(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function DT(n,e){let t=Od(n);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(l=>{t.append(o,l)})}),t}const bT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],VT="6";try{window.__reactRouterVersion=VT}catch{}const OT="startTransition",Fg=x0[OT];function LT(n){let{basename:e,children:t,future:s,window:o}=n,l=D.useRef();l.current==null&&(l.current=M0({window:o,v5Compat:!0}));let c=l.current,[f,p]=D.useState({action:c.action,location:c.location}),{v7_startTransition:y}=s||{},_=D.useCallback(E=>{y&&Fg?Fg(()=>p(E)):p(E)},[p,y]);return D.useLayoutEffect(()=>c.listen(_),[c,_]),D.useEffect(()=>AT(s),[s]),D.createElement(kT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:c,future:s})}const MT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",FT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Do=D.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:c,state:f,target:p,to:y,preventScrollReset:_,viewTransition:E}=e,T=PT(e,bT),{basename:M}=D.useContext(Bi),B,$=!1;if(typeof y=="string"&&FT.test(y)&&(B=y,MT))try{let ae=new URL(window.location.href),oe=y.startsWith("//")?new URL(ae.protocol+y):new URL(y),me=df(oe.pathname,M);oe.origin===ae.origin&&me!=null?y=me+oe.search+oe.hash:$=!0}catch{}let L=hT(y,{relative:o}),te=UT(y,{replace:c,state:f,target:p,preventScrollReset:_,relative:o,viewTransition:E});function se(ae){s&&s(ae),ae.defaultPrevented||te(ae)}return D.createElement("a",Vd({},T,{href:B||L,onClick:$||l?s:se,ref:t,target:p}))});var Ug;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Ug||(Ug={}));var jg;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(jg||(jg={}));function UT(n,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:c,viewTransition:f}=e===void 0?{}:e,p=Tc(),y=ml(),_=P_(n,{relative:c});return D.useCallback(E=>{if(NT(E,t)){E.preventDefault();let T=s!==void 0?s:Zu(y)===Zu(_);p(n,{replace:T,state:o,preventScrollReset:l,relative:c,viewTransition:f})}},[y,p,_,s,o,t,n,l,c,f])}function b_(n){let e=D.useRef(Od(n)),t=D.useRef(!1),s=ml(),o=D.useMemo(()=>DT(s.search,t.current?null:e.current),[s.search]),l=Tc(),c=D.useCallback((f,p)=>{const y=Od(typeof f=="function"?f(o):f);t.current=!0,l("?"+y,p)},[l,o]);return[o,c]}const jT=()=>{};var zg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V_=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},zT=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},O_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let T=(f&15)<<2|y>>6,M=y&63;p||(M=64,c||(T=64)),s.push(t[_],t[E],t[T],t[M])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(V_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):zT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||E==null)throw new BT;const T=l<<2|f>>4;if(s.push(T),y!==64){const M=f<<4&240|y>>2;if(s.push(M),E!==64){const B=y<<6&192|E;s.push(B)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class BT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $T=function(n){const e=V_(n);return O_.encodeByteArray(e,!0)},ec=function(n){return $T(n).replace(/\./g,"")},L_=function(n){try{return O_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT=()=>WT().__FIREBASE_DEFAULTS__,qT=()=>{if(typeof process>"u"||typeof zg>"u")return;const n=zg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},GT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&L_(n[1]);return e&&JSON.parse(e)},Ic=()=>{try{return jT()||HT()||qT()||GT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},M_=n=>{var e,t;return(t=(e=Ic())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},KT=n=>{const e=M_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},F_=()=>{var n;return(n=Ic())==null?void 0:n.config},U_=n=>{var e;return(e=Ic())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function j_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ec(JSON.stringify(t)),ec(JSON.stringify(c)),""].join(".")}const Za={};function YT(){const n={prod:[],emulator:[]};for(const e of Object.keys(Za))Za[e]?n.emulator.push(e):n.prod.push(e);return n}function XT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Bg=!1;function z_(n,e){if(typeof window>"u"||typeof document>"u"||!Jo(window.location.host)||Za[n]===e||Za[n]||Bg)return;Za[n]=e;function t(T){return`__firebase__banner__${T}`}const s="__firebase__banner",l=YT().prod.length>0;function c(){const T=document.getElementById(s);T&&T.remove()}function f(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function p(T,M){T.setAttribute("width","24"),T.setAttribute("id",M),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function y(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{Bg=!0,c()},T}function _(T,M){T.setAttribute("id",M),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=XT(s),M=t("text"),B=document.getElementById(M)||document.createElement("span"),$=t("learnmore"),L=document.getElementById($)||document.createElement("a"),te=t("preprendIcon"),se=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const ae=T.element;f(ae),_(L,$);const oe=y();p(se,te),ae.append(se,B,L,oe),document.body.appendChild(ae)}l?(B.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,B.innerText="Preview backend running in this workspace."),B.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ZT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function eI(){var e;const n=(e=Ic())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function tI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function nI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function rI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sI(){const n=un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function iI(){return!eI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function oI(){try{return typeof indexedDB=="object"}catch{return!1}}function aI(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI="FirebaseError";class us extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=lI,Object.setPrototypeOf(this,us.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?uI(l,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new us(o,f,s)}}function uI(n,e){return n.replace(cI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const cI=/\{\$([^}]+)}/g;function hI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ss(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if($g(l)&&$g(c)){if(!ss(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function $g(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function dI(n,e){const t=new fI(n,e);return t.subscribe.bind(t)}class fI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");pI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=_d),o.error===void 0&&(o.error=_d),o.complete===void 0&&(o.complete=_d);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _d(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n){return n&&n._delegate?n._delegate:n}class Li{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new QT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(yI(e))try{this.getOrInitializeService({instanceIdentifier:Ni})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ni){return this.instances.has(e)}getOptions(e=Ni){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ni){return this.component?this.component.multipleInstances?e:Ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gI(n){return n===Ni?void 0:n}function yI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ge;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ge||(Ge={}));const vI={debug:Ge.DEBUG,verbose:Ge.VERBOSE,info:Ge.INFO,warn:Ge.WARN,error:Ge.ERROR,silent:Ge.SILENT},wI=Ge.INFO,EI={[Ge.DEBUG]:"log",[Ge.VERBOSE]:"log",[Ge.INFO]:"info",[Ge.WARN]:"warn",[Ge.ERROR]:"error"},TI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=EI[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pf{constructor(e){this.name=e,this._logLevel=wI,this._logHandler=TI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ge))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ge.DEBUG,...e),this._logHandler(this,Ge.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ge.VERBOSE,...e),this._logHandler(this,Ge.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ge.INFO,...e),this._logHandler(this,Ge.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ge.WARN,...e),this._logHandler(this,Ge.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ge.ERROR,...e),this._logHandler(this,Ge.ERROR,...e)}}const II=(n,e)=>e.some(t=>n instanceof t);let Wg,Hg;function SI(){return Wg||(Wg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CI(){return Hg||(Hg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B_=new WeakMap,Ld=new WeakMap,$_=new WeakMap,vd=new WeakMap,mf=new WeakMap;function AI(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Us(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&B_.set(t,n)}).catch(()=>{}),mf.set(e,n),e}function kI(n){if(Ld.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ld.set(n,e)}let Md={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ld.get(n);if(e==="objectStoreNames")return n.objectStoreNames||$_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Us(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RI(n){Md=n(Md)}function PI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(wd(this),e,...t);return $_.set(s,e.sort?e.sort():[e]),Us(s)}:CI().includes(n)?function(...e){return n.apply(wd(this),e),Us(B_.get(this))}:function(...e){return Us(n.apply(wd(this),e))}}function xI(n){return typeof n=="function"?PI(n):(n instanceof IDBTransaction&&kI(n),II(n,SI())?new Proxy(n,Md):n)}function Us(n){if(n instanceof IDBRequest)return AI(n);if(vd.has(n))return vd.get(n);const e=xI(n);return e!==n&&(vd.set(n,e),mf.set(e,n)),e}const wd=n=>mf.get(n);function NI(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=Us(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Us(c.result),p.oldVersion,p.newVersion,Us(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const DI=["get","getKey","getAll","getAllKeys","count"],bI=["put","add","delete","clear"],Ed=new Map;function qg(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ed.get(e))return Ed.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=bI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||DI.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return Ed.set(e,l),l}RI(n=>({...n,get:(e,t,s)=>qg(e,t)||n.get(e,t,s),has:(e,t)=>!!qg(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function OI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fd="@firebase/app",Gg="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new pf("@firebase/app"),LI="@firebase/app-compat",MI="@firebase/analytics-compat",FI="@firebase/analytics",UI="@firebase/app-check-compat",jI="@firebase/app-check",zI="@firebase/auth",BI="@firebase/auth-compat",$I="@firebase/database",WI="@firebase/data-connect",HI="@firebase/database-compat",qI="@firebase/functions",GI="@firebase/functions-compat",KI="@firebase/installations",QI="@firebase/installations-compat",JI="@firebase/messaging",YI="@firebase/messaging-compat",XI="@firebase/performance",ZI="@firebase/performance-compat",eS="@firebase/remote-config",tS="@firebase/remote-config-compat",nS="@firebase/storage",rS="@firebase/storage-compat",sS="@firebase/firestore",iS="@firebase/ai",oS="@firebase/firestore-compat",aS="firebase",lS="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="[DEFAULT]",uS={[Fd]:"fire-core",[LI]:"fire-core-compat",[FI]:"fire-analytics",[MI]:"fire-analytics-compat",[jI]:"fire-app-check",[UI]:"fire-app-check-compat",[zI]:"fire-auth",[BI]:"fire-auth-compat",[$I]:"fire-rtdb",[WI]:"fire-data-connect",[HI]:"fire-rtdb-compat",[qI]:"fire-fn",[GI]:"fire-fn-compat",[KI]:"fire-iid",[QI]:"fire-iid-compat",[JI]:"fire-fcm",[YI]:"fire-fcm-compat",[XI]:"fire-perf",[ZI]:"fire-perf-compat",[eS]:"fire-rc",[tS]:"fire-rc-compat",[nS]:"fire-gcs",[rS]:"fire-gcs-compat",[sS]:"fire-fst",[oS]:"fire-fst-compat",[iS]:"fire-vertex","fire-js":"fire-js",[aS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Map,cS=new Map,jd=new Map;function Kg(n,e){try{n.container.addComponent(e)}catch(t){is.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Uo(n){const e=n.name;if(jd.has(e))return is.debug(`There were multiple attempts to register component ${e}.`),!1;jd.set(e,n);for(const t of tc.values())Kg(t,n);for(const t of cS.values())Kg(t,n);return!0}function gf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function or(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},js=new gl("app","Firebase",hS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=lS;function W_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Ud,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw js.create("bad-app-name",{appName:String(o)});if(t||(t=F_()),!t)throw js.create("no-options");const l=tc.get(o);if(l){if(ss(t,l.options)&&ss(s,l.config))return l;throw js.create("duplicate-app",{appName:o})}const c=new _I(o);for(const p of jd.values())c.addComponent(p);const f=new dS(t,s,c);return tc.set(o,f),f}function H_(n=Ud){const e=tc.get(n);if(!e&&n===Ud&&F_())return W_();if(!e)throw js.create("no-app",{appName:n});return e}function zs(n,e,t){let s=uS[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),is.warn(c.join(" "));return}Uo(new Li(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS="firebase-heartbeat-database",pS=1,al="firebase-heartbeat-store";let Td=null;function q_(){return Td||(Td=NI(fS,pS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(n=>{throw js.create("idb-open",{originalErrorMessage:n.message})})),Td}async function mS(n){try{const t=(await q_()).transaction(al),s=await t.objectStore(al).get(G_(n));return await t.done,s}catch(e){if(e instanceof us)is.warn(e.message);else{const t=js.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});is.warn(t.message)}}}async function Qg(n,e){try{const s=(await q_()).transaction(al,"readwrite");await s.objectStore(al).put(e,G_(n)),await s.done}catch(t){if(t instanceof us)is.warn(t.message);else{const s=js.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});is.warn(s.message)}}}function G_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS=1024,yS=30;class _S{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new wS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Jg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>yS){const c=ES(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){is.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Jg(),{heartbeatsToSend:s,unsentEntries:o}=vS(this._heartbeatsCache.heartbeats),l=ec(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return is.warn(t),""}}}function Jg(){return new Date().toISOString().substring(0,10)}function vS(n,e=gS){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Yg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Yg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class wS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oI()?aI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Qg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Qg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Yg(n){return ec(JSON.stringify({version:2,heartbeats:n})).length}function ES(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TS(n){Uo(new Li("platform-logger",e=>new VI(e),"PRIVATE")),Uo(new Li("heartbeat",e=>new _S(e),"PRIVATE")),zs(Fd,Gg,n),zs(Fd,Gg,"esm2020"),zs("fire-js","")}TS("");function K_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const IS=K_,Q_=new gl("auth","Firebase",K_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new pf("@firebase/auth");function SS(n,...e){nc.logLevel<=Ge.WARN&&nc.warn(`Auth (${Yo}): ${n}`,...e)}function $u(n,...e){nc.logLevel<=Ge.ERROR&&nc.error(`Auth (${Yo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(n,...e){throw _f(n,...e)}function lr(n,...e){return _f(n,...e)}function yf(n,e,t){const s={...IS(),[e]:t};return new gl("auth","Firebase",s).create(e,{appName:n.name})}function Vi(n){return yf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function CS(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Mr(n,"argument-error"),yf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _f(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return Q_.create(n,...e)}function Ve(n,e,...t){if(!n)throw _f(e,...t)}function ns(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $u(e),new Error(e)}function os(n,e){n||ns(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function AS(){return Xg()==="http:"||Xg()==="https:"}function Xg(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(AS()||nI()||"connection"in navigator)?navigator.onLine:!0}function RS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.shortDelay=e,this.longDelay=t,os(t>e,"Short delay should be less than long delay!"),this.isMobile=ZT()||rI()}get(){return kS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n,e){os(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ns("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ns("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ns("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],NS=new _l(3e4,6e4);function wf(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Xo(n,e,t,s,o={}){return Y_(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=yl({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:p,...l};return tI()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Jo(n.emulatorConfig.host)&&(y.credentials="include"),J_.fetch()(await X_(n,n.config.apiHost,t,f),y)})}async function Y_(n,e,t){n._canInitEmulator=!1;const s={...PS,...e};try{const o=new bS(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ou(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ou(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Ou(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Ou(n,"user-disabled",c);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw yf(n,_,y);Mr(n,_)}}catch(o){if(o instanceof us)throw o;Mr(n,"network-request-failed",{message:String(o)})}}async function DS(n,e,t,s,o={}){const l=await Xo(n,e,t,s,o);return"mfaPendingCredential"in l&&Mr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function X_(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?vf(n.config,o):`${n.config.apiScheme}://${o}`;return xS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class bS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(lr(this.auth,"network-request-failed")),NS.get())})}}function Ou(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=lr(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VS(n,e){return Xo(n,"POST","/v1/accounts:delete",e)}async function rc(n,e){return Xo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function OS(n,e=!1){const t=Ht(n),s=await t.getIdToken(e),o=Ef(s);Ve(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:el(Id(o.auth_time)),issuedAtTime:el(Id(o.iat)),expirationTime:el(Id(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Id(n){return Number(n)*1e3}function Ef(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return $u("JWT malformed, contained fewer than 3 sections"),null;try{const o=L_(t);return o?JSON.parse(o):($u("Failed to decode base64 JWT payload"),null)}catch(o){return $u("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function Zg(n){const e=Ef(n);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof us&&LS(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function LS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=el(this.lastLoginAt),this.creationTime=el(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(n){var E;const e=n.auth,t=await n.getIdToken(),s=await ll(n,rc(e,{idToken:t}));Ve(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?Z_(o.providerUserInfo):[],c=US(n.providerData,l),f=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),y=f?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Bd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,_)}async function FS(n){const e=Ht(n);await sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function US(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function Z_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(n,e){const t=await Y_(n,{},async()=>{const s=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await X_(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return n.emulatorConfig&&Jo(n.emulatorConfig.host)&&(p.credentials="include"),J_.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zS(n,e){return Xo(n,"POST","/v2/accounts:revokeToken",wf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Zg(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const t=Zg(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await jS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new bo;return s&&(Ve(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(Ve(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(Ve(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new bo,this.toJSON())}_performRefresh(){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ds(n,e){Ve(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ar{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new MS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Bd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ll(this,this.stsTokenManager.getToken(this.auth,e));return Ve(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return OS(this,e)}reload(){return FS(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ar({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await sc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(or(this.auth.app))return Promise.reject(Vi(this.auth));const e=await this.getIdToken();return await ll(this,VS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:T,isAnonymous:M,providerData:B,stsTokenManager:$}=t;Ve(E&&$,e,"internal-error");const L=bo.fromJSON(this.name,$);Ve(typeof E=="string",e,"internal-error"),Ds(s,e.name),Ds(o,e.name),Ve(typeof T=="boolean",e,"internal-error"),Ve(typeof M=="boolean",e,"internal-error"),Ds(l,e.name),Ds(c,e.name),Ds(f,e.name),Ds(p,e.name),Ds(y,e.name),Ds(_,e.name);const te=new ar({uid:E,auth:e,email:o,emailVerified:T,displayName:s,isAnonymous:M,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:L,createdAt:y,lastLoginAt:_});return B&&Array.isArray(B)&&(te.providerData=B.map(se=>({...se}))),p&&(te._redirectEventId=p),te}static async _fromIdTokenResponse(e,t,s=!1){const o=new bo;o.updateFromServerResponse(t);const l=new ar({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await sc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];Ve(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?Z_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new bo;f.updateFromIdToken(s);const p=new ar({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Bd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=new Map;function rs(n){os(n instanceof Function,"Expected a class definition");let e=ey.get(n);return e?(os(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ey.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ev.type="NONE";const ty=ev;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(n,e,t){return`firebase:${n}:${e}:${t}`}class Vo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Wu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Wu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rc(this.auth,{idToken:e}).catch(()=>{});return t?ar._fromGetAccountInfoResponse(this.auth,t,e):null}return ar._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Vo(rs(ty),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||rs(ty);const c=Wu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const _=await y._get(c);if(_){let E;if(typeof _=="string"){const T=await rc(e,{idToken:_}).catch(()=>{});if(!T)break;E=await ar._fromGetAccountInfoResponse(e,T,_)}else E=ar._fromJSON(e,_);y!==l&&(f=E),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Vo(l,e,s):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new Vo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(sv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tv(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ov(e))return"Blackberry";if(av(e))return"Webos";if(nv(e))return"Safari";if((e.includes("chrome/")||rv(e))&&!e.includes("edge/"))return"Chrome";if(iv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function tv(n=un()){return/firefox\//i.test(n)}function nv(n=un()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function rv(n=un()){return/crios\//i.test(n)}function sv(n=un()){return/iemobile/i.test(n)}function iv(n=un()){return/android/i.test(n)}function ov(n=un()){return/blackberry/i.test(n)}function av(n=un()){return/webos/i.test(n)}function Tf(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function BS(n=un()){var e;return Tf(n)&&!!((e=window.navigator)!=null&&e.standalone)}function $S(){return sI()&&document.documentMode===10}function lv(n=un()){return Tf(n)||iv(n)||av(n)||ov(n)||/windows phone/i.test(n)||sv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uv(n,e=[]){let t;switch(n){case"Browser":t=ny(un());break;case"Worker":t=`${ny(un())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(n,e={}){return Xo(n,"GET","/v2/passwordPolicy",wf(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=6;class GS{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??qS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ry(this),this.idTokenSubscription=new ry(this),this.beforeStateQueue=new WS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Q_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=rs(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rc(this,{idToken:e}),s=await ar._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(or(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=RS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(or(this.app))return Promise.reject(Vi(this));const t=e?Ht(e):null;return t&&Ve(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return or(this.app)?Promise.reject(Vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return or(this.app)?Promise.reject(Vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(rs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HS(this),t=new GS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await zS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&rs(e)||this._popupRedirectResolver;Ve(t,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[rs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(or(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&SS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Sc(n){return Ht(n)}class ry{constructor(e){this.auth=e,this.observer=null,this.addObserver=dI(t=>this.observer=t)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function QS(n){If=n}function JS(n){return If.loadJS(n)}function YS(){return If.gapiScript}function XS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZS(n,e){const t=gf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(ss(l,e??{}))return o;Mr(o,"already-initialized")}return t.initialize({options:e})}function eC(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(rs);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function tC(n,e,t){const s=Sc(n);Ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=cv(e),{host:c,port:f}=nC(e),p=f===null?"":`:${f}`,y={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ve(ss(y,s.config.emulator)&&ss(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Jo(c)?(j_(`${l}//${c}${p}`),z_("Auth",!0)):rC()}function cv(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function nC(n){const e=cv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:sy(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:sy(c)}}}function sy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function rC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ns("not implemented")}_getIdTokenResponse(e){return ns("not implemented")}_linkToIdToken(e,t){return ns("not implemented")}_getReauthenticationResolver(e){return ns("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(n,e){return DS(n,"POST","/v1/accounts:signInWithIdp",wf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="http://localhost";class Mi extends hv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Mi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Mi(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Oo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:sC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends Sf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs extends vl{constructor(){super("facebook.com")}static credential(e){return Mi._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bs.credential(e.oauthAccessToken)}catch{return null}}}bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Mi._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ts.credential(t,s)}catch{return null}}}ts.GOOGLE_SIGN_IN_METHOD="google.com";ts.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs extends vl{constructor(){super("github.com")}static credential(e){return Mi._fromParams({providerId:Vs.PROVIDER_ID,signInMethod:Vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vs.credentialFromTaggedObject(e)}static credentialFromError(e){return Vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vs.credential(e.oauthAccessToken)}catch{return null}}}Vs.GITHUB_SIGN_IN_METHOD="github.com";Vs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends vl{constructor(){super("twitter.com")}static credential(e,t){return Mi._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Os.credential(t,s)}catch{return null}}}Os.TWITTER_SIGN_IN_METHOD="twitter.com";Os.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await ar._fromIdTokenResponse(e,s,o),c=iy(s);return new jo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=iy(s);return new jo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function iy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends us{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ic.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new ic(e,t,s,o)}}function dv(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ic._fromErrorAndOperation(n,l,e,s):l})}async function iC(n,e,t=!1){const s=await ll(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return jo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(n,e,t=!1){const{auth:s}=n;if(or(s.app))return Promise.reject(Vi(s));const o="reauthenticate";try{const l=await ll(n,dv(s,o,e,n),t);Ve(l.idToken,s,"internal-error");const c=Ef(l.idToken);Ve(c,s,"internal-error");const{sub:f}=c;return Ve(n.uid===f,s,"user-mismatch"),jo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Mr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aC(n,e,t=!1){if(or(n.app))return Promise.reject(Vi(n));const s="signIn",o=await dv(n,s,e),l=await jo._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}function lC(n,e,t,s){return Ht(n).onIdTokenChanged(e,t,s)}function uC(n,e,t){return Ht(n).beforeAuthStateChanged(e,t)}function cC(n,e,t,s){return Ht(n).onAuthStateChanged(e,t,s)}function hC(n){return Ht(n).signOut()}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=1e3,fC=10;class pv extends fv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);$S()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,fC):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},dC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}pv.type="LOCAL";const pC=pv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mv extends fv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}mv.type="SESSION";const gv=mv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Cc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async y=>y(t.origin,l)),p=await mC(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const y=Cf("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const T=E;if(T.data.eventId===y)switch(T.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(T.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(){return window}function yC(n){Nr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(){return typeof Nr().WorkerGlobalScope<"u"&&typeof Nr().importScripts=="function"}async function _C(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function wC(){return yv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v="firebaseLocalStorageDb",EC=1,ac="firebaseLocalStorage",vv="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ac(n,e){return n.transaction([ac],e?"readwrite":"readonly").objectStore(ac)}function TC(){const n=indexedDB.deleteDatabase(_v);return new wl(n).toPromise()}function $d(){const n=indexedDB.open(_v,EC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(ac,{keyPath:vv})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(ac)?e(s):(s.close(),await TC(),e(await $d()))})})}async function oy(n,e,t){const s=Ac(n,!0).put({[vv]:e,value:t});return new wl(s).toPromise()}async function IC(n,e){const t=Ac(n,!1).get(e),s=await new wl(t).toPromise();return s===void 0?null:s.value}function ay(n,e){const t=Ac(n,!0).delete(e);return new wl(t).toPromise()}const SC=800,CC=3;class wv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $d(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>CC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cc._getInstance(wC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await _C(),!this.activeServiceWorker)return;this.sender=new gC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $d();return await oy(e,oc,"1"),await ay(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>oy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>IC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ay(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Ac(o,!1).getAll();return new wl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),SC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wv.type="LOCAL";const AC=wv;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n,e){return e?rs(e):(Ve(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends hv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function kC(n){return aC(n.auth,new Af(n),n.bypassAuthState)}function RC(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),oC(t,new Af(n),n.bypassAuthState)}async function PC(n){const{auth:e,user:t}=n;return Ve(t,e,"internal-error"),iC(t,new Af(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kC;case"linkViaPopup":case"linkViaRedirect":return PC;case"reauthViaPopup":case"reauthViaRedirect":return RC;default:Mr(this.auth,"internal-error")}}resolve(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC=new _l(2e3,1e4);async function NC(n,e,t){if(or(n.app))return Promise.reject(lr(n,"operation-not-supported-in-this-environment"));const s=Sc(n);CS(n,e,Sf);const o=Ev(s,t);return new Di(s,"signInViaPopup",e,o).executeNotNull()}class Di extends Tv{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Di.currentPopupAction&&Di.currentPopupAction.cancel(),Di.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const e=Cf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(lr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(lr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Di.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(lr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,xC.get())};e()}}Di.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="pendingRedirect",Hu=new Map;class bC extends Tv{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Hu.get(this.auth._key());if(!e){try{const s=await VC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Hu.set(this.auth._key(),e)}return this.bypassAuthState||Hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VC(n,e){const t=MC(e),s=LC(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function OC(n,e){Hu.set(n._key(),e)}function LC(n){return rs(n._redirectPersistence)}function MC(n){return Wu(DC,n.config.apiKey,n.name)}async function FC(n,e,t=!1){if(or(n.app))return Promise.reject(Vi(n));const s=Sc(n),o=Ev(s,e),c=await new bC(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC=600*1e3;class jC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Iv(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(lr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=UC&&this.cachedEventUids.clear(),this.cachedEventUids.has(ly(e))}saveEventToCache(e){this.cachedEventUids.add(ly(e)),this.lastProcessedEventTime=Date.now()}}function ly(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Iv({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Iv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(n,e={}){return Xo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WC=/^https?/;async function HC(n){if(n.config.emulator)return;const{authorizedDomains:e}=await BC(n);for(const t of e)try{if(qC(t))return}catch{}Mr(n,"unauthorized-domain")}function qC(n){const e=zd(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!WC.test(t))return!1;if($C.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new _l(3e4,6e4);function uy(){const n=Nr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function KC(n){return new Promise((e,t)=>{var o,l,c;function s(){uy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{uy(),t(lr(n,"network-request-failed"))},timeout:GC.get()})}if((l=(o=Nr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Nr().gapi)!=null&&c.load)s();else{const f=XS("iframefcb");return Nr()[f]=()=>{gapi.load?s():t(lr(n,"network-request-failed"))},JS(`${YS()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw qu=null,e})}let qu=null;function QC(n){return qu=qu||KC(n),qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=new _l(5e3,15e3),YC="__/auth/iframe",XC="emulator/auth/iframe",ZC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t1(n){const e=n.config;Ve(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?vf(e,XC):`https://${n.config.authDomain}/${YC}`,s={apiKey:e.apiKey,appName:n.name,v:Yo},o=e1.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${yl(s).slice(1)}`}async function n1(n){const e=await QC(n),t=Nr().gapi;return Ve(t,n,"internal-error"),e.open({where:document.body,url:t1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ZC,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=lr(n,"network-request-failed"),f=Nr().setTimeout(()=>{l(c)},JC.get());function p(){Nr().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s1=500,i1=600,o1="_blank",a1="http://localhost";class cy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l1(n,e,t,s=s1,o=i1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p={...r1,width:s.toString(),height:o.toString(),top:l,left:c},y=un().toLowerCase();t&&(f=rv(y)?o1:t),tv(y)&&(e=e||a1,p.scrollbars="yes");const _=Object.entries(p).reduce((T,[M,B])=>`${T}${M}=${B},`,"");if(BS(y)&&f!=="_self")return u1(e||"",f),new cy(null);const E=window.open(e||"",f,_);Ve(E,n,"popup-blocked");try{E.focus()}catch{}return new cy(E)}function u1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1="__/auth/handler",h1="emulator/auth/handler",d1=encodeURIComponent("fac");async function hy(n,e,t,s,o,l){Ve(n.config.authDomain,n,"auth-domain-config-required"),Ve(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Yo,eventId:o};if(e instanceof Sf){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",hI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof vl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await n._getAppCheckToken(),y=p?`#${d1}=${encodeURIComponent(p)}`:"";return`${f1(n)}?${yl(f).slice(1)}${y}`}function f1({config:n}){return n.emulator?vf(n,h1):`https://${n.authDomain}/${c1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="webStorageSupport";class p1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gv,this._completeRedirectFn=FC,this._overrideRedirectResult=OC}async _openPopup(e,t,s,o){var c;os((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await hy(e,t,s,zd(),o);return l1(e,l,Cf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await hy(e,t,s,zd(),o);return yC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(os(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await n1(e),s=new jC(e);return t.register("authEvent",o=>(Ve(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sd,{type:Sd},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[Sd];l!==void 0&&t(!!l),Mr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=HC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return lv()||nv()||Tf()}}const m1=p1;var dy="@firebase/auth",fy="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _1(n){Uo(new Li("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;Ve(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uv(n)},y=new KS(s,o,l,p);return eC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Uo(new Li("auth-internal",e=>{const t=Sc(e.getProvider("auth").getImmediate());return(s=>new g1(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(dy,fy,y1(n)),zs(dy,fy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1=300,w1=U_("authIdTokenMaxAge")||v1;let py=null;const E1=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>w1)return;const o=t==null?void 0:t.token;py!==o&&(py=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function T1(n=H_()){const e=gf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ZS(n,{popupRedirectResolver:m1,persistence:[AC,pC,gv]}),s=U_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=E1(l.toString());uC(t,c,()=>c(t.currentUser)),lC(t,f=>c(f))}}const o=M_("auth");return o&&tC(t,`http://${o}`),t}function I1(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}QS({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=lr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",I1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_1("Browser");var S1="firebase",C1="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zs(S1,C1,"app");var my=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bs,Sv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,S){function R(){}R.prototype=S.prototype,N.F=S.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(P,x,V){for(var C=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)C[Ne-2]=arguments[Ne];return S.prototype[x].apply(P,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,S,R){R||(R=0);const P=Array(16);if(typeof S=="string")for(var x=0;x<16;++x)P[x]=S.charCodeAt(R++)|S.charCodeAt(R++)<<8|S.charCodeAt(R++)<<16|S.charCodeAt(R++)<<24;else for(x=0;x<16;++x)P[x]=S[R++]|S[R++]<<8|S[R++]<<16|S[R++]<<24;S=N.g[0],R=N.g[1],x=N.g[2];let V=N.g[3],C;C=S+(V^R&(x^V))+P[0]+3614090360&4294967295,S=R+(C<<7&4294967295|C>>>25),C=V+(x^S&(R^x))+P[1]+3905402710&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(R^V&(S^R))+P[2]+606105819&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(S^x&(V^S))+P[3]+3250441966&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(V^R&(x^V))+P[4]+4118548399&4294967295,S=R+(C<<7&4294967295|C>>>25),C=V+(x^S&(R^x))+P[5]+1200080426&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(R^V&(S^R))+P[6]+2821735955&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(S^x&(V^S))+P[7]+4249261313&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(V^R&(x^V))+P[8]+1770035416&4294967295,S=R+(C<<7&4294967295|C>>>25),C=V+(x^S&(R^x))+P[9]+2336552879&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(R^V&(S^R))+P[10]+4294925233&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(S^x&(V^S))+P[11]+2304563134&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(V^R&(x^V))+P[12]+1804603682&4294967295,S=R+(C<<7&4294967295|C>>>25),C=V+(x^S&(R^x))+P[13]+4254626195&4294967295,V=S+(C<<12&4294967295|C>>>20),C=x+(R^V&(S^R))+P[14]+2792965006&4294967295,x=V+(C<<17&4294967295|C>>>15),C=R+(S^x&(V^S))+P[15]+1236535329&4294967295,R=x+(C<<22&4294967295|C>>>10),C=S+(x^V&(R^x))+P[1]+4129170786&4294967295,S=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(S^R))+P[6]+3225465664&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(V^S))+P[11]+643717713&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^S&(x^V))+P[0]+3921069994&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^V&(R^x))+P[5]+3593408605&4294967295,S=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(S^R))+P[10]+38016083&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(V^S))+P[15]+3634488961&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^S&(x^V))+P[4]+3889429448&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^V&(R^x))+P[9]+568446438&4294967295,S=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(S^R))+P[14]+3275163606&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(V^S))+P[3]+4107603335&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^S&(x^V))+P[8]+1163531501&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(x^V&(R^x))+P[13]+2850285829&4294967295,S=R+(C<<5&4294967295|C>>>27),C=V+(R^x&(S^R))+P[2]+4243563512&4294967295,V=S+(C<<9&4294967295|C>>>23),C=x+(S^R&(V^S))+P[7]+1735328473&4294967295,x=V+(C<<14&4294967295|C>>>18),C=R+(V^S&(x^V))+P[12]+2368359562&4294967295,R=x+(C<<20&4294967295|C>>>12),C=S+(R^x^V)+P[5]+4294588738&4294967295,S=R+(C<<4&4294967295|C>>>28),C=V+(S^R^x)+P[8]+2272392833&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^R)+P[11]+1839030562&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^S)+P[14]+4259657740&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^V)+P[1]+2763975236&4294967295,S=R+(C<<4&4294967295|C>>>28),C=V+(S^R^x)+P[4]+1272893353&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^R)+P[7]+4139469664&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^S)+P[10]+3200236656&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^V)+P[13]+681279174&4294967295,S=R+(C<<4&4294967295|C>>>28),C=V+(S^R^x)+P[0]+3936430074&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^R)+P[3]+3572445317&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^S)+P[6]+76029189&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(R^x^V)+P[9]+3654602809&4294967295,S=R+(C<<4&4294967295|C>>>28),C=V+(S^R^x)+P[12]+3873151461&4294967295,V=S+(C<<11&4294967295|C>>>21),C=x+(V^S^R)+P[15]+530742520&4294967295,x=V+(C<<16&4294967295|C>>>16),C=R+(x^V^S)+P[2]+3299628645&4294967295,R=x+(C<<23&4294967295|C>>>9),C=S+(x^(R|~V))+P[0]+4096336452&4294967295,S=R+(C<<6&4294967295|C>>>26),C=V+(R^(S|~x))+P[7]+1126891415&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~R))+P[14]+2878612391&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~S))+P[5]+4237533241&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~V))+P[12]+1700485571&4294967295,S=R+(C<<6&4294967295|C>>>26),C=V+(R^(S|~x))+P[3]+2399980690&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~R))+P[10]+4293915773&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~S))+P[1]+2240044497&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~V))+P[8]+1873313359&4294967295,S=R+(C<<6&4294967295|C>>>26),C=V+(R^(S|~x))+P[15]+4264355552&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~R))+P[6]+2734768916&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~S))+P[13]+1309151649&4294967295,R=x+(C<<21&4294967295|C>>>11),C=S+(x^(R|~V))+P[4]+4149444226&4294967295,S=R+(C<<6&4294967295|C>>>26),C=V+(R^(S|~x))+P[11]+3174756917&4294967295,V=S+(C<<10&4294967295|C>>>22),C=x+(S^(V|~R))+P[2]+718787259&4294967295,x=V+(C<<15&4294967295|C>>>17),C=R+(V^(x|~S))+P[9]+3951481745&4294967295,N.g[0]=N.g[0]+S&4294967295,N.g[1]=N.g[1]+(x+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+x&4294967295,N.g[3]=N.g[3]+V&4294967295}s.prototype.v=function(N,S){S===void 0&&(S=N.length);const R=S-this.blockSize,P=this.C;let x=this.h,V=0;for(;V<S;){if(x==0)for(;V<=R;)o(this,N,V),V+=this.blockSize;if(typeof N=="string"){for(;V<S;)if(P[x++]=N.charCodeAt(V++),x==this.blockSize){o(this,P),x=0;break}}else for(;V<S;)if(P[x++]=N[V++],x==this.blockSize){o(this,P),x=0;break}}this.h=x,this.o+=S},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var S=1;S<N.length-8;++S)N[S]=0;S=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=S&255,S/=256;for(this.v(N),N=Array(16),S=0,R=0;R<4;++R)for(let P=0;P<32;P+=8)N[S++]=this.g[R]>>>P&255;return N};function l(N,S){var R=f;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=S(N)}function c(N,S){this.h=S;const R=[];let P=!0;for(let x=N.length-1;x>=0;x--){const V=N[x]|0;P&&V==S||(R[x]=V,P=!1)}this.g=R}var f={};function p(N){return-128<=N&&N<128?l(N,function(S){return new c([S|0],S<0?-1:0)}):new c([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return E;if(N<0)return L(y(-N));const S=[];let R=1;for(let P=0;N>=R;P++)S[P]=N/R|0,R*=4294967296;return new c(S,0)}function _(N,S){if(N.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(N.charAt(0)=="-")return L(_(N.substring(1),S));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(S,8));let P=E;for(let V=0;V<N.length;V+=8){var x=Math.min(8,N.length-V);const C=parseInt(N.substring(V,V+x),S);x<8?(x=y(Math.pow(S,x)),P=P.j(x).add(y(C))):(P=P.j(R),P=P.add(y(C)))}return P}var E=p(0),T=p(1),M=p(16777216);n=c.prototype,n.m=function(){if($(this))return-L(this).m();let N=0,S=1;for(let R=0;R<this.g.length;R++){const P=this.i(R);N+=(P>=0?P:4294967296+P)*S,S*=4294967296}return N},n.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(B(this))return"0";if($(this))return"-"+L(this).toString(N);const S=y(Math.pow(N,6));var R=this;let P="";for(;;){const x=oe(R,S).g;R=te(R,x.j(S));let V=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=x,B(R))return V+P;for(;V.length<6;)V="0"+V;P=V+P}},n.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function B(N){if(N.h!=0)return!1;for(let S=0;S<N.g.length;S++)if(N.g[S]!=0)return!1;return!0}function $(N){return N.h==-1}n.l=function(N){return N=te(this,N),$(N)?-1:B(N)?0:1};function L(N){const S=N.g.length,R=[];for(let P=0;P<S;P++)R[P]=~N.g[P];return new c(R,~N.h).add(T)}n.abs=function(){return $(this)?L(this):this},n.add=function(N){const S=Math.max(this.g.length,N.g.length),R=[];let P=0;for(let x=0;x<=S;x++){let V=P+(this.i(x)&65535)+(N.i(x)&65535),C=(V>>>16)+(this.i(x)>>>16)+(N.i(x)>>>16);P=C>>>16,V&=65535,C&=65535,R[x]=C<<16|V}return new c(R,R[R.length-1]&-2147483648?-1:0)};function te(N,S){return N.add(L(S))}n.j=function(N){if(B(this)||B(N))return E;if($(this))return $(N)?L(this).j(L(N)):L(L(this).j(N));if($(N))return L(this.j(L(N)));if(this.l(M)<0&&N.l(M)<0)return y(this.m()*N.m());const S=this.g.length+N.g.length,R=[];for(var P=0;P<2*S;P++)R[P]=0;for(P=0;P<this.g.length;P++)for(let x=0;x<N.g.length;x++){const V=this.i(P)>>>16,C=this.i(P)&65535,Ne=N.i(x)>>>16,$e=N.i(x)&65535;R[2*P+2*x]+=C*$e,se(R,2*P+2*x),R[2*P+2*x+1]+=V*$e,se(R,2*P+2*x+1),R[2*P+2*x+1]+=C*Ne,se(R,2*P+2*x+1),R[2*P+2*x+2]+=V*Ne,se(R,2*P+2*x+2)}for(N=0;N<S;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=S;N<2*S;N++)R[N]=0;return new c(R,0)};function se(N,S){for(;(N[S]&65535)!=N[S];)N[S+1]+=N[S]>>>16,N[S]&=65535,S++}function ae(N,S){this.g=N,this.h=S}function oe(N,S){if(B(S))throw Error("division by zero");if(B(N))return new ae(E,E);if($(N))return S=oe(L(N),S),new ae(L(S.g),L(S.h));if($(S))return S=oe(N,L(S)),new ae(L(S.g),S.h);if(N.g.length>30){if($(N)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var R=T,P=S;P.l(N)<=0;)R=me(R),P=me(P);var x=ne(R,1),V=ne(P,1);for(P=ne(P,2),R=ne(R,2);!B(P);){var C=V.add(P);C.l(N)<=0&&(x=x.add(R),V=C),P=ne(P,1),R=ne(R,1)}return S=te(N,x.j(S)),new ae(x,S)}for(x=E;N.l(S)>=0;){for(R=Math.max(1,Math.floor(N.m()/S.m())),P=Math.ceil(Math.log(R)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),V=y(R),C=V.j(S);$(C)||C.l(N)>0;)R-=P,V=y(R),C=V.j(S);B(V)&&(V=T),x=x.add(V),N=te(N,C)}return new ae(x,N)}n.B=function(N){return oe(this,N).h},n.and=function(N){const S=Math.max(this.g.length,N.g.length),R=[];for(let P=0;P<S;P++)R[P]=this.i(P)&N.i(P);return new c(R,this.h&N.h)},n.or=function(N){const S=Math.max(this.g.length,N.g.length),R=[];for(let P=0;P<S;P++)R[P]=this.i(P)|N.i(P);return new c(R,this.h|N.h)},n.xor=function(N){const S=Math.max(this.g.length,N.g.length),R=[];for(let P=0;P<S;P++)R[P]=this.i(P)^N.i(P);return new c(R,this.h^N.h)};function me(N){const S=N.g.length+1,R=[];for(let P=0;P<S;P++)R[P]=N.i(P)<<1|N.i(P-1)>>>31;return new c(R,N.h)}function ne(N,S){const R=S>>5;S%=32;const P=N.g.length-R,x=[];for(let V=0;V<P;V++)x[V]=S>0?N.i(V+R)>>>S|N.i(V+R+1)<<32-S:N.i(V+R);return new c(x,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Sv=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=_,Bs=c}).apply(typeof my<"u"?my:typeof self<"u"?self:typeof window<"u"?window:{});var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cv,Ka,Av,Gu,Wd,kv,Rv,Pv;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lu=="object"&&Lu];for(var g=0;g<u.length;++g){var v=u[g];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(u,g){if(g)e:{var v=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var j=u[I];if(!(j in v))break e;v=v[j]}u=u[u.length-1],I=v[u],g=g(I),g!=I&&g!=null&&e(v,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var v=[],I;for(I in g)Object.prototype.hasOwnProperty.call(g,I)&&v.push([I,g[I]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function p(u,g,v){return u.call.apply(u.bind,arguments)}function y(u,g,v){return y=p,y.apply(null,arguments)}function _(u,g){var v=Array.prototype.slice.call(arguments,1);return function(){var I=v.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function E(u,g){function v(){}v.prototype=g.prototype,u.Z=g.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(I,j,q){for(var ge=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)ge[Me-2]=arguments[Me];return g.prototype[j].apply(I,ge)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function M(u){const g=u.length;if(g>0){const v=Array(g);for(let I=0;I<g;I++)v[I]=u[I];return v}return[]}function B(u,g){for(let I=1;I<arguments.length;I++){const j=arguments[I];var v=typeof j;if(v=v!="object"?v:j?Array.isArray(j)?"array":v:"null",v=="array"||v=="object"&&typeof j.length=="number"){v=u.length||0;const q=j.length||0;u.length=v+q;for(let ge=0;ge<q;ge++)u[v+ge]=j[ge]}else u.push(j)}}class ${constructor(g,v){this.i=g,this.j=v,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function L(u){c.setTimeout(()=>{throw u},0)}function te(){var u=N;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class se{constructor(){this.h=this.g=null}add(g,v){const I=ae.get();I.set(g,v),this.h?this.h.next=I:this.g=I,this.h=I}}var ae=new $(()=>new oe,u=>u.reset());class oe{constructor(){this.next=this.g=this.h=null}set(g,v){this.h=g,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let me,ne=!1,N=new se,S=()=>{const u=Promise.resolve(void 0);me=()=>{u.then(R)}};function R(){for(var u;u=te();){try{u.h.call(u.g)}catch(v){L(v)}var g=ae;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}ne=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};c.addEventListener("test",v,g),c.removeEventListener("test",v,g)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function Ne(u,g){x.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}E(Ne,x),Ne.prototype.init=function(u,g){const v=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(v=="mouseover"?g=u.fromElement:v=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),Ae=0;function G(u,g,v,I,j){this.listener=u,this.proxy=null,this.src=g,this.type=v,this.capture=!!I,this.ha=j,this.key=++Ae,this.da=this.fa=!1}function Q(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Z(u,g,v){for(const I in u)g.call(v,u[I],I,u)}function de(u,g){for(const v in u)g.call(void 0,u[v],v,u)}function F(u){const g={};for(const v in u)g[v]=u[v];return g}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function De(u,g){let v,I;for(let j=1;j<arguments.length;j++){I=arguments[j];for(v in I)u[v]=I[v];for(let q=0;q<Y.length;q++)v=Y[q],Object.prototype.hasOwnProperty.call(I,v)&&(u[v]=I[v])}}function Oe(u){this.src=u,this.g={},this.h=0}Oe.prototype.add=function(u,g,v,I,j){const q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);const ge=Ue(u,g,I,j);return ge>-1?(g=u[ge],v||(g.fa=!1)):(g=new G(g,this.src,q,!!I,j),g.fa=v,u.push(g)),g};function ze(u,g){const v=g.type;if(v in u.g){var I=u.g[v],j=Array.prototype.indexOf.call(I,g,void 0),q;(q=j>=0)&&Array.prototype.splice.call(I,j,1),q&&(Q(g),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Ue(u,g,v,I){for(let j=0;j<u.length;++j){const q=u[j];if(!q.da&&q.listener==g&&q.capture==!!v&&q.ha==I)return j}return-1}var Je="closure_lm_"+(Math.random()*1e6|0),He={};function nt(u,g,v,I,j){if(Array.isArray(g)){for(let q=0;q<g.length;q++)nt(u,g[q],v,I,j);return null}return v=qe(v),u&&u[$e]?u.J(g,v,f(I)?!!I.capture:!1,j):Lt(u,g,v,!1,I,j)}function Lt(u,g,v,I,j,q){if(!g)throw Error("Invalid event type");const ge=f(j)?!!j.capture:!!j;let Me=fe(u);if(Me||(u[Je]=Me=new Oe(u)),v=Me.add(g,v,I,ge,q),v.proxy)return v;if(I=Tn(),v.proxy=I,I.src=u,I.listener=v,u.addEventListener)V||(j=ge),j===void 0&&(j=!1),u.addEventListener(g.toString(),I,j);else if(u.attachEvent)u.attachEvent(ce(g.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Tn(){function u(v){return g.call(u.src,u.listener,v)}const g=we;return u}function ue(u,g,v,I,j){if(Array.isArray(g))for(var q=0;q<g.length;q++)ue(u,g[q],v,I,j);else I=f(I)?!!I.capture:!!I,v=qe(v),u&&u[$e]?(u=u.i,q=String(g).toString(),q in u.g&&(g=u.g[q],v=Ue(g,v,I,j),v>-1&&(Q(g[v]),Array.prototype.splice.call(g,v,1),g.length==0&&(delete u.g[q],u.h--)))):u&&(u=fe(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ue(g,v,I,j)),(v=u>-1?g[u]:null)&&H(v))}function H(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[$e])ze(g.i,u);else{var v=u.type,I=u.proxy;g.removeEventListener?g.removeEventListener(v,I,u.capture):g.detachEvent?g.detachEvent(ce(v),I):g.addListener&&g.removeListener&&g.removeListener(I),(v=fe(g))?(ze(v,u),v.h==0&&(v.src=null,g[Je]=null)):Q(u)}}}function ce(u){return u in He?He[u]:He[u]="on"+u}function we(u,g){if(u.da)u=!0;else{g=new Ne(g,this);const v=u.listener,I=u.ha||u.src;u.fa&&H(u),u=v.call(I,g)}return u}function fe(u){return u=u[Je],u instanceof Oe?u:null}var Ie="__closure_events_fn_"+(Math.random()*1e9>>>0);function qe(u){return typeof u=="function"?u:(u[Ie]||(u[Ie]=function(g){return u.handleEvent(g)}),u[Ie])}function Ze(){P.call(this),this.i=new Oe(this),this.M=this,this.G=null}E(Ze,P),Ze.prototype[$e]=!0,Ze.prototype.removeEventListener=function(u,g,v,I){ue(this,u,g,v,I)};function ct(u,g){var v,I=u.G;if(I)for(v=[];I;I=I.G)v.push(I);if(u=u.M,I=g.type||g,typeof g=="string")g=new x(g,u);else if(g instanceof x)g.target=g.target||u;else{var j=g;g=new x(I,u),De(g,j)}j=!0;let q,ge;if(v)for(ge=v.length-1;ge>=0;ge--)q=g.g=v[ge],j=Zt(q,I,!0,g)&&j;if(q=g.g=u,j=Zt(q,I,!0,g)&&j,j=Zt(q,I,!1,g)&&j,v)for(ge=0;ge<v.length;ge++)q=g.g=v[ge],j=Zt(q,I,!1,g)&&j}Ze.prototype.N=function(){if(Ze.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const v=u.g[g];for(let I=0;I<v.length;I++)Q(v[I]);delete u.g[g],u.h--}}this.G=null},Ze.prototype.J=function(u,g,v,I){return this.i.add(String(u),g,!1,v,I)},Ze.prototype.K=function(u,g,v,I){return this.i.add(String(u),g,!0,v,I)};function Zt(u,g,v,I){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let j=!0;for(let q=0;q<g.length;++q){const ge=g[q];if(ge&&!ge.da&&ge.capture==v){const Me=ge.listener,At=ge.ha||ge.src;ge.fa&&ze(u.i,ge),j=Me.call(At,I)!==!1&&j}}return j&&!I.defaultPrevented}function On(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:c.setTimeout(u,g||0)}function ti(u){u.g=On(()=>{u.g=null,u.i&&(u.i=!1,ti(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class ni extends P{constructor(g,v){super(),this.m=g,this.l=v,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:ti(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hr(u){P.call(this),this.h=u,this.g={}}E(hr,P);var ri=[];function cs(u){Z(u.g,function(g,v){this.g.hasOwnProperty(v)&&H(g)},u),u.g={}}hr.prototype.N=function(){hr.Z.N.call(this),cs(this)},hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dr=c.JSON.stringify,jt=c.JSON.parse,Ln=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function In(){}function qn(){}var dn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gn(){x.call(this,"d")}E(Gn,x);function hs(){x.call(this,"c")}E(hs,x);var fn={},Ur=null;function Kn(){return Ur=Ur||new Ze}fn.Ia="serverreachability";function Qn(u){x.call(this,fn.Ia,u)}E(Qn,x);function Jn(u){const g=Kn();ct(g,new Qn(g))}fn.STAT_EVENT="statevent";function Yn(u,g){x.call(this,fn.STAT_EVENT,u),this.stat=g}E(Yn,x);function gt(u){const g=Kn();ct(g,new Yn(g,u))}fn.Ja="timingevent";function K(u,g){x.call(this,fn.Ja,u),this.size=g}E(K,x);function le(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},g)}function pe(){this.g=!0}pe.prototype.ua=function(){this.g=!1};function je(u,g,v,I,j,q){u.info(function(){if(u.g)if(q){var ge="",Me=q.split("&");for(let it=0;it<Me.length;it++){var At=Me[it].split("=");if(At.length>1){const Pt=At[0];At=At[1];const xn=Pt.split("_");ge=xn.length>=2&&xn[1]=="type"?ge+(Pt+"="+At+"&"):ge+(Pt+"=redacted&")}}}else ge=null;else ge=q;return"XMLHTTP REQ ("+I+") [attempt "+j+"]: "+g+`
`+v+`
`+ge})}function Tt(u,g,v,I,j,q,ge){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+j+"]: "+g+`
`+v+`
`+q+" "+ge})}function Be(u,g,v,I){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+ht(u,v)+(I?" "+I:"")})}function yt(u,g){u.info(function(){return"TIMEOUT: "+g})}pe.prototype.info=function(){};function ht(u,g){if(!u.g)return g;if(!g)return null;try{const q=JSON.parse(g);if(q){for(u=0;u<q.length;u++)if(Array.isArray(q[u])){var v=q[u];if(!(v.length<2)){var I=v[1];if(Array.isArray(I)&&!(I.length<1)){var j=I[0];if(j!="noop"&&j!="stop"&&j!="close")for(let ge=1;ge<I.length;ge++)I[ge]=""}}}}return dr(q)}catch{return g}}var at={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ct={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},si;function Sn(){}E(Sn,In),Sn.prototype.g=function(){return new XMLHttpRequest},si=new Sn;function fr(u){return encodeURIComponent(String(u))}function qi(u){var g=1;u=u.split(":");const v=[];for(;g>0&&u.length;)v.push(u.shift()),g--;return u.length&&v.push(u.join(":")),v}function Mn(u,g,v,I){this.j=u,this.i=g,this.l=v,this.S=I||1,this.V=new hr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kl}function kl(){this.i=null,this.g="",this.h=!1}var Rl={},sa={};function Xn(u,g,v){u.M=1,u.A=zr(Fn(g)),u.u=v,u.R=!0,ia(u,null)}function ia(u,g){u.F=Date.now(),ii(u),u.B=Fn(u.A);var v=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),ma(v.i,"t",I),u.C=0,v=u.j.L,u.h=new kl,u.g=Fl(u.j,v?g:null,!u.u),u.P>0&&(u.O=new ni(y(u.Y,u,u.g),u.P)),g=u.V,v=u.g,I=u.ba;var j="readystatechange";Array.isArray(j)||(j&&(ri[0]=j.toString()),j=ri);for(let q=0;q<j.length;q++){const ge=nt(v,j[q],I||g.handleEvent,!1,g.h||g);if(!ge)break;g.g[ge.key]=ge}g=u.J?F(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Jn(),je(u.i,u.v,u.B,u.l,u.S,u.u)}Mn.prototype.ba=function(u){u=u.target;const g=this.O;g&&wr(u)==3?g.j():this.Y(u)},Mn.prototype.Y=function(u){try{if(u==this.g)e:{const Me=wr(this.g),At=this.g.ya(),it=this.g.ca();if(!(Me<3)&&(Me!=3||this.g&&(this.h.h||this.g.la()||Ll(this.g)))){this.K||Me!=4||At==7||(At==8||it<=0?Jn(3):Jn(2)),Gi(this);var g=this.g.ca();this.X=g;var v=Pl(this);if(this.o=g==200,Tt(this.i,this.v,this.B,this.l,this.S,Me,g),this.o){if(this.U&&!this.L){t:{if(this.g){var I,j=this.g;if((I=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(I)){var q=I;break t}}q=null}if(u=q)Be(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,dt(this,u);else{this.o=!1,this.m=3,gt(12),jr(this),oi(this);break e}}if(this.R){u=!0;let Pt;for(;!this.K&&this.C<v.length;)if(Pt=Nl(this,v),Pt==sa){Me==4&&(this.m=4,gt(14),u=!1),Be(this.i,this.l,null,"[Incomplete Response]");break}else if(Pt==Rl){this.m=4,gt(15),Be(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Be(this.i,this.l,Pt,null),dt(this,Pt);if(xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Me!=4||v.length!=0||this.h.h||(this.m=1,gt(16),u=!1),this.o=this.o&&u,!u)Be(this.i,this.l,v,"[Invalid Chunked Response]"),jr(this),oi(this);else if(v.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),mi(ge),ge.P=!0,gt(11))}}else Be(this.i,this.l,v,null),dt(this,v);Me==4&&jr(this),this.o&&!this.K&&(Me==4?ro(this.j,this):(this.o=!1,ii(this)))}else ya(this.g),g==400&&v.indexOf("Unknown SID")>0?(this.m=3,gt(12)):(this.m=0,gt(13)),jr(this),oi(this)}}}catch{}finally{}};function Pl(u){if(!xl(u))return u.g.la();const g=Ll(u.g);if(g==="")return"";let v="";const I=g.length,j=wr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return jr(u),oi(u),"";u.h.i=new c.TextDecoder}for(let q=0;q<I;q++)u.h.h=!0,v+=u.h.i.decode(g[q],{stream:!(j&&q==I-1)});return g.length=0,u.h.g+=v,u.C=0,u.h.g}function xl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Nl(u,g){var v=u.C,I=g.indexOf(`
`,v);return I==-1?sa:(v=Number(g.substring(v,I)),isNaN(v)?Rl:(I+=1,I+v>g.length?sa:(g=g.slice(I,I+v),u.C=I+v,g)))}Mn.prototype.cancel=function(){this.K=!0,jr(this)};function ii(u){u.T=Date.now()+u.H,oa(u,u.H)}function oa(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=le(y(u.aa,u),g)}function Gi(u){u.D&&(c.clearTimeout(u.D),u.D=null)}Mn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(yt(this.i,this.B),this.M!=2&&(Jn(),gt(17)),jr(this),this.m=2,oi(this)):oa(this,this.T-u)};function oi(u){u.j.I==0||u.K||ro(u.j,u)}function jr(u){Gi(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,cs(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function dt(u,g){try{var v=u.j;if(v.I!=0&&(v.g==u||la(v.h,u))){if(!u.L&&la(v.h,u)&&v.I==3){try{var I=v.Ba.g.parse(g)}catch{I=null}if(Array.isArray(I)&&I.length==3){var j=I;if(j[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)no(v),Rn(v);else break e;Ir(v),gt(18)}}else v.xa=j[1],0<v.xa-v.K&&j[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=le(y(v.Va,v),6e3));ai(v.h)<=1&&v.ta&&(v.ta=void 0)}else Pn(v,11)}else if((u.L||v.g==u)&&no(v),!C(g))for(j=v.Ba.g.parse(g),g=0;g<j.length;g++){let it=j[g];const Pt=it[0];if(!(Pt<=v.K))if(v.K=Pt,it=it[1],v.I==2)if(it[0]=="c"){v.M=it[1],v.ba=it[2];const xn=it[3];xn!=null&&(v.ka=xn,v.j.info("VER="+v.ka));const qr=it[4];qr!=null&&(v.za=qr,v.j.info("SVER="+v.za));const Sr=it[5];Sr!=null&&typeof Sr=="number"&&Sr>0&&(I=1.5*Sr,v.O=I,v.j.info("backChannelRequestTimeoutMs_="+I)),I=v;const Cr=u.g;if(Cr){const oo=Cr.g?Cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var q=I.h;q.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Qi(q,q.h),q.h=null))}if(I.G){const wa=Cr.g?Cr.g.getResponseHeader("X-HTTP-Session-Id"):null;wa&&(I.wa=wa,rt(I.J,I.G,wa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),I=v;var ge=u;if(I.na=va(I,I.L?I.ba:null,I.W),ge.L){li(I.h,ge);var Me=ge,At=I.O;At&&(Me.H=At),Me.D&&(Gi(Me),ii(Me)),I.g=ge}else en(I);v.i.length>0&&Hr(v)}else it[0]!="stop"&&it[0]!="close"||Pn(v,7);else v.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?Pn(v,7):eo(v):it[0]!="noop"&&v.l&&v.l.qa(it),v.A=0)}}Jn(4)}catch{}}var $c=class{constructor(u,g){this.g=u,this.map=g}};function Ki(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function aa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ai(u){return u.h?1:u.g?u.g.size:0}function la(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Qi(u,g){u.g?u.g.add(g):u.h=g}function li(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ki.prototype.cancel=function(){if(this.i=Cn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Cn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const v of u.g.values())g=g.concat(v.G);return g}return M(u.i)}var Dl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function An(u,g){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const I=u[v].indexOf("=");let j,q=null;I>=0?(j=u[v].substring(0,I),q=u[v].substring(I+1)):j=u[v],g(j,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function pr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof pr?(this.l=u.l,ui(this,u.j),this.o=u.o,this.g=u.g,mr(this,u.u),this.h=u.h,ds(this,ga(u.i)),this.m=u.m):u&&(g=String(u).match(Dl))?(this.l=!1,ui(this,g[1]||"",!0),this.o=ci(g[2]||""),this.g=ci(g[3]||"",!0),mr(this,g[4]),this.h=ci(g[5]||"",!0),ds(this,g[6]||"",!0),this.m=ci(g[7]||"")):(this.l=!1,this.i=new Ye(null,this.l))}pr.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(hi(g,ca,!0),":");var v=this.g;return(v||g=="file")&&(u.push("//"),(g=this.o)&&u.push(hi(g,ca,!0),"@"),u.push(fr(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(hi(v,v.charAt(0)=="/"?di:ha,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",hi(v,da)),u.join("")},pr.prototype.resolve=function(u){const g=Fn(this);let v=!!u.j;v?ui(g,u.j):v=!!u.o,v?g.o=u.o:v=!!u.g,v?g.g=u.g:v=u.u!=null;var I=u.h;if(v)mr(g,u.u);else if(v=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var j=g.h.lastIndexOf("/");j!=-1&&(I=g.h.slice(0,j+1)+I)}if(j=I,j==".."||j==".")I="";else if(j.indexOf("./")!=-1||j.indexOf("/.")!=-1){I=j.lastIndexOf("/",0)==0,j=j.split("/");const q=[];for(let ge=0;ge<j.length;){const Me=j[ge++];Me=="."?I&&ge==j.length&&q.push(""):Me==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),I&&ge==j.length&&q.push("")):(q.push(Me),I=!0)}I=q.join("/")}else I=j}return v?g.h=I:v=u.i.toString()!=="",v?ds(g,ga(u.i)):v=!!u.m,v&&(g.m=u.m),g};function Fn(u){return new pr(u)}function ui(u,g,v){u.j=v?ci(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function mr(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function ds(u,g,v){g instanceof Ye?(u.i=g,Yi(u.i,u.l)):(v||(g=hi(g,Wc)),u.i=new Ye(g,u.l))}function rt(u,g,v){u.i.set(g,v)}function zr(u){return rt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ci(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function hi(u,g,v){return typeof u=="string"?(u=encodeURI(u).replace(g,ua),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ua(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ca=/[#\/\?@]/g,ha=/[#\?:]/g,di=/[#\?]/g,Wc=/[#\?@]/g,da=/#/g;function Ye(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function gr(u){u.g||(u.g=new Map,u.h=0,u.i&&An(u.i,function(g,v){u.add(decodeURIComponent(g.replace(/\+/g," ")),v)}))}n=Ye.prototype,n.add=function(u,g){gr(this),this.i=null,u=yr(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(g),this.h+=1,this};function fa(u,g){gr(u),g=yr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ji(u,g){return gr(u),g=yr(u,g),u.g.has(g)}n.forEach=function(u,g){gr(this),this.g.forEach(function(v,I){v.forEach(function(j){u.call(g,j,I,this)},this)},this)};function pa(u,g){gr(u);let v=[];if(typeof g=="string")Ji(u,g)&&(v=v.concat(u.g.get(yr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)v=v.concat(u[g]);return v}n.set=function(u,g){return gr(this),this.i=null,u=yr(this,u),Ji(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=pa(this,u),u.length>0?String(u[0]):g):g};function ma(u,g,v){fa(u,g),v.length>0&&(u.i=null,u.g.set(yr(u,g),M(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let I=0;I<g.length;I++){var v=g[I];const j=fr(v);v=pa(this,v);for(let q=0;q<v.length;q++){let ge=j;v[q]!==""&&(ge+="="+fr(v[q])),u.push(ge)}}return this.i=u.join("&")};function ga(u){const g=new Ye;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function yr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Yi(u,g){g&&!u.j&&(gr(u),u.i=null,u.g.forEach(function(v,I){const j=I.toLowerCase();I!=j&&(fa(this,I),ma(this,j,v))},u)),u.j=g}function _r(u,g){const v=new pe;if(c.Image){const I=new Image;I.onload=_(qt,v,"TestLoadImage: loaded",!0,g,I),I.onerror=_(qt,v,"TestLoadImage: error",!1,g,I),I.onabort=_(qt,v,"TestLoadImage: abort",!1,g,I),I.ontimeout=_(qt,v,"TestLoadImage: timeout",!1,g,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else g(!1)}function vr(u,g){const v=new pe,I=new AbortController,j=setTimeout(()=>{I.abort(),qt(v,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:I.signal}).then(q=>{clearTimeout(j),q.ok?qt(v,"TestPingServer: ok",!0,g):qt(v,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(j),qt(v,"TestPingServer: error",!1,g)})}function qt(u,g,v,I,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),I(v)}catch{}}function fi(){this.g=new Ln}function Br(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Br,In),Br.prototype.g=function(){return new kn(this.i,this.h)};function kn(u,g){Ze.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(kn,Ze),n=kn.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Zn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||c).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Zn(this)),this.g&&(this.readyState=3,Zn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;bl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function bl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?fs(this):Zn(this),this.readyState==3&&bl(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,fs(this))},n.Na=function(u){this.g&&(this.response=u,fs(this))},n.ga=function(){this.g&&fs(this)};function fs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Zn(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var v=g.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=g.next();return u.join(`\r
`)};function Zn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vl(u){let g="";return Z(u,function(v,I){g+=I,g+=":",g+=v,g+=`\r
`}),g}function Xi(u,g,v){e:{for(I in v){var I=!1;break e}I=!0}I||(v=Vl(v),typeof u=="string"?v!=null&&fr(v):rt(u,g,v))}function ot(u){Ze.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(ot,Ze);var Ol=/^https?$/i,Hc=["POST","PUT"];n=ot.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,v,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():si.g(),this.g.onreadystatechange=T(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(q){ps(this,q);return}if(u=v||"",v=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var j in I)v.set(j,I[j]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const q of I.keys())v.set(q,I.get(q));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(v.keys()).find(q=>q.toLowerCase()=="content-type"),j=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(Hc,g,void 0)>=0)||I||j||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,ge]of v)this.g.setRequestHeader(q,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(q){ps(this,q)}};function ps(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,ms(u),Wr(u)}function ms(u){u.A||(u.A=!0,ct(u,"complete"),ct(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ct(this,"complete"),ct(this,"abort"),Wr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wr(this,!0)),ot.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?$r(this):this.Xa())},n.Xa=function(){$r(this)};function $r(u){if(u.h&&typeof l<"u"){if(u.v&&wr(u)==4)setTimeout(u.Ca.bind(u),0);else if(ct(u,"readystatechange"),wr(u)==4){u.h=!1;try{const q=u.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var v;if(!(v=g)){var I;if(I=q===0){let ge=String(u.D).match(Dl)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),I=!Ol.test(ge?ge.toLowerCase():"")}v=I}if(v)ct(u,"complete"),ct(u,"success");else{u.o=6;try{var j=wr(u)>2?u.g.statusText:""}catch{j=""}u.l=j+" ["+u.ca()+"]",ms(u)}}finally{Wr(u)}}}}function Wr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,g||ct(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function wr(u){return u.g?u.g.readyState:0}n.ca=function(){try{return wr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),jt(g)}};function Ll(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(u){const g={};u=(u.g&&wr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(C(u[I]))continue;var v=qi(u[I]);const j=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const q=g[j]||[];g[j]=q,q.push(v)}de(g,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Er(u,g,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||g}function Zi(u){this.za=0,this.i=[],this.j=new pe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Er("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Er("baseRetryDelayMs",5e3,u),this.Za=Er("retryDelaySeedMs",1e4,u),this.Ta=Er("forwardChannelMaxRetries",2,u),this.va=Er("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ki(u&&u.concurrentRequestLimit),this.Ba=new fi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Zi.prototype,n.ka=8,n.I=1,n.connect=function(u,g,v,I){gt(0),this.W=u,this.H=g||{},v&&I!==void 0&&(this.H.OSID=v,this.H.OAID=I),this.F=this.X,this.J=va(this,null,this.W),Hr(this)};function eo(u){if(to(u),u.I==3){var g=u.V++,v=Fn(u.J);if(rt(v,"SID",u.M),rt(v,"RID",g),rt(v,"TYPE","terminate"),Tr(u,v),g=new Mn(u,u.j,g),g.M=2,g.A=zr(Fn(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(g.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=g.A,v=!0),v||(g.g=Fl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),ii(g)}gi(u)}function Rn(u){u.g&&(mi(u),u.g.cancel(),u.g=null)}function to(u){Rn(u),u.v&&(c.clearTimeout(u.v),u.v=null),no(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Hr(u){if(!aa(u.h)&&!u.m){u.m=!0;var g=u.Ea;me||S(),ne||(me(),ne=!0),N.add(g,u),u.D=0}}function Ml(u,g){return ai(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=le(y(u.Ea,u,g),so(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const j=new Mn(this,this.j,u);let q=this.o;if(this.U&&(q?(q=F(q),De(q,this.U)):q=this.U),this.u!==null||this.R||(j.J=q,q=null),this.S)e:{for(var g=0,v=0;v<this.i.length;v++){t:{var I=this.i[v];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(g+=I,g>4096){g=v;break e}if(g===4096||v===this.i.length-1){g=v+1;break e}}g=1e3}else g=1e3;g=_a(this,j,g),v=Fn(this.J),rt(v,"RID",u),rt(v,"CVER",22),this.G&&rt(v,"X-HTTP-Session-Id",this.G),Tr(this,v),q&&(this.R?g="headers="+fr(Vl(q))+"&"+g:this.u&&Xi(v,this.u,q)),Qi(this.h,j),this.Ra&&rt(v,"TYPE","init"),this.S?(rt(v,"$req",g),rt(v,"SID","null"),j.U=!0,Xn(j,v,null)):Xn(j,v,g),this.I=2}}else this.I==3&&(u?pi(this,u):this.i.length==0||aa(this.h)||pi(this))};function pi(u,g){var v;g?v=g.l:v=u.V++;const I=Fn(u.J);rt(I,"SID",u.M),rt(I,"RID",v),rt(I,"AID",u.K),Tr(u,I),u.u&&u.o&&Xi(I,u.u,u.o),v=new Mn(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),g&&(u.i=g.G.concat(u.i)),g=_a(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Qi(u.h,v),Xn(v,I,g)}function Tr(u,g){u.H&&Z(u.H,function(v,I){rt(g,I,v)}),u.l&&Z({},function(v,I){rt(g,I,v)})}function _a(u,g,v){v=Math.min(u.i.length,v);const I=u.l?y(u.l.Ka,u.l,u):null;e:{var j=u.i;let Me=-1;for(;;){const At=["count="+v];Me==-1?v>0?(Me=j[0].g,At.push("ofs="+Me)):Me=0:At.push("ofs="+Me);let it=!0;for(let Pt=0;Pt<v;Pt++){var q=j[Pt].g;const xn=j[Pt].map;if(q-=Me,q<0)Me=Math.max(0,j[Pt].g-100),it=!1;else try{q="req"+q+"_"||"";try{var ge=xn instanceof Map?xn:Object.entries(xn);for(const[qr,Sr]of ge){let Cr=Sr;f(Sr)&&(Cr=dr(Sr)),At.push(q+qr+"="+encodeURIComponent(Cr))}}catch(qr){throw At.push(q+"type="+encodeURIComponent("_badmap")),qr}}catch{I&&I(xn)}}if(it){ge=At.join("&");break e}}ge=void 0}return u=u.i.splice(0,v),g.G=u,ge}function en(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;me||S(),ne||(me(),ne=!0),N.add(g,u),u.A=0}}function Ir(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=le(y(u.Da,u),so(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,gs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=le(y(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,gt(10),Rn(this),gs(this))};function mi(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function gs(u){u.g=new Mn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Fn(u.na);rt(g,"RID","rpc"),rt(g,"SID",u.M),rt(g,"AID",u.K),rt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&rt(g,"TO",u.ia),rt(g,"TYPE","xmlhttp"),Tr(u,g),u.u&&u.o&&Xi(g,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=zr(Fn(g)),v.u=null,v.R=!0,ia(v,u)}n.Va=function(){this.C!=null&&(this.C=null,Rn(this),Ir(this),gt(19))};function no(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function ro(u,g){var v=null;if(u.g==g){no(u),mi(u),u.g=null;var I=2}else if(la(u.h,g))v=g.G,li(u.h,g),I=1;else return;if(u.I!=0){if(g.o)if(I==1){v=g.u?g.u.length:0,g=Date.now()-g.F;var j=u.D;I=Kn(),ct(I,new K(I,v)),Hr(u)}else en(u);else if(j=g.m,j==3||j==0&&g.X>0||!(I==1&&Ml(u,g)||I==2&&Ir(u)))switch(v&&v.length>0&&(g=u.h,g.i=g.i.concat(v)),j){case 1:Pn(u,5);break;case 4:Pn(u,10);break;case 3:Pn(u,6);break;default:Pn(u,2)}}}function so(u,g){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*g}function Pn(u,g){if(u.j.info("Error code "+g),g==2){var v=y(u.bb,u),I=u.Ua;const j=!I;I=new pr(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ui(I,"https"),zr(I),j?_r(I.toString(),v):vr(I.toString(),v)}else gt(2);u.I=0,u.l&&u.l.pa(g),gi(u),to(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function gi(u){if(u.I=0,u.ja=[],u.l){const g=Cn(u.h);(g.length!=0||u.i.length!=0)&&(B(u.ja,g),B(u.ja,u.i),u.h.i.length=0,M(u.i),u.i.length=0),u.l.oa()}}function va(u,g,v){var I=v instanceof pr?Fn(v):new pr(v);if(I.g!="")g&&(I.g=g+"."+I.g),mr(I,I.u);else{var j=c.location;I=j.protocol,g=g?g+"."+j.hostname:j.hostname,j=+j.port;const q=new pr(null);I&&ui(q,I),g&&(q.g=g),j&&mr(q,j),v&&(q.h=v),I=q}return v=u.G,g=u.wa,v&&g&&rt(I,v,g),rt(I,"VER",u.ka),Tr(u,I),I}function Fl(u,g,v){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new ot(new Br({ab:v})):new ot(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ul(){}n=Ul.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function io(){}io.prototype.g=function(u,g){return new Gt(u,g)};function Gt(u,g){Ze.call(this),this.g=new Zi(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!C(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!C(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ys(this)}E(Gt,Ze),Gt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Gt.prototype.close=function(){eo(this.g)},Gt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=dr(u),u=v);g.i.push(new $c(g.Ya++,u)),g.I==3&&Hr(g)},Gt.prototype.N=function(){this.g.l=null,delete this.j,eo(this.g),delete this.g,Gt.Z.N.call(this)};function jl(u){Gn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const v in g){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}E(jl,Gn);function zl(){hs.call(this),this.status=1}E(zl,hs);function ys(u){this.g=u}E(ys,Ul),ys.prototype.ra=function(){ct(this.g,"a")},ys.prototype.qa=function(u){ct(this.g,new jl(u))},ys.prototype.pa=function(u){ct(this.g,new zl)},ys.prototype.oa=function(){ct(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,Gt.prototype.send=Gt.prototype.o,Gt.prototype.open=Gt.prototype.m,Gt.prototype.close=Gt.prototype.close,Pv=function(){return new io},Rv=function(){return Kn()},kv=fn,Wd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},at.NO_ERROR=0,at.TIMEOUT=8,at.HTTP_ERROR=6,Gu=at,Ct.COMPLETE="complete",Av=Ct,qn.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",Ze.prototype.listen=Ze.prototype.J,Ka=qn,ot.prototype.listenOnce=ot.prototype.K,ot.prototype.getLastError=ot.prototype.Ha,ot.prototype.getLastErrorCode=ot.prototype.ya,ot.prototype.getStatus=ot.prototype.ca,ot.prototype.getResponseJson=ot.prototype.La,ot.prototype.getResponseText=ot.prototype.la,ot.prototype.send=ot.prototype.ea,ot.prototype.setWithCredentials=ot.prototype.Fa,Cv=ot}).apply(typeof Lu<"u"?Lu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}an.UNAUTHENTICATED=new an(null),an.GOOGLE_CREDENTIALS=new an("google-credentials-uid"),an.FIRST_PARTY=new an("first-party-uid"),an.MOCK_USER=new an("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="12.9.0";function A1(n){Zo=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new pf("@firebase/firestore");function Ro(){return Fi.logLevel}function ve(n,...e){if(Fi.logLevel<=Ge.DEBUG){const t=e.map(kf);Fi.debug(`Firestore (${Zo}): ${n}`,...t)}}function as(n,...e){if(Fi.logLevel<=Ge.ERROR){const t=e.map(kf);Fi.error(`Firestore (${Zo}): ${n}`,...t)}}function Ui(n,...e){if(Fi.logLevel<=Ge.WARN){const t=e.map(kf);Fi.warn(`Firestore (${Zo}): ${n}`,...t)}}function kf(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,xv(n,s,t)}function xv(n,e,t){let s=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw as(s),new Error(s)}function st(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||xv(e,o,s)}function Fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends us{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class k1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(an.UNAUTHENTICATED)))}shutdown(){}}class R1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class P1{constructor(e){this.t=e,this.currentUser=an.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new $s;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new $s,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new $s)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st(typeof s.accessToken=="string",31837,{l:s}),new Nv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new an(e)}}class x1{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=an.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class N1{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new x1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(an.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class D1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,or(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);const s=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new gy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new gy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=b1(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ke(n,e){return n<e?-1:n>e?1:0}function Hd(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Cd(o)===Cd(l)?Ke(o,l):Cd(o)?1:-1}return Ke(n.length,e.length)}const V1=55296,O1=57343;function Cd(n){const e=n.charCodeAt(0);return e>=V1&&e<=O1}function zo(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy="__name__";class xr{constructor(e,t,s){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&xe(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=xr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ke(e.length,t.length)}static compareSegments(e,t){const s=xr.isNumericId(e),o=xr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?xr.extractNumericId(e).compare(xr.extractNumericId(t)):Hd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Bs.fromString(e.substring(4,e.length-2))}}class ut extends xr{construct(e,t,s){return new ut(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new ut(t)}static emptyPath(){return new ut([])}}const L1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends xr{construct(e,t,s){return new Yt(e,t,s)}static isValidIdentifier(e){return L1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===yy}static keyField(){return new Yt([yy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ye(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ye(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ye(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(s+=f,o++):(l(),o++)}if(l(),c)throw new ye(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(t)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e){this.path=e}static fromPath(e){return new ke(ut.fromString(e))}static fromName(e){return new ke(ut.fromString(e).popFirst(5))}static empty(){return new ke(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ke(new ut(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(n,e,t){if(!t)throw new ye(J.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function M1(n,e,t,s){if(e===!0&&s===!0)throw new ye(J.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function _y(n){if(!ke.isDocumentKey(n))throw new ye(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vy(n){if(ke.isDocumentKey(n))throw new ye(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function bv(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function kc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function Dr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=kc(n);throw new ye(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function F1(n,e){if(e<=0)throw new ye(J.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(n,e){const t={typeString:n};return e&&(t.value=e),t}function El(n,e){if(!bv(n))throw new ye(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ye(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy=-62135596800,Ey=1e6;class mt{static now(){return mt.fromMillis(Date.now())}static fromDate(e){return mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Ey);return new mt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<wy)throw new ye(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ey}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(El(e,mt._jsonSchema))return new mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}mt._jsonSchemaVersion="firestore/timestamp/1.0",mt._jsonSchema={type:Vt("string",mt._jsonSchemaVersion),seconds:Vt("number"),nanoseconds:Vt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new mt(0,0))}static max(){return new Le(new mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=-1;function U1(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Le.fromTimestamp(s===1e9?new mt(t+1,0):new mt(t,s));return new Hs(o,ke.empty(),e)}function j1(n){return new Hs(n.readTime,n.key,ul)}class Hs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Hs(Le.min(),ke.empty(),ul)}static max(){return new Hs(Le.max(),ke.empty(),ul)}}function z1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ke.comparator(n.documentKey,e.documentKey),t!==0?t:Ke(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class $1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(n){if(n.code!==J.FAILED_PRECONDITION||n.message!==B1)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new X(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof X?t:X.resolve(t)}catch(t){return X.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):X.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):X.reject(t)}static resolve(e){return new X(((t,s)=>{t(e)}))}static reject(e){return new X(((t,s)=>{s(e)}))}static waitFor(e){return new X(((t,s)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=X.resolve(!1);for(const s of e)t=t.next((o=>o?X.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new X(((s,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((_=>{c[y]=_,++f,f===l&&s(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new X(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function W1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ta(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=-1;function Pc(n){return n==null}function lc(n){return n===0&&1/n==-1/0}function H1(n){return typeof n=="number"&&Number.isInteger(n)&&!lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vv="";function q1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ty(e)),e=G1(n.get(t),e);return Ty(e)}function G1(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case Vv:t+="";break;default:t+=l}}return t}function Ty(n){return n+Vv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Xs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ov(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,t){this.comparator=e,this.root=t||Jt.EMPTY}insert(e,t){return new Et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jt.BLACK,null,null))}remove(e){return new Et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}class Mu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Jt.RED,this.left=o??Jt.EMPTY,this.right=l??Jt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Jt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Jt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Jt.EMPTY=null,Jt.RED=!0,Jt.BLACK=!1;Jt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Jt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new Et(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Sy(this.data.getIterator())}getIteratorFrom(e){return new Sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class Sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new Ut(Yt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new Lv("Invalid base64 string: "+l):l}})(e);return new Xt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Xt.EMPTY_BYTE_STRING=new Xt("");const K1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function qs(n){if(st(!!n,39018),typeof n=="string"){let e=0;const t=K1.exec(n);if(st(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Rt(n.seconds),nanos:Rt(n.nanos)}}function Rt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Gs(n){return typeof n=="string"?Xt.fromBase64String(n):Xt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mv="server_timestamp",Fv="__type__",Uv="__previous_value__",jv="__local_write_time__";function xf(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Fv])==null?void 0:s.stringValue)===Mv}function xc(n){const e=n.mapValue.fields[Uv];return xf(e)?xc(e):e}function cl(n){const e=qs(n.mapValue.fields[jv].timestampValue);return new mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t,s,o,l,c,f,p,y,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=_,this.apiKey=E}}const uc="(default)";class hl{constructor(e,t){this.projectId=e,this.database=t||uc}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database===uc}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}function J1(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ye(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zv="__type__",Y1="__max__",Fu={mapValue:{}},Bv="__vector__",cc="value";function Ks(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xf(n)?4:Z1(n)?9007199254740991:X1(n)?10:11:xe(28295,{value:n})}function Fr(n,e){if(n===e)return!0;const t=Ks(n);if(t!==Ks(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cl(n).isEqual(cl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=qs(o.timestampValue),f=qs(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Gs(o.bytesValue).isEqual(Gs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Rt(o.geoPointValue.latitude)===Rt(l.geoPointValue.latitude)&&Rt(o.geoPointValue.longitude)===Rt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Rt(o.integerValue)===Rt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Rt(o.doubleValue),f=Rt(l.doubleValue);return c===f?lc(c)===lc(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return zo(n.arrayValue.values||[],e.arrayValue.values||[],Fr);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Iy(c)!==Iy(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!Fr(c[p],f[p])))return!1;return!0})(n,e);default:return xe(52216,{left:n})}}function dl(n,e){return(n.values||[]).find((t=>Fr(t,e)))!==void 0}function Bo(n,e){if(n===e)return 0;const t=Ks(n),s=Ks(e);if(t!==s)return Ke(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ke(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Rt(l.integerValue||l.doubleValue),p=Rt(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return Cy(n.timestampValue,e.timestampValue);case 4:return Cy(cl(n),cl(e));case 5:return Hd(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Gs(l),p=Gs(c);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),p=c.split("/");for(let y=0;y<f.length&&y<p.length;y++){const _=Ke(f[y],p[y]);if(_!==0)return _}return Ke(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Ke(Rt(l.latitude),Rt(c.latitude));return f!==0?f:Ke(Rt(l.longitude),Rt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ay(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var T,M,B,$;const f=l.fields||{},p=c.fields||{},y=(T=f[cc])==null?void 0:T.arrayValue,_=(M=p[cc])==null?void 0:M.arrayValue,E=Ke(((B=y==null?void 0:y.values)==null?void 0:B.length)||0,(($=_==null?void 0:_.values)==null?void 0:$.length)||0);return E!==0?E:Ay(y,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Fu.mapValue&&c===Fu.mapValue)return 0;if(l===Fu.mapValue)return 1;if(c===Fu.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=c.fields||{},_=Object.keys(y);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const T=Hd(p[E],_[E]);if(T!==0)return T;const M=Bo(f[p[E]],y[_[E]]);if(M!==0)return M}return Ke(p.length,_.length)})(n.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function Cy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ke(n,e);const t=qs(n),s=qs(e),o=Ke(t.seconds,s.seconds);return o!==0?o:Ke(t.nanos,s.nanos)}function Ay(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Bo(t[o],s[o]);if(l)return l}return Ke(t.length,s.length)}function $o(n){return qd(n)}function qd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=qs(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Gs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ke.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=qd(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${qd(t.fields[c])}`;return o+"}"})(n.mapValue):xe(61005,{value:n})}function Ku(n){switch(Ks(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xc(n);return e?16+Ku(e):16;case 5:return 2*n.stringValue.length;case 6:return Gs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Ku(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return Xs(s.fields,((l,c)=>{o+=l.length+Ku(c)})),o})(n.mapValue);default:throw xe(13486,{value:n})}}function ky(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gd(n){return!!n&&"integerValue"in n}function Nf(n){return!!n&&"arrayValue"in n}function Ry(n){return!!n&&"nullValue"in n}function Py(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qu(n){return!!n&&"mapValue"in n}function X1(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[zv])==null?void 0:s.stringValue)===Bv}function tl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Xs(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=tl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tl(n.arrayValue.values[t]);return e}return{...n}}function Z1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Y1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(t)}setAll(e){let t=Yt.emptyPath(),s={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}c?s[f.lastSegment()]=tl(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Qu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Xs(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new En(tl(this.value))}}function $v(n){const e=[];return Xs(n.fields,((t,s)=>{const o=new Yt([t]);if(Qu(s)){const l=$v(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t,s,o,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new ln(e,0,Le.min(),Le.min(),Le.min(),En.empty(),0)}static newFoundDocument(e,t,s,o){return new ln(e,1,t,Le.min(),s,o,0)}static newNoDocument(e,t){return new ln(e,2,t,Le.min(),Le.min(),En.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,Le.min(),Le.min(),En.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t){this.position=e,this.inclusive=t}}function xy(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=ke.comparator(ke.fromName(c.referenceValue),t.key):s=Bo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Ny(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Fr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t="asc"){this.field=e,this.dir=t}}function eA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{}class bt extends Wv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new nA(e,t,s):t==="array-contains"?new iA(e,s):t==="in"?new oA(e,s):t==="not-in"?new aA(e,s):t==="array-contains-any"?new lA(e,s):new bt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new rA(e,s):new sA(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&Ks(this.value)===Ks(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cr extends Wv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new cr(e,t)}matches(e){return Hv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hv(n){return n.op==="and"}function qv(n){return tA(n)&&Hv(n)}function tA(n){for(const e of n.filters)if(e instanceof cr)return!1;return!0}function Kd(n){if(n instanceof bt)return n.field.canonicalString()+n.op.toString()+$o(n.value);if(qv(n))return n.filters.map((e=>Kd(e))).join(",");{const e=n.filters.map((t=>Kd(t))).join(",");return`${n.op}(${e})`}}function Gv(n,e){return n instanceof bt?(function(s,o){return o instanceof bt&&s.op===o.op&&s.field.isEqual(o.field)&&Fr(s.value,o.value)})(n,e):n instanceof cr?(function(s,o){return o instanceof cr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,f)=>l&&Gv(c,o.filters[f])),!0):!1})(n,e):void xe(19439)}function Kv(n){return n instanceof bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`})(n):n instanceof cr?(function(t){return t.op.toString()+" {"+t.getFilters().map(Kv).join(" ,")+"}"})(n):"Filter"}class nA extends bt{constructor(e,t,s){super(e,t,s),this.key=ke.fromName(s.referenceValue)}matches(e){const t=ke.comparator(e.key,this.key);return this.matchesComparison(t)}}class rA extends bt{constructor(e,t){super(e,"in",t),this.keys=Qv("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class sA extends bt{constructor(e,t){super(e,"not-in",t),this.keys=Qv("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Qv(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>ke.fromName(s.referenceValue)))}class iA extends bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nf(t)&&dl(t.arrayValue,this.value)}}class oA extends bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dl(this.value.arrayValue,t)}}class aA extends bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dl(this.value.arrayValue,t)}}class lA extends bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>dl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,t=null,s=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Dy(n,e=null,t=[],s=[],o=null,l=null,c=null){return new uA(n,e,t,s,o,l,c)}function Df(n){const e=Fe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Kd(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>$o(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>$o(s))).join(",")),e.Te=t}return e.Te}function bf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!eA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Gv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Ny(n.startAt,e.startAt)&&Ny(n.endAt,e.endAt)}function Qd(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t=null,s=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function cA(n,e,t,s,o,l,c,f){return new na(n,e,t,s,o,l,c,f)}function Nc(n){return new na(n)}function by(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function hA(n){return ke.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function Jv(n){return n.collectionGroup!==null}function nl(n){const e=Fe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Ut(Yt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new fl(l,s))})),t.has(Yt.keyField().canonicalString())||e.Ie.push(new fl(Yt.keyField(),s))}return e.Ie}function br(n){const e=Fe(n);return e.Ee||(e.Ee=dA(e,nl(n))),e.Ee}function dA(n,e){if(n.limitType==="F")return Dy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new fl(o.field,l)}));const t=n.endAt?new hc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new hc(n.startAt.position,n.startAt.inclusive):null;return Dy(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Jd(n,e){const t=n.filters.concat([e]);return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function fA(n,e){const t=n.explicitOrderBy.concat([e]);return new na(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function dc(n,e,t){return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Dc(n,e){return bf(br(n),br(e))&&n.limitType===e.limitType}function Yv(n){return`${Df(br(n))}|lt:${n.limitType}`}function Po(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Kv(o))).join(", ")}]`),Pc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>$o(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>$o(o))).join(",")),`Target(${s})`})(br(n))}; limitType=${n.limitType})`}function bc(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):ke.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of nl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,f,p){const y=xy(c,f,p);return c.inclusive?y<=0:y<0})(s.startAt,nl(s),o)||s.endAt&&!(function(c,f,p){const y=xy(c,f,p);return c.inclusive?y>=0:y>0})(s.endAt,nl(s),o))})(n,e)}function pA(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Xv(n){return(e,t)=>{let s=!1;for(const o of nl(n)){const l=mA(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function mA(n,e,t){const s=n.field.isKeyField()?ke.comparator(e.key,t.key):(function(l,c,f){const p=c.data.field(l),y=f.data.field(l);return p!==null&&y!==null?Bo(p,y):xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Xs(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Ov(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gA=new Et(ke.comparator);function ls(){return gA}const Zv=new Et(ke.comparator);function Qa(...n){let e=Zv;for(const t of n)e=e.insert(t.key,t);return e}function ew(n){let e=Zv;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function bi(){return rl()}function tw(){return rl()}function rl(){return new $i((n=>n.toString()),((n,e)=>n.isEqual(e)))}const yA=new Et(ke.comparator),_A=new Ut(ke.comparator);function Qe(...n){let e=_A;for(const t of n)e=e.add(t);return e}const vA=new Ut(Ke);function wA(){return vA}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function nw(n){return{integerValue:""+n}}function EA(n,e){return H1(e)?nw(e):Vf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this._=void 0}}function TA(n,e,t){return n instanceof fc?(function(o,l){const c={fields:{[Fv]:{stringValue:Mv},[jv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&xf(l)&&(l=xc(l)),l&&(c.fields[Uv]=l),{mapValue:c}})(t,e):n instanceof Wo?sw(n,e):n instanceof Ho?iw(n,e):(function(o,l){const c=rw(o,l),f=Vy(c)+Vy(o.Ae);return Gd(c)&&Gd(o.Ae)?nw(f):Vf(o.serializer,f)})(n,e)}function IA(n,e,t){return n instanceof Wo?sw(n,e):n instanceof Ho?iw(n,e):t}function rw(n,e){return n instanceof pc?(function(s){return Gd(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class fc extends Vc{}class Wo extends Vc{constructor(e){super(),this.elements=e}}function sw(n,e){const t=ow(e);for(const s of n.elements)t.some((o=>Fr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Ho extends Vc{constructor(e){super(),this.elements=e}}function iw(n,e){let t=ow(e);for(const s of n.elements)t=t.filter((o=>!Fr(o,s)));return{arrayValue:{values:t}}}class pc extends Vc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Vy(n){return Rt(n.integerValue||n.doubleValue)}function ow(n){return Nf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,t){this.field=e,this.transform=t}}function SA(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Wo&&o instanceof Wo||s instanceof Ho&&o instanceof Ho?zo(s.elements,o.elements,Fr):s instanceof pc&&o instanceof pc?Fr(s.Ae,o.Ae):s instanceof fc&&o instanceof fc})(n.transform,e.transform)}class CA{constructor(e,t){this.version=e,this.transformResults=t}}class Vr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Vr}static exists(e){return new Vr(void 0,e)}static updateTime(e){return new Vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Oc{}function lw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cw(n.key,Vr.none()):new Tl(n.key,n.data,Vr.none());{const t=n.data,s=En.empty();let o=new Ut(Yt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new Zs(n.key,s,new Vn(o.toArray()),Vr.none())}}function AA(n,e,t){n instanceof Tl?(function(o,l,c){const f=o.value.clone(),p=Ly(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof Zs?(function(o,l,c){if(!Ju(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Ly(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(uw(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function sl(n,e,t,s){return n instanceof Tl?(function(l,c,f,p){if(!Ju(l.precondition,c))return f;const y=l.value.clone(),_=My(l.fieldTransforms,p,c);return y.setAll(_),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,s):n instanceof Zs?(function(l,c,f,p){if(!Ju(l.precondition,c))return f;const y=My(l.fieldTransforms,p,c),_=c.data;return _.setAll(uw(l)),_.setAll(y),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,f){return Ju(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function kA(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=rw(s.transform,o||null);l!=null&&(t===null&&(t=En.empty()),t.set(s.field,l))}return t||null}function Oy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&zo(s,o,((l,c)=>SA(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tl extends Oc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Zs extends Oc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function uw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Ly(n,e,t){const s=new Map;st(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);s.set(l.field,IA(c,f,t[o]))}return s}function My(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,TA(l,c,e))}return s}class cw extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RA extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&AA(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=sl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=sl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=tw();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=lw(c,f);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Le.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Qe())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((t,s)=>Oy(t,s)))&&zo(this.baseMutations,e.baseMutations,((t,s)=>Oy(t,s)))}}class Of{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){st(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return yA})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new Of(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dt,Xe;function DA(n){switch(n){case J.OK:return xe(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function hw(n){if(n===void 0)return as("GRPC error has no .code"),J.UNKNOWN;switch(n){case Dt.OK:return J.OK;case Dt.CANCELLED:return J.CANCELLED;case Dt.UNKNOWN:return J.UNKNOWN;case Dt.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Dt.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Dt.INTERNAL:return J.INTERNAL;case Dt.UNAVAILABLE:return J.UNAVAILABLE;case Dt.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Dt.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Dt.NOT_FOUND:return J.NOT_FOUND;case Dt.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Dt.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Dt.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Dt.ABORTED:return J.ABORTED;case Dt.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Dt.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Dt.DATA_LOSS:return J.DATA_LOSS;default:return xe(39323,{code:n})}}(Xe=Dt||(Dt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA=new Bs([4294967295,4294967295],0);function Fy(n){const e=bA().encode(n),t=new Sv;return t.update(e),new Uint8Array(t.digest())}function Uy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Bs([t,s],0),new Bs([o,l],0)]}class Lf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ja(`Invalid padding: ${t}`);if(s<0)throw new Ja(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Bs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Bs.fromNumber(s)));return o.compare(VA)===1&&(o=new Bs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Fy(e),[s,o]=Uy(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Lf(l,o,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=Fy(e),[s,o]=Uy(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.be(c)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Lc(Le.min(),o,new Et(Ke),ls(),Qe())}}class Il{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Il(s,t,Qe(),Qe(),Qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=o}}class dw{constructor(e,t){this.targetId=e,this.Ce=t}}class fw{constructor(e,t,s=Xt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class jy{constructor(){this.ve=0,this.Fe=zy(),this.Me=Xt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Qe(),t=Qe(),s=Qe();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:xe(38017,{changeType:l})}})),new Il(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=zy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class OA{constructor(e){this.Ge=e,this.ze=new Map,this.je=ls(),this.He=Uu(),this.Je=Uu(),this.Ze=new Et(Ke)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Qd(l))if(s===0){const c=new ke(l.path);this.et(t,c,ln.newNoDocument(c,Le.min()))}else st(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=Gs(s).toUint8Array()}catch(p){if(p instanceof Lv)return Ui("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Lf(c,o,l)}catch(p){return Ui(p instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Qd(f.target)){const p=new ke(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,ln.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let s=Qe();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new Lc(e,t,this.Ze,this.je,s);return this.je=ls(),this.He=Uu(),this.Je=Uu(),this.Ze=new Et(Ke),o}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new jy,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Ut(Ke),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Ut(Ke),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new jy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Uu(){return new Et(ke.comparator)}function zy(){return new Et(ke.comparator)}const LA={asc:"ASCENDING",desc:"DESCENDING"},MA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FA={and:"AND",or:"OR"};class UA{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yd(n,e){return n.useProto3Json||Pc(e)?e:{value:e}}function mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function pw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function jA(n,e){return mc(n,e.toTimestamp())}function Or(n){return st(!!n,49232),Le.fromTimestamp((function(t){const s=qs(t);return new mt(s.seconds,s.nanos)})(n))}function Mf(n,e){return Xd(n,e).canonicalString()}function Xd(n,e){const t=(function(o){return new ut(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function mw(n){const e=ut.fromString(n);return st(ww(e),10190,{key:e.toString()}),e}function Zd(n,e){return Mf(n.databaseId,e.path)}function Ad(n,e){const t=mw(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ke(yw(t))}function gw(n,e){return Mf(n.databaseId,e)}function zA(n){const e=mw(n);return e.length===4?ut.emptyPath():yw(e)}function ef(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function yw(n){return st(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function By(n,e,t){return{name:Zd(n,e),fields:t.value.mapValue.fields}}function BA(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:xe(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,_){return y.useProto3Json?(st(_===void 0||typeof _=="string",58123),Xt.fromBase64String(_||"")):(st(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Xt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(y){const _=y.code===void 0?J.UNKNOWN:hw(y.code);return new ye(_,y.message||"")})(c);t=new fw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ad(n,s.document.name),l=Or(s.document.updateTime),c=s.document.createTime?Or(s.document.createTime):Le.min(),f=new En({mapValue:{fields:s.document.fields}}),p=ln.newFoundDocument(o,l,c,f),y=s.targetIds||[],_=s.removedTargetIds||[];t=new Yu(y,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ad(n,s.document),l=s.readTime?Or(s.readTime):Le.min(),c=ln.newNoDocument(o,l),f=s.removedTargetIds||[];t=new Yu([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ad(n,s.document),l=s.removedTargetIds||[];t=new Yu([],l,o,null)}else{if(!("filter"in e))return xe(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new NA(o,l),f=s.targetId;t=new dw(f,c)}}return t}function $A(n,e){let t;if(e instanceof Tl)t={update:By(n,e.key,e.value)};else if(e instanceof cw)t={delete:Zd(n,e.key)};else if(e instanceof Zs)t={update:By(n,e.key,e.data),updateMask:XA(e.fieldMask)};else{if(!(e instanceof RA))return xe(16599,{dt:e.type});t={verify:Zd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof fc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Wo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ho)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw xe(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:jA(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:xe(27497)})(n,e.precondition)),t}function WA(n,e){return n&&n.length>0?(st(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?Or(o.updateTime):Or(l);return c.isEqual(Le.min())&&(c=Or(l)),new CA(c,o.transformResults||[])})(t,e)))):[]}function HA(n,e){return{documents:[gw(n,e.path)]}}function qA(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=gw(n,o);const l=(function(y){if(y.length!==0)return vw(cr.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((_=>(function(T){return{field:xo(T.field),direction:QA(T.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Yd(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function GA(n){let e=zA(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){st(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const T=_w(E);return T instanceof cr&&qv(T)?T.getFilters():[T]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((T=>(function(B){return new fl(No(B.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(B.direction))})(T)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let T;return T=typeof E=="object"?E.value:E,Pc(T)?null:T})(t.limit));let p=null;t.startAt&&(p=(function(E){const T=!!E.before,M=E.values||[];return new hc(M,T)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const T=!E.before,M=E.values||[];return new hc(M,T)})(t.endAt)),cA(e,o,c,l,f,"F",p,y)}function KA(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _w(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=No(t.unaryFilter.field);return bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=No(t.unaryFilter.field);return bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=No(t.unaryFilter.field);return bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=No(t.unaryFilter.field);return bt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return bt.create(No(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return cr.create(t.compositeFilter.filters.map((s=>_w(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(n):xe(30097,{filter:n})}function QA(n){return LA[n]}function JA(n){return MA[n]}function YA(n){return FA[n]}function xo(n){return{fieldPath:n.canonicalString()}}function No(n){return Yt.fromServerFormat(n.fieldPath)}function vw(n){return n instanceof bt?(function(t){if(t.op==="=="){if(Py(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NAN"}};if(Ry(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Py(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NAN"}};if(Ry(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(t.field),op:JA(t.op),value:t.value}}})(n):n instanceof cr?(function(t){const s=t.getFilters().map((o=>vw(o)));return s.length===1?s[0]:{compositeFilter:{op:YA(t.op),filters:s}}})(n):xe(54877,{filter:n})}function XA(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function ww(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Ew(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,t,s,o,l=Le.min(),c=Le.min(),f=Xt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Ms(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ms(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.yt=e}}function ek(n){const e=GA({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(){this.Sn=new nk}addToCollectionParentIndex(e,t){return this.Sn.add(t),X.resolve()}getCollectionParents(e,t){return X.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return X.resolve()}deleteFieldIndex(e,t){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,t){return X.resolve()}getDocumentsMatchingTarget(e,t){return X.resolve(null)}getIndexType(e,t){return X.resolve(0)}getFieldIndexes(e,t){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,t){return X.resolve(Hs.min())}getMinOffsetFromCollectionGroup(e,t){return X.resolve(Hs.min())}updateCollectionGroup(e,t,s){return X.resolve()}updateIndexEntries(e,t){return X.resolve()}}class nk{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ut(ut.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ut(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Tw=41943040;class wn{static withCacheSize(e){return new wn(e,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn.DEFAULT_COLLECTION_PERCENTILE=10,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,wn.DEFAULT=new wn(Tw,wn.DEFAULT_COLLECTION_PERCENTILE,wn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),wn.DISABLED=new wn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new qo(0)}static ar(){return new qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="LruGarbageCollector",rk=1048576;function Hy([n,e],[t,s]){const o=Ke(n,t);return o===0?Ke(e,s):o}class sk{constructor(e){this.Pr=e,this.buffer=new Ut(Hy),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Hy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ik{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){ve(Wy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ta(t)?ve(Wy,"Ignoring IndexedDB error during garbage collection: ",t):await ea(t)}await this.Ar(3e5)}))}}class ok{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return X.resolve(Rc.ce);const s=new sk(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),X.resolve($y)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$y):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,o,l,c,f,p,y;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),Ro()<=Ge.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-_}ms`),X.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function ak(n,e){return new ok(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.changes=new $i((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?X.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&sl(s.mutation,o,Vn.empty(),mt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Qe()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Qe()){const o=bi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=Qa();return l.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=bi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Qe())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,o){let l=ls();const c=rl(),f=(function(){return rl()})();return t.forEach(((p,y)=>{const _=s.get(y.key);o.has(y.key)&&(_===void 0||_.mutation instanceof Zs)?l=l.insert(y.key,y):_!==void 0?(c.set(y.key,_.mutation.getFieldMask()),sl(_.mutation,y,_.mutation.getFieldMask(),mt.now())):c.set(y.key,Vn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,_)=>c.set(y,_))),t.forEach(((y,_)=>f.set(y,new uk(_,c.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=rl();let o=new Et(((c,f)=>c-f)),l=Qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let _=s.get(p)||Vn.empty();_=f.applyToLocalView(y,_),s.set(p,_);const E=(o.get(f.batchId)||Qe()).add(p);o=o.insert(f.batchId,E)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,_=p.value,E=tw();_.forEach((T=>{if(!l.has(T)){const M=lw(t.get(T),s.get(T));M!==null&&E.set(T,M),l=l.add(T)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return X.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return hA(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Jv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):X.resolve(bi());let f=ul,p=l;return c.next((y=>X.forEach(y,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?X.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{p=p.insert(_,T)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,Qe()))).next((_=>({batchId:f,changes:ew(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ke(t)).next((s=>{let o=Qa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=Qa();return this.indexManager.getCollectionParents(e,l).next((f=>X.forEach(f,(p=>{const y=(function(E,T){return new na(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((_=>{_.forEach(((E,T)=>{c=c.insert(E,T)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,y)=>{const _=y.getKey();c.get(_)===null&&(c=c.insert(_,ln.newInvalidDocument(_)))}));let f=Qa();return c.forEach(((p,y)=>{const _=l.get(p);_!==void 0&&sl(_.mutation,y,Vn.empty(),mt.now()),bc(t,y)&&(f=f.insert(p,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return X.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Or(o.createTime)}})(t)),X.resolve()}getNamedQuery(e,t){return X.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:ek(o.bundledQuery),readTime:Or(o.readTime)}})(t)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(){this.overlays=new Et(ke.comparator),this.Lr=new Map}getOverlay(e,t){return X.resolve(this.overlays.get(t))}getOverlays(e,t){const s=bi();return X.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.bt(e,t,l)})),X.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),X.resolve()}getOverlaysForCollection(e,t,s){const o=bi(),l=t.length+1,c=new ke(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return X.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Et(((y,_)=>y-_));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let _=l.get(y.largestBatchId);_===null&&(_=bi(),l=l.insert(y.largestBatchId,_)),_.set(y.getKey(),y)}}const f=bi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,_)=>f.set(y,_))),!(f.size()>=o)););return X.resolve(f)}bt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new xA(t,s));let l=this.Lr.get(t);l===void 0&&(l=Qe(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(){this.sessionToken=Xt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this.kr=new Ut(Wt.Kr),this.qr=new Ut(Wt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Wt(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Wt(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new ke(new ut([])),s=new Wt(t,e),o=new Wt(t,e+1),l=[];return this.qr.forEachInRange([s,o],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ke(new ut([])),s=new Wt(t,e),o=new Wt(t,e+1);let l=Qe();return this.qr.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Wt(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Wt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ke.comparator(e.key,t.key)||Ke(e.Hr,t.Hr)}static Ur(e,t){return Ke(e.Hr,t.Hr)||ke.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Ut(Wt.Kr)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new PA(l,t,s,o);this.mutationQueue.push(c);for(const f of o)this.Jr=this.Jr.add(new Wt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return X.resolve(c)}lookupMutationBatch(e,t){return X.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return X.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?Pf:this.Yn-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Wt(t,0),o=new Wt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,o],(c=>{const f=this.Zr(c.Hr);l.push(f)})),X.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ut(Ke);return t.forEach((o=>{const l=new Wt(o,0),c=new Wt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{s=s.add(f.Hr)}))})),X.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;ke.isDocumentKey(l)||(l=l.child(""));const c=new Wt(new ke(l),0);let f=new Ut(Ke);return this.Jr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.Hr)),!0)}),c),X.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){st(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return X.forEach(t.mutations,(o=>{const l=new Wt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Wt(t,0),o=this.Jr.firstAfterOrEqual(s);return X.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e){this.ti=e,this.docs=(function(){return new Et(ke.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return X.resolve(s?s.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let s=ls();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():ln.newInvalidDocument(o))})),X.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=ls();const c=t.path,f=new ke(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:_}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||z1(j1(_),s)<=0||(o.has(_.key)||bc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return X.resolve(l)}getAllFromCollectionGroup(e,t,s,o){xe(9500)}ni(e,t){return X.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new gk(this)}getSize(e){return X.resolve(this.size)}}class gk extends lk{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),X.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.persistence=e,this.ri=new $i((t=>Df(t)),bf),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.ii=0,this.si=new Ff,this.targetCount=0,this.oi=qo._r()}forEachTarget(e,t){return this.ri.forEach(((s,o)=>t(o))),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),X.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new qo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,X.resolve()}updateTargetData(e,t){return this.lr(t),X.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),X.waitFor(l).next((()=>o))}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return X.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),X.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),X.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),X.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return X.resolve(s)}containsKey(e,t){return X.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{constructor(e,t){this._i={},this.overlays={},this.ai=new Rc(0),this.ui=!1,this.ui=!0,this.ci=new fk,this.referenceDelegate=e(this),this.li=new yk(this),this.indexManager=new tk,this.remoteDocumentCache=(function(o){return new mk(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new ZA(t),this.Pi=new hk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new dk,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new pk(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){ve("MemoryPersistence","Starting transaction:",e);const o=new _k(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return X.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class _k extends $1{constructor(e){super(),this.currentSequenceNumber=e}}class Uf{constructor(e){this.persistence=e,this.Ri=new Ff,this.Ai=null}static Vi(e){return new Uf(e)}get di(){if(this.Ai)return this.Ai;throw xe(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),X.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),X.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),X.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.di,(s=>{const o=ke.fromPath(s);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Le.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return X.or([()=>X.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class gc{constructor(e,t){this.persistence=e,this.fi=new $i((s=>q1(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=ak(this,t)}static Vi(e,t){return new gc(e,t)}Ti(){}Ii(e){return X.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return X.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((l=>l?X.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Le.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),X.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),X.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),X.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),X.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ku(e.data.value)),t}wr(e,t,s){return X.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return X.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=o}static Es(e,t){let s=Qe(),o=Qe();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new jf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return iI()?8:W1(un())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new vk;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,s,o){return s.documentReadCount<this.Vs?(Ro()<=Ge.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),X.resolve()):(Ro()<=Ge.DEBUG&&ve("QueryEngine","Query:",Po(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Ro()<=Ge.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,br(t))):X.resolve())}gs(e,t){if(by(t))return X.resolve(null);let s=br(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=dc(t,null,"F"),s=br(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Qe(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.bs(t,f);return this.Ss(t,y,c,p.readTime)?this.gs(e,dc(t,null,"F")):this.Ds(e,y,t,p)}))))})))))}ps(e,t,s,o){return by(t)||o.isEqual(Le.min())?X.resolve(null):this.fs.getDocuments(e,s).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,s,o)?X.resolve(null):(Ro()<=Ge.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Po(t)),this.Ds(e,c,t,U1(o,ul)).next((f=>f)))}))}bs(e,t){let s=new Ut(Xv(e));return t.forEach(((o,l)=>{bc(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,s){return Ro()<=Ge.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Po(t)),this.fs.getDocumentsMatchingQuery(e,t,Hs.min(),s)}Ds(e,t,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="LocalStore",Ek=3e8;class Tk{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new Et(Ke),this.Fs=new $i((l=>Df(l)),bf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ck(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function Ik(n,e,t,s){return new Tk(n,e,t,s)}async function Sw(n,e){const t=Fe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let p=Qe();for(const y of o){c.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}for(const y of l){f.push(y.batchId);for(const _ of y.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(s,p).next((y=>({Ns:y,removedBatchIds:c,addedBatchIds:f})))}))}))}function Sk(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,_){const E=y.batch,T=E.keys();let M=X.resolve();return T.forEach((B=>{M=M.next((()=>_.getEntry(p,B))).next(($=>{const L=y.docVersions.get(B);st(L!==null,48541),$.version.compareTo(L)<0&&(E.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),_.addEntry($)))}))})),M.next((()=>f.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=Qe();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Cw(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function Ck(n,e){const t=Fe(n),s=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const f=[];e.targetChanges.forEach(((_,E)=>{const T=o.get(E);if(!T)return;f.push(t.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,E))));let M=T.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?M=M.withResumeToken(Xt.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):_.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(_.resumeToken,s)),o=o.insert(E,M),(function($,L,te){return $.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=Ek?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(T,M,_)&&f.push(t.li.updateTargetData(l,M))}));let p=ls(),y=Qe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(Ak(l,c,e.documentUpdates).next((_=>{p=_.Bs,y=_.Ls}))),!s.isEqual(Le.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(_)}return X.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.vs=o,l)))}function Ak(n,e,t){let s=Qe(),o=Qe();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=ls();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Le.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):ve(zf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{Bs:c,Ls:o}}))}function kk(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Pf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function Rk(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.li.getTargetData(s,e).next((l=>l?(o=l,X.resolve(o)):t.li.allocateTargetId(s).next((c=>(o=new Ms(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function tf(n,e,t){const s=Fe(n),o=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!ta(c))throw c;ve(zf,`Failed to update sequence numbers for target ${e}: ${c}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function qy(n,e,t){const s=Fe(n);let o=Le.min(),l=Qe();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,_){const E=Fe(p),T=E.Fs.get(_);return T!==void 0?X.resolve(E.vs.get(T)):E.li.getTargetData(y,_)})(s,c,br(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(c,f.targetId).next((p=>{l=p}))})).next((()=>s.Cs.getDocumentsMatchingQuery(c,e,t?o:Le.min(),t?l:Qe()))).next((f=>(Pk(s,pA(e),f),{documents:f,ks:l})))))}function Pk(n,e,t){let s=n.Ms.get(e)||Le.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Ms.set(e,s)}class Gy{constructor(){this.activeTargetIds=wA()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xk{constructor(){this.vo=new Gy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Gy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="ConnectivityMonitor";class Qy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){ve(Ky,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){ve(Ky,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju=null;function nf(){return ju===null?ju=(function(){return 268435456+Math.round(2147483648*Math.random())})():ju++,"0x"+ju.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="RestConnection",Dk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class bk{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===uc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const c=nf(),f=this.Qo(e,t.toUriEncodedString());ve(kd,`Sending RPC '${e}' ${c}:`,f,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,o,l);const{host:y}=new URL(f),_=Jo(y);return this.zo(e,f,p,s,_).then((E=>(ve(kd,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Ui(kd,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",s),E}))}jo(e,t,s,o,l,c){return this.Wo(e,t,s,o,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const s=Dk[e];let o=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection",qa=(n,e,t)=>{n.listen(e,(s=>{try{t(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Lo extends bk{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Lo.c_){const e=Rv();qa(e,kv.STAT_EVENT,(t=>{t.stat===Wd.PROXY?ve(on,"STAT_EVENT: detected buffering proxy"):t.stat===Wd.NOPROXY&&ve(on,"STAT_EVENT: detected no buffering proxy")})),Lo.c_=!0}}zo(e,t,s,o,l){const c=nf();return new Promise(((f,p)=>{const y=new Cv;y.setWithCredentials(!0),y.listenOnce(Av.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Gu.NO_ERROR:const E=y.getResponseJson();ve(on,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case Gu.TIMEOUT:ve(on,`RPC '${e}' ${c} timed out`),p(new ye(J.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const T=y.getStatus();if(ve(on,`RPC '${e}' ${c} failed with status:`,T,"response text:",y.getResponseText()),T>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const B=M==null?void 0:M.error;if(B&&B.status&&B.message){const $=(function(te){const se=te.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(se)>=0?se:J.UNKNOWN})(B.status);p(new ye($,B.message))}else p(new ye(J.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ye(J.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ve(on,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);ve(on,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",_,s,15)}))}T_(e,t,s){const o=nf(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const y=l.join("");ve(on,`Creating RPC '${e}' stream ${o}: ${y}`,f);const _=c.createWebChannel(y,f);this.I_(_);let E=!1,T=!1;const M=new Vk({Ho:B=>{T?ve(on,`Not sending because RPC '${e}' stream ${o} is closed:`,B):(E||(ve(on,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),ve(on,`RPC '${e}' stream ${o} sending:`,B),_.send(B))},Jo:()=>_.close()});return qa(_,Ka.EventType.OPEN,(()=>{T||(ve(on,`RPC '${e}' stream ${o} transport opened.`),M.i_())})),qa(_,Ka.EventType.CLOSE,(()=>{T||(T=!0,ve(on,`RPC '${e}' stream ${o} transport closed`),M.o_(),this.E_(_))})),qa(_,Ka.EventType.ERROR,(B=>{T||(T=!0,Ui(on,`RPC '${e}' stream ${o} transport errored. Name:`,B.name,"Message:",B.message),M.o_(new ye(J.UNAVAILABLE,"The operation could not be completed")))})),qa(_,Ka.EventType.MESSAGE,(B=>{var $;if(!T){const L=B.data[0];st(!!L,16349);const te=L,se=(te==null?void 0:te.error)||(($=te[0])==null?void 0:$.error);if(se){ve(on,`RPC '${e}' stream ${o} received error:`,se);const ae=se.status;let oe=(function(N){const S=Dt[N];if(S!==void 0)return hw(S)})(ae),me=se.message;ae==="NOT_FOUND"&&me.includes("database")&&me.includes("does not exist")&&me.includes(this.databaseId.database)&&Ui(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),oe===void 0&&(oe=J.INTERNAL,me="Unknown error status: "+ae+" with message "+se.message),T=!0,M.o_(new ye(oe,me)),_.close()}else ve(on,`RPC '${e}' stream ${o} received:`,L),M.__(L)}})),Lo.u_(),setTimeout((()=>{M.s_()}),0),M}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Pv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ok(n){return new Lo(n)}function Rd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(n){return new UA(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo.c_=!1;class Aw{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="PersistentStream";class kw{constructor(e,t,s,o,l,c,f,p){this.Ci=e,this.b_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Aw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(as(t.toString()),as("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ye(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(Jy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(ve(Jy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Lk extends kw{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=BA(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Le.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Le.min():c.readTime?Or(c.readTime):Le.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=ef(this.serializer),t.addTarget=(function(l,c){let f;const p=c.target;if(f=Qd(p)?{documents:HA(l,p)}:{query:qA(l,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=pw(l,c.resumeToken);const y=Yd(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Le.min())>0){f.readTime=mc(l,c.snapshotVersion.toTimestamp());const y=Yd(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=KA(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=ef(this.serializer),t.removeTarget=e,this.K_(t)}}class Mk extends kw{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=WA(e.writeResults,e.commitTime),s=Or(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=ef(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>$A(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{}class Uk extends Fk{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Xd(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(J.UNKNOWN,l.toString())}))}jo(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,Xd(t,s),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function jk(n,e,t,s){return new Uk(n,e,t,s)}class zk{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(as(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ji="RemoteStore";class Bk{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{s.enqueueAndForget((async()=>{Wi(this)&&(ve(ji,"Restarting streams for network reachability change."),await(async function(p){const y=Fe(p);y.Ea.add(4),await Sl(y),y.Va.set("Unknown"),y.Ea.delete(4),await Fc(y)})(this))}))})),this.Va=new zk(s,o)}}async function Fc(n){if(Wi(n))for(const e of n.Ra)await e(!0)}async function Sl(n){for(const e of n.Ra)await e(!1)}function Rw(n,e){const t=Fe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Hf(t)?Wf(t):ra(t).O_()&&$f(t,e))}function Bf(n,e){const t=Fe(n),s=ra(t);t.Ia.delete(e),s.O_()&&Pw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Wi(t)&&t.Va.set("Unknown"))}function $f(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ra(n).Z_(e)}function Pw(n,e){n.da.$e(e),ra(n).X_(e)}function Wf(n){n.da=new OA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ra(n).start(),n.Va.ua()}function Hf(n){return Wi(n)&&!ra(n).x_()&&n.Ia.size>0}function Wi(n){return Fe(n).Ea.size===0}function xw(n){n.da=void 0}async function $k(n){n.Va.set("Online")}async function Wk(n){n.Ia.forEach(((e,t)=>{$f(n,e)}))}async function Hk(n,e){xw(n),Hf(n)?(n.Va.ha(e),Wf(n)):n.Va.set("Unknown")}async function qk(n,e,t){if(n.Va.set("Online"),e instanceof fw&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ia.delete(f),o.da.removeTarget(f))})(n,e)}catch(s){ve(ji,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yc(n,s)}else if(e instanceof Yu?n.da.Xe(e):e instanceof dw?n.da.st(e):n.da.tt(e),!t.isEqual(Le.min()))try{const s=await Cw(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(y);_&&l.Ia.set(y,_.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,y)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(Xt.EMPTY_BYTE_STRING,_.snapshotVersion)),Pw(l,p);const E=new Ms(_.target,p,y,_.sequenceNumber);$f(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){ve(ji,"Failed to raise snapshot:",s),await yc(n,s)}}async function yc(n,e,t){if(!ta(e))throw e;n.Ea.add(1),await Sl(n),n.Va.set("Offline"),t||(t=()=>Cw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve(ji,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Fc(n)}))}function Nw(n,e){return e().catch((t=>yc(n,t,e)))}async function Uc(n){const e=Fe(n),t=Qs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pf;for(;Gk(e);)try{const o=await kk(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,Kk(e,o)}catch(o){await yc(e,o)}Dw(e)&&bw(e)}function Gk(n){return Wi(n)&&n.Ta.length<10}function Kk(n,e){n.Ta.push(e);const t=Qs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Dw(n){return Wi(n)&&!Qs(n).x_()&&n.Ta.length>0}function bw(n){Qs(n).start()}async function Qk(n){Qs(n).ra()}async function Jk(n){const e=Qs(n);for(const t of n.Ta)e.ea(t.mutations)}async function Yk(n,e,t){const s=n.Ta.shift(),o=Of.from(s,e,t);await Nw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await Uc(n)}async function Xk(n,e){e&&Qs(n).Y_&&await(async function(s,o){if((function(c){return DA(c)&&c!==J.ABORTED})(o.code)){const l=s.Ta.shift();Qs(s).B_(),await Nw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await Uc(s)}})(n,e),Dw(n)&&bw(n)}async function Yy(n,e){const t=Fe(n);t.asyncQueue.verifyOperationInProgress(),ve(ji,"RemoteStore received new credentials");const s=Wi(t);t.Ea.add(3),await Sl(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Fc(t)}async function Zk(n,e){const t=Fe(n);e?(t.Ea.delete(2),await Fc(t)):e||(t.Ea.add(2),await Sl(t),t.Va.set("Unknown"))}function ra(n){return n.ma||(n.ma=(function(t,s,o){const l=Fe(t);return l.sa(),new Lk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:$k.bind(null,n),Yo:Wk.bind(null,n),t_:Hk.bind(null,n),J_:qk.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Hf(n)?Wf(n):n.Va.set("Unknown")):(await n.ma.stop(),xw(n))}))),n.ma}function Qs(n){return n.fa||(n.fa=(function(t,s,o){const l=Fe(t);return l.sa(),new Mk(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Qk.bind(null,n),t_:Xk.bind(null,n),ta:Jk.bind(null,n),na:Yk.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await Uc(n)):(await n.fa.stop(),n.Ta.length>0&&(ve(ji,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new $s,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,f=new qf(e,t,c,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gf(n,e){if(as("AsyncQueue",`${e}: ${n}`),ta(n))return new ye(J.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||ke.comparator(t.key,s.key):(t,s)=>ke.comparator(t.key,s.key),this.keyedMap=Qa(),this.sortedSet=new Et(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Mo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.ga=new Et(ke.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Go{constructor(e,t,s,o,l,c,f,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Go(e,t,Mo.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class tR{constructor(){this.queries=Zy(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Fe(t),l=o.queries;o.queries=Zy(),l.forEach(((c,f)=>{for(const p of f.ba)p.onError(s)}))})(this,new ye(J.ABORTED,"Firestore shutting down"))}}function Zy(){return new $i((n=>Yv(n)),Dc)}async function Vw(n,e){const t=Fe(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(s=2):(l=new eR,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=Gf(c,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Kf(t)}async function Ow(n,e){const t=Fe(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function nR(n,e){const t=Fe(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(o)&&(s=!0);c.wa=o}}s&&Kf(t)}function rR(n,e,t){const s=Fe(n),o=s.queries.get(e);if(o)for(const l of o.ba)l.onError(t);s.queries.delete(e)}function Kf(n){n.Ca.forEach((e=>{e.next()}))}var rf,e_;(e_=rf||(rf={})).Ma="default",e_.Cache="cache";class Lw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Go(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mw{constructor(e){this.key=e}}class Fw{constructor(e){this.key=e}}class sR{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Qe(),this.mutatedKeys=Qe(),this.eu=Xv(e),this.tu=new Mo(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new Xy,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const T=o.get(_),M=bc(this.query,E)?E:null,B=!!T&&this.mutatedKeys.has(T.key),$=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let L=!1;T&&M?T.data.isEqual(M.data)?B!==$&&(s.track({type:3,doc:M}),L=!0):this.su(T,M)||(s.track({type:2,doc:M}),L=!0,(p&&this.eu(M,p)>0||y&&this.eu(M,y)<0)&&(f=!0)):!T&&M?(s.track({type:0,doc:M}),L=!0):T&&!M&&(s.track({type:1,doc:T}),L=!0,(p||y)&&(f=!0)),L&&(M?(c=c.add(M),l=$?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{tu:c,iu:s,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(M,B){const $=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Vt:L})}};return $(M)-$(B)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],p=this.Ya.size===0&&this.current&&!o?1:0,y=p!==this.Xa;return this.Xa=p,c.length!==0||y?{snapshot:new Go(this.query,e.tu,l,c,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xy,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Qe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new Fw(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new Mw(s))})),t}cu(e){this.Za=e.ks,this.Ya=Qe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Go.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Qf="SyncEngine";class iR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class oR{constructor(e){this.key=e,this.hu=!1}}class aR{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new $i((f=>Yv(f)),Dc),this.Iu=new Map,this.Eu=new Set,this.Ru=new Et(ke.comparator),this.Au=new Map,this.Vu=new Ff,this.du={},this.mu=new Map,this.fu=qo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function lR(n,e,t=!0){const s=Ww(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Uw(s,e,t,!0),o}async function uR(n,e){const t=Ww(n);await Uw(t,e,!0,!1)}async function Uw(n,e,t,s){const o=await Rk(n.localStore,br(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await cR(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&Rw(n.remoteStore,o),f}async function cR(n,e,t,s,o){n.pu=(E,T,M)=>(async function($,L,te,se){let ae=L.view.ru(te);ae.Ss&&(ae=await qy($.localStore,L.query,!1).then((({documents:N})=>L.view.ru(N,ae))));const oe=se&&se.targetChanges.get(L.targetId),me=se&&se.targetMismatches.get(L.targetId)!=null,ne=L.view.applyChanges(ae,$.isPrimaryClient,oe,me);return n_($,L.targetId,ne.au),ne.snapshot})(n,E,T,M);const l=await qy(n.localStore,e,!0),c=new sR(e,l.ks),f=c.ru(l.documents),p=Il.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),y=c.applyChanges(f,n.isPrimaryClient,p);n_(n,t,y.au);const _=new iR(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function hR(n,e,t){const s=Fe(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!Dc(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await tf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Bf(s.remoteStore,o.targetId),sf(s,o.targetId)})).catch(ea)):(sf(s,o.targetId),await tf(s.localStore,o.targetId,!0))}async function dR(n,e){const t=Fe(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Bf(t.remoteStore,s.targetId))}async function fR(n,e,t){const s=wR(n);try{const o=await(function(c,f){const p=Fe(c),y=mt.now(),_=f.reduce(((M,B)=>M.add(B.key)),Qe());let E,T;return p.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let B=ls(),$=Qe();return p.xs.getEntries(M,_).next((L=>{B=L,B.forEach(((te,se)=>{se.isValidDocument()||($=$.add(te))}))})).next((()=>p.localDocuments.getOverlayedDocuments(M,B))).next((L=>{E=L;const te=[];for(const se of f){const ae=kA(se,E.get(se.key).overlayedDocument);ae!=null&&te.push(new Zs(se.key,ae,$v(ae.value.mapValue),Vr.exists(!0)))}return p.mutationQueue.addMutationBatch(M,y,te,f)})).next((L=>{T=L;const te=L.applyToLocalDocumentSet(E,$);return p.documentOverlayCache.saveOverlays(M,L.batchId,te)}))})).then((()=>({batchId:T.batchId,changes:ew(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,f,p){let y=c.du[c.currentUser.toKey()];y||(y=new Et(Ke)),y=y.insert(f,p),c.du[c.currentUser.toKey()]=y})(s,o.batchId,t),await Cl(s,o.changes),await Uc(s.remoteStore)}catch(o){const l=Gf(o,"Failed to persist write");t.reject(l)}}async function jw(n,e){const t=Fe(n);try{const s=await Ck(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?st(c.hu,14607):o.removedDocuments.size>0&&(st(c.hu,42227),c.hu=!1))})),await Cl(t,s,e)}catch(s){await ea(s)}}function t_(n,e,t){const s=Fe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const p=Fe(c);p.onlineState=f;let y=!1;p.queries.forEach(((_,E)=>{for(const T of E.ba)T.va(f)&&(y=!0)})),y&&Kf(p)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function pR(n,e,t){const s=Fe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new Et(ke.comparator);c=c.insert(l,ln.newNoDocument(l,Le.min()));const f=Qe().add(l),p=new Lc(Le.min(),new Map,new Et(Ke),c,f);await jw(s,p),s.Ru=s.Ru.remove(l),s.Au.delete(e),Jf(s)}else await tf(s.localStore,e,!1).then((()=>sf(s,e,t))).catch(ea)}async function mR(n,e){const t=Fe(n),s=e.batch.batchId;try{const o=await Sk(t.localStore,e);Bw(t,s,null),zw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Cl(t,o)}catch(o){await ea(o)}}async function gR(n,e,t){const s=Fe(n);try{const o=await(function(c,f){const p=Fe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let _;return p.mutationQueue.lookupMutationBatch(y,f).next((E=>(st(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,_,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,_))).next((()=>p.localDocuments.getDocuments(y,_)))}))})(s.localStore,e);Bw(s,e,t),zw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Cl(s,o)}catch(o){await ea(o)}}function zw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Bw(n,e,t){const s=Fe(n);let o=s.du[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function sf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((s=>{n.Vu.containsKey(s)||$w(n,s)}))}function $w(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Bf(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Jf(n))}function n_(n,e,t){for(const s of t)s instanceof Mw?(n.Vu.addReference(s.key,e),yR(n,s)):s instanceof Fw?(ve(Qf,"Document no longer in limbo: "+s.key),n.Vu.removeReference(s.key,e),n.Vu.containsKey(s.key)||$w(n,s.key)):xe(19791,{wu:s})}function yR(n,e){const t=e.key,s=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(s)||(ve(Qf,"New document in limbo: "+t),n.Eu.add(s),Jf(n))}function Jf(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ke(ut.fromString(e)),s=n.fu.next();n.Au.set(s,new oR(t)),n.Ru=n.Ru.insert(t,s),Rw(n.remoteStore,new Ms(br(Nc(t.path)),s,"TargetPurposeLimboResolution",Rc.ce))}}async function Cl(n,e,t){const s=Fe(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,p)=>{c.push(s.pu(p,e,t).then((y=>{var _;if((y||t)&&s.isPrimaryClient){const E=y?!y.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(y){o.push(y);const E=jf.Es(p.targetId,y);l.push(E)}})))})),await Promise.all(c),s.Pu.J_(o),await(async function(p,y){const _=Fe(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>X.forEach(y,(T=>X.forEach(T.Ts,(M=>_.persistence.referenceDelegate.addReference(E,T.targetId,M))).next((()=>X.forEach(T.Is,(M=>_.persistence.referenceDelegate.removeReference(E,T.targetId,M)))))))))}catch(E){if(!ta(E))throw E;ve(zf,"Failed to update sequence numbers: "+E)}for(const E of y){const T=E.targetId;if(!E.fromCache){const M=_.vs.get(T),B=M.snapshotVersion,$=M.withLastLimboFreeSnapshotVersion(B);_.vs=_.vs.insert(T,$)}}})(s.localStore,l))}async function _R(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){ve(Qf,"User change. New user:",e.toKey());const s=await Sw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new ye(J.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Cl(t,s.Ns)}}function vR(n,e){const t=Fe(n),s=t.Au.get(e);if(s&&s.hu)return Qe().add(s.key);{let o=Qe();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const f=t.Tu.get(c);o=o.unionWith(f.view.nu)}return o}}function Ww(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=jw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pR.bind(null,e),e.Pu.J_=nR.bind(null,e.eventManager),e.Pu.yu=rR.bind(null,e.eventManager),e}function wR(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gR.bind(null,e),e}class _c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ik(this.persistence,new wk,e.initialUser,this.serializer)}Cu(e){return new Iw(Uf.Vi,this.serializer)}Du(e){return new xk}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_c.provider={build:()=>new _c};class ER extends _c{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){st(this.persistence.referenceDelegate instanceof gc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new ik(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?wn.withCacheSize(this.cacheSizeBytes):wn.DEFAULT;return new Iw((s=>gc.Vi(s,t)),this.serializer)}}class of{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>t_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=_R.bind(null,this.syncEngine),await Zk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new tR})()}createDatastore(e){const t=Mc(e.databaseInfo.databaseId),s=Ok(e.databaseInfo);return jk(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,f){return new Bk(s,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>t_(this.syncEngine,t,0)),(function(){return Qy.v()?new Qy:new Nk})())}createSyncEngine(e,t){return(function(o,l,c,f,p,y,_){const E=new aR(o,l,c,f,p,y);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Fe(o);ve(ji,"RemoteStore shutting down."),l.Ea.add(5),await Sl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}of.provider={build:()=>new of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):as("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="FirestoreClient";class TR{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=o,this.user=an.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ve(Js,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ve(Js,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $s;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Gf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Pd(n,e){n.asyncQueue.verifyOperationInProgress(),ve(Js,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Sw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function r_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await IR(n);ve(Js,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Yy(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>Yy(e.remoteStore,o))),n._onlineComponents=e}async function IR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(Js,"Using user provided OfflineComponentProvider");try{await Pd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Ui("Error using user provided cache. Falling back to memory cache: "+t),await Pd(n,new _c)}}else ve(Js,"Using default OfflineComponentProvider"),await Pd(n,new ER(void 0));return n._offlineComponents}async function qw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(Js,"Using user provided OnlineComponentProvider"),await r_(n,n._uninitializedComponentsProvider._online)):(ve(Js,"Using default OnlineComponentProvider"),await r_(n,new of))),n._onlineComponents}function SR(n){return qw(n).then((e=>e.syncEngine))}async function af(n){const e=await qw(n),t=e.eventManager;return t.onListen=lR.bind(null,e.syncEngine),t.onUnlisten=hR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=uR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dR.bind(null,e.syncEngine),t}function CR(n,e,t,s){const o=new Hw(s),l=new Lw(e,o,t);return n.asyncQueue.enqueueAndForget((async()=>Vw(await af(n),l))),()=>{o.Nu(),n.asyncQueue.enqueueAndForget((async()=>Ow(await af(n),l)))}}function AR(n,e,t={}){const s=new $s;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,p,y){const _=new Hw({next:T=>{_.Nu(),c.enqueueAndForget((()=>Ow(l,E)));const M=T.docs.has(f);!M&&T.fromCache?y.reject(new ye(J.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&T.fromCache&&p&&p.source==="server"?y.reject(new ye(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(T)},error:T=>y.reject(T)}),E=new Lw(Nc(f.path),_,{includeMetadataChanges:!0,Ka:!0});return Vw(l,E)})(await af(n),n.asyncQueue,e,t,s))),s.promise}function kR(n,e){const t=new $s;return n.asyncQueue.enqueueAndForget((async()=>fR(await SR(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="ComponentProvider",s_=new Map;function PR(n,e,t,s,o){return new Q1(n,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,Gw(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw="firestore.googleapis.com",i_=!0;class o_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kw,this.ssl=i_}else this.host=e.host,this.ssl=e.ssl??i_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Tw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<rk)throw new ye(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}M1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new o_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new o_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new k1;switch(s.type){case"firstParty":return new N1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=s_.get(t);s&&(ve(RR,"Removing Datastore"),s_.delete(t),s.terminate())})(this),Promise.resolve()}}function xR(n,e,t,s={}){var y;n=Dr(n,jc);const o=Jo(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(j_(`https://${f}`),z_("Firestore",!0)),l.host!==Kw&&l.host!==f&&Ui("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:o,emulatorOptions:s};if(!ss(p,c)&&(n._setSettings(p),s.mockUserToken)){let _,E;if(typeof s.mockUserToken=="string")_=s.mockUserToken,E=an.MOCK_USER;else{_=JT(s.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new ye(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new an(T)}n._authCredentials=new R1(new Nv(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ei(this.firestore,e,this._query)}}class St{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new St(this.firestore,e,this._key)}toJSON(){return{type:St._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(El(t,St._jsonSchema))return new St(e,s||null,new ke(ut.fromString(t.referencePath)))}}St._jsonSchemaVersion="firestore/documentReference/1.0",St._jsonSchema={type:Vt("string",St._jsonSchemaVersion),referencePath:Vt("string")};class Ws extends ei{constructor(e,t,s){super(e,t,Nc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new St(this.firestore,null,new ke(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function NR(n,e,...t){if(n=Ht(n),Dv("collection","path",e),n instanceof jc){const s=ut.fromString(e,...t);return vy(s),new Ws(n,null,s)}{if(!(n instanceof St||n instanceof Ws))throw new ye(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ut.fromString(e,...t));return vy(s),new Ws(n.firestore,null,s)}}function zu(n,e,...t){if(n=Ht(n),arguments.length===1&&(e=Rf.newId()),Dv("doc","path",e),n instanceof jc){const s=ut.fromString(e,...t);return _y(s),new St(n,null,new ke(s))}{if(!(n instanceof St||n instanceof Ws))throw new ye(J.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ut.fromString(e,...t));return _y(s),new St(n.firestore,n instanceof Ws?n.converter:null,new ke(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="AsyncQueue";class l_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Aw(this,"async_queue_retry"),this._c=()=>{const s=Rd();s&&ve(a_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Rd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $s;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ta(e))throw e;ve(a_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,as("INTERNAL UNHANDLED ERROR: ",u_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=qf.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&xe(47125,{Pc:u_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function u_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ko extends jc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new l_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new l_(e),this._firestoreClient=void 0,await e}}}function DR(n,e){const t=typeof n=="object"?n:H_(),s=typeof n=="string"?n:uc,o=gf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=KT("firestore");l&&xR(o,...l)}return o}function Yf(n){if(n._terminated)throw new ye(J.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||bR(n),n._firestoreClient}function bR(n){var s,o,l,c;const e=n._freezeSettings(),t=PR(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,(o=n._app)==null?void 0:o.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new TR(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(Xt.fromBase64String(e))}catch(t){throw new ye(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hn(Xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(El(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Vt("string",Hn._jsonSchemaVersion),bytes:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Lr._jsonSchemaVersion}}static fromJSON(e){if(El(e,Lr._jsonSchema))return new Lr(e.latitude,e.longitude)}}Lr._jsonSchemaVersion="firestore/geoPoint/1.0",Lr._jsonSchema={type:Vt("string",Lr._jsonSchemaVersion),latitude:Vt("number"),longitude:Vt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ur._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(El(e,ur._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ur(e.vectorValues);throw new ye(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ur._jsonSchemaVersion="firestore/vectorValue/1.0",ur._jsonSchema={type:Vt("string",ur._jsonSchemaVersion),vectorValues:Vt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=/^__.*__$/;class OR{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}class Qw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Zs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Jw(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{dataSource:n})}}class zc{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new zc({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return vc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Jw(this.dataSource)&&VR.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class LR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Mc(e)}createContext(e,t,s,o=!1){return new zc({dataSource:e,methodName:t,targetDoc:s,path:Yt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zf(n){const e=n._freezeSettings(),t=Mc(n._databaseId);return new LR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MR(n,e,t,s,o,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,o);np("Data must be an object, but it was:",c,s);const f=Xw(s,c);let p,y;if(l.merge)p=new Vn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const T=Qo(e,E,t);if(!c.contains(T))throw new ye(J.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);tE(_,T)||_.push(T)}p=new Vn(_),y=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=c.fieldTransforms;return new OR(new En(f),p,y)}class Bc extends Al{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bc}}function Yw(n,e,t){return new zc({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ep extends Al{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Yw(this,e,!0),s=this.Ac.map((l=>Hi(l,t))),o=new Wo(s);return new aw(e.path,o)}isEqual(e){return e instanceof ep&&ss(this.Ac,e.Ac)}}class tp extends Al{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=Yw(this,e,!0),s=this.Ac.map((l=>Hi(l,t))),o=new Ho(s);return new aw(e.path,o)}isEqual(e){return e instanceof tp&&ss(this.Ac,e.Ac)}}function FR(n,e,t,s){const o=n.createContext(1,e,t);np("Data must be an object, but it was:",o,s);const l=[],c=En.empty();Xs(s,((p,y)=>{const _=eE(e,p,t);y=Ht(y);const E=o.childContextForFieldPath(_);if(y instanceof Bc)l.push(_);else{const T=Hi(y,E);T!=null&&(l.push(_),c.set(_,T))}}));const f=new Vn(l);return new Qw(c,f,o.fieldTransforms)}function UR(n,e,t,s,o,l){const c=n.createContext(1,e,t),f=[Qo(e,s,t)],p=[o];if(l.length%2!=0)throw new ye(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<l.length;T+=2)f.push(Qo(e,l[T])),p.push(l[T+1]);const y=[],_=En.empty();for(let T=f.length-1;T>=0;--T)if(!tE(y,f[T])){const M=f[T];let B=p[T];B=Ht(B);const $=c.childContextForFieldPath(M);if(B instanceof Bc)y.push(M);else{const L=Hi(B,$);L!=null&&(y.push(M),_.set(M,L))}}const E=new Vn(y);return new Qw(_,E,c.fieldTransforms)}function jR(n,e,t,s=!1){return Hi(t,n.createContext(s?4:3,e))}function Hi(n,e){if(Zw(n=Ht(n)))return np("Unsupported field value:",e,n),Xw(n,e);if(n instanceof Al)return(function(s,o){if(!Jw(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const f of s){let p=Hi(f,o.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=Ht(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return EA(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=mt.fromDate(s);return{timestampValue:mc(o.serializer,l)}}if(s instanceof mt){const l=new mt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:mc(o.serializer,l)}}if(s instanceof Lr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Hn)return{bytesValue:pw(o.serializer,s._byteString)};if(s instanceof St){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Mf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof ur)return(function(c,f){const p=c instanceof ur?c.toArray():c;return{mapValue:{fields:{[zv]:{stringValue:Bv},[cc]:{arrayValue:{values:p.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return Vf(f.serializer,_)}))}}}}}})(s,o);if(Ew(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${kc(s)}`)})(n,e)}function Xw(n,e){const t={};return Ov(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Xs(n,((s,o)=>{const l=Hi(o,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Zw(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof mt||n instanceof Lr||n instanceof Hn||n instanceof St||n instanceof Al||n instanceof ur||Ew(n))}function np(n,e,t){if(!Zw(t)||!bv(t)){const s=kc(t);throw s==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+s)}}function Qo(n,e,t){if((e=Ht(e))instanceof Xf)return e._internalPath;if(typeof e=="string")return eE(n,e);throw vc("Field path arguments must be of type string or ",n,!1,void 0,t)}const zR=new RegExp("[~\\*/\\[\\]]");function eE(n,e,t){if(e.search(zR)>=0)throw vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xf(...e.split("."))._internalPath}catch{throw vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vc(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new ye(J.INVALID_ARGUMENT,f+n+p)}function tE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{convertValue(e,t="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Rt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Xs(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[cc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>Rt(c.doubleValue)));return new ur(t)}convertGeoPoint(e){return new Lr(Rt(e.latitude),Rt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=xc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(cl(e));default:return null}}convertTimestamp(e){const t=qs(e);return new mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ut.fromString(e);st(ww(s),9688,{name:e});const o=new hl(s.get(1),s.get(3)),l=new ke(s.popFirst(5));return o.isEqual(t)||as(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE extends BR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new St(this.firestore,null,t)}}function $R(...n){return new ep("arrayUnion",n)}function WR(...n){return new tp("arrayRemove",n)}const c_="@firebase/firestore",h_="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new St(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Qo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class HR extends rE{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rp{}class sp extends rp{}function GR(n,e,...t){let s=[];e instanceof rp&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((p=>p instanceof op)).length,f=l.filter((p=>p instanceof ip)).length;if(c>1||c>0&&f>0)throw new ye(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class ip extends sp{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new ip(e,t,s)}_apply(e){const t=this._parse(e);return sE(e._query,t),new ei(e.firestore,e.converter,Jd(e._query,t))}_parse(e){const t=Zf(e.firestore);return(function(l,c,f,p,y,_,E){let T;if(y.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ye(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){p_(E,_);const B=[];for(const $ of E)B.push(f_(p,l,$));T={arrayValue:{values:B}}}else T=f_(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||p_(E,_),T=jR(f,c,E,_==="in"||_==="not-in");return bt.create(y,_,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class op extends rp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new op(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:cr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const f=l.getFlattenedFilters();for(const p of f)sE(c,p),c=Jd(c,p)})(e._query,t),new ei(e.firestore,e.converter,Jd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ap extends sp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ap(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new ye(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ye(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fl(l,c)})(e._query,this._field,this._direction);return new ei(e.firestore,e.converter,fA(e._query,t))}}function KR(n,e="asc"){const t=e,s=Qo("orderBy",n);return ap._create(s,t)}class lp extends sp{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new lp(e,t,s)}_apply(e){return new ei(e.firestore,e.converter,dc(e._query,this._limit,this._limitType))}}function QR(n){return F1("limit",n),lp._create("limit",n,"F")}function f_(n,e,t){if(typeof(t=Ht(t))=="string"){if(t==="")throw new ye(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Jv(e)&&t.indexOf("/")!==-1)throw new ye(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ut.fromString(t));if(!ke.isDocumentKey(s))throw new ye(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return ky(n,new ke(s))}if(t instanceof St)return ky(n,t._key);throw new ye(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${kc(t)}.`)}function p_(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sE(n,e){const t=(function(o,l){for(const c of o)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function JR(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oi extends rE{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Qo("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Oi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Oi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oi._jsonSchema={type:Vt("string",Oi._jsonSchemaVersion),bundleSource:Vt("string","DocumentSnapshot"),bundleName:Vt("string"),bundle:Vt("string")};class Xu extends Oi{data(e={}){return super.data(e)}}class Fo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ya(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Xu(this._firestore,this._userDataWriter,s.key,s,new Ya(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const p=new Xu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ya(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new Xu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ya(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,_=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:YR(f.type),doc:p,oldIndex:y,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function YR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:Vt("string",Fo._jsonSchemaVersion),bundleSource:Vt("string","QuerySnapshot"),bundleName:Vt("string"),bundle:Vt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(n){n=Dr(n,St);const e=Dr(n.firestore,Ko),t=Yf(e);return AR(t,n._key).then((s=>aE(e,n,s)))}function xd(n,e,t){n=Dr(n,St);const s=Dr(n.firestore,Ko),o=JR(n.converter,e),l=Zf(s);return oE(s,[MR(l,"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Vr.none())])}function Bu(n,e,t,...s){n=Dr(n,St);const o=Dr(n.firestore,Ko),l=Zf(o);let c;return c=typeof(e=Ht(e))=="string"||e instanceof Xf?UR(l,"updateDoc",n._key,e,t,s):FR(l,"updateDoc",n._key,e),oE(o,[c.toMutation(n._key,Vr.exists(!0))])}function iE(n,...e){var y,_,E;n=Ht(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||d_(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(d_(e[s])){const T=e[s];e[s]=(y=T.next)==null?void 0:y.bind(T),e[s+1]=(_=T.error)==null?void 0:_.bind(T),e[s+2]=(E=T.complete)==null?void 0:E.bind(T)}let l,c,f;if(n instanceof St)c=Dr(n.firestore,Ko),f=Nc(n._key.path),l={next:T=>{e[s]&&e[s](aE(c,n,T))},error:e[s+1],complete:e[s+2]};else{const T=Dr(n,ei);c=Dr(T.firestore,Ko),f=T._query;const M=new nE(c);l={next:B=>{e[s]&&e[s](new Fo(c,M,T,B))},error:e[s+1],complete:e[s+2]},qR(n._query)}const p=Yf(c);return CR(p,f,o,l)}function oE(n,e){const t=Yf(n);return kR(t,e)}function aE(n,e,t){const s=t.docs.get(e._key),o=new nE(n);return new Oi(n,o,e._key,s,new Ya(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){A1(Yo),Uo(new Li("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new Ko(new P1(s.getProvider("auth-internal")),new D1(c,s.getProvider("app-check-internal")),J1(c,o),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),zs(c_,h_,e),zs(c_,h_,"esm2020")})();const XR={apiKey:"AIzaSyA8xoktIzGgpPEklg_e_vWgkMU6E3Bjlkw",authDomain:"color-73b3e.firebaseapp.com",projectId:"color-73b3e",storageBucket:"color-73b3e.firebasestorage.app",messagingSenderId:"450293394727",appId:"1:450293394727:web:8486e1ff4d1c083275cd02"},lE=W_(XR),Nd=T1(lE),Xa=DR(lE),ZR=new ts,uE=D.createContext({user:null,loading:!0,signIn:async()=>{},signOut:async()=>{}});function eP({children:n}){const[e,t]=D.useState(null),[s,o]=D.useState(!0);D.useEffect(()=>cC(Nd,f=>{t(f),o(!1)}),[]);const l=async()=>{await NC(Nd,ZR)},c=async()=>{await hC(Nd)};return A.jsx(uE.Provider,{value:{user:e,loading:s,signIn:l,signOut:c},children:n})}function cE(){return D.useContext(uE)}const up="/4color/";function lf(n,e){return Array.from({length:n},()=>Array.from({length:e},()=>({value:null,notes:[],fixedValue:null,fixedColor:null,borders:[0,0,0,0],fixedBorders:[0,0,0,0],color:null,label:null,crossed:!1,mark:null,selected:!1,image:null})))}function tP(n,e){var f;const t=new Map;let s=0;for(const p of n)for(const y of p)y.image&&!t.has(y.image)&&t.set(y.image,`img${s++}`);const o=[];for(let p=0;p<n.length;p++)for(let y=0;y<n[p].length;y++){const _=n[p][y],E=_.borders.some(T=>T>0);if(_.fixedValue||_.fixedColor||_.color||E||_.label||_.crossed||_.mark||_.image){const T={row:p,col:y};_.fixedValue&&(T.fixedValue=_.fixedValue),_.fixedColor&&(T.fixedColor=_.fixedColor),_.color&&(T.color=_.color),E&&(T.borders=_.borders),_.label&&(T.label=_.label),_.crossed&&(T.crossed=_.crossed),_.mark&&(T.mark=_.mark),_.image&&(T.image=t.get(_.image)),o.push(T)}}const l={};for(const[p,y]of t)l[y]=p;const c={...e,gridSize:{rows:n.length,cols:n[0].length},cells:o,rules:e.rules,clues:e.clues,createdAt:new Date().toISOString().split("T")[0]};return Object.keys(l).length>0&&(c.images=l),(f=e.autoCrossRules)!=null&&f.length&&(c.autoCrossRules=e.autoCrossRules),c}function uf(n){const e=lf(n.gridSize.rows,n.gridSize.cols),t=n.images||{};for(const s of n.cells)s.fixedValue&&(e[s.row][s.col].fixedValue=s.fixedValue),s.fixedColor&&(e[s.row][s.col].fixedColor=s.fixedColor),s.color&&(e[s.row][s.col].color=s.color),s.borders&&(e[s.row][s.col].borders=s.borders,e[s.row][s.col].fixedBorders=[...s.borders]),s.label&&(e[s.row][s.col].label=s.label),s.crossed&&(e[s.row][s.col].crossed=s.crossed),s.mark&&(e[s.row][s.col].mark=s.mark),s.image&&(e[s.row][s.col].image=t[s.image]??s.image);return e}function nP(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`${n.id}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(s),1e3)}async function cp(){const n=await fetch(`${up}puzzles/index.json`);return n.ok?n.json():[]}function rP(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`${n.id}-solution.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(s),1e3)}async function hE(n){try{const e=await fetch(`${up}puzzles/solutions/${n}-solution.json`);if(!e.ok)return null;const t=await e.text();return JSON.parse(t)}catch{return null}}async function dE(n){const t=(await cp()).find(l=>l.id===n),s=(t==null?void 0:t.file)??`${n}.json`,o=await fetch(`${up}puzzles/${s}`);return o.ok?o.json():null}const g_="4color-theme";function hp(){const[n,e]=D.useState(()=>{const s=localStorage.getItem(g_);return s==="dark"||s==="light"?s:"light"});return D.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),localStorage.setItem(g_,n)},[n]),{theme:n,toggle:()=>e(s=>s==="light"?"dark":"light")}}function fE(){const{user:n}=cE(),[e,t]=D.useState(new Set),[s,o]=D.useState(""),l=D.useRef(e);l.current=e,D.useEffect(()=>{if(!n){t(new Set),o("");return}const y=zu(Xa,"completions_index",n.uid);return iE(y,_=>{if(_.exists()){const E=_.data(),T=E.puzzleIds||[];t(new Set(T)),o(E.displayName||n.displayName||""),E.count!==T.length&&Bu(y,{count:T.length}).catch(()=>{})}else t(new Set),o(n.displayName||"")},()=>{t(new Set),o(n.displayName||"")})},[n]);const c=D.useCallback(async y=>{if(!n||l.current.has(y))return;const _=zu(Xa,"completions_index",n.uid);try{const E=await m_(_);if(E.exists()){const T=E.data().puzzleIds||[];if(T.includes(y))return;await Bu(_,{puzzleIds:$R(y),count:T.length+1})}else{const T=n.displayName||"Anonymous";await xd(_,{uid:n.uid,puzzleIds:[y],count:1,displayName:T})}}catch{const E=n.displayName||"Anonymous";await xd(_,{uid:n.uid,puzzleIds:[y],count:1,displayName:E}).catch(()=>{})}},[n]),f=D.useCallback(async y=>{if(!n||!l.current.has(y))return;const _=zu(Xa,"completions_index",n.uid);try{const E=await m_(_);if(E.exists()){const T=E.data().puzzleIds||[],M=Math.max(0,T.filter(B=>B!==y).length);await Bu(_,{puzzleIds:WR(y),count:M})}}catch{}},[n]),p=D.useCallback(async y=>{if(!n)return;const _=y.trim();if(!_)return;const E=zu(Xa,"completions_index",n.uid);try{await Bu(E,{displayName:_})}catch{await xd(E,{uid:n.uid,puzzleIds:[],count:0,displayName:_})}},[n]);return{completedPuzzleIds:e,displayName:s,setDisplayName:p,markCompleted:c,unmarkCompleted:f}}function sP(n=10){const[e,t]=D.useState([]);return D.useEffect(()=>{const s=GR(NR(Xa,"completions_index"),KR("count","desc"),QR(n));return iE(s,o=>{const l=[];o.forEach(c=>{const f=c.data();f.count>0&&l.push({uid:c.id,displayName:f.displayName||"Anonymous",count:f.count})}),t(l)},()=>{t([])})},[n]),e}function dp(){const[n,e]=D.useState({open:!1,message:"",hasCancel:!1}),t=D.useRef(null),s=D.useCallback(f=>{var p;e(y=>({...y,open:!1})),(p=t.current)==null||p.call(t,f),t.current=null},[]),o=D.useCallback((f,p)=>new Promise(y=>{var _;(_=t.current)==null||_.call(t,!1),t.current=()=>y(),e({open:!0,message:f,title:p,hasCancel:!1})}),[]),l=D.useCallback((f,p,y,_)=>new Promise(E=>{var T;(T=t.current)==null||T.call(t,!1),t.current=E,e({open:!0,message:f,title:p,confirmLabel:y,cancelLabel:_,hasCancel:!0})}),[]);return{modalProps:{open:n.open,title:n.title,message:n.message,confirmLabel:n.confirmLabel,cancelLabel:n.cancelLabel,onConfirm:()=>s(!0),onCancel:n.hasCancel?()=>s(!1):void 0},showAlert:o,showConfirm:l}}function fp({open:n,title:e,message:t,confirmLabel:s="OK",cancelLabel:o="Cancel",onConfirm:l,onCancel:c}){const f=D.useCallback(()=>{c?c():l()},[c,l]);return D.useEffect(()=>{if(!n)return;const p=y=>{y.key==="Escape"&&f()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[n,f]),n?A.jsx("div",{className:"modal-backdrop",onMouseDown:f,children:A.jsxs("div",{className:"modal-card",onMouseDown:p=>p.stopPropagation(),children:[e&&A.jsx("h3",{className:"modal-title",children:e}),A.jsx("p",{className:"modal-message",children:t}),A.jsxs("div",{className:"modal-actions",children:[c&&A.jsx("button",{className:"modal-btn",onClick:c,children:o}),A.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:l,children:s})]})]})}):null}function iP(){const n=new URLSearchParams(window.location.hash.split("?")[1]||"").get("debug")==="true",{theme:e,toggle:t}=hp(),{user:s,signIn:o,signOut:l}=cE(),{completedPuzzleIds:c,displayName:f,setDisplayName:p}=fE(),y=sP(10),{modalProps:_,showConfirm:E}=dp(),[T,M]=D.useState(!1),[B,$]=D.useState(""),[L,te]=D.useState([]),[se,ae]=D.useState(!0),[oe,me]=D.useState(new Set),[ne,N]=D.useState("or"),[S,R]=D.useState(new Set),[P,x]=D.useState(!1);D.useEffect(()=>{cp().then(G=>{te(G),ae(!1)})},[]);const V=D.useMemo(()=>{const G=new Set;for(const Q of L)for(const Z of Q.tags||[])G.add(Z);return[...G].sort()},[L]),C=D.useMemo(()=>{const G=["Very easy","Easy","Medium","Hard","Very hard"],Q=new Set;for(const de of L)de.difficulty&&Q.add(de.difficulty);const Z=G.filter(de=>Q.has(de));for(const de of Q)Z.includes(de)||Z.push(de);return Z},[L]),Ne=D.useMemo(()=>{let G=L;return oe.size>0&&(G=G.filter(Q=>{const Z=Q.tags||[];return ne==="or"?Z.some(de=>oe.has(de)):[...oe].every(de=>Z.includes(de))})),S.size>0&&(G=G.filter(Q=>Q.difficulty!=null&&S.has(Q.difficulty))),P&&(G=G.filter(Q=>!c.has(Q.id))),G},[L,oe,ne,S,P,c]),$e=G=>{me(Q=>{const Z=new Set(Q);return Z.has(G)?Z.delete(G):Z.add(G),Z})},Ae=G=>{R(Q=>{const Z=new Set(Q);return Z.has(G)?Z.delete(G):Z.add(G),Z})};return A.jsxs("div",{className:"puzzle-list-layout",children:[A.jsxs("aside",{className:"puzzle-list-sidebar",children:[A.jsx("div",{className:"sidebar-section",children:s?A.jsx("button",{className:"auth-btn auth-btn-full",onClick:()=>{$(f),M(!0)},children:f||s.displayName||"User"}):A.jsx("button",{className:"auth-btn auth-btn-full",onClick:o,children:"Sign in with Google"})}),A.jsxs("div",{className:"sidebar-section",children:[A.jsx("h3",{className:"sidebar-title",children:"Leaderboard"}),y.length===0?A.jsx("p",{className:"sidebar-empty",children:"No completions yet"}):A.jsx("ol",{className:"leaderboard-list",children:y.map((G,Q)=>A.jsxs("li",{className:`leaderboard-entry${s&&G.uid===s.uid?" leaderboard-self":""}`,children:[A.jsxs("span",{className:"leaderboard-rank",children:[Q+1,"."]}),A.jsx("span",{className:"leaderboard-name",children:G.displayName}),A.jsx("span",{className:"leaderboard-count",children:G.count})]},G.uid))})]})]}),A.jsxs("div",{className:"puzzle-list-main",children:[A.jsxs("div",{className:"puzzle-list-header",children:[A.jsx("h1",{children:"4Color Puzzles"}),A.jsx("button",{className:"puzzle-list-theme-btn",onClick:t,title:"Toggle theme",children:e==="light"?"":""})]}),A.jsx("div",{className:"puzzle-list-actions",children:A.jsx(Do,{to:"/edit",className:"new-puzzle-btn",children:"Create New Puzzle"})}),(V.length>0||C.length>0)&&A.jsxs("div",{className:"filter-bars",children:[A.jsxs("div",{className:"tag-filter-bar",children:[c.size>0&&A.jsxs(A.Fragment,{children:[A.jsx("button",{className:`tag-chip${P?" selected":""}`,onClick:()=>x(G=>!G),children:"Hide completed"}),C.length>0&&A.jsx("span",{className:"filter-separator",children:"|"})]}),C.map(G=>A.jsx("button",{className:`tag-chip difficulty${S.has(G)?" selected":""}`,onClick:()=>Ae(G),children:G},G))]}),V.length>0&&A.jsxs("div",{className:"tag-filter-bar",children:[V.map(G=>A.jsx("button",{className:`tag-chip${oe.has(G)?" selected":""}`,onClick:()=>$e(G),children:G},G)),oe.size>=2&&A.jsx("button",{className:"tag-mode-toggle",onClick:()=>N(G=>G==="or"?"and":"or"),title:ne==="or"?"Showing puzzles matching ANY tag":"Showing puzzles matching ALL tags",children:ne.toUpperCase()})]})]}),se?A.jsx("p",{children:"Loading puzzles..."}):L.length===0?A.jsxs("p",{className:"empty-state",children:["No puzzles yet. ",A.jsx(Do,{to:"/edit",children:"Create one"})," to get started!"]}):A.jsx("div",{className:"puzzle-cards",children:Ne.map(G=>A.jsxs("div",{className:"puzzle-card-row",children:[A.jsxs(Do,{to:`/play/${G.id}`,className:`puzzle-card${c.has(G.id)?" puzzle-completed":""}`,children:[A.jsxs("h3",{children:[G.title,c.has(G.id)&&A.jsx("span",{className:"completed-badge",title:"Completed",children:""})]}),G.difficulty&&A.jsx("p",{className:"puzzle-difficulty",children:G.difficulty}),A.jsxs("p",{className:"puzzle-meta",children:["by ",G.author,"  ",G.gridSize.rows,"",G.gridSize.cols]}),G.tags&&G.tags.length>0&&A.jsx("div",{className:"puzzle-tags",children:G.tags.map(Q=>A.jsx("span",{className:"puzzle-tag",children:Q},Q))})]}),n&&A.jsx(Do,{to:`/edit/${G.id}`,className:"puzzle-edit-btn",title:"Edit puzzle",children:""})]},G.id))})]}),T&&s&&A.jsx("div",{className:"modal-backdrop",onClick:()=>M(!1),children:A.jsxs("div",{className:"modal-card",onClick:G=>G.stopPropagation(),children:[A.jsx("h2",{className:"modal-title",children:"Account"}),A.jsxs("p",{className:"account-info",children:["Signed in with Google as ",s.email]}),A.jsxs("div",{className:"account-name-field",children:[A.jsx("label",{children:"Display name"}),A.jsx("input",{value:B,onChange:G=>$(G.target.value),onKeyDown:G=>{G.key==="Enter"&&B.trim()&&(p(B.trim()),M(!1))},placeholder:s.displayName||"Enter a name"})]}),A.jsxs("div",{className:"modal-actions",children:[A.jsx("button",{className:"modal-btn",onClick:()=>{B.trim()&&p(B.trim()),M(!1)},children:"Save"}),A.jsx("button",{className:"modal-btn modal-btn-danger",onClick:async()=>{M(!1),await E("Are you sure you want to sign out?","Sign Out","Sign out","Cancel")&&l()},children:"Sign out"})]})]})}),A.jsx(fp,{..._})]})}function y_(n,e){const t=n.map(l=>l.map(c=>({...c}))),s=2,o=new Set(e.map(l=>`${l.row},${l.col}`));for(const l of e){const c=t[l.row][l.col].fixedBorders;t[l.row][l.col].borders=[c[0]>0?c[0]:o.has(`${l.row-1},${l.col}`)?0:s,c[1]>0?c[1]:o.has(`${l.row},${l.col+1}`)?0:s,c[2]>0?c[2]:o.has(`${l.row+1},${l.col}`)?0:s,c[3]>0?c[3]:o.has(`${l.row},${l.col-1}`)?0:s]}return t}function oP(n,e,t,s){const o=[];for(let l=0;l<t;l++)l!==n&&o.push({row:l,col:e});for(let l=0;l<s;l++)l!==e&&o.push({row:n,col:l});return o}function aP(n,e,t,s){const o=[],l=[[-1,-1],[-1,1],[1,-1],[1,1]];for(const[c,f]of l){let p=n+c,y=e+f;for(;p>=0&&p<t&&y>=0&&y<s;)o.push({row:p,col:y}),p+=c,y+=f}return o}function lP(n,e,t,s){const o=[];for(let l=-1;l<=1;l++)for(let c=-1;c<=1;c++){if(l===0&&c===0)continue;const f=n+l,p=e+c;f>=0&&f<t&&p>=0&&p<s&&o.push({row:f,col:p})}return o}function uP(n,e,t,s){const o=[],l=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[c,f]of l){const p=n+c,y=e+f;p>=0&&p<t&&y>=0&&y<s&&o.push({row:p,col:y})}return o}function cP(n,e,t,s){if(e.length===0)return[];const o=new Set(e),l=new Set,c=[];for(const f of n)l.add(`${f.row},${f.col}`);for(const f of n){const p=[];o.has("rook")&&p.push(...oP(f.row,f.col,t,s)),o.has("bishop")&&p.push(...aP(f.row,f.col,t,s)),o.has("king")&&p.push(...lP(f.row,f.col,t,s)),o.has("knight")&&p.push(...uP(f.row,f.col,t,s));for(const y of p){const _=`${y.row},${y.col}`;l.has(_)||(l.add(_),c.push(y))}}return c}const hP=16,Pi=500;function Nt(n){return n.map(e=>e.map(t=>({...t,notes:[...t.notes],borders:[...t.borders],fixedBorders:[...t.fixedBorders]})))}function xi(n){return n.map(e=>e.map(t=>({...t,selected:!1,notes:[...t.notes],borders:[...t.borders],fixedBorders:[...t.fixedBorders]})))}function pE(n,e){const[t,s]=D.useState(()=>lf(n,e)),o=D.useRef(t);o.current=t;const[l,c]=D.useState([]),[f,p]=D.useState("normal"),y=D.useRef([]),_=D.useRef([]),E=D.useRef(!0),T=D.useRef(!1),M=D.useRef(null),B=D.useRef(!1),$=D.useRef(!1),L=D.useRef(null),te=D.useRef(!1),se=D.useRef(null),[ae,oe]=D.useState(null),[me,ne]=D.useState(null),N=D.useRef([]),S=D.useCallback(ue=>{N.current=ue},[]),R=D.useCallback(ue=>{p(ue),ue!=="color"&&ue!=="fixedColor"&&oe(null),ue!=="mark"&&ne(null)},[]),P=D.useCallback(ue=>{y.current.push(xi(o.current)),y.current.length>Pi&&y.current.shift(),_.current=[],s(H=>typeof ue=="function"?ue(H):ue)},[]),x=D.useCallback(()=>{const ue=y.current.pop();ue&&(_.current.push(xi(o.current)),_.current.length>Pi&&_.current.shift(),s(ue),c([]))},[]),V=D.useCallback(()=>{const ue=_.current.pop();ue&&(y.current.push(xi(o.current)),y.current.length>Pi&&y.current.shift(),s(ue),c([]))},[]),C=D.useCallback(()=>{s(ue=>ue.map(H=>H.map(ce=>({...ce,selected:!1})))),c([])},[]),Ne=D.useCallback(ue=>{if(ue.length!==0){if((f==="color"||f==="fixedColor")&&ae!==null){const H=f==="fixedColor"?"fixedColor":"color",ce=ae==="0";s(we=>{$.current||($.current=!0,y.current.push(xi(we)),y.current.length>Pi&&y.current.shift(),_.current=[],ce?L.current=null:L.current=we[ue[0].row][ue[0].col][H]===ae?null:ae);const fe=L.current;if(!ue.some(Ze=>we[Ze.row][Ze.col][H]!==fe))return we;const qe=Nt(we);for(const Ze of ue)qe[Ze.row][Ze.col][H]=fe;return qe});return}if(f==="cross"){s(H=>{T.current||(T.current=!0,y.current.push(xi(H)),y.current.length>Pi&&y.current.shift(),_.current=[],E.current=!H[ue[0].row][ue[0].col].crossed);const ce=ue.filter(Ie=>!H[Ie.row][Ie.col].value&&!H[Ie.row][Ie.col].fixedValue&&!H[Ie.row][Ie.col].mark);if(!ce.some(Ie=>H[Ie.row][Ie.col].crossed!==E.current))return H;const fe=Nt(H);for(const Ie of ce)fe[Ie.row][Ie.col].crossed=E.current;return fe});return}if(f==="mark"&&me!==null){s(H=>{te.current||(te.current=!0,y.current.push(xi(H)),y.current.length>Pi&&y.current.shift(),_.current=[],se.current=H[ue[0].row][ue[0].col].mark===me?null:me);const ce=se.current,we=ue.filter(qe=>!H[qe.row][qe.col].crossed&&!H[qe.row][qe.col].value&&!H[qe.row][qe.col].fixedValue&&H[qe.row][qe.col].notes.length===0);if(!we.some(qe=>H[qe.row][qe.col].mark!==ce))return H;const Ie=Nt(H);for(const qe of we)Ie[qe.row][qe.col].mark=ce;return Ie});return}if(f==="border"){s(H=>{if(!M.current){M.current=Nt(H),y.current.push(xi(H)),y.current.length>Pi&&y.current.shift(),_.current=[];const we=M.current[ue[0].row][ue[0].col];B.current=we.borders.some((fe,Ie)=>fe>0&&we.fixedBorders[Ie]===0)}const ce=M.current;if(B.current){const we=Nt(ce);for(const fe of ue){const Ie=we[fe.row][fe.col].fixedBorders;we[fe.row][fe.col].borders=[...Ie]}return we}else return y_(ce,ue)});return}}},[f,ae,me]),$e=D.useCallback(ue=>{if((f==="color"||f==="fixedColor")&&ae!==null){$.current=!1;return}if(f==="cross"){T.current=!1;return}if(f==="mark"&&me!==null){te.current=!1;return}if(f==="border"){M.current=null;return}s(H=>{var we;const ce=H.map(fe=>fe.map(Ie=>({...Ie})));for(const fe of ue)(we=ce[fe.row])!=null&&we[fe.col]&&(ce[fe.row][fe.col].selected=!0);return ce}),c(ue)},[f,ae,me,P]),Ae=D.useCallback(ue=>{l.length!==0&&P(H=>{const ce=Nt(H),fe=l.every(qe=>ce[qe.row][qe.col].value===ue)?null:ue;for(const qe of l)ce[qe.row][qe.col].value=fe;const Ie=N.current;if(fe!==null&&Ie.length>0){const qe=ce.length,Ze=ce[0].length,ct=cP(l,Ie,qe,Ze);for(const Zt of ct){const On=ce[Zt.row][Zt.col];!On.value&&!On.fixedValue&&!On.mark&&(On.crossed=!0)}}return ce})},[l,P]),G=D.useCallback(ue=>{l.length!==0&&P(H=>{const ce=Nt(H),we=l.every(fe=>ce[fe.row][fe.col].color===ue);for(const fe of l)ce[fe.row][fe.col].color=we?null:ue;return ce})},[l,P]),Q=D.useCallback(()=>{if(l.length===0)return;const ue=f==="fixedColor"?"fixedColor":"color";P(H=>{const ce=Nt(H);for(const we of l)ce[we.row][we.col][ue]=null;return ce})},[l,f,P]),Z=D.useCallback(ue=>{l.length!==0&&P(H=>{const ce=Nt(H),we=l.every(fe=>ce[fe.row][fe.col].fixedValue===ue);for(const fe of l)ce[fe.row][fe.col].fixedValue=we?null:ue;return ce})},[l,P]),de=D.useCallback(ue=>{l.length!==0&&P(H=>{const ce=Nt(H),we=l.every(fe=>ce[fe.row][fe.col].fixedColor===ue);for(const fe of l)ce[fe.row][fe.col].fixedColor=we?null:ue;return ce})},[l,P]),F=D.useCallback(ue=>{l.length!==0&&P(H=>{const ce=Nt(H);for(const we of l){const fe=ce[we.row][we.col],Ie=fe.notes.indexOf(ue);Ie!==-1?fe.notes.splice(Ie,1):fe.notes.length<hP&&fe.notes.push(ue)}return ce})},[l,P]),Y=D.useCallback((ue,H)=>{if(l.length===0)return;const ce=l[0];P(we=>{var qe,Ze;const fe=Nt(we),Ie=fe[ce.row][ce.col];return((qe=Ie.label)==null?void 0:qe.text)===ue&&((Ze=Ie.label)==null?void 0:Ze.align)===H?Ie.label=null:Ie.label={text:ue,align:H},fe})},[l,P]),De=D.useCallback(()=>{l.length!==0&&P(ue=>{const H=Nt(ue);for(const ce of l)H[ce.row][ce.col].label=null;return H})},[l,P]),Oe=D.useCallback(()=>{l.length!==0&&P(ue=>{const H=Nt(ue),ce=l.filter(fe=>!H[fe.row][fe.col].value&&!H[fe.row][fe.col].fixedValue&&!H[fe.row][fe.col].mark);if(ce.length===0)return ue;const we=ce.every(fe=>H[fe.row][fe.col].crossed);for(const fe of ce)H[fe.row][fe.col].crossed=!we;return H})},[l,P]),ze=D.useCallback(ue=>{l.length!==0&&P(H=>{const ce=Nt(H),we=l.filter(Ie=>!ce[Ie.row][Ie.col].crossed&&!ce[Ie.row][Ie.col].value&&!ce[Ie.row][Ie.col].fixedValue&&ce[Ie.row][Ie.col].notes.length===0);if(we.length===0)return H;const fe=we.every(Ie=>ce[Ie.row][Ie.col].mark===ue);for(const Ie of we)ce[Ie.row][Ie.col].mark=fe?null:ue;return ce})},[l,P]),Ue=D.useCallback(()=>{l.length!==0&&P(ue=>{const H=Nt(ue);for(const ce of l)H[ce.row][ce.col].mark=null;return H})},[l,P]),Je=D.useCallback(ue=>{l.length!==0&&P(H=>{const ce=Nt(H),we=l.every(fe=>ce[fe.row][fe.col].image===ue);for(const fe of l)ce[fe.row][fe.col].image=we?null:ue;return ce})},[l,P]),He=D.useCallback(()=>{l.length!==0&&P(ue=>{const H=Nt(ue);for(const ce of l)H[ce.row][ce.col].image=null;return H})},[l,P]),nt=D.useCallback(()=>{l.length!==0&&P(ue=>{const H=Nt(ue);for(const ce of l){const we=H[ce.row][ce.col];we.value=null,we.notes=[],we.color=null,we.crossed=!1,we.mark=null,we.borders=[...we.fixedBorders]}return H})},[l,P]),Lt=D.useCallback(()=>{l.length!==0&&P(ue=>{if(l.some(ce=>{const we=ue[ce.row][ce.col];return we.borders.some((fe,Ie)=>fe>0&&we.fixedBorders[Ie]===0)})){const ce=Nt(ue);for(const we of l){const fe=ce[we.row][we.col].fixedBorders;ce[we.row][we.col].borders=[...fe]}return ce}else return y_(ue,l)})},[l,P]),Tn=D.useCallback((ue,H)=>{y.current=[],s(lf(ue,H)),c([])},[]);return{grid:t,setGrid:s,selection:l,setSelection:c,inputMode:f,setInputMode:R,activeColor:ae,setActiveColor:oe,activeMark:me,setActiveMark:ne,clearSelection:C,commitSelection:$e,onDragChange:Ne,applyValue:Ae,applyColor:G,eraseColor:Q,applyFixedValue:Z,applyFixedColor:de,addNote:F,applyLabel:Y,removeLabel:De,toggleCross:Oe,toggleMark:ze,eraseMark:Ue,applyImage:Je,removeImage:He,clearValues:nt,applyBorders:Lt,resetGrid:Tn,setAutoCrossRules:S,undo:x,redo:V}}function dP(n){return n.startsWith("Digit")?n.charAt(5):n.startsWith("Key")?n.charAt(3).toUpperCase():null}function fP(n){return n.key.length===1&&!n.ctrlKey&&!n.altKey&&!n.metaKey?n.key.toUpperCase():null}function mE(n){D.useEffect(()=>{const e=t=>{var o,l,c,f,p,y,_,E,T;if(t.target.tagName==="INPUT")return;if((t.ctrlKey||t.metaKey)&&t.key==="z"){t.preventDefault(),n.undo();return}if((t.ctrlKey||t.metaKey)&&t.key==="y"){t.preventDefault(),n.redo();return}if(t.key==="Delete"||t.key==="Backspace"){t.preventDefault(),n.clearValues();return}if(t.key==="Enter"){t.preventDefault(),(o=n.onEnter)==null||o.call(n);return}const s=fP(t);if(s){if(t.preventDefault(),t.shiftKey){const M=dP(t.code);M&&n.addNote(M);return}switch(n.inputMode){case"normal":n.applyValue(s);break;case"color":s==="0"?((l=n.onActiveColorChange)==null||l.call(n,s),(c=n.eraseColor)==null||c.call(n)):s>="1"&&s<="9"&&((f=n.onActiveColorChange)==null||f.call(n,s),n.applyColor(s));break;case"fixed":n.applyFixedValue(s);break;case"fixedColor":s==="0"?((p=n.onActiveColorChange)==null||p.call(n,s),(y=n.eraseColor)==null||y.call(n)):s>="1"&&s<="9"&&((_=n.onActiveColorChange)==null||_.call(n,s),n.applyFixedColor(s));break;case"note":n.addNote(s);break;case"mark":{const M=["circle","square","triangle","diamond","pentagon","hexagon"],B=parseInt(s)-1;if(B>=0&&B<M.length){const $=M[B];(E=n.onActiveMarkChange)==null||E.call(n,$),(T=n.toggleMark)==null||T.call(n,$)}break}}}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[n.inputMode,n.applyValue,n.applyColor,n.applyFixedValue,n.applyFixedColor,n.addNote,n.clearValues,n.eraseColor,n.undo,n.redo,n.onEnter,n.onActiveColorChange,n.onActiveMarkChange,n.toggleMark])}function pP(n){const e=D.useRef(!1),t=D.useRef([]),s=D.useRef(!1),o=D.useCallback(_=>{var $;let E;if("touches"in _&&_.touches.length>0){const L=_.touches[0];E=document.elementFromPoint(L.clientX,L.clientY)}else if("target"in _)for(E=_.target;E&&E.tagName!=="TD";)E=E.parentElement;else return null;if(!E||E.tagName!=="TD")return null;const T=E,M=($=T.parentElement)==null?void 0:$.rowIndex,B=T.cellIndex;return M==null||B==null||M<0||B<0?null:{row:M,col:B}},[]),l=D.useCallback(_=>{if(_.button!==0||_.target.closest(".toolbar"))return;_.preventDefault(),s.current=_.ctrlKey,_.ctrlKey||n.onSelectionStart();const E=o(_);E&&(e.current=!0,t.current=[E],n.onSelectionChange([E]))},[o,n]),c=D.useCallback(_=>{if(!e.current)return;_.preventDefault();const E=o(_);E&&(t.current.some(T=>T.row===E.row&&T.col===E.col)||(t.current=[...t.current,E],n.onSelectionChange(t.current)))},[o,n]),f=D.useCallback(()=>{e.current&&(e.current=!1,n.onSelectionEnd(t.current))},[n]),p=D.useCallback(_=>{if(_.target.closest(".toolbar"))return;_.preventDefault(),n.onSelectionStart();const E=o(_);E&&(e.current=!0,t.current=[E],n.onSelectionChange([E]))},[o,n]),y=D.useCallback(_=>{if(!e.current)return;_.preventDefault();const E=o(_);E&&(t.current.some(T=>T.row===E.row&&T.col===E.col)||(t.current=[...t.current,E],n.onSelectionChange(t.current)))},[o,n]);return{handleCellMouseDown:l,handleCellMouseMove:c,handleMouseUp:f,handleTouchStart:p,handleTouchMove:y,ctrlHeld:s}}const mP={circle:"M25,8 a17,17 0 1,0 0.001,0 Z",square:"M8,8 h34 v34 h-34 Z",triangle:"M25,6 L44,42 L6,42 Z",diamond:"M25,6 L44,25 L25,44 L6,25 Z",pentagon:"M25,6 L43,20 L36,42 L14,42 L7,20 Z",hexagon:"M25,6 L41,15.5 L41,34.5 L25,44 L9,34.5 L9,15.5 Z"},gP=hf.memo(function({data:e,beingSelected:t,debug:s,row:o,col:l}){const{selected:c,value:f,notes:p,fixedValue:y,fixedColor:_,color:E,borders:T,label:M,crossed:B,mark:$,image:L}=e;let te="grid-cell cell-enabled";c&&(te+=" cell-selected"),t&&(te+=" cell-being-selected");let se="cell-inner";_?se+=` color${_}`:E&&(se+=` color${E}`),y&&(se+=" cell-fixed-value");const ae={borderTopWidth:`${T[0]}px`,borderRightWidth:`${T[1]}px`,borderBottomWidth:`${T[2]}px`,borderLeftWidth:`${T[3]}px`},oe=y||f||"",me=p.length>0;return A.jsx("td",{className:te,children:A.jsxs("div",{className:se,style:ae,children:[L&&A.jsx("img",{src:L,className:"cell-image",alt:"",draggable:!1}),B&&A.jsx("span",{className:"cell-cross",children:""}),$&&A.jsx("span",{className:"cell-mark","aria-hidden":"true",children:A.jsx("svg",{viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:A.jsx("path",{d:mP[$],fill:"none",stroke:"currentColor",strokeWidth:"2.5"})})}),me&&!oe&&!B?A.jsx("div",{className:"notes-grid",children:p.map((ne,N)=>A.jsx("span",{className:"note-item",children:ne},N))}):!B&&oe&&A.jsx("span",{className:"cell-value",children:oe}),M&&A.jsx("span",{className:`cell-label cell-label-${M.align}`,children:M.text}),s&&A.jsxs("span",{className:"debug-overlay",children:[o,",",l]})]})})});function gE({grid:n,selection:e,debug:t,inputMode:s,activeColor:o,activeMark:l,clearSelection:c,commitSelection:f,onDragChange:p}){const y=D.useRef([]),[,_]=D.useState(0),E=(s==="color"||s==="fixedColor")&&o!==null,T=s==="mark"&&l!=null,M=s==="cross"||s==="border"||E||T,B=pP({onSelectionStart:()=>{c(),y.current=[]},onSelectionChange:$=>{y.current=$,M?p==null||p($):_(L=>L+1)},onSelectionEnd:$=>{y.current=[],f($)}});return D.useEffect(()=>{const $=()=>B.handleMouseUp();return window.addEventListener("mouseup",$),window.addEventListener("touchend",$),()=>{window.removeEventListener("mouseup",$),window.removeEventListener("touchend",$)}},[B.handleMouseUp]),A.jsx("div",{className:"grid-container",children:A.jsx("table",{className:"puzzle-grid",onMouseDown:B.handleCellMouseDown,onMouseMove:B.handleCellMouseMove,onTouchStart:B.handleTouchStart,onTouchMove:B.handleTouchMove,children:A.jsx("tbody",{children:n.map(($,L)=>A.jsx("tr",{children:$.map((te,se)=>A.jsx(gP,{data:te,row:L,col:se,debug:t,beingSelected:!M&&y.current.some(ae=>ae.row===L&&ae.col===se)},se))},L))})})})}const yP=[{mode:"normal",label:"Normal"},{mode:"note",label:"Note (Shift+Key)"},{mode:"color",label:"Color"},{mode:"cross",label:"X Cross"},{mode:"border",label:"Border"},{mode:"mark",label:"Marks"}],_P=["circle","square","triangle","diamond","pentagon","hexagon"],vP={circle:"",square:"",triangle:"",diamond:"",pentagon:"",hexagon:""},wP=[{mode:"fixed",label:"Fixed Normal"},{mode:"fixedColor",label:"Fixed Color"},{mode:"label",label:"Label"}];function yE({inputMode:n,onInputModeChange:e,onColorSelect:t,onColorErase:s,activeColor:o=null,onActiveColorChange:l,onLabelApply:c,onLabelRemove:f,onUndo:p,onRedo:y,onErase:_,isEditor:E=!1,theme:T,onThemeToggle:M,imageLibrary:B=[],selectedImageIndex:$=null,onImageSelect:L,onImageApply:te,onImageRemove:se,onImageImport:ae,activeMark:oe=null,onActiveMarkChange:me,onMarkSelect:ne,onMarkErase:N,onSubmit:S}){const R=n==="color"||n==="fixedColor",P=n==="label",[x,V]=D.useState(""),[C,Ne]=D.useState("top"),$e=Ae=>A.jsx("button",{className:`tb-btn ${n===Ae.mode?"selected":""}`,onClick:()=>e(Ae.mode),children:Ae.label},Ae.mode);return A.jsxs("div",{className:"toolbar",children:[A.jsxs("div",{className:"tb-section",children:[A.jsx("div",{className:"tb-section-title",children:"Input Mode"}),yP.map($e)]}),A.jsxs("div",{className:"tb-section",children:[A.jsx("div",{className:"tb-section-title",children:"Actions"}),A.jsx("button",{className:"tb-btn",onClick:_,title:"Delete/Backspace",children:"Erase (Del)"}),A.jsx("button",{className:"tb-btn",onClick:p,title:"Ctrl+Z",children:"Undo (Ctrl+Z)"}),A.jsx("button",{className:"tb-btn",onClick:y,title:"Ctrl+Y",children:"Redo (Ctrl+Y)"})]}),R&&A.jsxs("div",{className:"tb-section",children:[A.jsx("div",{className:"tb-section-title",children:"Colors"}),A.jsxs("div",{className:"tb-palette",children:[A.jsx("button",{className:`palette-swatch color-erase ${o==="0"?"active-color":""}`,onClick:()=>{o==="0"?l==null||l(null):(l==null||l("0"),s==null||s())},title:`No color (erase)${o==="0"?"  drag to erase":""}`,children:""}),Array.from({length:9},(Ae,G)=>G+1).map(Ae=>A.jsx("button",{className:`palette-swatch color${Ae} ${o===String(Ae)?"active-color":""}`,onClick:()=>{const G=String(Ae);o===G?l==null||l(null):(l==null||l(G),t==null||t(G))},title:`Color ${Ae}${o===String(Ae)?" (active  drag to paint)":""}`,children:Ae},Ae))]}),o!==null&&A.jsx("button",{className:"tb-btn",onClick:()=>l==null?void 0:l(null),children:"Deselect Color"})]}),n==="mark"&&A.jsxs("div",{className:"tb-section",children:[A.jsx("div",{className:"tb-section-title",children:"Shape"}),A.jsxs("div",{className:"tb-mark-palette",children:[A.jsx("button",{className:`mark-swatch mark-erase ${oe===null?"active-mark":""}`,onClick:()=>{N==null||N(),me==null||me(null)},title:"Erase mark",children:""}),_P.map(Ae=>A.jsx("button",{className:`mark-swatch ${oe===Ae?"active-mark":""}`,onClick:()=>{oe===Ae?me==null||me(null):(me==null||me(Ae),ne==null||ne(Ae))},title:Ae,children:vP[Ae]},Ae))]}),oe!==null&&A.jsx("button",{className:"tb-btn",onClick:()=>me==null?void 0:me(null),children:"Deselect Shape"})]}),E&&A.jsxs("div",{className:"tb-section",children:[A.jsx("div",{className:"tb-section-title",children:"Editor"}),wP.map($e)]}),E&&A.jsxs("div",{className:"tb-section",children:[A.jsx("div",{className:"tb-section-title",children:"Images"}),B.length>0&&A.jsx("div",{className:"tb-image-grid",children:B.map((Ae,G)=>A.jsx("button",{className:`tb-image-thumb ${$===G?"selected":""}`,onClick:()=>L==null?void 0:L($===G?null:G),title:`Image ${G+1}`,children:A.jsx("img",{src:Ae,alt:"",draggable:!1})},G))}),A.jsx("button",{className:"tb-btn",onClick:ae,children:"Import Image"}),$!==null&&A.jsx("button",{className:"tb-btn",onClick:te,children:"Apply to Cells"}),A.jsx("button",{className:"tb-btn",onClick:se,children:"Remove Image"})]}),P&&A.jsxs("div",{className:"tb-section",children:[A.jsx("div",{className:"tb-section-title",children:"Label"}),A.jsx("input",{className:"tb-input",value:x,onChange:Ae=>V(Ae.target.value),placeholder:"Label text..."}),A.jsxs("div",{className:"tb-row",children:[A.jsx("button",{className:`tb-btn-sm ${C==="top"?"selected":""}`,onClick:()=>Ne("top"),children:"Top"}),A.jsx("button",{className:`tb-btn-sm ${C==="bottom"?"selected":""}`,onClick:()=>Ne("bottom"),children:"Bottom"})]}),A.jsx("button",{className:"tb-btn",onClick:()=>{x.trim()&&(c==null||c(x.trim(),C))},children:"Apply"}),A.jsx("button",{className:"tb-btn",onClick:()=>f==null?void 0:f(),children:"Remove"})]}),A.jsxs("div",{className:"tb-hint",children:[n==="normal"&&"Type any key to set value. Same key to remove.",n==="color"&&(o!==null?"Drag to paint. Click swatch again to deselect.":"Press 0-9 or click swatch. Click to lock color for drag painting."),n==="fixed"&&"Type any key for fixed clue.",n==="fixedColor"&&(o!==null?"Drag to paint. Click swatch again to deselect.":"Press 0-9 or click swatch. Click to lock color for drag painting."),n==="label"&&"Enter text, pick alignment, Apply.",n==="note"&&"Type to add/remove notes (max 16).",n==="cross"&&"Click/drag to toggle X marks.",n==="border"&&"Drag to create/remove borders.",n==="mark"&&(oe!==null?"Drag to paint mark. Click swatch again to deselect.":"Press 1-6 or click swatch to select shape.")]}),A.jsx("div",{className:"tb-spacer"}),S&&A.jsx("div",{className:"tb-submit",children:A.jsx("button",{className:"tb-submit-btn",onClick:S,children:"Submit"})}),A.jsx("div",{className:"tb-theme-toggle",children:A.jsx("button",{className:"tb-btn",onClick:M,title:"Toggle theme",children:T==="light"?" Dark":" Light"})})]})}function _E({title:n,author:e,gridSize:t,difficulty:s,rulesList:o,cluesList:l,backLink:c=!0,children:f,struckRuleWords:p,onStruckRuleWordsChange:y,struckClueWords:_,onStruckClueWordsChange:E}){const[T,M]=D.useState(new Set),[B,$]=D.useState(new Set),[L,te]=D.useState(!0),[se,ae]=D.useState(!0),oe=p??T,me=y??M,ne=_??B,N=E??$,S=(x,V)=>{x(C=>{const Ne=new Set(C);return Ne.has(V)?Ne.delete(V):Ne.add(V),Ne})},R=(x,V,C,Ne)=>{const $e=x.split(/(\s+)/).map((G,Q)=>/^\s+$/.test(G)?null:`${V}:${Q}`).filter(Boolean),Ae=$e.every(G=>C.has(G));Ne(G=>{const Q=new Set(G);for(const Z of $e)Ae?Q.delete(Z):Q.add(Z);return Q})},P=(x,V,C,Ne)=>x.split(/(\s+)/).map(($e,Ae)=>{if(/^\s+$/.test($e))return $e;const G=`${V}:${Ae}`,Q=C.has(G);return A.jsx("span",{className:`info-word ${Q?"info-word-struck":""}`,onClick:Z=>{Z.stopPropagation(),S(Ne,G)},children:$e},Ae)});return A.jsxs("div",{className:"info-panel",children:[c&&A.jsx(Do,{to:"/",className:"info-back-link",children:" Puzzles"}),n&&A.jsxs("div",{className:"info-section",children:[A.jsx("h2",{className:"info-title",children:n}),e&&A.jsxs("p",{className:"info-meta",children:["by ",e]}),t&&A.jsxs("p",{className:"info-meta",children:[t.rows,"",t.cols]}),s&&A.jsxs("p",{className:"info-meta",children:["Difficulty: ",s]})]}),o&&o.length>0&&A.jsxs("div",{className:"info-section",children:[A.jsxs("div",{className:"info-section-title info-collapsible",onClick:()=>te(x=>!x),children:[A.jsx("span",{className:`info-chevron ${L?"open":""}`,children:""}),"Rules"]}),L&&A.jsx("ul",{className:"info-list",children:o.map((x,V)=>A.jsx("li",{className:"info-list-text info-list-bullet",onClick:()=>R(x,V,oe,me),children:P(x,V,oe,me)},V))})]}),l&&l.length>0&&A.jsxs("div",{className:"info-section",children:[A.jsxs("div",{className:"info-section-title info-collapsible",onClick:()=>ae(x=>!x),children:[A.jsx("span",{className:`info-chevron ${se?"open":""}`,children:""}),"Clues"]}),se&&A.jsx("ul",{className:"info-list",children:l.map((x,V)=>A.jsx("li",{className:"info-list-text info-list-bullet",onClick:()=>R(x,V,ne,N),children:P(x,V,ne,N)},V))})]}),f&&A.jsx("div",{className:"info-section",children:f})]})}function vE({children:n,defaultWidth:e=400,storageKey:t="4color:leftWidth"}){const[s,o]=D.useState(()=>{const y=localStorage.getItem(t);return y?Number(y):e}),l=D.useRef(!1),c=D.useRef(0),f=D.useRef(0),p=D.useCallback(y=>{y.preventDefault(),l.current=!0,c.current=y.clientX,f.current=s,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[s]);return D.useEffect(()=>{const y=E=>{if(!l.current)return;const T=Math.max(180,Math.min(800,f.current+E.clientX-c.current));o(T)},_=()=>{l.current&&(l.current=!1,document.body.style.cursor="",document.body.style.userSelect="",localStorage.setItem(t,String(s)))};return window.addEventListener("mousemove",y),window.addEventListener("mouseup",_),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",_)}},[s,t]),D.useEffect(()=>{const y=()=>{const _=Math.min(800,window.innerWidth*.4);s>_&&o(_)};return window.addEventListener("resize",y),y(),()=>window.removeEventListener("resize",y)},[s]),A.jsxs("div",{className:"panel-left-wrapper",children:[A.jsx("aside",{className:"panel-left",style:{width:s},children:n}),A.jsx("div",{className:`panel-left-handle ${l.current?"dragging":""}`,onMouseDown:p})]})}function __(){const{puzzleId:n}=R_();Tc();const[e]=b_(),t=e.get("debug")==="true",s=Number(e.get("rows"))||10,o=Number(e.get("cols"))||10,{theme:l,toggle:c}=hp(),[f,p]=D.useState(s),[y,_]=D.useState(o),[E,T]=D.useState(""),[M,B]=D.useState(""),[$,L]=D.useState(""),[te,se]=D.useState([]),[ae,oe]=D.useState([]),[me,ne]=D.useState([]),[N,S]=D.useState(""),[R,P]=D.useState(""),[x,V]=D.useState([]),[C,Ne]=D.useState(null),[$e,Ae]=D.useState([]),[G,Q]=D.useState([]),[Z,de]=D.useState(""),[F,Y]=D.useState(-1),De=D.useRef(null),[Oe,ze]=D.useState(n||""),[Ue,Je]=D.useState(!1),[He,nt]=D.useState(""),{modalProps:Lt,showAlert:Tn,showConfirm:ue}=dp(),H=pE(f,y),ce=D.useRef(null),we=D.useRef(null);D.useEffect(()=>{cp().then(K=>{const le=new Set;for(const pe of K)for(const je of pe.tags||[])le.add(je);Ae([...le].sort())})},[]),D.useEffect(()=>{n&&dE(n).then(K=>{var le;if(K){T(K.title),B(K.author),p(K.gridSize.rows),_(K.gridSize.cols),L(K.difficulty||""),se(K.tags||[]),Q(K.autoCrossRules||[]),oe(K.rules||[]),ne(K.clues||[]),H.setGrid(uf(K));const pe=new Set;for(const je of K.cells)if(je.image){const Tt=((le=K.images)==null?void 0:le[je.image])??je.image;pe.add(Tt)}V(Array.from(pe))}})},[n]),D.useEffect(()=>{H.setAutoCrossRules(G)},[G]),mE({inputMode:H.inputMode,applyValue:H.applyValue,applyColor:H.applyColor,applyFixedValue:H.applyFixedValue,applyFixedColor:H.applyFixedColor,addNote:H.addNote,clearValues:H.clearValues,eraseColor:H.eraseColor,undo:H.undo,redo:H.redo,onActiveColorChange:H.setActiveColor,onActiveMarkChange:H.setActiveMark,toggleMark:H.toggleMark,onEnter:()=>{C!==null&&x[C]&&H.applyImage(x[C])}});const fe=D.useMemo(()=>{const K=Z.toLowerCase().trim();return K?$e.filter(le=>le.toLowerCase().includes(K)&&!te.includes(le)):[]},[Z,$e,te]),Ie=K=>{var pe;const le=K.trim().toLowerCase();le&&!te.includes(le)&&se(je=>[...je,le]),de(""),Y(-1),(pe=De.current)==null||pe.focus()},qe=K=>{se(le=>le.filter(pe=>pe!==K))},Ze=K=>{K.key==="Enter"?(K.preventDefault(),F>=0&&fe[F]?Ie(fe[F]):Z.trim()&&Ie(Z)):K.key==="ArrowDown"?(K.preventDefault(),Y(le=>Math.min(le+1,fe.length-1))):K.key==="ArrowUp"?(K.preventDefault(),Y(le=>Math.max(le-1,-1))):K.key==="Backspace"&&!Z&&te.length>0?qe(te[te.length-1]):K.key==="Escape"&&(de(""),Y(-1))},ct=async()=>{if(!$){await Tn("Please select a difficulty before saving.");return}const K=E.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")||"untitled",le=tP(H.grid,{id:K,title:E||"Untitled",author:M,rules:ae,clues:me,difficulty:$,tags:te,autoCrossRules:G});n&&(le.id=n),ze(le.id),nP(le)},Zt=async()=>{await ue("Are you sure you want to clear all? This cannot be undone.","Clear All")&&H.resetGrid(f,y)},On=async()=>{await ue("Clear all player input? Puzzle layout (fixed values, colors, borders, images, labels) will be kept.","Clear Player Input")&&H.setGrid(K=>K.map(le=>le.map(pe=>({...pe,value:null,notes:[],color:pe.fixedColor?pe.color:null,crossed:!1,mark:null,selected:!1,borders:[...pe.fixedBorders]}))))},ti=()=>{H.setGrid(K=>K.map(le=>le.map(pe=>({...pe,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...pe.fixedBorders]}))))};function ni(K){return K.map(le=>le.map(pe=>({fv:pe.fixedValue,fc:pe.fixedColor,fb:pe.fixedBorders,l:pe.label,i:pe.image})))}const hr=async()=>{const K=JSON.stringify(ni(H.grid));if(nt(K),H.setGrid(le=>le.map(pe=>pe.map(je=>({...je,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...je.fixedBorders]})))),H.setInputMode("normal"),n){const le=await hE(n);le&&(Object.keys(le.cells).length>0||Object.keys(le.borders||{}).length>0)&&H.setGrid(pe=>{var Tt,Be;const je=pe.map(yt=>yt.map(ht=>({...ht})));for(const[yt,ht]of Object.entries(le.cells)){const[at,Ct]=yt.split(",").map(Number);(Tt=je[at])!=null&&Tt[Ct]&&(je[at][Ct].value=ht)}if(le.borders)for(const[yt,ht]of Object.entries(le.borders)){const[at,Ct]=yt.split(",").map(Number);(Be=je[at])!=null&&Be[Ct]&&(je[at][Ct].borders=ht)}return je})}Je(!0)},ri=()=>{H.setGrid(K=>K.map(le=>le.map(pe=>({...pe,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...pe.fixedBorders]})))),Je(!1)},cs=async()=>{const K=Oe||"untitled";if(JSON.stringify(ni(H.grid))!==He&&!await ue("The puzzle definition has changed since entering solution mode. The solution may be invalid. Save anyway?","Definition Changed"))return;const pe={},je={};for(let Be=0;Be<H.grid.length;Be++)for(let yt=0;yt<H.grid[Be].length;yt++){const ht=H.grid[Be][yt];ht.value&&(pe[`${Be},${yt}`]=ht.value);const at=ht.fixedBorders,Ct=ht.borders;(Ct[0]!==at[0]||Ct[1]!==at[1]||Ct[2]!==at[2]||Ct[3]!==at[3])&&(je[`${Be},${yt}`]=Ct)}if(Object.keys(pe).length===0&&Object.keys(je).length===0){await Tn("No solution values or borders entered.");return}const Tt={id:K,cells:pe};Object.keys(je).length>0&&(Tt.borders=je),rP(Tt)},dr=K=>{var je;const le=(je=K.target.files)==null?void 0:je[0];if(!le)return;if(le.size>200*1024){Tn("Image must be under 200KB.");return}const pe=new Image;pe.onload=()=>{const Be=50/Math.max(pe.width,pe.height),yt=Math.round(pe.width*Be),ht=Math.round(pe.height*Be),at=document.createElement("canvas");at.width=yt,at.height=ht,at.getContext("2d").drawImage(pe,0,0,yt,ht);const si=at.toDataURL("image/png");V(Sn=>Sn.includes(si)?Sn:[...Sn,si]),URL.revokeObjectURL(pe.src)},pe.src=URL.createObjectURL(le),K.target.value=""},[jt,Ln]=D.useState(null),[In,qn]=D.useState(""),dn=D.useRef(null),Gn=D.useRef(null),hs=D.useCallback((K,le)=>{dn.current={type:K,index:le}},[]),fn=D.useCallback((K,le)=>{K.preventDefault(),Gn.current=le},[]),Ur=D.useCallback(K=>{if(!dn.current||Gn.current===null||dn.current.type!==K)return;const le=dn.current.index,pe=Gn.current;if(le===pe)return;(K==="rule"?oe:ne)(Tt=>{const Be=[...Tt],[yt]=Be.splice(le,1);return Be.splice(pe,0,yt),Be}),dn.current=null,Gn.current=null},[]),Kn=D.useCallback((K,le,pe)=>{Ln({type:K,index:le}),qn(pe)},[]),Qn=D.useCallback(()=>{if(!jt)return;const K=In.trim(),le=jt.type==="rule"?oe:ne;le(K?pe=>pe.map((je,Tt)=>Tt===jt.index?K:je):pe=>pe.filter((je,Tt)=>Tt!==jt.index)),Ln(null),qn("")},[jt,In]),Jn=D.useCallback(K=>{Ne(K),K!==null&&H.setInputMode("normal")},[H]),Yn=()=>{C===null||!x[C]||H.applyImage(x[C])},gt=K=>{var je;const le=(je=K.target.files)==null?void 0:je[0];if(!le)return;const pe=new FileReader;pe.onload=()=>{var Tt;try{const Be=JSON.parse(pe.result);ze(Be.id),T(Be.title),B(Be.author),p(Be.gridSize.rows),_(Be.gridSize.cols),L(Be.difficulty||""),se(Be.tags||[]),Q(Be.autoCrossRules||[]),oe(Be.rules||[]),ne(Be.clues||[]),H.setGrid(uf(Be));const yt=new Set;for(const ht of Be.cells)if(ht.image){const at=((Tt=Be.images)==null?void 0:Tt[ht.image])??ht.image;yt.add(at)}V(Array.from(yt))}catch{Tn("Invalid puzzle JSON file")}},pe.readAsText(le)};return A.jsxs("div",{className:"page-layout",children:[A.jsx(vE,{children:A.jsx(_E,{title:Ue?"Solution Mode":"Puzzle Editor",backLink:!0,children:Ue?A.jsxs(A.Fragment,{children:[A.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",margin:"0 0 8px"},children:"Place the correct values for each cell. Only normal inputs (values) and borders will be saved as the solution."}),A.jsx("button",{className:"info-btn",onClick:cs,children:"Save Solution"}),A.jsx("button",{className:"info-btn",onClick:ti,children:"Clear Solution Input"}),A.jsx("button",{className:"info-btn",onClick:ri,children:"Exit Solution Mode"}),me.length>0&&A.jsxs(A.Fragment,{children:[A.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),A.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Clues"}),me.map((K,le)=>A.jsx("div",{className:"info-list-item",children:A.jsx("span",{className:"info-list-text",children:K})},le))]})]}):A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"info-editor-field",children:[A.jsx("label",{children:"Title"}),A.jsx("input",{value:E,onChange:K=>T(K.target.value),placeholder:"My Puzzle"})]}),A.jsxs("div",{className:"info-editor-field",children:[A.jsx("label",{children:"Author"}),A.jsx("input",{value:M,onChange:K=>B(K.target.value)})]}),A.jsxs("div",{className:"info-editor-field",children:[A.jsx("label",{children:"Difficulty"}),A.jsxs("select",{value:$,onChange:K=>L(K.target.value),children:[A.jsx("option",{value:"",children:" None "}),A.jsx("option",{value:"Very easy",children:"Very easy"}),A.jsx("option",{value:"Easy",children:"Easy"}),A.jsx("option",{value:"Medium",children:"Medium"}),A.jsx("option",{value:"Hard",children:"Hard"}),A.jsx("option",{value:"Very hard",children:"Very hard"})]})]}),A.jsxs("div",{className:"info-editor-field",children:[A.jsx("label",{children:"Tags"}),A.jsxs("div",{className:"tag-input-wrapper",children:[te.map(K=>A.jsxs("span",{className:"tag-input-pill",children:[K,A.jsx("button",{onClick:()=>qe(K),children:""})]},K)),A.jsx("input",{ref:De,value:Z,onChange:K=>{de(K.target.value),Y(-1)},onKeyDown:Ze,onBlur:()=>setTimeout(()=>Y(-1),150),placeholder:te.length===0?"Add tags...":"",className:"tag-input-bare"}),fe.length>0&&A.jsx("div",{className:"tag-suggestions",children:fe.map((K,le)=>A.jsx("div",{className:`tag-suggestion${le===F?" active":""}`,onMouseDown:()=>Ie(K),children:K},K))})]})]}),A.jsxs("div",{className:"info-editor-field",children:[A.jsx("label",{children:"Auto-Cross Rules"}),A.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px 10px"},children:["king","rook","bishop","knight"].map(K=>A.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13,cursor:"pointer"},children:[A.jsx("input",{type:"checkbox",checked:G.includes(K),onChange:le=>{Q(pe=>le.target.checked?[...pe,K]:pe.filter(je=>je!==K)),le.target.blur()}}),K.charAt(0).toUpperCase()+K.slice(1)]},K))})]}),A.jsxs("div",{className:"info-editor-row",children:[A.jsxs("div",{className:"info-editor-field",children:[A.jsx("label",{children:"Rows"}),A.jsx("input",{type:"number",value:f,onChange:K=>p(Math.min(99,Math.max(1,Number(K.target.value)))),min:1,max:99})]}),A.jsxs("div",{className:"info-editor-field",children:[A.jsx("label",{children:"Cols"}),A.jsx("input",{type:"number",value:y,onChange:K=>_(Math.min(99,Math.max(1,Number(K.target.value)))),min:1,max:99})]})]}),A.jsx("button",{className:"info-btn",onClick:()=>H.resetGrid(f,y),children:"Resize Grid"}),A.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),A.jsx("button",{className:"info-btn",onClick:ct,children:"Save (Download JSON)"}),A.jsx("button",{className:"info-btn",onClick:()=>{var K;return(K=ce.current)==null?void 0:K.click()},children:"Load JSON"}),A.jsx("input",{ref:ce,type:"file",accept:".json",style:{display:"none"},onChange:gt}),A.jsx("button",{className:"info-btn",onClick:Zt,children:"Clear All"}),A.jsx("button",{className:"info-btn",onClick:On,children:"Clear Player Input"}),A.jsx("button",{className:"info-btn",onClick:hr,children:"Enter Solution Mode"}),A.jsx("input",{ref:we,type:"file",accept:"image/*",style:{display:"none"},onChange:dr}),A.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),A.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Rules"}),ae.map((K,le)=>A.jsxs("div",{className:"info-list-item info-list-draggable",draggable:!0,onDragStart:()=>hs("rule",le),onDragOver:pe=>fn(pe,le),onDrop:()=>Ur("rule"),children:[A.jsx("span",{className:"info-drag-handle",title:"Drag to reorder",children:""}),(jt==null?void 0:jt.type)==="rule"&&jt.index===le?A.jsx("input",{className:"info-edit-input",value:In,onChange:pe=>qn(pe.target.value),onBlur:Qn,onKeyDown:pe=>{pe.key==="Enter"&&Qn(),pe.key==="Escape"&&(Ln(null),qn(""))},autoFocus:!0}):A.jsx("span",{className:"info-list-text info-list-editable",onClick:()=>Kn("rule",le,K),children:K}),A.jsx("button",{className:"info-list-remove",onClick:()=>oe(ae.filter((pe,je)=>je!==le)),title:"Remove",children:""})]},le)),A.jsxs("div",{className:"info-add-row",children:[A.jsx("input",{className:"info-add-input",value:N,onChange:K=>S(K.target.value),placeholder:"Add a rule...",onKeyDown:K=>{K.key==="Enter"&&N.trim()&&(oe([...ae,N.trim()]),S(""))}}),A.jsx("button",{className:"info-add-btn",onClick:()=>{N.trim()&&(oe([...ae,N.trim()]),S(""))},children:"+"})]}),A.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),A.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Clues"}),me.map((K,le)=>A.jsxs("div",{className:"info-list-item info-list-draggable",draggable:!0,onDragStart:()=>hs("clue",le),onDragOver:pe=>fn(pe,le),onDrop:()=>Ur("clue"),children:[A.jsx("span",{className:"info-drag-handle",title:"Drag to reorder",children:""}),(jt==null?void 0:jt.type)==="clue"&&jt.index===le?A.jsx("input",{className:"info-edit-input",value:In,onChange:pe=>qn(pe.target.value),onBlur:Qn,onKeyDown:pe=>{pe.key==="Enter"&&Qn(),pe.key==="Escape"&&(Ln(null),qn(""))},autoFocus:!0}):A.jsx("span",{className:"info-list-text info-list-editable",onClick:()=>Kn("clue",le,K),children:K}),A.jsx("button",{className:"info-list-remove",onClick:()=>ne(me.filter((pe,je)=>je!==le)),title:"Remove",children:""})]},le)),A.jsxs("div",{className:"info-add-row",children:[A.jsx("input",{className:"info-add-input",value:R,onChange:K=>P(K.target.value),placeholder:"Add a clue...",onKeyDown:K=>{K.key==="Enter"&&R.trim()&&(ne([...me,R.trim()]),P(""))}}),A.jsx("button",{className:"info-add-btn",onClick:()=>{R.trim()&&(ne([...me,R.trim()]),P(""))},children:"+"})]})]})})}),A.jsx("main",{className:"panel-center",onMouseDown:K=>{K.target.closest(".puzzle-grid")||H.clearSelection()},children:A.jsx(gE,{grid:H.grid,selection:H.selection,debug:t,inputMode:H.inputMode,activeColor:H.activeColor,activeMark:H.activeMark,clearSelection:H.clearSelection,commitSelection:H.commitSelection,onDragChange:H.onDragChange})}),A.jsx("aside",{className:"panel-right",children:A.jsx(yE,{inputMode:H.inputMode,onInputModeChange:K=>{H.setInputMode(K),K!=="normal"&&Ne(null)},onColorSelect:K=>{H.inputMode==="fixedColor"?H.applyFixedColor(K):H.applyColor(K)},onColorErase:H.eraseColor,activeColor:H.activeColor,onActiveColorChange:H.setActiveColor,activeMark:H.activeMark,onActiveMarkChange:H.setActiveMark,onMarkSelect:K=>H.toggleMark(K),onMarkErase:H.eraseMark,onLabelApply:(K,le)=>H.applyLabel(K,le),onLabelRemove:()=>H.removeLabel(),onUndo:H.undo,onRedo:H.redo,onErase:H.clearValues,isEditor:!Ue,theme:l,onThemeToggle:c,imageLibrary:x,selectedImageIndex:C,onImageSelect:Jn,onImageApply:Yn,onImageRemove:H.removeImage,onImageImport:()=>{var K;return(K=we.current)==null?void 0:K.click()}})}),A.jsx(fp,{...Lt})]})}const pp="4color:play:";function EP(n,e,t,s){const o=[];for(let c=0;c<e.length;c++)for(let f=0;f<e[c].length;f++){const p=e[c][f];if(!(p.value||p.notes.length>0||p.color||p.crossed||p.mark))continue;const _={row:c,col:f};p.value&&(_.value=p.value),p.notes.length>0&&(_.notes=p.notes),p.color&&(_.color=p.color),p.crossed&&(_.crossed=p.crossed),p.mark&&(_.mark=p.mark),o.push(_)}const l={cells:o,struckRules:Array.from(t),struckClues:Array.from(s)};try{localStorage.setItem(pp+n,JSON.stringify(l))}catch{}}function TP(n){try{const e=localStorage.getItem(pp+n);return e?JSON.parse(e):null}catch{return null}}function IP(n){localStorage.removeItem(pp+n)}function SP(n,e){var s;const t=n.map(o=>o.map(l=>({...l,notes:[...l.notes]})));for(const o of e.cells){const l=(s=t[o.row])==null?void 0:s[o.col];l&&(o.value&&(l.value=o.value),o.notes&&(l.notes=o.notes),o.color&&(l.color=o.color),o.crossed&&(l.crossed=o.crossed),o.mark&&(l.mark=o.mark))}return t}function CP(n){return n.color||n.fixedColor||null}function AP(n){const e=n.length,t=n[0].length,s=Array.from({length:e},()=>Array(t).fill(-1));let o=0;for(let l=0;l<e;l++)for(let c=0;c<t;c++){if(s[l][c]!==-1)continue;const f=[[l,c]];for(s[l][c]=o;f.length>0;){const[p,y]=f.shift(),_=n[p][y].fixedBorders;p>0&&_[0]===0&&s[p-1][y]===-1&&(s[p-1][y]=o,f.push([p-1,y])),y<t-1&&_[1]===0&&s[p][y+1]===-1&&(s[p][y+1]=o,f.push([p,y+1])),p<e-1&&_[2]===0&&s[p+1][y]===-1&&(s[p+1][y]=o,f.push([p+1,y])),y>0&&_[3]===0&&s[p][y-1]===-1&&(s[p][y-1]=o,f.push([p,y-1]))}o++}return s}function kP(n){const e=n.length,t=n[0].length,s=AP(n),o=new Map;for(let c=0;c<e;c++)for(let f=0;f<t;f++){const p=s[c][f],y=CP(n[c][f]),_=o.get(p);if(_===void 0)o.set(p,y);else if(_!==y)return _===null||y===null?{valid:!1,error:"Some regions have uncolored cells."}:{valid:!1,error:"All cells in a region must be the same color."}}for(const[,c]of o)if(c===null)return{valid:!1,error:"Some regions are not colored."};const l=new Set(o.values());if(l.size>4)return{valid:!1,error:`Used ${l.size} colors  maximum is 4.`};for(let c=0;c<e;c++)for(let f=0;f<t;f++){const p=s[c][f],y=o.get(p);if(f<t-1){const _=s[c][f+1];if(_!==p&&o.get(_)===y)return{valid:!1,error:"Two adjacent regions share the same color."}}if(c<e-1){const _=s[c+1][f];if(_!==p&&o.get(_)===y)return{valid:!1,error:"Two adjacent regions share the same color."}}}return{valid:!0}}function RP(n,e){var y,_,E,T,M,B,$;const t=Object.keys(e.cells).length;let s=0;const o=n.length,l=n[0].length;for(let L=0;L<o;L++)for(let te=0;te<l;te++)n[L][te].value&&s++;const c=Object.keys(e.borders||{}).length;let f=0;if(c>0)for(const[L,te]of Object.entries(e.borders)){const[se,ae]=L.split(",").map(Number),oe=(_=(y=n[se])==null?void 0:y[ae])==null?void 0:_.borders,me=(T=(E=n[se])==null?void 0:E[ae])==null?void 0:T.fixedBorders;oe&&me&&(oe[0]!==me[0]||oe[1]!==me[1]||oe[2]!==me[2]||oe[3]!==me[3])&&f++}if(s!==t||f!==c)return{valid:!1,error:`Not ready: ${s}/${t} values, ${f}/${c} borders.`};let p=0;for(const[L,te]of Object.entries(e.cells)){const[se,ae]=L.split(",").map(Number),oe=(M=n[se])==null?void 0:M[ae],me=(oe==null?void 0:oe.value)||(oe==null?void 0:oe.fixedValue);(!me||me.toUpperCase()!==te.toUpperCase())&&p++}if(e.borders)for(const[L,te]of Object.entries(e.borders)){const[se,ae]=L.split(",").map(Number),oe=($=(B=n[se])==null?void 0:B[ae])==null?void 0:$.borders;(!oe||oe[0]!==te[0]||oe[1]!==te[1]||oe[2]!==te[2]||oe[3]!==te[3])&&p++}return p>0?{valid:!1,error:`${p} wrong.`}:{valid:!0}}function PP(){var $e,Ae;const{puzzleId:n}=R_(),e=Tc(),[t]=b_(),s=t.get("debug")==="true",{theme:o,toggle:l}=hp(),[c,f]=D.useState(null),[p,y]=D.useState(!0),[_,E]=D.useState(!1),[T,M]=D.useState(new Set),[B,$]=D.useState(new Set),[L,te]=D.useState(null),{modalProps:se,showAlert:ae,showConfirm:oe}=dp(),{markCompleted:me}=fE(),ne=pE(1,1),N=D.useRef(null),S=D.useRef(!1);D.useEffect(()=>{n&&dE(n).then(G=>{if(G){f(G);let Q=uf(G);const Z=TP(n);Z&&(Q=SP(Q,Z),M(new Set(Z.struckRules)),$(new Set(Z.struckClues))),ne.setGrid(Q),ne.setAutoCrossRules(G.autoCrossRules||[]),hE(n).then(de=>{de&&te(de)}),setTimeout(()=>{S.current=!0},0)}else E(!0);y(!1)})},[n]),D.useEffect(()=>{if(!(!n||!S.current))return N.current&&clearTimeout(N.current),N.current=setTimeout(()=>{EP(n,ne.grid,T,B)},500),()=>{N.current&&clearTimeout(N.current)}},[ne.grid,T,B,n]),mE({inputMode:ne.inputMode,applyValue:ne.applyValue,applyColor:ne.applyColor,applyFixedValue:ne.applyFixedValue,applyFixedColor:ne.applyFixedColor,addNote:ne.addNote,clearValues:ne.clearValues,eraseColor:ne.eraseColor,undo:ne.undo,redo:ne.redo,onActiveColorChange:ne.setActiveColor,onActiveMarkChange:ne.setActiveMark,toggleMark:ne.toggleMark});const R=()=>{ne.setGrid(G=>G.map(Q=>Q.map(Z=>({...Z,value:Z.fixedValue?Z.value:null,notes:Z.fixedValue?Z.notes:[],color:Z.fixedValue?Z.color:null,crossed:Z.fixedValue?Z.crossed:!1,mark:Z.fixedValue?Z.mark:null,borders:[...Z.fixedBorders]})))),M(new Set),$(new Set),n&&IP(n)},P=async()=>{await oe("Are you sure you want to reset all your input?","Reset Input")&&R()},x=(($e=c==null?void 0:c.tags)==null?void 0:$e.includes("4color"))??!1,V=((Ae=c==null?void 0:c.tags)==null?void 0:Ae.includes("murdoku"))??!1,C=x||V&&!!L,Ne=D.useCallback(async()=>{let G;if(x)G=kP(ne.grid);else if(V&&L)G=RP(ne.grid,L);else return;G.valid?(n&&me(n),await oe("Congratulations!","Puzzle Solved!","Clear Puzzle","Keep")&&R()):await ae(G.error||"Not quite right. Keep trying!","Not Quite")},[ne.grid,x,V,L,oe,ae,n,me]);return p?A.jsx("p",{style:{textAlign:"center",marginTop:40},children:"Loading puzzle..."}):_||!c?A.jsxs("div",{style:{textAlign:"center",marginTop:40},children:[A.jsx("p",{children:"Puzzle not found."}),A.jsx(Do,{to:"/",children:"Back to puzzle list"})]}):A.jsxs("div",{className:"page-layout",children:[A.jsx(vE,{children:A.jsxs(_E,{title:c.title,author:c.author,gridSize:c.gridSize,difficulty:c.difficulty,rulesList:c.rules,cluesList:c.clues,backLink:!0,struckRuleWords:T,onStruckRuleWordsChange:M,struckClueWords:B,onStruckClueWordsChange:$,children:[A.jsx("button",{className:"info-btn",onClick:P,children:"Reset My Input"}),s&&A.jsx("button",{className:"info-btn",onClick:()=>e(`/edit/${n}`),children:"Edit Puzzle"})]})}),A.jsx("main",{className:"panel-center",onMouseDown:G=>{G.target.closest(".puzzle-grid")||ne.clearSelection()},children:A.jsx(gE,{grid:ne.grid,selection:ne.selection,debug:s,inputMode:ne.inputMode,activeColor:ne.activeColor,activeMark:ne.activeMark,clearSelection:ne.clearSelection,commitSelection:ne.commitSelection,onDragChange:ne.onDragChange})}),A.jsx("aside",{className:"panel-right",children:A.jsx(yE,{inputMode:ne.inputMode,onInputModeChange:ne.setInputMode,onColorSelect:G=>ne.applyColor(G),onColorErase:ne.eraseColor,activeColor:ne.activeColor,onActiveColorChange:ne.setActiveColor,onUndo:ne.undo,onRedo:ne.redo,onErase:ne.clearValues,theme:o,onThemeToggle:l,activeMark:ne.activeMark,onActiveMarkChange:ne.setActiveMark,onMarkSelect:G=>ne.toggleMark(G),onMarkErase:ne.eraseMark,onSubmit:C?Ne:void 0})}),A.jsx(fp,{...se})]})}function xP(){return A.jsx(eP,{children:A.jsx(LT,{children:A.jsxs(RT,{children:[A.jsx(Ga,{path:"/",element:A.jsx(iP,{})}),A.jsx(Ga,{path:"/edit",element:A.jsx(__,{})}),A.jsx(Ga,{path:"/edit/:puzzleId",element:A.jsx(__,{})}),A.jsx(Ga,{path:"/play/:puzzleId",element:A.jsx(PP,{})})]})})})}L0.createRoot(document.getElementById("root")).render(A.jsx(hf.StrictMode,{children:A.jsx(xP,{})}));
