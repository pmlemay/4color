function M0(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function Nv(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pd={exports:{}},qa={},md={exports:{}},Qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rg;function j0(){if(Rg)return Qe;Rg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function I(D){return D===null||typeof D!="object"?null:(D=E&&D[E]||D["@@iterator"],typeof D=="function"?D:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},F=Object.assign,U={};function L(D,K,Ae){this.props=D,this.context=K,this.refs=U,this.updater=Ae||P}L.prototype.isReactComponent={},L.prototype.setState=function(D,K){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,K,"setState")},L.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function q(){}q.prototype=L.prototype;function X(D,K,Ae){this.props=D,this.context=K,this.refs=U,this.updater=Ae||P}var te=X.prototype=new q;te.constructor=X,F(te,L.prototype),te.isPureReactComponent=!0;var le=Array.isArray,ne=Object.prototype.hasOwnProperty,ie={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function C(D,K,Ae){var xe,Ue={},qe=null,Ye=null;if(K!=null)for(xe in K.ref!==void 0&&(Ye=K.ref),K.key!==void 0&&(qe=""+K.key),K)ne.call(K,xe)&&!x.hasOwnProperty(xe)&&(Ue[xe]=K[xe]);var ze=arguments.length-2;if(ze===1)Ue.children=Ae;else if(1<ze){for(var tt=Array(ze),At=0;At<ze;At++)tt[At]=arguments[At+2];Ue.children=tt}if(D&&D.defaultProps)for(xe in ze=D.defaultProps,ze)Ue[xe]===void 0&&(Ue[xe]=ze[xe]);return{$$typeof:n,type:D,key:qe,ref:Ye,props:Ue,_owner:ie.current}}function A(D,K){return{$$typeof:n,type:D.type,key:K,ref:D.ref,props:D.props,_owner:D._owner}}function O(D){return typeof D=="object"&&D!==null&&D.$$typeof===n}function V(D){var K={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Ae){return K[Ae]})}var b=/\/+/g;function R(D,K){return typeof D=="object"&&D!==null&&D.key!=null?V(""+D.key):K.toString(36)}function ve(D,K,Ae,xe,Ue){var qe=typeof D;(qe==="undefined"||qe==="boolean")&&(D=null);var Ye=!1;if(D===null)Ye=!0;else switch(qe){case"string":case"number":Ye=!0;break;case"object":switch(D.$$typeof){case n:case e:Ye=!0}}if(Ye)return Ye=D,Ue=Ue(Ye),D=xe===""?"."+R(Ye,0):xe,le(Ue)?(Ae="",D!=null&&(Ae=D.replace(b,"$&/")+"/"),ve(Ue,K,Ae,"",function(At){return At})):Ue!=null&&(O(Ue)&&(Ue=A(Ue,Ae+(!Ue.key||Ye&&Ye.key===Ue.key?"":(""+Ue.key).replace(b,"$&/")+"/")+D)),K.push(Ue)),1;if(Ye=0,xe=xe===""?".":xe+":",le(D))for(var ze=0;ze<D.length;ze++){qe=D[ze];var tt=xe+R(qe,ze);Ye+=ve(qe,K,Ae,tt,Ue)}else if(tt=I(D),typeof tt=="function")for(D=tt.call(D),ze=0;!(qe=D.next()).done;)qe=qe.value,tt=xe+R(qe,ze++),Ye+=ve(qe,K,Ae,tt,Ue);else if(qe==="object")throw K=String(D),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.");return Ye}function J(D,K,Ae){if(D==null)return D;var xe=[],Ue=0;return ve(D,xe,"","",function(qe){return K.call(Ae,qe,Ue++)}),xe}function Fe(D){if(D._status===-1){var K=D._result;K=K(),K.then(function(Ae){(D._status===0||D._status===-1)&&(D._status=1,D._result=Ae)},function(Ae){(D._status===0||D._status===-1)&&(D._status=2,D._result=Ae)}),D._status===-1&&(D._status=0,D._result=K)}if(D._status===1)return D._result.default;throw D._result}var _e={current:null},se={transition:null},Y={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:se,ReactCurrentOwner:ie};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Qe.Children={map:J,forEach:function(D,K,Ae){J(D,function(){K.apply(this,arguments)},Ae)},count:function(D){var K=0;return J(D,function(){K++}),K},toArray:function(D){return J(D,function(K){return K})||[]},only:function(D){if(!O(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Qe.Component=L,Qe.Fragment=t,Qe.Profiler=o,Qe.PureComponent=X,Qe.StrictMode=s,Qe.Suspense=p,Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y,Qe.act=Z,Qe.cloneElement=function(D,K,Ae){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var xe=F({},D.props),Ue=D.key,qe=D.ref,Ye=D._owner;if(K!=null){if(K.ref!==void 0&&(qe=K.ref,Ye=ie.current),K.key!==void 0&&(Ue=""+K.key),D.type&&D.type.defaultProps)var ze=D.type.defaultProps;for(tt in K)ne.call(K,tt)&&!x.hasOwnProperty(tt)&&(xe[tt]=K[tt]===void 0&&ze!==void 0?ze[tt]:K[tt])}var tt=arguments.length-2;if(tt===1)xe.children=Ae;else if(1<tt){ze=Array(tt);for(var At=0;At<tt;At++)ze[At]=arguments[At+2];xe.children=ze}return{$$typeof:n,type:D.type,key:Ue,ref:qe,props:xe,_owner:Ye}},Qe.createContext=function(D){return D={$$typeof:c,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:l,_context:D},D.Consumer=D},Qe.createElement=C,Qe.createFactory=function(D){var K=C.bind(null,D);return K.type=D,K},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(D){return{$$typeof:f,render:D}},Qe.isValidElement=O,Qe.lazy=function(D){return{$$typeof:_,_payload:{_status:-1,_result:D},_init:Fe}},Qe.memo=function(D,K){return{$$typeof:g,type:D,compare:K===void 0?null:K}},Qe.startTransition=function(D){var K=se.transition;se.transition={};try{D()}finally{se.transition=K}},Qe.unstable_act=Z,Qe.useCallback=function(D,K){return _e.current.useCallback(D,K)},Qe.useContext=function(D){return _e.current.useContext(D)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(D){return _e.current.useDeferredValue(D)},Qe.useEffect=function(D,K){return _e.current.useEffect(D,K)},Qe.useId=function(){return _e.current.useId()},Qe.useImperativeHandle=function(D,K,Ae){return _e.current.useImperativeHandle(D,K,Ae)},Qe.useInsertionEffect=function(D,K){return _e.current.useInsertionEffect(D,K)},Qe.useLayoutEffect=function(D,K){return _e.current.useLayoutEffect(D,K)},Qe.useMemo=function(D,K){return _e.current.useMemo(D,K)},Qe.useReducer=function(D,K,Ae){return _e.current.useReducer(D,K,Ae)},Qe.useRef=function(D){return _e.current.useRef(D)},Qe.useState=function(D){return _e.current.useState(D)},Qe.useSyncExternalStore=function(D,K,Ae){return _e.current.useSyncExternalStore(D,K,Ae)},Qe.useTransition=function(){return _e.current.useTransition()},Qe.version="18.3.1",Qe}var Ag;function ff(){return Ag||(Ag=1,md.exports=j0()),md.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function F0(){if(Pg)return qa;Pg=1;var n=ff(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,g){var _,E={},I=null,P=null;g!==void 0&&(I=""+g),p.key!==void 0&&(I=""+p.key),p.ref!==void 0&&(P=p.ref);for(_ in p)s.call(p,_)&&!l.hasOwnProperty(_)&&(E[_]=p[_]);if(f&&f.defaultProps)for(_ in p=f.defaultProps,p)E[_]===void 0&&(E[_]=p[_]);return{$$typeof:e,type:f,key:I,ref:P,props:E,_owner:o.current}}return qa.Fragment=t,qa.jsx=c,qa.jsxs=c,qa}var xg;function U0(){return xg||(xg=1,pd.exports=F0()),pd.exports}var T=U0(),k=ff();const pf=Nv(k),z0=M0({__proto__:null,default:pf},[k]);var Vu={},gd={exports:{}},Nn={},yd={exports:{}},vd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function B0(){return Ng||(Ng=1,(function(n){function e(se,Y){var Z=se.length;se.push(Y);e:for(;0<Z;){var D=Z-1>>>1,K=se[D];if(0<o(K,Y))se[D]=Y,se[Z]=K,Z=D;else break e}}function t(se){return se.length===0?null:se[0]}function s(se){if(se.length===0)return null;var Y=se[0],Z=se.pop();if(Z!==Y){se[0]=Z;e:for(var D=0,K=se.length,Ae=K>>>1;D<Ae;){var xe=2*(D+1)-1,Ue=se[xe],qe=xe+1,Ye=se[qe];if(0>o(Ue,Z))qe<K&&0>o(Ye,Ue)?(se[D]=Ye,se[qe]=Z,D=qe):(se[D]=Ue,se[xe]=Z,D=xe);else if(qe<K&&0>o(Ye,Z))se[D]=Ye,se[qe]=Z,D=qe;else break e}}return Y}function o(se,Y){var Z=se.sortIndex-Y.sortIndex;return Z!==0?Z:se.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],g=[],_=1,E=null,I=3,P=!1,F=!1,U=!1,L=typeof setTimeout=="function"?setTimeout:null,q=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(se){for(var Y=t(g);Y!==null;){if(Y.callback===null)s(g);else if(Y.startTime<=se)s(g),Y.sortIndex=Y.expirationTime,e(p,Y);else break;Y=t(g)}}function le(se){if(U=!1,te(se),!F)if(t(p)!==null)F=!0,Fe(ne);else{var Y=t(g);Y!==null&&_e(le,Y.startTime-se)}}function ne(se,Y){F=!1,U&&(U=!1,q(C),C=-1),P=!0;var Z=I;try{for(te(Y),E=t(p);E!==null&&(!(E.expirationTime>Y)||se&&!V());){var D=E.callback;if(typeof D=="function"){E.callback=null,I=E.priorityLevel;var K=D(E.expirationTime<=Y);Y=n.unstable_now(),typeof K=="function"?E.callback=K:E===t(p)&&s(p),te(Y)}else s(p);E=t(p)}if(E!==null)var Ae=!0;else{var xe=t(g);xe!==null&&_e(le,xe.startTime-Y),Ae=!1}return Ae}finally{E=null,I=Z,P=!1}}var ie=!1,x=null,C=-1,A=5,O=-1;function V(){return!(n.unstable_now()-O<A)}function b(){if(x!==null){var se=n.unstable_now();O=se;var Y=!0;try{Y=x(!0,se)}finally{Y?R():(ie=!1,x=null)}}else ie=!1}var R;if(typeof X=="function")R=function(){X(b)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,J=ve.port2;ve.port1.onmessage=b,R=function(){J.postMessage(null)}}else R=function(){L(b,0)};function Fe(se){x=se,ie||(ie=!0,R())}function _e(se,Y){C=L(function(){se(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){F||P||(F=!0,Fe(ne))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return I},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(se){switch(I){case 1:case 2:case 3:var Y=3;break;default:Y=I}var Z=I;I=Y;try{return se()}finally{I=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,Y){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var Z=I;I=se;try{return Y()}finally{I=Z}},n.unstable_scheduleCallback=function(se,Y,Z){var D=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?D+Z:D):Z=D,se){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Z+K,se={id:_++,callback:Y,priorityLevel:se,startTime:Z,expirationTime:K,sortIndex:-1},Z>D?(se.sortIndex=Z,e(g,se),t(p)===null&&se===t(g)&&(U?(q(C),C=-1):U=!0,_e(le,Z-D))):(se.sortIndex=K,e(p,se),F||P||(F=!0,Fe(ne))),se},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(se){var Y=I;return function(){var Z=I;I=Y;try{return se.apply(this,arguments)}finally{I=Z}}}})(vd)),vd}var bg;function $0(){return bg||(bg=1,yd.exports=B0()),yd.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg;function W0(){if(Dg)return Nn;Dg=1;var n=ff(),e=$0();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},E={};function I(r){return p.call(E,r)?!0:p.call(_,r)?!1:g.test(r)?E[r]=!0:(_[r]=!0,!1)}function P(r,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function F(r,i,a,h){if(i===null||typeof i>"u"||P(r,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function U(r,i,a,h,d,m,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=m,this.removeEmptyString=w}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){L[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];L[i]=new U(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){L[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){L[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){L[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){L[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){L[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){L[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){L[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var q=/[\-:]([a-z])/g;function X(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(q,X);L[i]=new U(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(q,X);L[i]=new U(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(q,X);L[i]=new U(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){L[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),L.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){L[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function te(r,i,a,h){var d=L.hasOwnProperty(i)?L[i]:null;(d!==null?d.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(F(i,a,d,h)&&(a=null),h||d===null?I(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,h=d.attributeNamespace,a===null?r.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?r.setAttributeNS(h,i,a):r.setAttribute(i,a))))}var le=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),ie=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),V=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),J=Symbol.for("react.memo"),Fe=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),se=Symbol.iterator;function Y(r){return r===null||typeof r!="object"?null:(r=se&&r[se]||r["@@iterator"],typeof r=="function"?r:null)}var Z=Object.assign,D;function K(r){if(D===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);D=i&&i[1]||""}return`
`+D+r}var Ae=!1;function xe(r,i){if(!r||Ae)return"";Ae=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(H){var h=H}Reflect.construct(r,[],i)}else{try{i.call()}catch(H){h=H}r.call(i.prototype)}else{try{throw Error()}catch(H){h=H}r()}}catch(H){if(H&&h&&typeof H.stack=="string"){for(var d=H.stack.split(`
`),m=h.stack.split(`
`),w=d.length-1,N=m.length-1;1<=w&&0<=N&&d[w]!==m[N];)N--;for(;1<=w&&0<=N;w--,N--)if(d[w]!==m[N]){if(w!==1||N!==1)do if(w--,N--,0>N||d[w]!==m[N]){var M=`
`+d[w].replace(" at new "," at ");return r.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",r.displayName)),M}while(1<=w&&0<=N);break}}}finally{Ae=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?K(r):""}function Ue(r){switch(r.tag){case 5:return K(r.type);case 16:return K("Lazy");case 13:return K("Suspense");case 19:return K("SuspenseList");case 0:case 2:case 15:return r=xe(r.type,!1),r;case 11:return r=xe(r.type.render,!1),r;case 1:return r=xe(r.type,!0),r;default:return""}}function qe(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case ie:return"Portal";case A:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case ve:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case V:return(r.displayName||"Context")+".Consumer";case O:return(r._context.displayName||"Context")+".Provider";case b:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case J:return i=r.displayName||null,i!==null?i:qe(r.type)||"Memo";case Fe:i=r._payload,r=r._init;try{return qe(r(i))}catch{}}return null}function Ye(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qe(i);case 8:return i===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function ze(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function tt(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function At(r){var i=tt(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){h=""+w,m.call(this,w)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Vn(r){r._valueTracker||(r._valueTracker=At(r))}function en(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return r&&(h=tt(r)?r.checked?"true":"false":r.value),r=h,r!==a?(i.setValue(r),!0):!1}function tn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ce(r,i){var a=i.checked;return Z({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function $(r,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=ze(i.value!=null?i.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function de(r,i){i=i.checked,i!=null&&te(r,"checked",i,!1)}function Ee(r,i){de(r,i);var a=ze(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?ye(r,i.type,a):i.hasOwnProperty("defaultValue")&&ye(r,i.type,ze(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function fe(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function ye(r,i,a){(i!=="number"||tn(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Ne=Array.isArray;function yt(r,i,a,h){if(r=r.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=i.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&h&&(r[a].defaultSelected=!0)}else{for(a=""+ze(a),i=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,h&&(r[d].defaultSelected=!0);return}i!==null||r[d].disabled||(i=r[d])}i!==null&&(i.selected=!0)}}function Nt(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return Z({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function Gn(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Ne(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:ze(a)}}function On(r,i){var a=ze(i.value),h=ze(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function Tn(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function vr(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ln(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?vr(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var Kn,ms=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,d){MSApp.execUnsafeLocalFunction(function(){return r(i,a,h,d)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(Kn=Kn||document.createElement("div"),Kn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Kn.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function Qn(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var Yn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];Object.keys(Yn).forEach(function(r){bt.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Yn[i]=Yn[r]})});function dn(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Yn.hasOwnProperty(r)&&Yn[r]?(""+i).trim():i+"px"}function Cn(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=dn(a,i[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,d):r[a]=d}}var Pe=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ke(r,i){if(i){if(Pe[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function $e(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=null;function Kt(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var nn=null,rn=null,lt=null;function _r(r){if(r=Na(r)){if(typeof nn!="function")throw Error(t(280));var i=r.stateNode;i&&(i=Ql(i),nn(r.stateNode,r.type,i))}}function Dt(r){rn?lt?lt.push(r):lt=[r]:rn=r}function ft(){if(rn){var r=rn,i=lt;if(lt=rn=null,_r(r),i)for(r=0;r<i.length;r++)_r(i[r])}}function Ki(r,i){return r(i)}function Q(){}var ue=!1;function me(r,i,a){if(ue)return r(i,a);ue=!0;try{return Ki(r,i,a)}finally{ue=!1,(rn!==null||lt!==null)&&(Q(),ft())}}function De(r,i){var a=r.stateNode;if(a===null)return null;var h=Ql(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var ut=!1;if(f)try{var Ge={};Object.defineProperty(Ge,"passive",{get:function(){ut=!0}}),window.addEventListener("test",Ge,Ge),window.removeEventListener("test",Ge,Ge)}catch{ut=!1}function St(r,i,a,h,d,m,w,N,M){var H=Array.prototype.slice.call(arguments,3);try{i.apply(a,H)}catch(ae){this.onError(ae)}}var ot=!1,rt=null,Vt=!1,ct=null,gs={onError:function(r){ot=!0,rt=r}};function Al(r,i,a,h,d,m,w,N,M){ot=!1,rt=null,St.apply(gs,arguments)}function ia(r,i,a,h,d,m,w,N,M){if(Al.apply(this,arguments),ot){if(ot){var H=rt;ot=!1,rt=null}else throw Error(t(198));Vt||(Vt=!0,ct=H)}}function ir(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function oa(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Pl(r){if(ir(r)!==r)throw Error(t(188))}function xl(r){var i=r.alternate;if(!i){if(i=ir(r),i===null)throw Error(t(188));return i!==r?null:r}for(var a=r,h=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Pl(d),r;if(m===h)return Pl(d),i;m=m.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=m;else{for(var w=!1,N=d.child;N;){if(N===a){w=!0,a=d,h=m;break}if(N===h){w=!0,h=d,a=m;break}N=N.sibling}if(!w){for(N=m.child;N;){if(N===a){w=!0,a=m,h=d;break}if(N===h){w=!0,h=m,a=d;break}N=N.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:i}function Nl(r){return r=xl(r),r!==null?oi(r):null}function oi(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=oi(r);if(i!==null)return i;r=r.sibling}return null}var aa=e.unstable_scheduleCallback,Qi=e.unstable_cancelCallback,ai=e.unstable_shouldYield,Hr=e.unstable_requestPaint,vt=e.unstable_now,Hc=e.unstable_getCurrentPriorityLevel,Yi=e.unstable_ImmediatePriority,la=e.unstable_UserBlockingPriority,li=e.unstable_NormalPriority,ua=e.unstable_LowPriority,Ji=e.unstable_IdlePriority,ui=null,Mn=null;function bl(r){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(ui,r,void 0,(r.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:ci,wr=Math.log,Jn=Math.LN2;function ci(r){return r>>>=0,r===0?32:31-(wr(r)/Jn|0)|0}var Er=64,ys=4194304;function at(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function qr(r,i){var a=r.pendingLanes;if(a===0)return 0;var h=0,d=r.suspendedLanes,m=r.pingedLanes,w=a&268435455;if(w!==0){var N=w&~d;N!==0?h=at(N):(m&=w,m!==0&&(h=at(m)))}else w=a&~d,w!==0?h=at(w):m!==0&&(h=at(m));if(h===0)return 0;if(i!==0&&i!==h&&(i&d)===0&&(d=h&-h,m=i&-i,d>=m||d===16&&(m&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)a=31-jn(i),d=1<<a,h|=r[a],i&=~d;return h}function hi(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function di(r,i){for(var a=r.suspendedLanes,h=r.pingedLanes,d=r.expirationTimes,m=r.pendingLanes;0<m;){var w=31-jn(m),N=1<<w,M=d[w];M===-1?((N&a)===0||(N&h)!==0)&&(d[w]=hi(N,i)):M<=i&&(r.expiredLanes|=N),m&=~N}}function ca(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ha(){var r=Er;return Er<<=1,(Er&4194240)===0&&(Er=64),r}function da(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function fi(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-jn(i),r[i]=a}function qc(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-jn(a),m=1<<d;i[d]=0,h[d]=-1,r[d]=-1,a&=~m}}function fa(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var h=31-jn(a),d=1<<h;d&i|r[h]&i&&(r[h]|=i),a&=~d}}var et=0;function Tr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var pa,Xi,ma,ga,ya,Ir=!1,Zi=[],Sr=null,Cr=null,sn=null,pi=new Map,Gr=new Map,Fn=[],Dl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vs(r,i){switch(r){case"focusin":case"focusout":Sr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":pi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gr.delete(i.pointerId)}}function or(r,i,a,h,d,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:m,targetContainers:[d]},i!==null&&(i=Na(i),i!==null&&Xi(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),r)}function Vl(r,i,a,h,d){switch(i){case"focusin":return Sr=or(Sr,r,i,a,h,d),!0;case"dragenter":return Cr=or(Cr,r,i,a,h,d),!0;case"mouseover":return sn=or(sn,r,i,a,h,d),!0;case"pointerover":var m=d.pointerId;return pi.set(m,or(pi.get(m)||null,r,i,a,h,d)),!0;case"gotpointercapture":return m=d.pointerId,Gr.set(m,or(Gr.get(m)||null,r,i,a,h,d)),!0}return!1}function eo(r){var i=vi(r.target);if(i!==null){var a=ir(i);if(a!==null){if(i=a.tag,i===13){if(i=oa(a),i!==null){r.blockedOn=i,ya(r.priority,function(){ma(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function pt(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=to(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Tt=h,a.target.dispatchEvent(h),Tt=null}else return i=Na(a),i!==null&&Xi(i),r.blockedOn=a,!1;i.shift()}return!0}function Ol(r,i,a){pt(r)&&a.delete(i)}function Gc(){Ir=!1,Sr!==null&&pt(Sr)&&(Sr=null),Cr!==null&&pt(Cr)&&(Cr=null),sn!==null&&pt(sn)&&(sn=null),pi.forEach(Ol),Gr.forEach(Ol)}function _s(r,i){r.blockedOn===i&&(r.blockedOn=null,Ir||(Ir=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Gc)))}function ws(r){function i(d){return _s(d,r)}if(0<Zi.length){_s(Zi[0],r);for(var a=1;a<Zi.length;a++){var h=Zi[a];h.blockedOn===r&&(h.blockedOn=null)}}for(Sr!==null&&_s(Sr,r),Cr!==null&&_s(Cr,r),sn!==null&&_s(sn,r),pi.forEach(i),Gr.forEach(i),a=0;a<Fn.length;a++)h=Fn[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<Fn.length&&(a=Fn[0],a.blockedOn===null);)eo(a),a.blockedOn===null&&Fn.shift()}var Kr=le.ReactCurrentBatchConfig,Qr=!0;function kr(r,i,a,h){var d=et,m=Kr.transition;Kr.transition=null;try{et=1,va(r,i,a,h)}finally{et=d,Kr.transition=m}}function Ll(r,i,a,h){var d=et,m=Kr.transition;Kr.transition=null;try{et=4,va(r,i,a,h)}finally{et=d,Kr.transition=m}}function va(r,i,a,h){if(Qr){var d=to(r,i,a,h);if(d===null)sh(r,i,h,Rr,a),vs(r,h);else if(Vl(d,r,i,a,h))h.stopPropagation();else if(vs(r,h),i&4&&-1<Dl.indexOf(r)){for(;d!==null;){var m=Na(d);if(m!==null&&pa(m),m=to(r,i,a,h),m===null&&sh(r,i,h,Rr,a),m===d)break;d=m}d!==null&&h.stopPropagation()}else sh(r,i,h,null,a)}}var Rr=null;function to(r,i,a,h){if(Rr=null,r=Kt(h),r=vi(r),r!==null)if(i=ir(r),i===null)r=null;else if(a=i.tag,a===13){if(r=oa(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return Rr=r,null}function no(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hc()){case Yi:return 1;case la:return 4;case li:case ua:return 16;case Ji:return 536870912;default:return 16}default:return 16}}var Un=null,ro=null,Yr=null;function Ml(){if(Yr)return Yr;var r,i=ro,a=i.length,h,d="value"in Un?Un.value:Un.textContent,m=d.length;for(r=0;r<a&&i[r]===d[r];r++);var w=a-r;for(h=1;h<=w&&i[a-h]===d[m-h];h++);return Yr=d.slice(r,1<h?1-h:void 0)}function mi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Ar(){return!0}function _a(){return!1}function fn(r){function i(a,h,d,m,w){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var N in r)r.hasOwnProperty(N)&&(a=r[N],this[N]=a?a(m):m[N]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Ar:_a,this.isPropagationStopped=_a,this}return Z(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ar)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ar)},persist:function(){},isPersistent:Ar}),i}var Pr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gi=fn(Pr),Es=Z({},Pr,{view:0,detail:0}),so=fn(Es),io,oo,zn,yi=Z({},Es,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:We,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==zn&&(zn&&r.type==="mousemove"?(io=r.screenX-zn.screenX,oo=r.screenY-zn.screenY):oo=io=0,zn=r),io)},movementY:function(r){return"movementY"in r?r.movementY:oo}}),wa=fn(yi),jl=Z({},yi,{dataTransfer:0}),Fl=fn(jl),ao=Z({},Es,{relatedTarget:0}),on=fn(ao),Ul=Z({},Pr,{animationName:0,elapsedTime:0,pseudoElement:0}),zl=fn(Ul),Ts=Z({},Pr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=fn(Ts),y=Z({},Pr,{data:0}),v=fn(y),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ge(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=G[r])?!!i[r]:!1}function We(){return ge}var Ot=Z({},Es,{key:function(r){if(r.key){var i=S[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=mi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?B[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:We,charCode:function(r){return r.type==="keypress"?mi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?mi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),dt=fn(Ot),jt=Z({},yi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bn=fn(jt),Jr=Z({},Es,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:We}),xr=fn(Jr),Nr=Z({},Pr,{propertyName:0,elapsedTime:0,pseudoElement:0}),lo=fn(Nr),Ea=Z({},yi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),NE=fn(Ea),bE=[9,13,27,32],Kc=f&&"CompositionEvent"in window,Ta=null;f&&"documentMode"in document&&(Ta=document.documentMode);var DE=f&&"TextEvent"in window&&!Ta,_p=f&&(!Kc||Ta&&8<Ta&&11>=Ta),wp=" ",Ep=!1;function Tp(r,i){switch(r){case"keyup":return bE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ip(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var uo=!1;function VE(r,i){switch(r){case"compositionend":return Ip(i);case"keypress":return i.which!==32?null:(Ep=!0,wp);case"textInput":return r=i.data,r===wp&&Ep?null:r;default:return null}}function OE(r,i){if(uo)return r==="compositionend"||!Kc&&Tp(r,i)?(r=Ml(),Yr=ro=Un=null,uo=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return _p&&i.locale!=="ko"?null:i.data;default:return null}}var LE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Sp(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!LE[r.type]:i==="textarea"}function Cp(r,i,a,h){Dt(h),i=ql(i,"onChange"),0<i.length&&(a=new gi("onChange","change",null,a,h),r.push({event:a,listeners:i}))}var Ia=null,Sa=null;function ME(r){$p(r,0)}function Bl(r){var i=mo(r);if(en(i))return r}function jE(r,i){if(r==="change")return i}var kp=!1;if(f){var Qc;if(f){var Yc="oninput"in document;if(!Yc){var Rp=document.createElement("div");Rp.setAttribute("oninput","return;"),Yc=typeof Rp.oninput=="function"}Qc=Yc}else Qc=!1;kp=Qc&&(!document.documentMode||9<document.documentMode)}function Ap(){Ia&&(Ia.detachEvent("onpropertychange",Pp),Sa=Ia=null)}function Pp(r){if(r.propertyName==="value"&&Bl(Sa)){var i=[];Cp(i,Sa,r,Kt(r)),me(ME,i)}}function FE(r,i,a){r==="focusin"?(Ap(),Ia=i,Sa=a,Ia.attachEvent("onpropertychange",Pp)):r==="focusout"&&Ap()}function UE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bl(Sa)}function zE(r,i){if(r==="click")return Bl(i)}function BE(r,i){if(r==="input"||r==="change")return Bl(i)}function $E(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var ar=typeof Object.is=="function"?Object.is:$E;function Ca(r,i){if(ar(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!p.call(i,d)||!ar(r[d],i[d]))return!1}return!0}function xp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Np(r,i){var a=xp(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=i&&h>=i)return{node:a,offset:i-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=xp(a)}}function bp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?bp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Dp(){for(var r=window,i=tn();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=tn(r.document)}return i}function Jc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function WE(r){var i=Dp(),a=r.focusedElem,h=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&bp(a.ownerDocument.documentElement,a)){if(h!==null&&Jc(a)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,m=Math.min(h.start,d);h=h.end===void 0?m:Math.min(h.end,d),!r.extend&&m>h&&(d=h,h=m,m=d),d=Np(a,m);var w=Np(a,h);d&&w&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),r.removeAllRanges(),m>h?(r.addRange(i),r.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var HE=f&&"documentMode"in document&&11>=document.documentMode,co=null,Xc=null,ka=null,Zc=!1;function Vp(r,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Zc||co==null||co!==tn(h)||(h=co,"selectionStart"in h&&Jc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ka&&Ca(ka,h)||(ka=h,h=ql(Xc,"onSelect"),0<h.length&&(i=new gi("onSelect","select",null,i,a),r.push({event:i,listeners:h}),i.target=co)))}function $l(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var ho={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},eh={},Op={};f&&(Op=document.createElement("div").style,"AnimationEvent"in window||(delete ho.animationend.animation,delete ho.animationiteration.animation,delete ho.animationstart.animation),"TransitionEvent"in window||delete ho.transitionend.transition);function Wl(r){if(eh[r])return eh[r];if(!ho[r])return r;var i=ho[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Op)return eh[r]=i[a];return r}var Lp=Wl("animationend"),Mp=Wl("animationiteration"),jp=Wl("animationstart"),Fp=Wl("transitionend"),Up=new Map,zp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(r,i){Up.set(r,i),l(i,[r])}for(var th=0;th<zp.length;th++){var nh=zp[th],qE=nh.toLowerCase(),GE=nh[0].toUpperCase()+nh.slice(1);Is(qE,"on"+GE)}Is(Lp,"onAnimationEnd"),Is(Mp,"onAnimationIteration"),Is(jp,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(Fp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ra="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ra));function Bp(r,i,a){var h=r.type||"unknown-event";r.currentTarget=a,ia(h,i,void 0,r),r.currentTarget=null}function $p(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],d=h.event;h=h.listeners;e:{var m=void 0;if(i)for(var w=h.length-1;0<=w;w--){var N=h[w],M=N.instance,H=N.currentTarget;if(N=N.listener,M!==m&&d.isPropagationStopped())break e;Bp(d,N,H),m=M}else for(w=0;w<h.length;w++){if(N=h[w],M=N.instance,H=N.currentTarget,N=N.listener,M!==m&&d.isPropagationStopped())break e;Bp(d,N,H),m=M}}}if(Vt)throw r=ct,Vt=!1,ct=null,r}function _t(r,i){var a=i[ch];a===void 0&&(a=i[ch]=new Set);var h=r+"__bubble";a.has(h)||(Wp(i,r,2,!1),a.add(h))}function rh(r,i,a){var h=0;i&&(h|=4),Wp(a,r,h,i)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function Aa(r){if(!r[Hl]){r[Hl]=!0,s.forEach(function(a){a!=="selectionchange"&&(KE.has(a)||rh(a,!1,r),rh(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Hl]||(i[Hl]=!0,rh("selectionchange",!1,i))}}function Wp(r,i,a,h){switch(no(i)){case 1:var d=kr;break;case 4:d=Ll;break;default:d=va}a=d.bind(null,i,a,r),d=void 0,!ut||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),h?d!==void 0?r.addEventListener(i,a,{capture:!0,passive:d}):r.addEventListener(i,a,!0):d!==void 0?r.addEventListener(i,a,{passive:d}):r.addEventListener(i,a,!1)}function sh(r,i,a,h,d){var m=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var N=h.stateNode.containerInfo;if(N===d||N.nodeType===8&&N.parentNode===d)break;if(w===4)for(w=h.return;w!==null;){var M=w.tag;if((M===3||M===4)&&(M=w.stateNode.containerInfo,M===d||M.nodeType===8&&M.parentNode===d))return;w=w.return}for(;N!==null;){if(w=vi(N),w===null)return;if(M=w.tag,M===5||M===6){h=m=w;continue e}N=N.parentNode}}h=h.return}me(function(){var H=m,ae=Kt(a),he=[];e:{var oe=Up.get(r);if(oe!==void 0){var Te=gi,Ce=r;switch(r){case"keypress":if(mi(a)===0)break e;case"keydown":case"keyup":Te=dt;break;case"focusin":Ce="focus",Te=on;break;case"focusout":Ce="blur",Te=on;break;case"beforeblur":case"afterblur":Te=on;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=wa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=Fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=xr;break;case Lp:case Mp:case jp:Te=zl;break;case Fp:Te=lo;break;case"scroll":Te=so;break;case"wheel":Te=NE;break;case"copy":case"cut":case"paste":Te=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=Bn}var ke=(i&4)!==0,Lt=!ke&&r==="scroll",z=ke?oe!==null?oe+"Capture":null:oe;ke=[];for(var j=H,W;j!==null;){W=j;var pe=W.stateNode;if(W.tag===5&&pe!==null&&(W=pe,z!==null&&(pe=De(j,z),pe!=null&&ke.push(Pa(j,pe,W)))),Lt)break;j=j.return}0<ke.length&&(oe=new Te(oe,Ce,null,a,ae),he.push({event:oe,listeners:ke}))}}if((i&7)===0){e:{if(oe=r==="mouseover"||r==="pointerover",Te=r==="mouseout"||r==="pointerout",oe&&a!==Tt&&(Ce=a.relatedTarget||a.fromElement)&&(vi(Ce)||Ce[Xr]))break e;if((Te||oe)&&(oe=ae.window===ae?ae:(oe=ae.ownerDocument)?oe.defaultView||oe.parentWindow:window,Te?(Ce=a.relatedTarget||a.toElement,Te=H,Ce=Ce?vi(Ce):null,Ce!==null&&(Lt=ir(Ce),Ce!==Lt||Ce.tag!==5&&Ce.tag!==6)&&(Ce=null)):(Te=null,Ce=H),Te!==Ce)){if(ke=wa,pe="onMouseLeave",z="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(ke=Bn,pe="onPointerLeave",z="onPointerEnter",j="pointer"),Lt=Te==null?oe:mo(Te),W=Ce==null?oe:mo(Ce),oe=new ke(pe,j+"leave",Te,a,ae),oe.target=Lt,oe.relatedTarget=W,pe=null,vi(ae)===H&&(ke=new ke(z,j+"enter",Ce,a,ae),ke.target=W,ke.relatedTarget=Lt,pe=ke),Lt=pe,Te&&Ce)t:{for(ke=Te,z=Ce,j=0,W=ke;W;W=fo(W))j++;for(W=0,pe=z;pe;pe=fo(pe))W++;for(;0<j-W;)ke=fo(ke),j--;for(;0<W-j;)z=fo(z),W--;for(;j--;){if(ke===z||z!==null&&ke===z.alternate)break t;ke=fo(ke),z=fo(z)}ke=null}else ke=null;Te!==null&&Hp(he,oe,Te,ke,!1),Ce!==null&&Lt!==null&&Hp(he,Lt,Ce,ke,!0)}}e:{if(oe=H?mo(H):window,Te=oe.nodeName&&oe.nodeName.toLowerCase(),Te==="select"||Te==="input"&&oe.type==="file")var Re=jE;else if(Sp(oe))if(kp)Re=BE;else{Re=UE;var Ve=FE}else(Te=oe.nodeName)&&Te.toLowerCase()==="input"&&(oe.type==="checkbox"||oe.type==="radio")&&(Re=zE);if(Re&&(Re=Re(r,H))){Cp(he,Re,a,ae);break e}Ve&&Ve(r,oe,H),r==="focusout"&&(Ve=oe._wrapperState)&&Ve.controlled&&oe.type==="number"&&ye(oe,"number",oe.value)}switch(Ve=H?mo(H):window,r){case"focusin":(Sp(Ve)||Ve.contentEditable==="true")&&(co=Ve,Xc=H,ka=null);break;case"focusout":ka=Xc=co=null;break;case"mousedown":Zc=!0;break;case"contextmenu":case"mouseup":case"dragend":Zc=!1,Vp(he,a,ae);break;case"selectionchange":if(HE)break;case"keydown":case"keyup":Vp(he,a,ae)}var Oe;if(Kc)e:{switch(r){case"compositionstart":var Me="onCompositionStart";break e;case"compositionend":Me="onCompositionEnd";break e;case"compositionupdate":Me="onCompositionUpdate";break e}Me=void 0}else uo?Tp(r,a)&&(Me="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Me="onCompositionStart");Me&&(_p&&a.locale!=="ko"&&(uo||Me!=="onCompositionStart"?Me==="onCompositionEnd"&&uo&&(Oe=Ml()):(Un=ae,ro="value"in Un?Un.value:Un.textContent,uo=!0)),Ve=ql(H,Me),0<Ve.length&&(Me=new v(Me,r,null,a,ae),he.push({event:Me,listeners:Ve}),Oe?Me.data=Oe:(Oe=Ip(a),Oe!==null&&(Me.data=Oe)))),(Oe=DE?VE(r,a):OE(r,a))&&(H=ql(H,"onBeforeInput"),0<H.length&&(ae=new v("onBeforeInput","beforeinput",null,a,ae),he.push({event:ae,listeners:H}),ae.data=Oe))}$p(he,i)})}function Pa(r,i,a){return{instance:r,listener:i,currentTarget:a}}function ql(r,i){for(var a=i+"Capture",h=[];r!==null;){var d=r,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=De(r,a),m!=null&&h.unshift(Pa(r,m,d)),m=De(r,i),m!=null&&h.push(Pa(r,m,d))),r=r.return}return h}function fo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Hp(r,i,a,h,d){for(var m=i._reactName,w=[];a!==null&&a!==h;){var N=a,M=N.alternate,H=N.stateNode;if(M!==null&&M===h)break;N.tag===5&&H!==null&&(N=H,d?(M=De(a,m),M!=null&&w.unshift(Pa(a,M,N))):d||(M=De(a,m),M!=null&&w.push(Pa(a,M,N)))),a=a.return}w.length!==0&&r.push({event:i,listeners:w})}var QE=/\r\n?/g,YE=/\u0000|\uFFFD/g;function qp(r){return(typeof r=="string"?r:""+r).replace(QE,`
`).replace(YE,"")}function Gl(r,i,a){if(i=qp(i),qp(r)!==i&&a)throw Error(t(425))}function Kl(){}var ih=null,oh=null;function ah(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var lh=typeof setTimeout=="function"?setTimeout:void 0,JE=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,XE=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(r){return Gp.resolve(null).then(r).catch(ZE)}:lh;function ZE(r){setTimeout(function(){throw r})}function uh(r,i){var a=i,h=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){r.removeChild(d),ws(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);ws(i)}function Ss(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function Kp(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var po=Math.random().toString(36).slice(2),br="__reactFiber$"+po,xa="__reactProps$"+po,Xr="__reactContainer$"+po,ch="__reactEvents$"+po,e0="__reactListeners$"+po,t0="__reactHandles$"+po;function vi(r){var i=r[br];if(i)return i;for(var a=r.parentNode;a;){if(i=a[Xr]||a[br]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=Kp(r);r!==null;){if(a=r[br])return a;r=Kp(r)}return i}r=a,a=r.parentNode}return null}function Na(r){return r=r[br]||r[Xr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function mo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Ql(r){return r[xa]||null}var hh=[],go=-1;function Cs(r){return{current:r}}function wt(r){0>go||(r.current=hh[go],hh[go]=null,go--)}function mt(r,i){go++,hh[go]=r.current,r.current=i}var ks={},pn=Cs(ks),kn=Cs(!1),_i=ks;function yo(r,i){var a=r.type.contextTypes;if(!a)return ks;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=i[m];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=d),d}function Rn(r){return r=r.childContextTypes,r!=null}function Yl(){wt(kn),wt(pn)}function Qp(r,i,a){if(pn.current!==ks)throw Error(t(168));mt(pn,i),mt(kn,a)}function Yp(r,i,a){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in i))throw Error(t(108,Ye(r)||"Unknown",d));return Z({},a,h)}function Jl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||ks,_i=pn.current,mt(pn,r),mt(kn,kn.current),!0}function Jp(r,i,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=Yp(r,i,_i),h.__reactInternalMemoizedMergedChildContext=r,wt(kn),wt(pn),mt(pn,r)):wt(kn),mt(kn,a)}var Zr=null,Xl=!1,dh=!1;function Xp(r){Zr===null?Zr=[r]:Zr.push(r)}function n0(r){Xl=!0,Xp(r)}function Rs(){if(!dh&&Zr!==null){dh=!0;var r=0,i=et;try{var a=Zr;for(et=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Zr=null,Xl=!1}catch(d){throw Zr!==null&&(Zr=Zr.slice(r+1)),aa(Yi,Rs),d}finally{et=i,dh=!1}}return null}var vo=[],_o=0,Zl=null,eu=0,Xn=[],Zn=0,wi=null,es=1,ts="";function Ei(r,i){vo[_o++]=eu,vo[_o++]=Zl,Zl=r,eu=i}function Zp(r,i,a){Xn[Zn++]=es,Xn[Zn++]=ts,Xn[Zn++]=wi,wi=r;var h=es;r=ts;var d=32-jn(h)-1;h&=~(1<<d),a+=1;var m=32-jn(i)+d;if(30<m){var w=d-d%5;m=(h&(1<<w)-1).toString(32),h>>=w,d-=w,es=1<<32-jn(i)+d|a<<d|h,ts=m+r}else es=1<<m|a<<d|h,ts=r}function fh(r){r.return!==null&&(Ei(r,1),Zp(r,1,0))}function ph(r){for(;r===Zl;)Zl=vo[--_o],vo[_o]=null,eu=vo[--_o],vo[_o]=null;for(;r===wi;)wi=Xn[--Zn],Xn[Zn]=null,ts=Xn[--Zn],Xn[Zn]=null,es=Xn[--Zn],Xn[Zn]=null}var $n=null,Wn=null,It=!1,lr=null;function em(r,i){var a=rr(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function tm(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,$n=r,Wn=Ss(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,$n=r,Wn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=wi!==null?{id:es,overflow:ts}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=rr(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,$n=r,Wn=null,!0):!1;default:return!1}}function mh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function gh(r){if(It){var i=Wn;if(i){var a=i;if(!tm(r,i)){if(mh(r))throw Error(t(418));i=Ss(a.nextSibling);var h=$n;i&&tm(r,i)?em(h,a):(r.flags=r.flags&-4097|2,It=!1,$n=r)}}else{if(mh(r))throw Error(t(418));r.flags=r.flags&-4097|2,It=!1,$n=r}}}function nm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;$n=r}function tu(r){if(r!==$n)return!1;if(!It)return nm(r),It=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!ah(r.type,r.memoizedProps)),i&&(i=Wn)){if(mh(r))throw rm(),Error(t(418));for(;i;)em(r,i),i=Ss(i.nextSibling)}if(nm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){Wn=Ss(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}Wn=null}}else Wn=$n?Ss(r.stateNode.nextSibling):null;return!0}function rm(){for(var r=Wn;r;)r=Ss(r.nextSibling)}function wo(){Wn=$n=null,It=!1}function yh(r){lr===null?lr=[r]:lr.push(r)}var r0=le.ReactCurrentBatchConfig;function ba(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var d=h,m=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(w){var N=d.refs;w===null?delete N[m]:N[m]=w},i._stringRef=m,i)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function nu(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function sm(r){var i=r._init;return i(r._payload)}function im(r){function i(z,j){if(r){var W=z.deletions;W===null?(z.deletions=[j],z.flags|=16):W.push(j)}}function a(z,j){if(!r)return null;for(;j!==null;)i(z,j),j=j.sibling;return null}function h(z,j){for(z=new Map;j!==null;)j.key!==null?z.set(j.key,j):z.set(j.index,j),j=j.sibling;return z}function d(z,j){return z=Os(z,j),z.index=0,z.sibling=null,z}function m(z,j,W){return z.index=W,r?(W=z.alternate,W!==null?(W=W.index,W<j?(z.flags|=2,j):W):(z.flags|=2,j)):(z.flags|=1048576,j)}function w(z){return r&&z.alternate===null&&(z.flags|=2),z}function N(z,j,W,pe){return j===null||j.tag!==6?(j=ld(W,z.mode,pe),j.return=z,j):(j=d(j,W),j.return=z,j)}function M(z,j,W,pe){var Re=W.type;return Re===x?ae(z,j,W.props.children,pe,W.key):j!==null&&(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Fe&&sm(Re)===j.type)?(pe=d(j,W.props),pe.ref=ba(z,j,W),pe.return=z,pe):(pe=ku(W.type,W.key,W.props,null,z.mode,pe),pe.ref=ba(z,j,W),pe.return=z,pe)}function H(z,j,W,pe){return j===null||j.tag!==4||j.stateNode.containerInfo!==W.containerInfo||j.stateNode.implementation!==W.implementation?(j=ud(W,z.mode,pe),j.return=z,j):(j=d(j,W.children||[]),j.return=z,j)}function ae(z,j,W,pe,Re){return j===null||j.tag!==7?(j=Pi(W,z.mode,pe,Re),j.return=z,j):(j=d(j,W),j.return=z,j)}function he(z,j,W){if(typeof j=="string"&&j!==""||typeof j=="number")return j=ld(""+j,z.mode,W),j.return=z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ne:return W=ku(j.type,j.key,j.props,null,z.mode,W),W.ref=ba(z,null,j),W.return=z,W;case ie:return j=ud(j,z.mode,W),j.return=z,j;case Fe:var pe=j._init;return he(z,pe(j._payload),W)}if(Ne(j)||Y(j))return j=Pi(j,z.mode,W,null),j.return=z,j;nu(z,j)}return null}function oe(z,j,W,pe){var Re=j!==null?j.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return Re!==null?null:N(z,j,""+W,pe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case ne:return W.key===Re?M(z,j,W,pe):null;case ie:return W.key===Re?H(z,j,W,pe):null;case Fe:return Re=W._init,oe(z,j,Re(W._payload),pe)}if(Ne(W)||Y(W))return Re!==null?null:ae(z,j,W,pe,null);nu(z,W)}return null}function Te(z,j,W,pe,Re){if(typeof pe=="string"&&pe!==""||typeof pe=="number")return z=z.get(W)||null,N(j,z,""+pe,Re);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case ne:return z=z.get(pe.key===null?W:pe.key)||null,M(j,z,pe,Re);case ie:return z=z.get(pe.key===null?W:pe.key)||null,H(j,z,pe,Re);case Fe:var Ve=pe._init;return Te(z,j,W,Ve(pe._payload),Re)}if(Ne(pe)||Y(pe))return z=z.get(W)||null,ae(j,z,pe,Re,null);nu(j,pe)}return null}function Ce(z,j,W,pe){for(var Re=null,Ve=null,Oe=j,Me=j=0,Jt=null;Oe!==null&&Me<W.length;Me++){Oe.index>Me?(Jt=Oe,Oe=null):Jt=Oe.sibling;var it=oe(z,Oe,W[Me],pe);if(it===null){Oe===null&&(Oe=Jt);break}r&&Oe&&it.alternate===null&&i(z,Oe),j=m(it,j,Me),Ve===null?Re=it:Ve.sibling=it,Ve=it,Oe=Jt}if(Me===W.length)return a(z,Oe),It&&Ei(z,Me),Re;if(Oe===null){for(;Me<W.length;Me++)Oe=he(z,W[Me],pe),Oe!==null&&(j=m(Oe,j,Me),Ve===null?Re=Oe:Ve.sibling=Oe,Ve=Oe);return It&&Ei(z,Me),Re}for(Oe=h(z,Oe);Me<W.length;Me++)Jt=Te(Oe,z,Me,W[Me],pe),Jt!==null&&(r&&Jt.alternate!==null&&Oe.delete(Jt.key===null?Me:Jt.key),j=m(Jt,j,Me),Ve===null?Re=Jt:Ve.sibling=Jt,Ve=Jt);return r&&Oe.forEach(function(Ls){return i(z,Ls)}),It&&Ei(z,Me),Re}function ke(z,j,W,pe){var Re=Y(W);if(typeof Re!="function")throw Error(t(150));if(W=Re.call(W),W==null)throw Error(t(151));for(var Ve=Re=null,Oe=j,Me=j=0,Jt=null,it=W.next();Oe!==null&&!it.done;Me++,it=W.next()){Oe.index>Me?(Jt=Oe,Oe=null):Jt=Oe.sibling;var Ls=oe(z,Oe,it.value,pe);if(Ls===null){Oe===null&&(Oe=Jt);break}r&&Oe&&Ls.alternate===null&&i(z,Oe),j=m(Ls,j,Me),Ve===null?Re=Ls:Ve.sibling=Ls,Ve=Ls,Oe=Jt}if(it.done)return a(z,Oe),It&&Ei(z,Me),Re;if(Oe===null){for(;!it.done;Me++,it=W.next())it=he(z,it.value,pe),it!==null&&(j=m(it,j,Me),Ve===null?Re=it:Ve.sibling=it,Ve=it);return It&&Ei(z,Me),Re}for(Oe=h(z,Oe);!it.done;Me++,it=W.next())it=Te(Oe,z,Me,it.value,pe),it!==null&&(r&&it.alternate!==null&&Oe.delete(it.key===null?Me:it.key),j=m(it,j,Me),Ve===null?Re=it:Ve.sibling=it,Ve=it);return r&&Oe.forEach(function(L0){return i(z,L0)}),It&&Ei(z,Me),Re}function Lt(z,j,W,pe){if(typeof W=="object"&&W!==null&&W.type===x&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case ne:e:{for(var Re=W.key,Ve=j;Ve!==null;){if(Ve.key===Re){if(Re=W.type,Re===x){if(Ve.tag===7){a(z,Ve.sibling),j=d(Ve,W.props.children),j.return=z,z=j;break e}}else if(Ve.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Fe&&sm(Re)===Ve.type){a(z,Ve.sibling),j=d(Ve,W.props),j.ref=ba(z,Ve,W),j.return=z,z=j;break e}a(z,Ve);break}else i(z,Ve);Ve=Ve.sibling}W.type===x?(j=Pi(W.props.children,z.mode,pe,W.key),j.return=z,z=j):(pe=ku(W.type,W.key,W.props,null,z.mode,pe),pe.ref=ba(z,j,W),pe.return=z,z=pe)}return w(z);case ie:e:{for(Ve=W.key;j!==null;){if(j.key===Ve)if(j.tag===4&&j.stateNode.containerInfo===W.containerInfo&&j.stateNode.implementation===W.implementation){a(z,j.sibling),j=d(j,W.children||[]),j.return=z,z=j;break e}else{a(z,j);break}else i(z,j);j=j.sibling}j=ud(W,z.mode,pe),j.return=z,z=j}return w(z);case Fe:return Ve=W._init,Lt(z,j,Ve(W._payload),pe)}if(Ne(W))return Ce(z,j,W,pe);if(Y(W))return ke(z,j,W,pe);nu(z,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,j!==null&&j.tag===6?(a(z,j.sibling),j=d(j,W),j.return=z,z=j):(a(z,j),j=ld(W,z.mode,pe),j.return=z,z=j),w(z)):a(z,j)}return Lt}var Eo=im(!0),om=im(!1),ru=Cs(null),su=null,To=null,vh=null;function _h(){vh=To=su=null}function wh(r){var i=ru.current;wt(ru),r._currentValue=i}function Eh(r,i,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===a)break;r=r.return}}function Io(r,i){su=r,vh=To=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(An=!0),r.firstContext=null)}function er(r){var i=r._currentValue;if(vh!==r)if(r={context:r,memoizedValue:i,next:null},To===null){if(su===null)throw Error(t(308));To=r,su.dependencies={lanes:0,firstContext:r}}else To=To.next=r;return i}var Ti=null;function Th(r){Ti===null?Ti=[r]:Ti.push(r)}function am(r,i,a,h){var d=i.interleaved;return d===null?(a.next=a,Th(i)):(a.next=d.next,d.next=a),i.interleaved=a,ns(r,h)}function ns(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var As=!1;function Ih(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lm(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function rs(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function Ps(r,i,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(st&2)!==0){var d=h.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),h.pending=i,ns(r,a)}return d=h.interleaved,d===null?(i.next=i,Th(h)):(i.next=d.next,d.next=i),h.interleaved=i,ns(r,a)}function iu(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,fa(r,a)}}function um(r,i){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function ou(r,i,a,h){var d=r.updateQueue;As=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,N=d.shared.pending;if(N!==null){d.shared.pending=null;var M=N,H=M.next;M.next=null,w===null?m=H:w.next=H,w=M;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,N=ae.lastBaseUpdate,N!==w&&(N===null?ae.firstBaseUpdate=H:N.next=H,ae.lastBaseUpdate=M))}if(m!==null){var he=d.baseState;w=0,ae=H=M=null,N=m;do{var oe=N.lane,Te=N.eventTime;if((h&oe)===oe){ae!==null&&(ae=ae.next={eventTime:Te,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var Ce=r,ke=N;switch(oe=i,Te=a,ke.tag){case 1:if(Ce=ke.payload,typeof Ce=="function"){he=Ce.call(Te,he,oe);break e}he=Ce;break e;case 3:Ce.flags=Ce.flags&-65537|128;case 0:if(Ce=ke.payload,oe=typeof Ce=="function"?Ce.call(Te,he,oe):Ce,oe==null)break e;he=Z({},he,oe);break e;case 2:As=!0}}N.callback!==null&&N.lane!==0&&(r.flags|=64,oe=d.effects,oe===null?d.effects=[N]:oe.push(N))}else Te={eventTime:Te,lane:oe,tag:N.tag,payload:N.payload,callback:N.callback,next:null},ae===null?(H=ae=Te,M=he):ae=ae.next=Te,w|=oe;if(N=N.next,N===null){if(N=d.shared.pending,N===null)break;oe=N,N=oe.next,oe.next=null,d.lastBaseUpdate=oe,d.shared.pending=null}}while(!0);if(ae===null&&(M=he),d.baseState=M,d.firstBaseUpdate=H,d.lastBaseUpdate=ae,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else m===null&&(d.shared.lanes=0);Ci|=w,r.lanes=w,r.memoizedState=he}}function cm(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var Da={},Dr=Cs(Da),Va=Cs(Da),Oa=Cs(Da);function Ii(r){if(r===Da)throw Error(t(174));return r}function Sh(r,i){switch(mt(Oa,i),mt(Va,r),mt(Dr,Da),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ln(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Ln(i,r)}wt(Dr),mt(Dr,i)}function So(){wt(Dr),wt(Va),wt(Oa)}function hm(r){Ii(Oa.current);var i=Ii(Dr.current),a=Ln(i,r.type);i!==a&&(mt(Va,r),mt(Dr,a))}function Ch(r){Va.current===r&&(wt(Dr),wt(Va))}var Ct=Cs(0);function au(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var kh=[];function Rh(){for(var r=0;r<kh.length;r++)kh[r]._workInProgressVersionPrimary=null;kh.length=0}var lu=le.ReactCurrentDispatcher,Ah=le.ReactCurrentBatchConfig,Si=0,kt=null,Ht=null,Qt=null,uu=!1,La=!1,Ma=0,s0=0;function mn(){throw Error(t(321))}function Ph(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!ar(r[a],i[a]))return!1;return!0}function xh(r,i,a,h,d,m){if(Si=m,kt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,lu.current=r===null||r.memoizedState===null?l0:u0,r=a(h,d),La){m=0;do{if(La=!1,Ma=0,25<=m)throw Error(t(301));m+=1,Qt=Ht=null,i.updateQueue=null,lu.current=c0,r=a(h,d)}while(La)}if(lu.current=du,i=Ht!==null&&Ht.next!==null,Si=0,Qt=Ht=kt=null,uu=!1,i)throw Error(t(300));return r}function Nh(){var r=Ma!==0;return Ma=0,r}function Vr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?kt.memoizedState=Qt=r:Qt=Qt.next=r,Qt}function tr(){if(Ht===null){var r=kt.alternate;r=r!==null?r.memoizedState:null}else r=Ht.next;var i=Qt===null?kt.memoizedState:Qt.next;if(i!==null)Qt=i,Ht=r;else{if(r===null)throw Error(t(310));Ht=r,r={memoizedState:Ht.memoizedState,baseState:Ht.baseState,baseQueue:Ht.baseQueue,queue:Ht.queue,next:null},Qt===null?kt.memoizedState=Qt=r:Qt=Qt.next=r}return Qt}function ja(r,i){return typeof i=="function"?i(r):i}function bh(r){var i=tr(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=Ht,d=h.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}h.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,h=h.baseState;var N=w=null,M=null,H=m;do{var ae=H.lane;if((Si&ae)===ae)M!==null&&(M=M.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),h=H.hasEagerState?H.eagerState:r(h,H.action);else{var he={lane:ae,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};M===null?(N=M=he,w=h):M=M.next=he,kt.lanes|=ae,Ci|=ae}H=H.next}while(H!==null&&H!==m);M===null?w=h:M.next=N,ar(h,i.memoizedState)||(An=!0),i.memoizedState=h,i.baseState=w,i.baseQueue=M,a.lastRenderedState=h}if(r=a.interleaved,r!==null){d=r;do m=d.lane,kt.lanes|=m,Ci|=m,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Dh(r){var i=tr(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=r(m,w.action),w=w.next;while(w!==d);ar(m,i.memoizedState)||(An=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,h]}function dm(){}function fm(r,i){var a=kt,h=tr(),d=i(),m=!ar(h.memoizedState,d);if(m&&(h.memoizedState=d,An=!0),h=h.queue,Vh(gm.bind(null,a,h,r),[r]),h.getSnapshot!==i||m||Qt!==null&&Qt.memoizedState.tag&1){if(a.flags|=2048,Fa(9,mm.bind(null,a,h,d,i),void 0,null),Yt===null)throw Error(t(349));(Si&30)!==0||pm(a,i,d)}return d}function pm(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=kt.updateQueue,i===null?(i={lastEffect:null,stores:null},kt.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function mm(r,i,a,h){i.value=a,i.getSnapshot=h,ym(i)&&vm(r)}function gm(r,i,a){return a(function(){ym(i)&&vm(r)})}function ym(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!ar(r,a)}catch{return!0}}function vm(r){var i=ns(r,1);i!==null&&dr(i,r,1,-1)}function _m(r){var i=Vr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:r},i.queue=r,r=r.dispatch=a0.bind(null,kt,r),[i.memoizedState,r]}function Fa(r,i,a,h){return r={tag:r,create:i,destroy:a,deps:h,next:null},i=kt.updateQueue,i===null?(i={lastEffect:null,stores:null},kt.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,i.lastEffect=r)),r}function wm(){return tr().memoizedState}function cu(r,i,a,h){var d=Vr();kt.flags|=r,d.memoizedState=Fa(1|i,a,void 0,h===void 0?null:h)}function hu(r,i,a,h){var d=tr();h=h===void 0?null:h;var m=void 0;if(Ht!==null){var w=Ht.memoizedState;if(m=w.destroy,h!==null&&Ph(h,w.deps)){d.memoizedState=Fa(i,a,m,h);return}}kt.flags|=r,d.memoizedState=Fa(1|i,a,m,h)}function Em(r,i){return cu(8390656,8,r,i)}function Vh(r,i){return hu(2048,8,r,i)}function Tm(r,i){return hu(4,2,r,i)}function Im(r,i){return hu(4,4,r,i)}function Sm(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Cm(r,i,a){return a=a!=null?a.concat([r]):null,hu(4,4,Sm.bind(null,i,r),a)}function Oh(){}function km(r,i){var a=tr();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Ph(i,h[1])?h[0]:(a.memoizedState=[r,i],r)}function Rm(r,i){var a=tr();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Ph(i,h[1])?h[0]:(r=r(),a.memoizedState=[r,i],r)}function Am(r,i,a){return(Si&21)===0?(r.baseState&&(r.baseState=!1,An=!0),r.memoizedState=a):(ar(a,i)||(a=ha(),kt.lanes|=a,Ci|=a,r.baseState=!0),i)}function i0(r,i){var a=et;et=a!==0&&4>a?a:4,r(!0);var h=Ah.transition;Ah.transition={};try{r(!1),i()}finally{et=a,Ah.transition=h}}function Pm(){return tr().memoizedState}function o0(r,i,a){var h=Ds(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},xm(r))Nm(i,a);else if(a=am(r,i,a,h),a!==null){var d=Sn();dr(a,r,h,d),bm(a,i,h)}}function a0(r,i,a){var h=Ds(r),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(xm(r))Nm(i,d);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,N=m(w,a);if(d.hasEagerState=!0,d.eagerState=N,ar(N,w)){var M=i.interleaved;M===null?(d.next=d,Th(i)):(d.next=M.next,M.next=d),i.interleaved=d;return}}catch{}finally{}a=am(r,i,d,h),a!==null&&(d=Sn(),dr(a,r,h,d),bm(a,i,h))}}function xm(r){var i=r.alternate;return r===kt||i!==null&&i===kt}function Nm(r,i){La=uu=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function bm(r,i,a){if((a&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,fa(r,a)}}var du={readContext:er,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useInsertionEffect:mn,useLayoutEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useMutableSource:mn,useSyncExternalStore:mn,useId:mn,unstable_isNewReconciler:!1},l0={readContext:er,useCallback:function(r,i){return Vr().memoizedState=[r,i===void 0?null:i],r},useContext:er,useEffect:Em,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,cu(4194308,4,Sm.bind(null,i,r),a)},useLayoutEffect:function(r,i){return cu(4194308,4,r,i)},useInsertionEffect:function(r,i){return cu(4,2,r,i)},useMemo:function(r,i){var a=Vr();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var h=Vr();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=o0.bind(null,kt,r),[h.memoizedState,r]},useRef:function(r){var i=Vr();return r={current:r},i.memoizedState=r},useState:_m,useDebugValue:Oh,useDeferredValue:function(r){return Vr().memoizedState=r},useTransition:function(){var r=_m(!1),i=r[0];return r=i0.bind(null,r[1]),Vr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var h=kt,d=Vr();if(It){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Yt===null)throw Error(t(349));(Si&30)!==0||pm(h,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,Em(gm.bind(null,h,m,r),[r]),h.flags|=2048,Fa(9,mm.bind(null,h,m,a,i),void 0,null),a},useId:function(){var r=Vr(),i=Yt.identifierPrefix;if(It){var a=ts,h=es;a=(h&~(1<<32-jn(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ma++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=s0++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},u0={readContext:er,useCallback:km,useContext:er,useEffect:Vh,useImperativeHandle:Cm,useInsertionEffect:Tm,useLayoutEffect:Im,useMemo:Rm,useReducer:bh,useRef:wm,useState:function(){return bh(ja)},useDebugValue:Oh,useDeferredValue:function(r){var i=tr();return Am(i,Ht.memoizedState,r)},useTransition:function(){var r=bh(ja)[0],i=tr().memoizedState;return[r,i]},useMutableSource:dm,useSyncExternalStore:fm,useId:Pm,unstable_isNewReconciler:!1},c0={readContext:er,useCallback:km,useContext:er,useEffect:Vh,useImperativeHandle:Cm,useInsertionEffect:Tm,useLayoutEffect:Im,useMemo:Rm,useReducer:Dh,useRef:wm,useState:function(){return Dh(ja)},useDebugValue:Oh,useDeferredValue:function(r){var i=tr();return Ht===null?i.memoizedState=r:Am(i,Ht.memoizedState,r)},useTransition:function(){var r=Dh(ja)[0],i=tr().memoizedState;return[r,i]},useMutableSource:dm,useSyncExternalStore:fm,useId:Pm,unstable_isNewReconciler:!1};function ur(r,i){if(r&&r.defaultProps){i=Z({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function Lh(r,i,a,h){i=r.memoizedState,a=a(h,i),a=a==null?i:Z({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var fu={isMounted:function(r){return(r=r._reactInternals)?ir(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var h=Sn(),d=Ds(r),m=rs(h,d);m.payload=i,a!=null&&(m.callback=a),i=Ps(r,m,d),i!==null&&(dr(i,r,d,h),iu(i,r,d))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var h=Sn(),d=Ds(r),m=rs(h,d);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=Ps(r,m,d),i!==null&&(dr(i,r,d,h),iu(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=Sn(),h=Ds(r),d=rs(a,h);d.tag=2,i!=null&&(d.callback=i),i=Ps(r,d,h),i!==null&&(dr(i,r,h,a),iu(i,r,h))}};function Dm(r,i,a,h,d,m,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,m,w):i.prototype&&i.prototype.isPureReactComponent?!Ca(a,h)||!Ca(d,m):!0}function Vm(r,i,a){var h=!1,d=ks,m=i.contextType;return typeof m=="object"&&m!==null?m=er(m):(d=Rn(i)?_i:pn.current,h=i.contextTypes,m=(h=h!=null)?yo(r,d):ks),i=new i(a,m),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=fu,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=m),i}function Om(r,i,a,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==r&&fu.enqueueReplaceState(i,i.state,null)}function Mh(r,i,a,h){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Ih(r);var m=i.contextType;typeof m=="object"&&m!==null?d.context=er(m):(m=Rn(i)?_i:pn.current,d.context=yo(r,m)),d.state=r.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Lh(r,i,m,a),d.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&fu.enqueueReplaceState(d,d.state,null),ou(r,a,d,h),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function Co(r,i){try{var a="",h=i;do a+=Ue(h),h=h.return;while(h);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:i,stack:d,digest:null}}function jh(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function Fh(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var h0=typeof WeakMap=="function"?WeakMap:Map;function Lm(r,i,a){a=rs(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){wu||(wu=!0,ed=h),Fh(r,i)},a}function Mm(r,i,a){a=rs(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=i.value;a.payload=function(){return h(d)},a.callback=function(){Fh(r,i)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Fh(r,i),typeof h!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function jm(r,i,a){var h=r.pingCache;if(h===null){h=r.pingCache=new h0;var d=new Set;h.set(i,d)}else d=h.get(i),d===void 0&&(d=new Set,h.set(i,d));d.has(a)||(d.add(a),r=C0.bind(null,r,i,a),i.then(r,r))}function Fm(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Um(r,i,a,h,d){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=rs(-1,1),i.tag=2,Ps(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var d0=le.ReactCurrentOwner,An=!1;function In(r,i,a,h){i.child=r===null?om(i,null,a,h):Eo(i,r.child,a,h)}function zm(r,i,a,h,d){a=a.render;var m=i.ref;return Io(i,d),h=xh(r,i,a,h,m,d),a=Nh(),r!==null&&!An?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,ss(r,i,d)):(It&&a&&fh(i),i.flags|=1,In(r,i,h,d),i.child)}function Bm(r,i,a,h,d){if(r===null){var m=a.type;return typeof m=="function"&&!ad(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,$m(r,i,m,h,d)):(r=ku(a.type,null,h,i,i.mode,d),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,(r.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ca,a(w,h)&&r.ref===i.ref)return ss(r,i,d)}return i.flags|=1,r=Os(m,h),r.ref=i.ref,r.return=i,i.child=r}function $m(r,i,a,h,d){if(r!==null){var m=r.memoizedProps;if(Ca(m,h)&&r.ref===i.ref)if(An=!1,i.pendingProps=h=m,(r.lanes&d)!==0)(r.flags&131072)!==0&&(An=!0);else return i.lanes=r.lanes,ss(r,i,d)}return Uh(r,i,a,h,d)}function Wm(r,i,a){var h=i.pendingProps,d=h.children,m=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},mt(Ro,Hn),Hn|=a;else{if((a&1073741824)===0)return r=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,mt(Ro,Hn),Hn|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:a,mt(Ro,Hn),Hn|=h}else m!==null?(h=m.baseLanes|a,i.memoizedState=null):h=a,mt(Ro,Hn),Hn|=h;return In(r,i,d,a),i.child}function Hm(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Uh(r,i,a,h,d){var m=Rn(a)?_i:pn.current;return m=yo(i,m),Io(i,d),a=xh(r,i,a,h,m,d),h=Nh(),r!==null&&!An?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,ss(r,i,d)):(It&&h&&fh(i),i.flags|=1,In(r,i,a,d),i.child)}function qm(r,i,a,h,d){if(Rn(a)){var m=!0;Jl(i)}else m=!1;if(Io(i,d),i.stateNode===null)mu(r,i),Vm(i,a,h),Mh(i,a,h,d),h=!0;else if(r===null){var w=i.stateNode,N=i.memoizedProps;w.props=N;var M=w.context,H=a.contextType;typeof H=="object"&&H!==null?H=er(H):(H=Rn(a)?_i:pn.current,H=yo(i,H));var ae=a.getDerivedStateFromProps,he=typeof ae=="function"||typeof w.getSnapshotBeforeUpdate=="function";he||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==h||M!==H)&&Om(i,w,h,H),As=!1;var oe=i.memoizedState;w.state=oe,ou(i,h,w,d),M=i.memoizedState,N!==h||oe!==M||kn.current||As?(typeof ae=="function"&&(Lh(i,a,ae,h),M=i.memoizedState),(N=As||Dm(i,a,N,h,oe,M,H))?(he||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=M),w.props=h,w.state=M,w.context=H,h=N):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,lm(r,i),N=i.memoizedProps,H=i.type===i.elementType?N:ur(i.type,N),w.props=H,he=i.pendingProps,oe=w.context,M=a.contextType,typeof M=="object"&&M!==null?M=er(M):(M=Rn(a)?_i:pn.current,M=yo(i,M));var Te=a.getDerivedStateFromProps;(ae=typeof Te=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==he||oe!==M)&&Om(i,w,h,M),As=!1,oe=i.memoizedState,w.state=oe,ou(i,h,w,d);var Ce=i.memoizedState;N!==he||oe!==Ce||kn.current||As?(typeof Te=="function"&&(Lh(i,a,Te,h),Ce=i.memoizedState),(H=As||Dm(i,a,H,h,oe,Ce,M)||!1)?(ae||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Ce,M),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Ce,M)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===r.memoizedProps&&oe===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&oe===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=Ce),w.props=h,w.state=Ce,w.context=M,h=H):(typeof w.componentDidUpdate!="function"||N===r.memoizedProps&&oe===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===r.memoizedProps&&oe===r.memoizedState||(i.flags|=1024),h=!1)}return zh(r,i,a,h,m,d)}function zh(r,i,a,h,d,m){Hm(r,i);var w=(i.flags&128)!==0;if(!h&&!w)return d&&Jp(i,a,!1),ss(r,i,m);h=i.stateNode,d0.current=i;var N=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&w?(i.child=Eo(i,r.child,null,m),i.child=Eo(i,null,N,m)):In(r,i,N,m),i.memoizedState=h.state,d&&Jp(i,a,!0),i.child}function Gm(r){var i=r.stateNode;i.pendingContext?Qp(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Qp(r,i.context,!1),Sh(r,i.containerInfo)}function Km(r,i,a,h,d){return wo(),yh(d),i.flags|=256,In(r,i,a,h),i.child}var Bh={dehydrated:null,treeContext:null,retryLane:0};function $h(r){return{baseLanes:r,cachePool:null,transitions:null}}function Qm(r,i,a){var h=i.pendingProps,d=Ct.current,m=!1,w=(i.flags&128)!==0,N;if((N=w)||(N=r!==null&&r.memoizedState===null?!1:(d&2)!==0),N?(m=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),mt(Ct,d&1),r===null)return gh(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=h.children,r=h.fallback,m?(h=i.mode,m=i.child,w={mode:"hidden",children:w},(h&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=Ru(w,h,0,null),r=Pi(r,h,a,null),m.return=i,r.return=i,m.sibling=r,i.child=m,i.child.memoizedState=$h(a),i.memoizedState=Bh,r):Wh(i,w));if(d=r.memoizedState,d!==null&&(N=d.dehydrated,N!==null))return f0(r,i,w,h,N,d,a);if(m){m=h.fallback,w=i.mode,d=r.child,N=d.sibling;var M={mode:"hidden",children:h.children};return(w&1)===0&&i.child!==d?(h=i.child,h.childLanes=0,h.pendingProps=M,i.deletions=null):(h=Os(d,M),h.subtreeFlags=d.subtreeFlags&14680064),N!==null?m=Os(N,m):(m=Pi(m,w,a,null),m.flags|=2),m.return=i,h.return=i,h.sibling=m,i.child=h,h=m,m=i.child,w=r.child.memoizedState,w=w===null?$h(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=r.childLanes&~a,i.memoizedState=Bh,h}return m=r.child,r=m.sibling,h=Os(m,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=h,i.memoizedState=null,h}function Wh(r,i){return i=Ru({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function pu(r,i,a,h){return h!==null&&yh(h),Eo(i,r.child,null,a),r=Wh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function f0(r,i,a,h,d,m,w){if(a)return i.flags&256?(i.flags&=-257,h=jh(Error(t(422))),pu(r,i,w,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(m=h.fallback,d=i.mode,h=Ru({mode:"visible",children:h.children},d,0,null),m=Pi(m,d,w,null),m.flags|=2,h.return=i,m.return=i,h.sibling=m,i.child=h,(i.mode&1)!==0&&Eo(i,r.child,null,w),i.child.memoizedState=$h(w),i.memoizedState=Bh,m);if((i.mode&1)===0)return pu(r,i,w,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var N=h.dgst;return h=N,m=Error(t(419)),h=jh(m,h,void 0),pu(r,i,w,h)}if(N=(w&r.childLanes)!==0,An||N){if(h=Yt,h!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(h.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,ns(r,d),dr(h,r,d,-1))}return od(),h=jh(Error(t(421))),pu(r,i,w,h)}return d.data==="$?"?(i.flags|=128,i.child=r.child,i=k0.bind(null,r),d._reactRetry=i,null):(r=m.treeContext,Wn=Ss(d.nextSibling),$n=i,It=!0,lr=null,r!==null&&(Xn[Zn++]=es,Xn[Zn++]=ts,Xn[Zn++]=wi,es=r.id,ts=r.overflow,wi=i),i=Wh(i,h.children),i.flags|=4096,i)}function Ym(r,i,a){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),Eh(r.return,i,a)}function Hh(r,i,a,h,d){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=a,m.tailMode=d)}function Jm(r,i,a){var h=i.pendingProps,d=h.revealOrder,m=h.tail;if(In(r,i,h.children,a),h=Ct.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Ym(r,a,i);else if(r.tag===19)Ym(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(mt(Ct,h),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)r=a.alternate,r!==null&&au(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),Hh(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(r=d.alternate,r!==null&&au(r)===null){i.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}Hh(i,!0,a,null,m);break;case"together":Hh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function mu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function ss(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Ci|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,a=Os(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=Os(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function p0(r,i,a){switch(i.tag){case 3:Gm(i),wo();break;case 5:hm(i);break;case 1:Rn(i.type)&&Jl(i);break;case 4:Sh(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,d=i.memoizedProps.value;mt(ru,h._currentValue),h._currentValue=d;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(mt(Ct,Ct.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Qm(r,i,a):(mt(Ct,Ct.current&1),r=ss(r,i,a),r!==null?r.sibling:null);mt(Ct,Ct.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(r.flags&128)!==0){if(h)return Jm(r,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),mt(Ct,Ct.current),h)break;return null;case 22:case 23:return i.lanes=0,Wm(r,i,a)}return ss(r,i,a)}var Xm,qh,Zm,eg;Xm=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},qh=function(){},Zm=function(r,i,a,h){var d=r.memoizedProps;if(d!==h){r=i.stateNode,Ii(Dr.current);var m=null;switch(a){case"input":d=ce(r,d),h=ce(r,h),m=[];break;case"select":d=Z({},d,{value:void 0}),h=Z({},h,{value:void 0}),m=[];break;case"textarea":d=Nt(r,d),h=Nt(r,h),m=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Kl)}Ke(a,h);var w;a=null;for(H in d)if(!h.hasOwnProperty(H)&&d.hasOwnProperty(H)&&d[H]!=null)if(H==="style"){var N=d[H];for(w in N)N.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?m||(m=[]):(m=m||[]).push(H,null));for(H in h){var M=h[H];if(N=d!=null?d[H]:void 0,h.hasOwnProperty(H)&&M!==N&&(M!=null||N!=null))if(H==="style")if(N){for(w in N)!N.hasOwnProperty(w)||M&&M.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in M)M.hasOwnProperty(w)&&N[w]!==M[w]&&(a||(a={}),a[w]=M[w])}else a||(m||(m=[]),m.push(H,a)),a=M;else H==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,N=N?N.__html:void 0,M!=null&&N!==M&&(m=m||[]).push(H,M)):H==="children"?typeof M!="string"&&typeof M!="number"||(m=m||[]).push(H,""+M):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(M!=null&&H==="onScroll"&&_t("scroll",r),m||N===M||(m=[])):(m=m||[]).push(H,M))}a&&(m=m||[]).push("style",a);var H=m;(i.updateQueue=H)&&(i.flags|=4)}},eg=function(r,i,a,h){a!==h&&(i.flags|=4)};function Ua(r,i){if(!It)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function gn(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(i)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=h,r.childLanes=a,i}function m0(r,i,a){var h=i.pendingProps;switch(ph(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(i),null;case 1:return Rn(i.type)&&Yl(),gn(i),null;case 3:return h=i.stateNode,So(),wt(kn),wt(pn),Rh(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(tu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,lr!==null&&(rd(lr),lr=null))),qh(r,i),gn(i),null;case 5:Ch(i);var d=Ii(Oa.current);if(a=i.type,r!==null&&i.stateNode!=null)Zm(r,i,a,h,d),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return gn(i),null}if(r=Ii(Dr.current),tu(i)){h=i.stateNode,a=i.type;var m=i.memoizedProps;switch(h[br]=i,h[xa]=m,r=(i.mode&1)!==0,a){case"dialog":_t("cancel",h),_t("close",h);break;case"iframe":case"object":case"embed":_t("load",h);break;case"video":case"audio":for(d=0;d<Ra.length;d++)_t(Ra[d],h);break;case"source":_t("error",h);break;case"img":case"image":case"link":_t("error",h),_t("load",h);break;case"details":_t("toggle",h);break;case"input":$(h,m),_t("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},_t("invalid",h);break;case"textarea":Gn(h,m),_t("invalid",h)}Ke(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var N=m[w];w==="children"?typeof N=="string"?h.textContent!==N&&(m.suppressHydrationWarning!==!0&&Gl(h.textContent,N,r),d=["children",N]):typeof N=="number"&&h.textContent!==""+N&&(m.suppressHydrationWarning!==!0&&Gl(h.textContent,N,r),d=["children",""+N]):o.hasOwnProperty(w)&&N!=null&&w==="onScroll"&&_t("scroll",h)}switch(a){case"input":Vn(h),fe(h,m,!0);break;case"textarea":Vn(h),Tn(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=Kl)}h=d,i.updateQueue=h,h!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=vr(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[br]=i,r[xa]=h,Xm(r,i,!1,!1),i.stateNode=r;e:{switch(w=$e(a,h),a){case"dialog":_t("cancel",r),_t("close",r),d=h;break;case"iframe":case"object":case"embed":_t("load",r),d=h;break;case"video":case"audio":for(d=0;d<Ra.length;d++)_t(Ra[d],r);d=h;break;case"source":_t("error",r),d=h;break;case"img":case"image":case"link":_t("error",r),_t("load",r),d=h;break;case"details":_t("toggle",r),d=h;break;case"input":$(r,h),d=ce(r,h),_t("invalid",r);break;case"option":d=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},d=Z({},h,{value:void 0}),_t("invalid",r);break;case"textarea":Gn(r,h),d=Nt(r,h),_t("invalid",r);break;default:d=h}Ke(a,d),N=d;for(m in N)if(N.hasOwnProperty(m)){var M=N[m];m==="style"?Cn(r,M):m==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&ms(r,M)):m==="children"?typeof M=="string"?(a!=="textarea"||M!=="")&&Qn(r,M):typeof M=="number"&&Qn(r,""+M):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?M!=null&&m==="onScroll"&&_t("scroll",r):M!=null&&te(r,m,M,w))}switch(a){case"input":Vn(r),fe(r,h,!1);break;case"textarea":Vn(r),Tn(r);break;case"option":h.value!=null&&r.setAttribute("value",""+ze(h.value));break;case"select":r.multiple=!!h.multiple,m=h.value,m!=null?yt(r,!!h.multiple,m,!1):h.defaultValue!=null&&yt(r,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=Kl)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return gn(i),null;case 6:if(r&&i.stateNode!=null)eg(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ii(Oa.current),Ii(Dr.current),tu(i)){if(h=i.stateNode,a=i.memoizedProps,h[br]=i,(m=h.nodeValue!==a)&&(r=$n,r!==null))switch(r.tag){case 3:Gl(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Gl(h.nodeValue,a,(r.mode&1)!==0)}m&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[br]=i,i.stateNode=h}return gn(i),null;case 13:if(wt(Ct),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(It&&Wn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)rm(),wo(),i.flags|=98560,m=!1;else if(m=tu(i),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[br]=i}else wo(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;gn(i),m=!1}else lr!==null&&(rd(lr),lr=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Ct.current&1)!==0?qt===0&&(qt=3):od())),i.updateQueue!==null&&(i.flags|=4),gn(i),null);case 4:return So(),qh(r,i),r===null&&Aa(i.stateNode.containerInfo),gn(i),null;case 10:return wh(i.type._context),gn(i),null;case 17:return Rn(i.type)&&Yl(),gn(i),null;case 19:if(wt(Ct),m=i.memoizedState,m===null)return gn(i),null;if(h=(i.flags&128)!==0,w=m.rendering,w===null)if(h)Ua(m,!1);else{if(qt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=au(r),w!==null){for(i.flags|=128,Ua(m,!1),h=w.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)m=a,r=h,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,r=w.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return mt(Ct,Ct.current&1|2),i.child}r=r.sibling}m.tail!==null&&vt()>Ao&&(i.flags|=128,h=!0,Ua(m,!1),i.lanes=4194304)}else{if(!h)if(r=au(w),r!==null){if(i.flags|=128,h=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Ua(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!It)return gn(i),null}else 2*vt()-m.renderingStartTime>Ao&&a!==1073741824&&(i.flags|=128,h=!0,Ua(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(a=m.last,a!==null?a.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=vt(),i.sibling=null,a=Ct.current,mt(Ct,h?a&1|2:a&1),i):(gn(i),null);case 22:case 23:return id(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(Hn&1073741824)!==0&&(gn(i),i.subtreeFlags&6&&(i.flags|=8192)):gn(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function g0(r,i){switch(ph(i),i.tag){case 1:return Rn(i.type)&&Yl(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return So(),wt(kn),wt(pn),Rh(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Ch(i),null;case 13:if(wt(Ct),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));wo()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return wt(Ct),null;case 4:return So(),null;case 10:return wh(i.type._context),null;case 22:case 23:return id(),null;case 24:return null;default:return null}}var gu=!1,yn=!1,y0=typeof WeakSet=="function"?WeakSet:Set,Se=null;function ko(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){Pt(r,i,h)}else a.current=null}function Gh(r,i,a){try{a()}catch(h){Pt(r,i,h)}}var tg=!1;function v0(r,i){if(ih=Qr,r=Dp(),Jc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,N=-1,M=-1,H=0,ae=0,he=r,oe=null;t:for(;;){for(var Te;he!==a||d!==0&&he.nodeType!==3||(N=w+d),he!==m||h!==0&&he.nodeType!==3||(M=w+h),he.nodeType===3&&(w+=he.nodeValue.length),(Te=he.firstChild)!==null;)oe=he,he=Te;for(;;){if(he===r)break t;if(oe===a&&++H===d&&(N=w),oe===m&&++ae===h&&(M=w),(Te=he.nextSibling)!==null)break;he=oe,oe=he.parentNode}he=Te}a=N===-1||M===-1?null:{start:N,end:M}}else a=null}a=a||{start:0,end:0}}else a=null;for(oh={focusedElem:r,selectionRange:a},Qr=!1,Se=i;Se!==null;)if(i=Se,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Se=r;else for(;Se!==null;){i=Se;try{var Ce=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Ce!==null){var ke=Ce.memoizedProps,Lt=Ce.memoizedState,z=i.stateNode,j=z.getSnapshotBeforeUpdate(i.elementType===i.type?ke:ur(i.type,ke),Lt);z.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var W=i.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(pe){Pt(i,i.return,pe)}if(r=i.sibling,r!==null){r.return=i.return,Se=r;break}Se=i.return}return Ce=tg,tg=!1,Ce}function za(r,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&r)===r){var m=d.destroy;d.destroy=void 0,m!==void 0&&Gh(i,a,m)}d=d.next}while(d!==h)}}function yu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function Kh(r){var i=r.ref;if(i!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof i=="function"?i(r):i.current=r}}function ng(r){var i=r.alternate;i!==null&&(r.alternate=null,ng(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[br],delete i[xa],delete i[ch],delete i[e0],delete i[t0])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function rg(r){return r.tag===5||r.tag===3||r.tag===4}function sg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||rg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Qh(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Kl));else if(h!==4&&(r=r.child,r!==null))for(Qh(r,i,a),r=r.sibling;r!==null;)Qh(r,i,a),r=r.sibling}function Yh(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Yh(r,i,a),r=r.sibling;r!==null;)Yh(r,i,a),r=r.sibling}var an=null,cr=!1;function xs(r,i,a){for(a=a.child;a!==null;)ig(r,i,a),a=a.sibling}function ig(r,i,a){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(ui,a)}catch{}switch(a.tag){case 5:yn||ko(a,i);case 6:var h=an,d=cr;an=null,xs(r,i,a),an=h,cr=d,an!==null&&(cr?(r=an,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):an.removeChild(a.stateNode));break;case 18:an!==null&&(cr?(r=an,a=a.stateNode,r.nodeType===8?uh(r.parentNode,a):r.nodeType===1&&uh(r,a),ws(r)):uh(an,a.stateNode));break;case 4:h=an,d=cr,an=a.stateNode.containerInfo,cr=!0,xs(r,i,a),an=h,cr=d;break;case 0:case 11:case 14:case 15:if(!yn&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&Gh(a,i,w),d=d.next}while(d!==h)}xs(r,i,a);break;case 1:if(!yn&&(ko(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(N){Pt(a,i,N)}xs(r,i,a);break;case 21:xs(r,i,a);break;case 22:a.mode&1?(yn=(h=yn)||a.memoizedState!==null,xs(r,i,a),yn=h):xs(r,i,a);break;default:xs(r,i,a)}}function og(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new y0),i.forEach(function(h){var d=R0.bind(null,r,h);a.has(h)||(a.add(h),h.then(d,d))})}}function hr(r,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var m=r,w=i,N=w;e:for(;N!==null;){switch(N.tag){case 5:an=N.stateNode,cr=!1;break e;case 3:an=N.stateNode.containerInfo,cr=!0;break e;case 4:an=N.stateNode.containerInfo,cr=!0;break e}N=N.return}if(an===null)throw Error(t(160));ig(m,w,d),an=null,cr=!1;var M=d.alternate;M!==null&&(M.return=null),d.return=null}catch(H){Pt(d,i,H)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ag(i,r),i=i.sibling}function ag(r,i){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(hr(i,r),Or(r),h&4){try{za(3,r,r.return),yu(3,r)}catch(ke){Pt(r,r.return,ke)}try{za(5,r,r.return)}catch(ke){Pt(r,r.return,ke)}}break;case 1:hr(i,r),Or(r),h&512&&a!==null&&ko(a,a.return);break;case 5:if(hr(i,r),Or(r),h&512&&a!==null&&ko(a,a.return),r.flags&32){var d=r.stateNode;try{Qn(d,"")}catch(ke){Pt(r,r.return,ke)}}if(h&4&&(d=r.stateNode,d!=null)){var m=r.memoizedProps,w=a!==null?a.memoizedProps:m,N=r.type,M=r.updateQueue;if(r.updateQueue=null,M!==null)try{N==="input"&&m.type==="radio"&&m.name!=null&&de(d,m),$e(N,w);var H=$e(N,m);for(w=0;w<M.length;w+=2){var ae=M[w],he=M[w+1];ae==="style"?Cn(d,he):ae==="dangerouslySetInnerHTML"?ms(d,he):ae==="children"?Qn(d,he):te(d,ae,he,H)}switch(N){case"input":Ee(d,m);break;case"textarea":On(d,m);break;case"select":var oe=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var Te=m.value;Te!=null?yt(d,!!m.multiple,Te,!1):oe!==!!m.multiple&&(m.defaultValue!=null?yt(d,!!m.multiple,m.defaultValue,!0):yt(d,!!m.multiple,m.multiple?[]:"",!1))}d[xa]=m}catch(ke){Pt(r,r.return,ke)}}break;case 6:if(hr(i,r),Or(r),h&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,m=r.memoizedProps;try{d.nodeValue=m}catch(ke){Pt(r,r.return,ke)}}break;case 3:if(hr(i,r),Or(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{ws(i.containerInfo)}catch(ke){Pt(r,r.return,ke)}break;case 4:hr(i,r),Or(r);break;case 13:hr(i,r),Or(r),d=r.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Zh=vt())),h&4&&og(r);break;case 22:if(ae=a!==null&&a.memoizedState!==null,r.mode&1?(yn=(H=yn)||ae,hr(i,r),yn=H):hr(i,r),Or(r),h&8192){if(H=r.memoizedState!==null,(r.stateNode.isHidden=H)&&!ae&&(r.mode&1)!==0)for(Se=r,ae=r.child;ae!==null;){for(he=Se=ae;Se!==null;){switch(oe=Se,Te=oe.child,oe.tag){case 0:case 11:case 14:case 15:za(4,oe,oe.return);break;case 1:ko(oe,oe.return);var Ce=oe.stateNode;if(typeof Ce.componentWillUnmount=="function"){h=oe,a=oe.return;try{i=h,Ce.props=i.memoizedProps,Ce.state=i.memoizedState,Ce.componentWillUnmount()}catch(ke){Pt(h,a,ke)}}break;case 5:ko(oe,oe.return);break;case 22:if(oe.memoizedState!==null){cg(he);continue}}Te!==null?(Te.return=oe,Se=Te):cg(he)}ae=ae.sibling}e:for(ae=null,he=r;;){if(he.tag===5){if(ae===null){ae=he;try{d=he.stateNode,H?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(N=he.stateNode,M=he.memoizedProps.style,w=M!=null&&M.hasOwnProperty("display")?M.display:null,N.style.display=dn("display",w))}catch(ke){Pt(r,r.return,ke)}}}else if(he.tag===6){if(ae===null)try{he.stateNode.nodeValue=H?"":he.memoizedProps}catch(ke){Pt(r,r.return,ke)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===r)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===r)break e;for(;he.sibling===null;){if(he.return===null||he.return===r)break e;ae===he&&(ae=null),he=he.return}ae===he&&(ae=null),he.sibling.return=he.return,he=he.sibling}}break;case 19:hr(i,r),Or(r),h&4&&og(r);break;case 21:break;default:hr(i,r),Or(r)}}function Or(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(rg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(Qn(d,""),h.flags&=-33);var m=sg(r);Yh(r,m,d);break;case 3:case 4:var w=h.stateNode.containerInfo,N=sg(r);Qh(r,N,w);break;default:throw Error(t(161))}}catch(M){Pt(r,r.return,M)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function _0(r,i,a){Se=r,lg(r)}function lg(r,i,a){for(var h=(r.mode&1)!==0;Se!==null;){var d=Se,m=d.child;if(d.tag===22&&h){var w=d.memoizedState!==null||gu;if(!w){var N=d.alternate,M=N!==null&&N.memoizedState!==null||yn;N=gu;var H=yn;if(gu=w,(yn=M)&&!H)for(Se=d;Se!==null;)w=Se,M=w.child,w.tag===22&&w.memoizedState!==null?hg(d):M!==null?(M.return=w,Se=M):hg(d);for(;m!==null;)Se=m,lg(m),m=m.sibling;Se=d,gu=N,yn=H}ug(r)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,Se=m):ug(r)}}function ug(r){for(;Se!==null;){var i=Se;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:yn||yu(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!yn)if(a===null)h.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:ur(i.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&cm(i,m,h);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}cm(i,w,a)}break;case 5:var N=i.stateNode;if(a===null&&i.flags&4){a=N;var M=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&a.focus();break;case"img":M.src&&(a.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var H=i.alternate;if(H!==null){var ae=H.memoizedState;if(ae!==null){var he=ae.dehydrated;he!==null&&ws(he)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}yn||i.flags&512&&Kh(i)}catch(oe){Pt(i,i.return,oe)}}if(i===r){Se=null;break}if(a=i.sibling,a!==null){a.return=i.return,Se=a;break}Se=i.return}}function cg(r){for(;Se!==null;){var i=Se;if(i===r){Se=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Se=a;break}Se=i.return}}function hg(r){for(;Se!==null;){var i=Se;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{yu(4,i)}catch(M){Pt(i,a,M)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var d=i.return;try{h.componentDidMount()}catch(M){Pt(i,d,M)}}var m=i.return;try{Kh(i)}catch(M){Pt(i,m,M)}break;case 5:var w=i.return;try{Kh(i)}catch(M){Pt(i,w,M)}}}catch(M){Pt(i,i.return,M)}if(i===r){Se=null;break}var N=i.sibling;if(N!==null){N.return=i.return,Se=N;break}Se=i.return}}var w0=Math.ceil,vu=le.ReactCurrentDispatcher,Jh=le.ReactCurrentOwner,nr=le.ReactCurrentBatchConfig,st=0,Yt=null,Ft=null,ln=0,Hn=0,Ro=Cs(0),qt=0,Ba=null,Ci=0,_u=0,Xh=0,$a=null,Pn=null,Zh=0,Ao=1/0,is=null,wu=!1,ed=null,Ns=null,Eu=!1,bs=null,Tu=0,Wa=0,td=null,Iu=-1,Su=0;function Sn(){return(st&6)!==0?vt():Iu!==-1?Iu:Iu=vt()}function Ds(r){return(r.mode&1)===0?1:(st&2)!==0&&ln!==0?ln&-ln:r0.transition!==null?(Su===0&&(Su=ha()),Su):(r=et,r!==0||(r=window.event,r=r===void 0?16:no(r.type)),r)}function dr(r,i,a,h){if(50<Wa)throw Wa=0,td=null,Error(t(185));fi(r,a,h),((st&2)===0||r!==Yt)&&(r===Yt&&((st&2)===0&&(_u|=a),qt===4&&Vs(r,ln)),xn(r,h),a===1&&st===0&&(i.mode&1)===0&&(Ao=vt()+500,Xl&&Rs()))}function xn(r,i){var a=r.callbackNode;di(r,i);var h=qr(r,r===Yt?ln:0);if(h===0)a!==null&&Qi(a),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(a!=null&&Qi(a),i===1)r.tag===0?n0(fg.bind(null,r)):Xp(fg.bind(null,r)),XE(function(){(st&6)===0&&Rs()}),a=null;else{switch(Tr(h)){case 1:a=Yi;break;case 4:a=la;break;case 16:a=li;break;case 536870912:a=Ji;break;default:a=li}a=Eg(a,dg.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function dg(r,i){if(Iu=-1,Su=0,(st&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Po()&&r.callbackNode!==a)return null;var h=qr(r,r===Yt?ln:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=Cu(r,h);else{i=h;var d=st;st|=2;var m=mg();(Yt!==r||ln!==i)&&(is=null,Ao=vt()+500,Ri(r,i));do try{I0();break}catch(N){pg(r,N)}while(!0);_h(),vu.current=m,st=d,Ft!==null?i=0:(Yt=null,ln=0,i=qt)}if(i!==0){if(i===2&&(d=ca(r),d!==0&&(h=d,i=nd(r,d))),i===1)throw a=Ba,Ri(r,0),Vs(r,h),xn(r,vt()),a;if(i===6)Vs(r,h);else{if(d=r.current.alternate,(h&30)===0&&!E0(d)&&(i=Cu(r,h),i===2&&(m=ca(r),m!==0&&(h=m,i=nd(r,m))),i===1))throw a=Ba,Ri(r,0),Vs(r,h),xn(r,vt()),a;switch(r.finishedWork=d,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Ai(r,Pn,is);break;case 3:if(Vs(r,h),(h&130023424)===h&&(i=Zh+500-vt(),10<i)){if(qr(r,0)!==0)break;if(d=r.suspendedLanes,(d&h)!==h){Sn(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=lh(Ai.bind(null,r,Pn,is),i);break}Ai(r,Pn,is);break;case 4:if(Vs(r,h),(h&4194240)===h)break;for(i=r.eventTimes,d=-1;0<h;){var w=31-jn(h);m=1<<w,w=i[w],w>d&&(d=w),h&=~m}if(h=d,h=vt()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*w0(h/1960))-h,10<h){r.timeoutHandle=lh(Ai.bind(null,r,Pn,is),h);break}Ai(r,Pn,is);break;case 5:Ai(r,Pn,is);break;default:throw Error(t(329))}}}return xn(r,vt()),r.callbackNode===a?dg.bind(null,r):null}function nd(r,i){var a=$a;return r.current.memoizedState.isDehydrated&&(Ri(r,i).flags|=256),r=Cu(r,i),r!==2&&(i=Pn,Pn=a,i!==null&&rd(i)),r}function rd(r){Pn===null?Pn=r:Pn.push.apply(Pn,r)}function E0(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],m=d.getSnapshot;d=d.value;try{if(!ar(m(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Vs(r,i){for(i&=~Xh,i&=~_u,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-jn(i),h=1<<a;r[a]=-1,i&=~h}}function fg(r){if((st&6)!==0)throw Error(t(327));Po();var i=qr(r,0);if((i&1)===0)return xn(r,vt()),null;var a=Cu(r,i);if(r.tag!==0&&a===2){var h=ca(r);h!==0&&(i=h,a=nd(r,h))}if(a===1)throw a=Ba,Ri(r,0),Vs(r,i),xn(r,vt()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Ai(r,Pn,is),xn(r,vt()),null}function sd(r,i){var a=st;st|=1;try{return r(i)}finally{st=a,st===0&&(Ao=vt()+500,Xl&&Rs())}}function ki(r){bs!==null&&bs.tag===0&&(st&6)===0&&Po();var i=st;st|=1;var a=nr.transition,h=et;try{if(nr.transition=null,et=1,r)return r()}finally{et=h,nr.transition=a,st=i,(st&6)===0&&Rs()}}function id(){Hn=Ro.current,wt(Ro)}function Ri(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,JE(a)),Ft!==null)for(a=Ft.return;a!==null;){var h=a;switch(ph(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Yl();break;case 3:So(),wt(kn),wt(pn),Rh();break;case 5:Ch(h);break;case 4:So();break;case 13:wt(Ct);break;case 19:wt(Ct);break;case 10:wh(h.type._context);break;case 22:case 23:id()}a=a.return}if(Yt=r,Ft=r=Os(r.current,null),ln=Hn=i,qt=0,Ba=null,Xh=_u=Ci=0,Pn=$a=null,Ti!==null){for(i=0;i<Ti.length;i++)if(a=Ti[i],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,h.next=w}a.pending=h}Ti=null}return r}function pg(r,i){do{var a=Ft;try{if(_h(),lu.current=du,uu){for(var h=kt.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}uu=!1}if(Si=0,Qt=Ht=kt=null,La=!1,Ma=0,Jh.current=null,a===null||a.return===null){qt=1,Ba=i,Ft=null;break}e:{var m=r,w=a.return,N=a,M=i;if(i=ln,N.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var H=M,ae=N,he=ae.tag;if((ae.mode&1)===0&&(he===0||he===11||he===15)){var oe=ae.alternate;oe?(ae.updateQueue=oe.updateQueue,ae.memoizedState=oe.memoizedState,ae.lanes=oe.lanes):(ae.updateQueue=null,ae.memoizedState=null)}var Te=Fm(w);if(Te!==null){Te.flags&=-257,Um(Te,w,N,m,i),Te.mode&1&&jm(m,H,i),i=Te,M=H;var Ce=i.updateQueue;if(Ce===null){var ke=new Set;ke.add(M),i.updateQueue=ke}else Ce.add(M);break e}else{if((i&1)===0){jm(m,H,i),od();break e}M=Error(t(426))}}else if(It&&N.mode&1){var Lt=Fm(w);if(Lt!==null){(Lt.flags&65536)===0&&(Lt.flags|=256),Um(Lt,w,N,m,i),yh(Co(M,N));break e}}m=M=Co(M,N),qt!==4&&(qt=2),$a===null?$a=[m]:$a.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var z=Lm(m,M,i);um(m,z);break e;case 1:N=M;var j=m.type,W=m.stateNode;if((m.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Ns===null||!Ns.has(W)))){m.flags|=65536,i&=-i,m.lanes|=i;var pe=Mm(m,N,i);um(m,pe);break e}}m=m.return}while(m!==null)}yg(a)}catch(Re){i=Re,Ft===a&&a!==null&&(Ft=a=a.return);continue}break}while(!0)}function mg(){var r=vu.current;return vu.current=du,r===null?du:r}function od(){(qt===0||qt===3||qt===2)&&(qt=4),Yt===null||(Ci&268435455)===0&&(_u&268435455)===0||Vs(Yt,ln)}function Cu(r,i){var a=st;st|=2;var h=mg();(Yt!==r||ln!==i)&&(is=null,Ri(r,i));do try{T0();break}catch(d){pg(r,d)}while(!0);if(_h(),st=a,vu.current=h,Ft!==null)throw Error(t(261));return Yt=null,ln=0,qt}function T0(){for(;Ft!==null;)gg(Ft)}function I0(){for(;Ft!==null&&!ai();)gg(Ft)}function gg(r){var i=wg(r.alternate,r,Hn);r.memoizedProps=r.pendingProps,i===null?yg(r):Ft=i,Jh.current=null}function yg(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=m0(a,i,Hn),a!==null){Ft=a;return}}else{if(a=g0(a,i),a!==null){a.flags&=32767,Ft=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{qt=6,Ft=null;return}}if(i=i.sibling,i!==null){Ft=i;return}Ft=i=r}while(i!==null);qt===0&&(qt=5)}function Ai(r,i,a){var h=et,d=nr.transition;try{nr.transition=null,et=1,S0(r,i,a,h)}finally{nr.transition=d,et=h}return null}function S0(r,i,a,h){do Po();while(bs!==null);if((st&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var m=a.lanes|a.childLanes;if(qc(r,m),r===Yt&&(Ft=Yt=null,ln=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Eu||(Eu=!0,Eg(li,function(){return Po(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=nr.transition,nr.transition=null;var w=et;et=1;var N=st;st|=4,Jh.current=null,v0(r,a),ag(a,r),WE(oh),Qr=!!ih,oh=ih=null,r.current=a,_0(a),Hr(),st=N,et=w,nr.transition=m}else r.current=a;if(Eu&&(Eu=!1,bs=r,Tu=d),m=r.pendingLanes,m===0&&(Ns=null),bl(a.stateNode),xn(r,vt()),i!==null)for(h=r.onRecoverableError,a=0;a<i.length;a++)d=i[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(wu)throw wu=!1,r=ed,ed=null,r;return(Tu&1)!==0&&r.tag!==0&&Po(),m=r.pendingLanes,(m&1)!==0?r===td?Wa++:(Wa=0,td=r):Wa=0,Rs(),null}function Po(){if(bs!==null){var r=Tr(Tu),i=nr.transition,a=et;try{if(nr.transition=null,et=16>r?16:r,bs===null)var h=!1;else{if(r=bs,bs=null,Tu=0,(st&6)!==0)throw Error(t(331));var d=st;for(st|=4,Se=r.current;Se!==null;){var m=Se,w=m.child;if((Se.flags&16)!==0){var N=m.deletions;if(N!==null){for(var M=0;M<N.length;M++){var H=N[M];for(Se=H;Se!==null;){var ae=Se;switch(ae.tag){case 0:case 11:case 15:za(8,ae,m)}var he=ae.child;if(he!==null)he.return=ae,Se=he;else for(;Se!==null;){ae=Se;var oe=ae.sibling,Te=ae.return;if(ng(ae),ae===H){Se=null;break}if(oe!==null){oe.return=Te,Se=oe;break}Se=Te}}}var Ce=m.alternate;if(Ce!==null){var ke=Ce.child;if(ke!==null){Ce.child=null;do{var Lt=ke.sibling;ke.sibling=null,ke=Lt}while(ke!==null)}}Se=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,Se=w;else e:for(;Se!==null;){if(m=Se,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:za(9,m,m.return)}var z=m.sibling;if(z!==null){z.return=m.return,Se=z;break e}Se=m.return}}var j=r.current;for(Se=j;Se!==null;){w=Se;var W=w.child;if((w.subtreeFlags&2064)!==0&&W!==null)W.return=w,Se=W;else e:for(w=j;Se!==null;){if(N=Se,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:yu(9,N)}}catch(Re){Pt(N,N.return,Re)}if(N===w){Se=null;break e}var pe=N.sibling;if(pe!==null){pe.return=N.return,Se=pe;break e}Se=N.return}}if(st=d,Rs(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(ui,r)}catch{}h=!0}return h}finally{et=a,nr.transition=i}}return!1}function vg(r,i,a){i=Co(a,i),i=Lm(r,i,1),r=Ps(r,i,1),i=Sn(),r!==null&&(fi(r,1,i),xn(r,i))}function Pt(r,i,a){if(r.tag===3)vg(r,r,a);else for(;i!==null;){if(i.tag===3){vg(i,r,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ns===null||!Ns.has(h))){r=Co(a,r),r=Mm(i,r,1),i=Ps(i,r,1),r=Sn(),i!==null&&(fi(i,1,r),xn(i,r));break}}i=i.return}}function C0(r,i,a){var h=r.pingCache;h!==null&&h.delete(i),i=Sn(),r.pingedLanes|=r.suspendedLanes&a,Yt===r&&(ln&a)===a&&(qt===4||qt===3&&(ln&130023424)===ln&&500>vt()-Zh?Ri(r,0):Xh|=a),xn(r,i)}function _g(r,i){i===0&&((r.mode&1)===0?i=1:(i=ys,ys<<=1,(ys&130023424)===0&&(ys=4194304)));var a=Sn();r=ns(r,i),r!==null&&(fi(r,i,a),xn(r,a))}function k0(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),_g(r,a)}function R0(r,i){var a=0;switch(r.tag){case 13:var h=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),_g(r,a)}var wg;wg=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||kn.current)An=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return An=!1,p0(r,i,a);An=(r.flags&131072)!==0}else An=!1,It&&(i.flags&1048576)!==0&&Zp(i,eu,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;mu(r,i),r=i.pendingProps;var d=yo(i,pn.current);Io(i,a),d=xh(null,i,h,r,d,a);var m=Nh();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Rn(h)?(m=!0,Jl(i)):m=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ih(i),d.updater=fu,i.stateNode=d,d._reactInternals=i,Mh(i,h,r,a),i=zh(null,i,h,!0,m,a)):(i.tag=0,It&&m&&fh(i),In(null,i,d,a),i=i.child),i;case 16:h=i.elementType;e:{switch(mu(r,i),r=i.pendingProps,d=h._init,h=d(h._payload),i.type=h,d=i.tag=P0(h),r=ur(h,r),d){case 0:i=Uh(null,i,h,r,a);break e;case 1:i=qm(null,i,h,r,a);break e;case 11:i=zm(null,i,h,r,a);break e;case 14:i=Bm(null,i,h,ur(h.type,r),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:ur(h,d),Uh(r,i,h,d,a);case 1:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:ur(h,d),qm(r,i,h,d,a);case 3:e:{if(Gm(i),r===null)throw Error(t(387));h=i.pendingProps,m=i.memoizedState,d=m.element,lm(r,i),ou(i,h,null,a);var w=i.memoizedState;if(h=w.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){d=Co(Error(t(423)),i),i=Km(r,i,h,a,d);break e}else if(h!==d){d=Co(Error(t(424)),i),i=Km(r,i,h,a,d);break e}else for(Wn=Ss(i.stateNode.containerInfo.firstChild),$n=i,It=!0,lr=null,a=om(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(wo(),h===d){i=ss(r,i,a);break e}In(r,i,h,a)}i=i.child}return i;case 5:return hm(i),r===null&&gh(i),h=i.type,d=i.pendingProps,m=r!==null?r.memoizedProps:null,w=d.children,ah(h,d)?w=null:m!==null&&ah(h,m)&&(i.flags|=32),Hm(r,i),In(r,i,w,a),i.child;case 6:return r===null&&gh(i),null;case 13:return Qm(r,i,a);case 4:return Sh(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=Eo(i,null,h,a):In(r,i,h,a),i.child;case 11:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:ur(h,d),zm(r,i,h,d,a);case 7:return In(r,i,i.pendingProps,a),i.child;case 8:return In(r,i,i.pendingProps.children,a),i.child;case 12:return In(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,d=i.pendingProps,m=i.memoizedProps,w=d.value,mt(ru,h._currentValue),h._currentValue=w,m!==null)if(ar(m.value,w)){if(m.children===d.children&&!kn.current){i=ss(r,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var N=m.dependencies;if(N!==null){w=m.child;for(var M=N.firstContext;M!==null;){if(M.context===h){if(m.tag===1){M=rs(-1,a&-a),M.tag=2;var H=m.updateQueue;if(H!==null){H=H.shared;var ae=H.pending;ae===null?M.next=M:(M.next=ae.next,ae.next=M),H.pending=M}}m.lanes|=a,M=m.alternate,M!==null&&(M.lanes|=a),Eh(m.return,a,i),N.lanes|=a;break}M=M.next}}else if(m.tag===10)w=m.type===i.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,N=w.alternate,N!==null&&(N.lanes|=a),Eh(w,a,i),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}In(r,i,d.children,a),i=i.child}return i;case 9:return d=i.type,h=i.pendingProps.children,Io(i,a),d=er(d),h=h(d),i.flags|=1,In(r,i,h,a),i.child;case 14:return h=i.type,d=ur(h,i.pendingProps),d=ur(h.type,d),Bm(r,i,h,d,a);case 15:return $m(r,i,i.type,i.pendingProps,a);case 17:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:ur(h,d),mu(r,i),i.tag=1,Rn(h)?(r=!0,Jl(i)):r=!1,Io(i,a),Vm(i,h,d),Mh(i,h,d,a),zh(null,i,h,!0,r,a);case 19:return Jm(r,i,a);case 22:return Wm(r,i,a)}throw Error(t(156,i.tag))};function Eg(r,i){return aa(r,i)}function A0(r,i,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rr(r,i,a,h){return new A0(r,i,a,h)}function ad(r){return r=r.prototype,!(!r||!r.isReactComponent)}function P0(r){if(typeof r=="function")return ad(r)?1:0;if(r!=null){if(r=r.$$typeof,r===b)return 11;if(r===J)return 14}return 2}function Os(r,i){var a=r.alternate;return a===null?(a=rr(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function ku(r,i,a,h,d,m){var w=2;if(h=r,typeof r=="function")ad(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case x:return Pi(a.children,d,m,i);case C:w=8,d|=8;break;case A:return r=rr(12,a,i,d|2),r.elementType=A,r.lanes=m,r;case R:return r=rr(13,a,i,d),r.elementType=R,r.lanes=m,r;case ve:return r=rr(19,a,i,d),r.elementType=ve,r.lanes=m,r;case _e:return Ru(a,d,m,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case O:w=10;break e;case V:w=9;break e;case b:w=11;break e;case J:w=14;break e;case Fe:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=rr(w,a,i,d),i.elementType=r,i.type=h,i.lanes=m,i}function Pi(r,i,a,h){return r=rr(7,r,h,i),r.lanes=a,r}function Ru(r,i,a,h){return r=rr(22,r,h,i),r.elementType=_e,r.lanes=a,r.stateNode={isHidden:!1},r}function ld(r,i,a){return r=rr(6,r,null,i),r.lanes=a,r}function ud(r,i,a){return i=rr(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function x0(r,i,a,h,d){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=da(0),this.expirationTimes=da(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=da(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function cd(r,i,a,h,d,m,w,N,M){return r=new x0(r,i,a,N,M),i===1?(i=1,m===!0&&(i|=8)):i=0,m=rr(3,null,null,i),r.current=m,m.stateNode=r,m.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ih(m),r}function N0(r,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ie,key:h==null?null:""+h,children:r,containerInfo:i,implementation:a}}function Tg(r){if(!r)return ks;r=r._reactInternals;e:{if(ir(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Rn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(Rn(a))return Yp(r,a,i)}return i}function Ig(r,i,a,h,d,m,w,N,M){return r=cd(a,h,!0,r,d,m,w,N,M),r.context=Tg(null),a=r.current,h=Sn(),d=Ds(a),m=rs(h,d),m.callback=i??null,Ps(a,m,d),r.current.lanes=d,fi(r,d,h),xn(r,h),r}function Au(r,i,a,h){var d=i.current,m=Sn(),w=Ds(d);return a=Tg(a),i.context===null?i.context=a:i.pendingContext=a,i=rs(m,w),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=Ps(d,i,w),r!==null&&(dr(r,d,w,m),iu(r,d,w)),w}function Pu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Sg(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function hd(r,i){Sg(r,i),(r=r.alternate)&&Sg(r,i)}function b0(){return null}var Cg=typeof reportError=="function"?reportError:function(r){console.error(r)};function dd(r){this._internalRoot=r}xu.prototype.render=dd.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));Au(r,i,null,null)},xu.prototype.unmount=dd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;ki(function(){Au(null,r,null,null)}),i[Xr]=null}};function xu(r){this._internalRoot=r}xu.prototype.unstable_scheduleHydration=function(r){if(r){var i=ga();r={blockedOn:null,target:r,priority:i};for(var a=0;a<Fn.length&&i!==0&&i<Fn[a].priority;a++);Fn.splice(a,0,r),a===0&&eo(r)}};function fd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Nu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function kg(){}function D0(r,i,a,h,d){if(d){if(typeof h=="function"){var m=h;h=function(){var H=Pu(w);m.call(H)}}var w=Ig(i,h,r,0,null,!1,!1,"",kg);return r._reactRootContainer=w,r[Xr]=w.current,Aa(r.nodeType===8?r.parentNode:r),ki(),w}for(;d=r.lastChild;)r.removeChild(d);if(typeof h=="function"){var N=h;h=function(){var H=Pu(M);N.call(H)}}var M=cd(r,0,!1,null,null,!1,!1,"",kg);return r._reactRootContainer=M,r[Xr]=M.current,Aa(r.nodeType===8?r.parentNode:r),ki(function(){Au(i,M,a,h)}),M}function bu(r,i,a,h,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var N=d;d=function(){var M=Pu(w);N.call(M)}}Au(i,w,r,d)}else w=D0(a,i,r,d,h);return Pu(w)}pa=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=at(i.pendingLanes);a!==0&&(fa(i,a|1),xn(i,vt()),(st&6)===0&&(Ao=vt()+500,Rs()))}break;case 13:ki(function(){var h=ns(r,1);if(h!==null){var d=Sn();dr(h,r,1,d)}}),hd(r,1)}},Xi=function(r){if(r.tag===13){var i=ns(r,134217728);if(i!==null){var a=Sn();dr(i,r,134217728,a)}hd(r,134217728)}},ma=function(r){if(r.tag===13){var i=Ds(r),a=ns(r,i);if(a!==null){var h=Sn();dr(a,r,i,h)}hd(r,i)}},ga=function(){return et},ya=function(r,i){var a=et;try{return et=r,i()}finally{et=a}},nn=function(r,i,a){switch(i){case"input":if(Ee(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==r&&h.form===r.form){var d=Ql(h);if(!d)throw Error(t(90));en(h),Ee(h,d)}}}break;case"textarea":On(r,a);break;case"select":i=a.value,i!=null&&yt(r,!!a.multiple,i,!1)}},Ki=sd,Q=ki;var V0={usingClientEntryPoint:!1,Events:[Na,mo,Ql,Dt,ft,sd]},Ha={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},O0={bundleType:Ha.bundleType,version:Ha.version,rendererPackageName:Ha.rendererPackageName,rendererConfig:Ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:le.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Nl(r),r===null?null:r.stateNode},findFiberByHostInstance:Ha.findFiberByHostInstance||b0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Du.isDisabled&&Du.supportsFiber)try{ui=Du.inject(O0),Mn=Du}catch{}}return Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V0,Nn.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fd(i))throw Error(t(200));return N0(r,i,null,a)},Nn.createRoot=function(r,i){if(!fd(r))throw Error(t(299));var a=!1,h="",d=Cg;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=cd(r,1,!1,null,null,a,!1,h,d),r[Xr]=i.current,Aa(r.nodeType===8?r.parentNode:r),new dd(i)},Nn.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Nl(i),r=r===null?null:r.stateNode,r},Nn.flushSync=function(r){return ki(r)},Nn.hydrate=function(r,i,a){if(!Nu(i))throw Error(t(200));return bu(null,r,i,!0,a)},Nn.hydrateRoot=function(r,i,a){if(!fd(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,m="",w=Cg;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Ig(i,null,r,1,a??null,d,!1,m,w),r[Xr]=i.current,Aa(r),h)for(r=0;r<h.length;r++)a=h[r],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new xu(i)},Nn.render=function(r,i,a){if(!Nu(i))throw Error(t(200));return bu(null,r,i,!1,a)},Nn.unmountComponentAtNode=function(r){if(!Nu(r))throw Error(t(40));return r._reactRootContainer?(ki(function(){bu(null,null,r,!1,function(){r._reactRootContainer=null,r[Xr]=null})}),!0):!1},Nn.unstable_batchedUpdates=sd,Nn.unstable_renderSubtreeIntoContainer=function(r,i,a,h){if(!Nu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return bu(r,i,a,!1,h)},Nn.version="18.3.1-next-f1338f8080-20240426",Nn}var Vg;function bv(){if(Vg)return gd.exports;Vg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),gd.exports=W0(),gd.exports}var Og;function H0(){if(Og)return Vu;Og=1;var n=bv();return Vu.createRoot=n.createRoot,Vu.hydrateRoot=n.hydrateRoot,Vu}var q0=H0();const G0=Nv(q0);var K0=bv();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ol.apply(this,arguments)}var zs;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(zs||(zs={}));const Lg="popstate";function Q0(n){n===void 0&&(n={});function e(o,l){let{pathname:c="/",search:f="",hash:p=""}=$i(o.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),Vd("",{pathname:c,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let c=o.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let p=o.location.href,g=p.indexOf("#");f=g===-1?p:p.slice(0,g)}return f+"#"+(typeof l=="string"?l:Zu(l))}function s(o,l){Tc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return J0(e,t,s,n)}function Wt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Tc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Y0(){return Math.random().toString(36).substr(2,8)}function Mg(n,e){return{usr:n.state,key:n.key,idx:e}}function Vd(n,e,t,s){return t===void 0&&(t=null),ol({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?$i(e):e,{state:t,key:e&&e.key||s||Y0()})}function Zu(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function $i(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function J0(n,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,f=zs.Pop,p=null,g=_();g==null&&(g=0,c.replaceState(ol({},c.state,{idx:g}),""));function _(){return(c.state||{idx:null}).idx}function E(){f=zs.Pop;let L=_(),q=L==null?null:L-g;g=L,p&&p({action:f,location:U.location,delta:q})}function I(L,q){f=zs.Push;let X=Vd(U.location,L,q);t&&t(X,L),g=_()+1;let te=Mg(X,g),le=U.createHref(X);try{c.pushState(te,"",le)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;o.location.assign(le)}l&&p&&p({action:f,location:U.location,delta:1})}function P(L,q){f=zs.Replace;let X=Vd(U.location,L,q);t&&t(X,L),g=_();let te=Mg(X,g),le=U.createHref(X);c.replaceState(te,"",le),l&&p&&p({action:f,location:U.location,delta:0})}function F(L){let q=o.location.origin!=="null"?o.location.origin:o.location.href,X=typeof L=="string"?L:Zu(L);return X=X.replace(/ $/,"%20"),Wt(q,"No window.location.(origin|href) available to create URL for href: "+X),new URL(X,q)}let U={get action(){return f},get location(){return n(o,c)},listen(L){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Lg,E),p=L,()=>{o.removeEventListener(Lg,E),p=null}},createHref(L){return e(o,L)},createURL:F,encodeLocation(L){let q=F(L);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:I,replace:P,go(L){return c.go(L)}};return U}var jg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(jg||(jg={}));function X0(n,e,t){return t===void 0&&(t="/"),Z0(n,e,t)}function Z0(n,e,t,s){let o=typeof e=="string"?$i(e):e,l=mf(o.pathname||"/",t);if(l==null)return null;let c=Dv(n);eT(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let g=dT(l);f=uT(c[p],g)}return f}function Dv(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,c,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Wt(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let g=$s([s,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(Wt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Dv(l.children,e,_,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:aT(g,l.index),routesMeta:_})};return n.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,c);else for(let p of Vv(l.path))o(l,c,p)}),e}function Vv(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=Vv(s.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...c),f.map(p=>n.startsWith("/")&&p===""?"/":p)}function eT(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:lT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const tT=/^:[\w-]+$/,nT=3,rT=2,sT=1,iT=10,oT=-2,Fg=n=>n==="*";function aT(n,e){let t=n.split("/"),s=t.length;return t.some(Fg)&&(s+=oT),e&&(s+=rT),t.filter(o=>!Fg(o)).reduce((o,l)=>o+(tT.test(l)?nT:l===""?sT:iT),s)}function lT(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function uT(n,e,t){let{routesMeta:s}=n,o={},l="/",c=[];for(let f=0;f<s.length;++f){let p=s[f],g=f===s.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=cT({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},_),I=p.route;if(!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:$s([l,E.pathname]),pathnameBase:yT($s([l,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(l=$s([l,E.pathnameBase]))}return c}function cT(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=hT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((g,_,E)=>{let{paramName:I,isOptional:P}=_;if(I==="*"){let U=f[E]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const F=f[E];return P&&!F?g[I]=void 0:g[I]=(F||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:c,pattern:n}}function hT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Tc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function dT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tc(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function mf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const fT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pT=n=>fT.test(n);function mT(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?$i(n):n,l;if(t)if(pT(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Tc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?l=Ug(t.substring(1),"/"):l=Ug(t,e)}else l=e;return{pathname:l,search:vT(s),hash:_T(o)}}function Ug(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function _d(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function gT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Ov(n,e){let t=gT(n);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function Lv(n,e,t,s){s===void 0&&(s=!1);let o;typeof n=="string"?o=$i(n):(o=ol({},n),Wt(!o.pathname||!o.pathname.includes("?"),_d("?","pathname","search",o)),Wt(!o.pathname||!o.pathname.includes("#"),_d("#","pathname","hash",o)),Wt(!o.search||!o.search.includes("#"),_d("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,f;if(c==null)f=t;else{let E=e.length-1;if(!s&&c.startsWith("..")){let I=c.split("/");for(;I[0]==="..";)I.shift(),E-=1;o.pathname=I.join("/")}f=E>=0?e[E]:"/"}let p=mT(o,f),g=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(g||_)&&(p.pathname+="/"),p}const $s=n=>n.join("/").replace(/\/\/+/g,"/"),yT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),vT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_T=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function wT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const Mv=["post","put","patch","delete"];new Set(Mv);const ET=["get",...Mv];new Set(ET);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function al(){return al=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},al.apply(this,arguments)}const gf=k.createContext(null),TT=k.createContext(null),Wi=k.createContext(null),Ic=k.createContext(null),ni=k.createContext({outlet:null,matches:[],isDataRoute:!1}),jv=k.createContext(null);function IT(n,e){let{relative:t}=e===void 0?{}:e;ml()||Wt(!1);let{basename:s,navigator:o}=k.useContext(Wi),{hash:l,pathname:c,search:f}=zv(n,{relative:t}),p=c;return s!=="/"&&(p=c==="/"?s:$s([s,c])),o.createHref({pathname:p,search:f,hash:l})}function ml(){return k.useContext(Ic)!=null}function gl(){return ml()||Wt(!1),k.useContext(Ic).location}function Fv(n){k.useContext(Wi).static||k.useLayoutEffect(n)}function Sc(){let{isDataRoute:n}=k.useContext(ni);return n?LT():ST()}function ST(){ml()||Wt(!1);let n=k.useContext(gf),{basename:e,future:t,navigator:s}=k.useContext(Wi),{matches:o}=k.useContext(ni),{pathname:l}=gl(),c=JSON.stringify(Ov(o,t.v7_relativeSplatPath)),f=k.useRef(!1);return Fv(()=>{f.current=!0}),k.useCallback(function(g,_){if(_===void 0&&(_={}),!f.current)return;if(typeof g=="number"){s.go(g);return}let E=Lv(g,JSON.parse(c),l,_.relative==="path");n==null&&e!=="/"&&(E.pathname=E.pathname==="/"?e:$s([e,E.pathname])),(_.replace?s.replace:s.push)(E,_.state,_)},[e,s,c,l,n])}function Uv(){let{matches:n}=k.useContext(ni),e=n[n.length-1];return e?e.params:{}}function zv(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=k.useContext(Wi),{matches:o}=k.useContext(ni),{pathname:l}=gl(),c=JSON.stringify(Ov(o,s.v7_relativeSplatPath));return k.useMemo(()=>Lv(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function CT(n,e){return kT(n,e)}function kT(n,e,t,s){ml()||Wt(!1);let{navigator:o}=k.useContext(Wi),{matches:l}=k.useContext(ni),c=l[l.length-1],f=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let g=gl(),_;if(e){var E;let L=typeof e=="string"?$i(e):e;p==="/"||(E=L.pathname)!=null&&E.startsWith(p)||Wt(!1),_=L}else _=g;let I=_.pathname||"/",P=I;if(p!=="/"){let L=p.replace(/^\//,"").split("/");P="/"+I.replace(/^\//,"").split("/").slice(L.length).join("/")}let F=X0(n,{pathname:P}),U=NT(F&&F.map(L=>Object.assign({},L,{params:Object.assign({},f,L.params),pathname:$s([p,o.encodeLocation?o.encodeLocation(L.pathname).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?p:$s([p,o.encodeLocation?o.encodeLocation(L.pathnameBase).pathname:L.pathnameBase])})),l,t,s);return e&&U?k.createElement(Ic.Provider,{value:{location:al({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:zs.Pop}},U):U}function RT(){let n=OT(),e=wT(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:o},t):null,null)}const AT=k.createElement(RT,null);class PT extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(ni.Provider,{value:this.props.routeContext},k.createElement(jv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xT(n){let{routeContext:e,match:t,children:s}=n,o=k.useContext(gf);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(ni.Provider,{value:e},s)}function NT(n,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,f=(o=t)==null?void 0:o.errors;if(f!=null){let _=c.findIndex(E=>E.route.id&&(f==null?void 0:f[E.route.id])!==void 0);_>=0||Wt(!1),c=c.slice(0,Math.min(c.length,_+1))}let p=!1,g=-1;if(t&&s&&s.v7_partialHydration)for(let _=0;_<c.length;_++){let E=c[_];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(g=_),E.route.id){let{loaderData:I,errors:P}=t,F=E.route.loader&&I[E.route.id]===void 0&&(!P||P[E.route.id]===void 0);if(E.route.lazy||F){p=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((_,E,I)=>{let P,F=!1,U=null,L=null;t&&(P=f&&E.route.id?f[E.route.id]:void 0,U=E.route.errorElement||AT,p&&(g<0&&I===0?(MT("route-fallback"),F=!0,L=null):g===I&&(F=!0,L=E.route.hydrateFallbackElement||null)));let q=e.concat(c.slice(0,I+1)),X=()=>{let te;return P?te=U:F?te=L:E.route.Component?te=k.createElement(E.route.Component,null):E.route.element?te=E.route.element:te=_,k.createElement(xT,{match:E,routeContext:{outlet:_,matches:q,isDataRoute:t!=null},children:te})};return t&&(E.route.ErrorBoundary||E.route.errorElement||I===0)?k.createElement(PT,{location:t.location,revalidation:t.revalidation,component:U,error:P,children:X(),routeContext:{outlet:null,matches:q,isDataRoute:!0}}):X()},null)}var Bv=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(Bv||{}),$v=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})($v||{});function bT(n){let e=k.useContext(gf);return e||Wt(!1),e}function DT(n){let e=k.useContext(TT);return e||Wt(!1),e}function VT(n){let e=k.useContext(ni);return e||Wt(!1),e}function Wv(n){let e=VT(),t=e.matches[e.matches.length-1];return t.route.id||Wt(!1),t.route.id}function OT(){var n;let e=k.useContext(jv),t=DT(),s=Wv();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function LT(){let{router:n}=bT(Bv.UseNavigateStable),e=Wv($v.UseNavigateStable),t=k.useRef(!1);return Fv(()=>{t.current=!0}),k.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,al({fromRouteId:e},l)))},[n,e])}const zg={};function MT(n,e,t){zg[n]||(zg[n]=!0)}function jT(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Ka(n){Wt(!1)}function FT(n){let{basename:e="/",children:t=null,location:s,navigationType:o=zs.Pop,navigator:l,static:c=!1,future:f}=n;ml()&&Wt(!1);let p=e.replace(/^\/*/,"/"),g=k.useMemo(()=>({basename:p,navigator:l,static:c,future:al({v7_relativeSplatPath:!1},f)}),[p,f,l,c]);typeof s=="string"&&(s=$i(s));let{pathname:_="/",search:E="",hash:I="",state:P=null,key:F="default"}=s,U=k.useMemo(()=>{let L=mf(_,p);return L==null?null:{location:{pathname:L,search:E,hash:I,state:P,key:F},navigationType:o}},[p,_,E,I,P,F,o]);return U==null?null:k.createElement(Wi.Provider,{value:g},k.createElement(Ic.Provider,{children:t,value:U}))}function UT(n){let{children:e,location:t}=n;return CT(Od(e),t)}new Promise(()=>{});function Od(n,e){e===void 0&&(e=[]);let t=[];return k.Children.forEach(n,(s,o)=>{if(!k.isValidElement(s))return;let l=[...e,o];if(s.type===k.Fragment){t.push.apply(t,Od(s.props.children,l));return}s.type!==Ka&&Wt(!1),!s.props.index||!s.props.children||Wt(!1);let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Od(s.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ld(){return Ld=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Ld.apply(this,arguments)}function zT(n,e){if(n==null)return{};var t={},s=Object.keys(n),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function BT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function $T(n,e){return n.button===0&&(!e||e==="_self")&&!BT(n)}function Md(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function WT(n,e){let t=Md(n);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(l=>{t.append(o,l)})}),t}const HT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qT="6";try{window.__reactRouterVersion=qT}catch{}const GT="startTransition",Bg=z0[GT];function KT(n){let{basename:e,children:t,future:s,window:o}=n,l=k.useRef();l.current==null&&(l.current=Q0({window:o,v5Compat:!0}));let c=l.current,[f,p]=k.useState({action:c.action,location:c.location}),{v7_startTransition:g}=s||{},_=k.useCallback(E=>{g&&Bg?Bg(()=>p(E)):p(E)},[p,g]);return k.useLayoutEffect(()=>c.listen(_),[c,_]),k.useEffect(()=>jT(s),[s]),k.createElement(FT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:c,future:s})}const QT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",YT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Di=k.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:c,state:f,target:p,to:g,preventScrollReset:_,viewTransition:E}=e,I=zT(e,HT),{basename:P}=k.useContext(Wi),F,U=!1;if(typeof g=="string"&&YT.test(g)&&(F=g,QT))try{let te=new URL(window.location.href),le=g.startsWith("//")?new URL(te.protocol+g):new URL(g),ne=mf(le.pathname,P);le.origin===te.origin&&ne!=null?g=ne+le.search+le.hash:U=!0}catch{}let L=IT(g,{relative:o}),q=JT(g,{replace:c,state:f,target:p,preventScrollReset:_,relative:o,viewTransition:E});function X(te){s&&s(te),te.defaultPrevented||q(te)}return k.createElement("a",Ld({},I,{href:F||L,onClick:U||l?s:X,ref:t,target:p}))});var $g;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})($g||($g={}));var Wg;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Wg||(Wg={}));function JT(n,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:c,viewTransition:f}=e===void 0?{}:e,p=Sc(),g=gl(),_=zv(n,{relative:c});return k.useCallback(E=>{if($T(E,t)){E.preventDefault();let I=s!==void 0?s:Zu(g)===Zu(_);p(n,{replace:I,state:o,preventScrollReset:l,relative:c,viewTransition:f})}},[g,p,_,s,o,t,n,l,c,f])}function Hv(n){let e=k.useRef(Md(n)),t=k.useRef(!1),s=gl(),o=k.useMemo(()=>WT(s.search,t.current?null:e.current),[s.search]),l=Sc(),c=k.useCallback((f,p)=>{const g=Md(typeof f=="function"?f(o):f);t.current=!0,l("?"+g,p)},[l,o]);return[o,c]}const XT=()=>{};var Hg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ZT=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},Gv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,p=o+2<n.length,g=p?n[o+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let I=(f&15)<<2|g>>6,P=g&63;p||(P=64,c||(I=64)),s.push(t[_],t[E],t[I],t[P])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(qv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ZT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const g=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||g==null||E==null)throw new eI;const I=l<<2|f>>4;if(s.push(I),g!==64){const P=f<<4&240|g>>2;if(s.push(P),E!==64){const F=g<<6&192|E;s.push(F)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class eI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const tI=function(n){const e=qv(n);return Gv.encodeByteArray(e,!0)},ec=function(n){return tI(n).replace(/\./g,"")},Kv=function(n){try{return Gv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=()=>nI().__FIREBASE_DEFAULTS__,sI=()=>{if(typeof process>"u"||typeof Hg>"u")return;const n=Hg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},iI=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Kv(n[1]);return e&&JSON.parse(e)},Cc=()=>{try{return XT()||rI()||sI()||iI()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qv=n=>{var e,t;return(t=(e=Cc())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},oI=n=>{const e=Qv(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},Yv=()=>{var n;return(n=Cc())==null?void 0:n.config},Jv=n=>{var e;return(e=Cc())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Xv(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ec(JSON.stringify(t)),ec(JSON.stringify(c)),""].join(".")}const el={};function uI(){const n={prod:[],emulator:[]};for(const e of Object.keys(el))el[e]?n.emulator.push(e):n.prod.push(e);return n}function cI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let qg=!1;function Zv(n,e){if(typeof window>"u"||typeof document>"u"||!Jo(window.location.host)||el[n]===e||el[n]||qg)return;el[n]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",l=uI().prod.length>0;function c(){const I=document.getElementById(s);I&&I.remove()}function f(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function p(I,P){I.setAttribute("width","24"),I.setAttribute("id",P),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function g(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{qg=!0,c()},I}function _(I,P){I.setAttribute("id",P),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=cI(s),P=t("text"),F=document.getElementById(P)||document.createElement("span"),U=t("learnmore"),L=document.getElementById(U)||document.createElement("a"),q=t("preprendIcon"),X=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const te=I.element;f(te),_(L,U);const le=g();p(X,q),te.append(X,F,L,le),document.body.appendChild(te)}l?(F.innerText="Preview backend disconnected.",X.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(X.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,F.innerText="Preview backend running in this workspace."),F.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(En())}function dI(){var e;const n=(e=Cc())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function mI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gI(){const n=En();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function yI(){return!dI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vI(){try{return typeof indexedDB=="object"}catch{return!1}}function _I(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="FirebaseError";class ps extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=wI,Object.setPrototypeOf(this,ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yl.prototype.create)}}class yl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?EI(l,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new ps(o,f,s)}}function EI(n,e){return n.replace(TI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const TI=/\{\$([^}]+)}/g;function II(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function us(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(Gg(l)&&Gg(c)){if(!us(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Gg(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function SI(n,e){const t=new CI(n,e);return t.subscribe.bind(t)}class CI{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");kI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=wd),o.error===void 0&&(o.error=wd),o.complete===void 0&&(o.complete=wd);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function kI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(n){return n&&n._delegate?n._delegate:n}class ji{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new aI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PI(e))try{this.getOrInitializeService({instanceIdentifier:bi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=bi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=bi){return this.instances.has(e)}getOptions(e=bi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:AI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=bi){return this.component?this.component.multipleInstances?e:bi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AI(n){return n===bi?void 0:n}function PI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new RI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Je||(Je={}));const NI={debug:Je.DEBUG,verbose:Je.VERBOSE,info:Je.INFO,warn:Je.WARN,error:Je.ERROR,silent:Je.SILENT},bI=Je.INFO,DI={[Je.DEBUG]:"log",[Je.VERBOSE]:"log",[Je.INFO]:"info",[Je.WARN]:"warn",[Je.ERROR]:"error"},VI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=DI[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class yf{constructor(e){this.name=e,this._logLevel=bI,this._logHandler=VI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?NI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Je.DEBUG,...e),this._logHandler(this,Je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Je.VERBOSE,...e),this._logHandler(this,Je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Je.INFO,...e),this._logHandler(this,Je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Je.WARN,...e),this._logHandler(this,Je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Je.ERROR,...e),this._logHandler(this,Je.ERROR,...e)}}const OI=(n,e)=>e.some(t=>n instanceof t);let Kg,Qg;function LI(){return Kg||(Kg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MI(){return Qg||(Qg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const e_=new WeakMap,jd=new WeakMap,t_=new WeakMap,Ed=new WeakMap,vf=new WeakMap;function jI(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Ws(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&e_.set(t,n)}).catch(()=>{}),vf.set(e,n),e}function FI(n){if(jd.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});jd.set(n,e)}let Fd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||t_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ws(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function UI(n){Fd=n(Fd)}function zI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Td(this),e,...t);return t_.set(s,e.sort?e.sort():[e]),Ws(s)}:MI().includes(n)?function(...e){return n.apply(Td(this),e),Ws(e_.get(this))}:function(...e){return Ws(n.apply(Td(this),e))}}function BI(n){return typeof n=="function"?zI(n):(n instanceof IDBTransaction&&FI(n),OI(n,LI())?new Proxy(n,Fd):n)}function Ws(n){if(n instanceof IDBRequest)return jI(n);if(Ed.has(n))return Ed.get(n);const e=BI(n);return e!==n&&(Ed.set(n,e),vf.set(e,n)),e}const Td=n=>vf.get(n);function $I(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=Ws(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Ws(c.result),p.oldVersion,p.newVersion,Ws(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const WI=["get","getKey","getAll","getAllKeys","count"],HI=["put","add","delete","clear"],Id=new Map;function Yg(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Id.get(e))return Id.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=HI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||WI.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),o&&p.done]))[0]};return Id.set(e,l),l}UI(n=>({...n,get:(e,t,s)=>Yg(e,t)||n.get(e,t,s),has:(e,t)=>!!Yg(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(GI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function GI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ud="@firebase/app",Jg="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new yf("@firebase/app"),KI="@firebase/app-compat",QI="@firebase/analytics-compat",YI="@firebase/analytics",JI="@firebase/app-check-compat",XI="@firebase/app-check",ZI="@firebase/auth",eS="@firebase/auth-compat",tS="@firebase/database",nS="@firebase/data-connect",rS="@firebase/database-compat",sS="@firebase/functions",iS="@firebase/functions-compat",oS="@firebase/installations",aS="@firebase/installations-compat",lS="@firebase/messaging",uS="@firebase/messaging-compat",cS="@firebase/performance",hS="@firebase/performance-compat",dS="@firebase/remote-config",fS="@firebase/remote-config-compat",pS="@firebase/storage",mS="@firebase/storage-compat",gS="@firebase/firestore",yS="@firebase/ai",vS="@firebase/firestore-compat",_S="firebase",wS="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="[DEFAULT]",ES={[Ud]:"fire-core",[KI]:"fire-core-compat",[YI]:"fire-analytics",[QI]:"fire-analytics-compat",[XI]:"fire-app-check",[JI]:"fire-app-check-compat",[ZI]:"fire-auth",[eS]:"fire-auth-compat",[tS]:"fire-rtdb",[nS]:"fire-data-connect",[rS]:"fire-rtdb-compat",[sS]:"fire-fn",[iS]:"fire-fn-compat",[oS]:"fire-iid",[aS]:"fire-iid-compat",[lS]:"fire-fcm",[uS]:"fire-fcm-compat",[cS]:"fire-perf",[hS]:"fire-perf-compat",[dS]:"fire-rc",[fS]:"fire-rc-compat",[pS]:"fire-gcs",[mS]:"fire-gcs-compat",[gS]:"fire-fst",[vS]:"fire-fst-compat",[yS]:"fire-vertex","fire-js":"fire-js",[_S]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Map,TS=new Map,Bd=new Map;function Xg(n,e){try{n.container.addComponent(e)}catch(t){cs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Uo(n){const e=n.name;if(Bd.has(e))return cs.debug(`There were multiple attempts to register component ${e}.`),!1;Bd.set(e,n);for(const t of tc.values())Xg(t,n);for(const t of TS.values())Xg(t,n);return!0}function _f(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function fr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hs=new yl("app","Firebase",IS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new ji("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=wS;function n_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:zd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Hs.create("bad-app-name",{appName:String(o)});if(t||(t=Yv()),!t)throw Hs.create("no-options");const l=tc.get(o);if(l){if(us(t,l.options)&&us(s,l.config))return l;throw Hs.create("duplicate-app",{appName:o})}const c=new xI(o);for(const p of Bd.values())c.addComponent(p);const f=new SS(t,s,c);return tc.set(o,f),f}function r_(n=zd){const e=tc.get(n);if(!e&&n===zd&&Yv())return n_();if(!e)throw Hs.create("no-app",{appName:n});return e}function qs(n,e,t){let s=ES[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cs.warn(c.join(" "));return}Uo(new ji(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS="firebase-heartbeat-database",kS=1,ll="firebase-heartbeat-store";let Sd=null;function s_(){return Sd||(Sd=$I(CS,kS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ll)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hs.create("idb-open",{originalErrorMessage:n.message})})),Sd}async function RS(n){try{const t=(await s_()).transaction(ll),s=await t.objectStore(ll).get(i_(n));return await t.done,s}catch(e){if(e instanceof ps)cs.warn(e.message);else{const t=Hs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cs.warn(t.message)}}}async function Zg(n,e){try{const s=(await s_()).transaction(ll,"readwrite");await s.objectStore(ll).put(e,i_(n)),await s.done}catch(t){if(t instanceof ps)cs.warn(t.message);else{const s=Hs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});cs.warn(s.message)}}}function i_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AS=1024,PS=30;class xS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new bS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=ey();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>PS){const c=DS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){cs.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ey(),{heartbeatsToSend:s,unsentEntries:o}=NS(this._heartbeatsCache.heartbeats),l=ec(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return cs.warn(t),""}}}function ey(){return new Date().toISOString().substring(0,10)}function NS(n,e=AS){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),ty(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),ty(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class bS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vI()?_I().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await RS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Zg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Zg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ty(n){return ec(JSON.stringify({version:2,heartbeats:n})).length}function DS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(n){Uo(new ji("platform-logger",e=>new qI(e),"PRIVATE")),Uo(new ji("heartbeat",e=>new xS(e),"PRIVATE")),qs(Ud,Jg,n),qs(Ud,Jg,"esm2020"),qs("fire-js","")}VS("");function o_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const OS=o_,a_=new yl("auth","Firebase",o_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new yf("@firebase/auth");function LS(n,...e){nc.logLevel<=Je.WARN&&nc.warn(`Auth (${Xo}): ${n}`,...e)}function $u(n,...e){nc.logLevel<=Je.ERROR&&nc.error(`Auth (${Xo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(n,...e){throw Ef(n,...e)}function mr(n,...e){return Ef(n,...e)}function wf(n,e,t){const s={...OS(),[e]:t};return new yl("auth","Firebase",s).create(e,{appName:n.name})}function Li(n){return wf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function MS(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&$r(n,"argument-error"),wf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ef(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return a_.create(n,...e)}function je(n,e,...t){if(!n)throw Ef(e,...t)}function as(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $u(e),new Error(e)}function hs(n,e){n||as(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $d(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function jS(){return ny()==="http:"||ny()==="https:"}function ny(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jS()||pI()||"connection"in navigator)?navigator.onLine:!0}function US(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.shortDelay=e,this.longDelay=t,hs(t>e,"Short delay should be less than long delay!"),this.isMobile=hI()||mI()}get(){return FS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n,e){hs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$S=new _l(3e4,6e4);function If(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Zo(n,e,t,s,o={}){return u_(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=vl({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const g={method:e,headers:p,...l};return fI()||(g.referrerPolicy="no-referrer"),n.emulatorConfig&&Jo(n.emulatorConfig.host)&&(g.credentials="include"),l_.fetch()(await c_(n,n.config.apiHost,t,f),g)})}async function u_(n,e,t){n._canInitEmulator=!1;const s={...zS,...e};try{const o=new HS(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ou(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,g]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ou(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Ou(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Ou(n,"user-disabled",c);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw wf(n,_,g);$r(n,_)}}catch(o){if(o instanceof ps)throw o;$r(n,"network-request-failed",{message:String(o)})}}async function WS(n,e,t,s,o={}){const l=await Zo(n,e,t,s,o);return"mfaPendingCredential"in l&&$r(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function c_(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?Tf(n.config,o):`${n.config.apiScheme}://${o}`;return BS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class HS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(mr(this.auth,"network-request-failed")),$S.get())})}}function Ou(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=mr(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(n,e){return Zo(n,"POST","/v1/accounts:delete",e)}async function rc(n,e){return Zo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GS(n,e=!1){const t=Zt(n),s=await t.getIdToken(e),o=Sf(s);je(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:tl(Cd(o.auth_time)),issuedAtTime:tl(Cd(o.iat)),expirationTime:tl(Cd(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Cd(n){return Number(n)*1e3}function Sf(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return $u("JWT malformed, contained fewer than 3 sections"),null;try{const o=Kv(t);return o?JSON.parse(o):($u("Failed to decode base64 JWT payload"),null)}catch(o){return $u("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function ry(n){const e=Sf(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ps&&KS(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function KS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=tl(this.lastLoginAt),this.creationTime=tl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(n){var E;const e=n.auth,t=await n.getIdToken(),s=await ul(n,rc(e,{idToken:t}));je(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(E=o.providerUserInfo)!=null&&E.length?h_(o.providerUserInfo):[],c=JS(n.providerData,l),f=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),g=f?p:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Wd(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(n,_)}async function YS(n){const e=Zt(n);await sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function JS(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function h_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(n,e){const t=await u_(n,{},async()=>{const s=vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await c_(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return n.emulatorConfig&&Jo(n.emulatorConfig.host)&&(p.credentials="include"),l_.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function ZS(n,e){return Zo(n,"POST","/v2/accounts:revokeToken",If(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ry(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=ry(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await XS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new Vo;return s&&(je(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(je(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(je(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Vo,this.toJSON())}_performRefresh(){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pr{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new QS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Wd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ul(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return GS(this,e)}reload(){return YS(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await sc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fr(this.auth.app))return Promise.reject(Li(this.auth));const e=await this.getIdToken();return await ul(this,qS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,g=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:E,emailVerified:I,isAnonymous:P,providerData:F,stsTokenManager:U}=t;je(E&&U,e,"internal-error");const L=Vo.fromJSON(this.name,U);je(typeof E=="string",e,"internal-error"),Ms(s,e.name),Ms(o,e.name),je(typeof I=="boolean",e,"internal-error"),je(typeof P=="boolean",e,"internal-error"),Ms(l,e.name),Ms(c,e.name),Ms(f,e.name),Ms(p,e.name),Ms(g,e.name),Ms(_,e.name);const q=new pr({uid:E,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:P,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:L,createdAt:g,lastLoginAt:_});return F&&Array.isArray(F)&&(q.providerData=F.map(X=>({...X}))),p&&(q._redirectEventId=p),q}static async _fromIdTokenResponse(e,t,s=!1){const o=new Vo;o.updateFromServerResponse(t);const l=new pr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await sc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];je(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?h_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Vo;f.updateFromIdToken(s);const p=new pr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Wd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new Map;function ls(n){hs(n instanceof Function,"Expected a class definition");let e=sy.get(n);return e?(hs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,sy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}d_.type="NONE";const iy=d_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(n,e,t){return`firebase:${n}:${e}:${t}`}class Oo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Wu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Wu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rc(this.auth,{idToken:e}).catch(()=>{});return t?pr._fromGetAccountInfoResponse(this.auth,t,e):null}return pr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Oo(ls(iy),e,s);const o=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=o[0]||ls(iy);const c=Wu(s,e.config.apiKey,e.name);let f=null;for(const g of t)try{const _=await g._get(c);if(_){let E;if(typeof _=="string"){const I=await rc(e,{idToken:_}).catch(()=>{});if(!I)break;E=await pr._fromGetAccountInfoResponse(e,I,_)}else E=pr._fromJSON(e,_);g!==l&&(f=E),l=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Oo(l,e,s):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(c)}catch{}})),new Oo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(g_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(f_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(v_(e))return"Blackberry";if(__(e))return"Webos";if(p_(e))return"Safari";if((e.includes("chrome/")||m_(e))&&!e.includes("edge/"))return"Chrome";if(y_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function f_(n=En()){return/firefox\//i.test(n)}function p_(n=En()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function m_(n=En()){return/crios\//i.test(n)}function g_(n=En()){return/iemobile/i.test(n)}function y_(n=En()){return/android/i.test(n)}function v_(n=En()){return/blackberry/i.test(n)}function __(n=En()){return/webos/i.test(n)}function Cf(n=En()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function eC(n=En()){var e;return Cf(n)&&!!((e=window.navigator)!=null&&e.standalone)}function tC(){return gI()&&document.documentMode===10}function w_(n=En()){return Cf(n)||y_(n)||__(n)||v_(n)||/windows phone/i.test(n)||g_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(n,e=[]){let t;switch(n){case"Browser":t=oy(En());break;case"Worker":t=`${oy(En())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Xo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rC(n,e={}){return Zo(n,"GET","/v2/passwordPolicy",If(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=6;class iC{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??sC,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ay(this),this.idTokenSubscription=new ay(this),this.beforeStateQueue=new nC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=a_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ls(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Oo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rc(this,{idToken:e}),s=await pr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(fr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=US()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(fr(this.app))return Promise.reject(Li(this));const t=e?Zt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return fr(this.app)?Promise.reject(Li(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return fr(this.app)?Promise.reject(Li(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ls(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rC(this),t=new iC(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await ZS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ls(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Oo.create(this,[ls(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=E_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(fr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&LS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function kc(n){return Zt(n)}class ay{constructor(e){this.auth=e,this.observer=null,this.addObserver=SI(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aC(n){kf=n}function lC(n){return kf.loadJS(n)}function uC(){return kf.gapiScript}function cC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(n,e){const t=_f(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(us(l,e??{}))return o;$r(o,"already-initialized")}return t.initialize({options:e})}function dC(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(ls);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function fC(n,e,t){const s=kc(n);je(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=T_(e),{host:c,port:f}=pC(e),p=f===null?"":`:${f}`,g={url:`${l}//${c}${p}/`},_=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){je(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),je(us(g,s.config.emulator)&&us(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Jo(c)?(Xv(`${l}//${c}${p}`),Zv("Auth",!0)):mC()}function T_(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function pC(n){const e=T_(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:ly(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:ly(c)}}}function ly(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function mC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,t){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lo(n,e){return WS(n,"POST","/v1/accounts:signInWithIdp",If(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gC="http://localhost";class Fi extends I_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):$r("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Fi(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Lo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Lo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Lo(e,t)}buildRequest(){const e={requestUri:gC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends Rf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends wl{constructor(){super("facebook.com")}static credential(e){return Fi._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.FACEBOOK_SIGN_IN_METHOD="facebook.com";js.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fi._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return os.credential(t,s)}catch{return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com";os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends wl{constructor(){super("github.com")}static credential(e){return Fi._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fs.credential(e.oauthAccessToken)}catch{return null}}}Fs.GITHUB_SIGN_IN_METHOD="github.com";Fs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends wl{constructor(){super("twitter.com")}static credential(e,t){return Fi._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Us.credential(t,s)}catch{return null}}}Us.TWITTER_SIGN_IN_METHOD="twitter.com";Us.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await pr._fromIdTokenResponse(e,s,o),c=uy(s);return new zo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=uy(s);return new zo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function uy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends ps{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ic.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new ic(e,t,s,o)}}function S_(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ic._fromErrorAndOperation(n,l,e,s):l})}async function yC(n,e,t=!1){const s=await ul(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return zo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(n,e,t=!1){const{auth:s}=n;if(fr(s.app))return Promise.reject(Li(s));const o="reauthenticate";try{const l=await ul(n,S_(s,o,e,n),t);je(l.idToken,s,"internal-error");const c=Sf(l.idToken);je(c,s,"internal-error");const{sub:f}=c;return je(n.uid===f,s,"user-mismatch"),zo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&$r(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _C(n,e,t=!1){if(fr(n.app))return Promise.reject(Li(n));const s="signIn",o=await S_(n,s,e),l=await zo._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}function wC(n,e,t,s){return Zt(n).onIdTokenChanged(e,t,s)}function EC(n,e,t){return Zt(n).beforeAuthStateChanged(e,t)}function TC(n,e,t,s){return Zt(n).onAuthStateChanged(e,t,s)}function IC(n){return Zt(n).signOut()}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=1e3,CC=10;class k_ extends C_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=w_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);tC()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,CC):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},SC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}k_.type="LOCAL";const kC=k_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_ extends C_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}R_.type="SESSION";const A_=R_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Rc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async g=>g(t.origin,l)),p=await RC(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const g=Af("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const I=E;if(I.data.eventId===g)switch(I.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(I.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mr(){return window}function PC(n){Mr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P_(){return typeof Mr().WorkerGlobalScope<"u"&&typeof Mr().importScripts=="function"}async function xC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function NC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function bC(){return P_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_="firebaseLocalStorageDb",DC=1,ac="firebaseLocalStorage",N_="fbase_key";class El{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ac(n,e){return n.transaction([ac],e?"readwrite":"readonly").objectStore(ac)}function VC(){const n=indexedDB.deleteDatabase(x_);return new El(n).toPromise()}function Hd(){const n=indexedDB.open(x_,DC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(ac,{keyPath:N_})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(ac)?e(s):(s.close(),await VC(),e(await Hd()))})})}async function cy(n,e,t){const s=Ac(n,!0).put({[N_]:e,value:t});return new El(s).toPromise()}async function OC(n,e){const t=Ac(n,!1).get(e),s=await new El(t).toPromise();return s===void 0?null:s.value}function hy(n,e){const t=Ac(n,!0).delete(e);return new El(t).toPromise()}const LC=800,MC=3;class b_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hd(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>MC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return P_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rc._getInstance(bC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await xC(),!this.activeServiceWorker)return;this.sender=new AC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||NC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hd();return await cy(e,oc,"1"),await hy(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>cy(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>OC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>hy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=Ac(o,!1).getAll();return new El(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}b_.type="LOCAL";const jC=b_;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(n,e){return e?ls(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf extends I_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Lo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Lo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Lo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function FC(n){return _C(n.auth,new Pf(n),n.bypassAuthState)}function UC(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),vC(t,new Pf(n),n.bypassAuthState)}async function zC(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),yC(t,new Pf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FC;case"linkViaPopup":case"linkViaRedirect":return zC;case"reauthViaPopup":case"reauthViaRedirect":return UC;default:$r(this.auth,"internal-error")}}resolve(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){hs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new _l(2e3,1e4);async function $C(n,e,t){if(fr(n.app))return Promise.reject(mr(n,"operation-not-supported-in-this-environment"));const s=kc(n);MS(n,e,Rf);const o=D_(s,t);return new Vi(s,"signInViaPopup",e,o).executeNotNull()}class Vi extends V_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){hs(this.filter.length===1,"Popup operations only handle one event");const e=Af();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(mr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(mr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(mr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BC.get())};e()}}Vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="pendingRedirect",Hu=new Map;class HC extends V_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Hu.get(this.auth._key());if(!e){try{const s=await qC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Hu.set(this.auth._key(),e)}return this.bypassAuthState||Hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qC(n,e){const t=QC(e),s=KC(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function GC(n,e){Hu.set(n._key(),e)}function KC(n){return ls(n._redirectPersistence)}function QC(n){return Wu(WC,n.config.apiKey,n.name)}async function YC(n,e,t=!1){if(fr(n.app))return Promise.reject(Li(n));const s=kc(n),o=D_(s,e),c=await new HC(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=600*1e3;class XC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!ZC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!O_(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(mr(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=JC&&this.cachedEventUids.clear(),this.cachedEventUids.has(dy(e))}saveEventToCache(e){this.cachedEventUids.add(dy(e)),this.lastProcessedEventTime=Date.now()}}function dy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function O_({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function ZC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return O_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e1(n,e={}){return Zo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,n1=/^https?/;async function r1(n){if(n.config.emulator)return;const{authorizedDomains:e}=await e1(n);for(const t of e)try{if(s1(t))return}catch{}$r(n,"unauthorized-domain")}function s1(n){const e=$d(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!n1.test(t))return!1;if(t1.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1=new _l(3e4,6e4);function fy(){const n=Mr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function o1(n){return new Promise((e,t)=>{var o,l,c;function s(){fy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fy(),t(mr(n,"network-request-failed"))},timeout:i1.get()})}if((l=(o=Mr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=Mr().gapi)!=null&&c.load)s();else{const f=cC("iframefcb");return Mr()[f]=()=>{gapi.load?s():t(mr(n,"network-request-failed"))},lC(`${uC()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw qu=null,e})}let qu=null;function a1(n){return qu=qu||o1(n),qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new _l(5e3,15e3),u1="__/auth/iframe",c1="emulator/auth/iframe",h1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},d1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function f1(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Tf(e,c1):`https://${n.config.authDomain}/${u1}`,s={apiKey:e.apiKey,appName:n.name,v:Xo},o=d1.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${vl(s).slice(1)}`}async function p1(n){const e=await a1(n),t=Mr().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:f1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:h1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=mr(n,"network-request-failed"),f=Mr().setTimeout(()=>{l(c)},l1.get());function p(){Mr().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},g1=500,y1=600,v1="_blank",_1="http://localhost";class py{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function w1(n,e,t,s=g1,o=y1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p={...m1,width:s.toString(),height:o.toString(),top:l,left:c},g=En().toLowerCase();t&&(f=m_(g)?v1:t),f_(g)&&(e=e||_1,p.scrollbars="yes");const _=Object.entries(p).reduce((I,[P,F])=>`${I}${P}=${F},`,"");if(eC(g)&&f!=="_self")return E1(e||"",f),new py(null);const E=window.open(e||"",f,_);je(E,n,"popup-blocked");try{E.focus()}catch{}return new py(E)}function E1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1="__/auth/handler",I1="emulator/auth/handler",S1=encodeURIComponent("fac");async function my(n,e,t,s,o,l){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Xo,eventId:o};if(e instanceof Rf){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",II(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))c[_]=E}if(e instanceof wl){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(c.scopes=_.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await n._getAppCheckToken(),g=p?`#${S1}=${encodeURIComponent(p)}`:"";return`${C1(n)}?${vl(f).slice(1)}${g}`}function C1({config:n}){return n.emulator?Tf(n,I1):`https://${n.authDomain}/${T1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="webStorageSupport";class k1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A_,this._completeRedirectFn=YC,this._overrideRedirectResult=GC}async _openPopup(e,t,s,o){var c;hs((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await my(e,t,s,$d(),o);return w1(e,l,Af())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await my(e,t,s,$d(),o);return PC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(hs(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await p1(e),s=new XC(e);return t.register("authEvent",o=>(je(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(kd,{type:kd},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[kd];l!==void 0&&t(!!l),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=r1(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return w_()||p_()||Cf()}}const R1=k1;var gy="@firebase/auth",yy="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function x1(n){Uo(new ji("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:E_(n)},g=new oC(s,o,l,p);return dC(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Uo(new ji("auth-internal",e=>{const t=kc(e.getProvider("auth").getImmediate());return(s=>new A1(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),qs(gy,yy,P1(n)),qs(gy,yy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1=300,b1=Jv("authIdTokenMaxAge")||N1;let vy=null;const D1=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>b1)return;const o=t==null?void 0:t.token;vy!==o&&(vy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function V1(n=r_()){const e=_f(n,"auth");if(e.isInitialized())return e.getImmediate();const t=hC(n,{popupRedirectResolver:R1,persistence:[jC,kC,A_]}),s=Jv("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=D1(l.toString());EC(t,c,()=>c(t.currentUser)),wC(t,f=>c(f))}}const o=Qv("auth");return o&&fC(t,`http://${o}`),t}function O1(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}aC({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=mr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",O1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});x1("Browser");var L1="firebase",M1="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qs(L1,M1,"app");var _y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gs,L_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,C){function A(){}A.prototype=C.prototype,x.F=C.prototype,x.prototype=new A,x.prototype.constructor=x,x.D=function(O,V,b){for(var R=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)R[ve-2]=arguments[ve];return C.prototype[V].apply(O,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,C,A){A||(A=0);const O=Array(16);if(typeof C=="string")for(var V=0;V<16;++V)O[V]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(V=0;V<16;++V)O[V]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=x.g[0],A=x.g[1],V=x.g[2];let b=x.g[3],R;R=C+(b^A&(V^b))+O[0]+3614090360&4294967295,C=A+(R<<7&4294967295|R>>>25),R=b+(V^C&(A^V))+O[1]+3905402710&4294967295,b=C+(R<<12&4294967295|R>>>20),R=V+(A^b&(C^A))+O[2]+606105819&4294967295,V=b+(R<<17&4294967295|R>>>15),R=A+(C^V&(b^C))+O[3]+3250441966&4294967295,A=V+(R<<22&4294967295|R>>>10),R=C+(b^A&(V^b))+O[4]+4118548399&4294967295,C=A+(R<<7&4294967295|R>>>25),R=b+(V^C&(A^V))+O[5]+1200080426&4294967295,b=C+(R<<12&4294967295|R>>>20),R=V+(A^b&(C^A))+O[6]+2821735955&4294967295,V=b+(R<<17&4294967295|R>>>15),R=A+(C^V&(b^C))+O[7]+4249261313&4294967295,A=V+(R<<22&4294967295|R>>>10),R=C+(b^A&(V^b))+O[8]+1770035416&4294967295,C=A+(R<<7&4294967295|R>>>25),R=b+(V^C&(A^V))+O[9]+2336552879&4294967295,b=C+(R<<12&4294967295|R>>>20),R=V+(A^b&(C^A))+O[10]+4294925233&4294967295,V=b+(R<<17&4294967295|R>>>15),R=A+(C^V&(b^C))+O[11]+2304563134&4294967295,A=V+(R<<22&4294967295|R>>>10),R=C+(b^A&(V^b))+O[12]+1804603682&4294967295,C=A+(R<<7&4294967295|R>>>25),R=b+(V^C&(A^V))+O[13]+4254626195&4294967295,b=C+(R<<12&4294967295|R>>>20),R=V+(A^b&(C^A))+O[14]+2792965006&4294967295,V=b+(R<<17&4294967295|R>>>15),R=A+(C^V&(b^C))+O[15]+1236535329&4294967295,A=V+(R<<22&4294967295|R>>>10),R=C+(V^b&(A^V))+O[1]+4129170786&4294967295,C=A+(R<<5&4294967295|R>>>27),R=b+(A^V&(C^A))+O[6]+3225465664&4294967295,b=C+(R<<9&4294967295|R>>>23),R=V+(C^A&(b^C))+O[11]+643717713&4294967295,V=b+(R<<14&4294967295|R>>>18),R=A+(b^C&(V^b))+O[0]+3921069994&4294967295,A=V+(R<<20&4294967295|R>>>12),R=C+(V^b&(A^V))+O[5]+3593408605&4294967295,C=A+(R<<5&4294967295|R>>>27),R=b+(A^V&(C^A))+O[10]+38016083&4294967295,b=C+(R<<9&4294967295|R>>>23),R=V+(C^A&(b^C))+O[15]+3634488961&4294967295,V=b+(R<<14&4294967295|R>>>18),R=A+(b^C&(V^b))+O[4]+3889429448&4294967295,A=V+(R<<20&4294967295|R>>>12),R=C+(V^b&(A^V))+O[9]+568446438&4294967295,C=A+(R<<5&4294967295|R>>>27),R=b+(A^V&(C^A))+O[14]+3275163606&4294967295,b=C+(R<<9&4294967295|R>>>23),R=V+(C^A&(b^C))+O[3]+4107603335&4294967295,V=b+(R<<14&4294967295|R>>>18),R=A+(b^C&(V^b))+O[8]+1163531501&4294967295,A=V+(R<<20&4294967295|R>>>12),R=C+(V^b&(A^V))+O[13]+2850285829&4294967295,C=A+(R<<5&4294967295|R>>>27),R=b+(A^V&(C^A))+O[2]+4243563512&4294967295,b=C+(R<<9&4294967295|R>>>23),R=V+(C^A&(b^C))+O[7]+1735328473&4294967295,V=b+(R<<14&4294967295|R>>>18),R=A+(b^C&(V^b))+O[12]+2368359562&4294967295,A=V+(R<<20&4294967295|R>>>12),R=C+(A^V^b)+O[5]+4294588738&4294967295,C=A+(R<<4&4294967295|R>>>28),R=b+(C^A^V)+O[8]+2272392833&4294967295,b=C+(R<<11&4294967295|R>>>21),R=V+(b^C^A)+O[11]+1839030562&4294967295,V=b+(R<<16&4294967295|R>>>16),R=A+(V^b^C)+O[14]+4259657740&4294967295,A=V+(R<<23&4294967295|R>>>9),R=C+(A^V^b)+O[1]+2763975236&4294967295,C=A+(R<<4&4294967295|R>>>28),R=b+(C^A^V)+O[4]+1272893353&4294967295,b=C+(R<<11&4294967295|R>>>21),R=V+(b^C^A)+O[7]+4139469664&4294967295,V=b+(R<<16&4294967295|R>>>16),R=A+(V^b^C)+O[10]+3200236656&4294967295,A=V+(R<<23&4294967295|R>>>9),R=C+(A^V^b)+O[13]+681279174&4294967295,C=A+(R<<4&4294967295|R>>>28),R=b+(C^A^V)+O[0]+3936430074&4294967295,b=C+(R<<11&4294967295|R>>>21),R=V+(b^C^A)+O[3]+3572445317&4294967295,V=b+(R<<16&4294967295|R>>>16),R=A+(V^b^C)+O[6]+76029189&4294967295,A=V+(R<<23&4294967295|R>>>9),R=C+(A^V^b)+O[9]+3654602809&4294967295,C=A+(R<<4&4294967295|R>>>28),R=b+(C^A^V)+O[12]+3873151461&4294967295,b=C+(R<<11&4294967295|R>>>21),R=V+(b^C^A)+O[15]+530742520&4294967295,V=b+(R<<16&4294967295|R>>>16),R=A+(V^b^C)+O[2]+3299628645&4294967295,A=V+(R<<23&4294967295|R>>>9),R=C+(V^(A|~b))+O[0]+4096336452&4294967295,C=A+(R<<6&4294967295|R>>>26),R=b+(A^(C|~V))+O[7]+1126891415&4294967295,b=C+(R<<10&4294967295|R>>>22),R=V+(C^(b|~A))+O[14]+2878612391&4294967295,V=b+(R<<15&4294967295|R>>>17),R=A+(b^(V|~C))+O[5]+4237533241&4294967295,A=V+(R<<21&4294967295|R>>>11),R=C+(V^(A|~b))+O[12]+1700485571&4294967295,C=A+(R<<6&4294967295|R>>>26),R=b+(A^(C|~V))+O[3]+2399980690&4294967295,b=C+(R<<10&4294967295|R>>>22),R=V+(C^(b|~A))+O[10]+4293915773&4294967295,V=b+(R<<15&4294967295|R>>>17),R=A+(b^(V|~C))+O[1]+2240044497&4294967295,A=V+(R<<21&4294967295|R>>>11),R=C+(V^(A|~b))+O[8]+1873313359&4294967295,C=A+(R<<6&4294967295|R>>>26),R=b+(A^(C|~V))+O[15]+4264355552&4294967295,b=C+(R<<10&4294967295|R>>>22),R=V+(C^(b|~A))+O[6]+2734768916&4294967295,V=b+(R<<15&4294967295|R>>>17),R=A+(b^(V|~C))+O[13]+1309151649&4294967295,A=V+(R<<21&4294967295|R>>>11),R=C+(V^(A|~b))+O[4]+4149444226&4294967295,C=A+(R<<6&4294967295|R>>>26),R=b+(A^(C|~V))+O[11]+3174756917&4294967295,b=C+(R<<10&4294967295|R>>>22),R=V+(C^(b|~A))+O[2]+718787259&4294967295,V=b+(R<<15&4294967295|R>>>17),R=A+(b^(V|~C))+O[9]+3951481745&4294967295,x.g[0]=x.g[0]+C&4294967295,x.g[1]=x.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+V&4294967295,x.g[3]=x.g[3]+b&4294967295}s.prototype.v=function(x,C){C===void 0&&(C=x.length);const A=C-this.blockSize,O=this.C;let V=this.h,b=0;for(;b<C;){if(V==0)for(;b<=A;)o(this,x,b),b+=this.blockSize;if(typeof x=="string"){for(;b<C;)if(O[V++]=x.charCodeAt(b++),V==this.blockSize){o(this,O),V=0;break}}else for(;b<C;)if(O[V++]=x[b++],V==this.blockSize){o(this,O),V=0;break}}this.h=V,this.o+=C},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var C=1;C<x.length-8;++C)x[C]=0;C=this.o*8;for(var A=x.length-8;A<x.length;++A)x[A]=C&255,C/=256;for(this.v(x),x=Array(16),C=0,A=0;A<4;++A)for(let O=0;O<32;O+=8)x[C++]=this.g[A]>>>O&255;return x};function l(x,C){var A=f;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=C(x)}function c(x,C){this.h=C;const A=[];let O=!0;for(let V=x.length-1;V>=0;V--){const b=x[V]|0;O&&b==C||(A[V]=b,O=!1)}this.g=A}var f={};function p(x){return-128<=x&&x<128?l(x,function(C){return new c([C|0],C<0?-1:0)}):new c([x|0],x<0?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return L(g(-x));const C=[];let A=1;for(let O=0;x>=A;O++)C[O]=x/A|0,A*=4294967296;return new c(C,0)}function _(x,C){if(x.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(x.charAt(0)=="-")return L(_(x.substring(1),C));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const A=g(Math.pow(C,8));let O=E;for(let b=0;b<x.length;b+=8){var V=Math.min(8,x.length-b);const R=parseInt(x.substring(b,b+V),C);V<8?(V=g(Math.pow(C,V)),O=O.j(V).add(g(R))):(O=O.j(A),O=O.add(g(R)))}return O}var E=p(0),I=p(1),P=p(16777216);n=c.prototype,n.m=function(){if(U(this))return-L(this).m();let x=0,C=1;for(let A=0;A<this.g.length;A++){const O=this.i(A);x+=(O>=0?O:4294967296+O)*C,C*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(F(this))return"0";if(U(this))return"-"+L(this).toString(x);const C=g(Math.pow(x,6));var A=this;let O="";for(;;){const V=le(A,C).g;A=q(A,V.j(C));let b=((A.g.length>0?A.g[0]:A.h)>>>0).toString(x);if(A=V,F(A))return b+O;for(;b.length<6;)b="0"+b;O=b+O}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function F(x){if(x.h!=0)return!1;for(let C=0;C<x.g.length;C++)if(x.g[C]!=0)return!1;return!0}function U(x){return x.h==-1}n.l=function(x){return x=q(this,x),U(x)?-1:F(x)?0:1};function L(x){const C=x.g.length,A=[];for(let O=0;O<C;O++)A[O]=~x.g[O];return new c(A,~x.h).add(I)}n.abs=function(){return U(this)?L(this):this},n.add=function(x){const C=Math.max(this.g.length,x.g.length),A=[];let O=0;for(let V=0;V<=C;V++){let b=O+(this.i(V)&65535)+(x.i(V)&65535),R=(b>>>16)+(this.i(V)>>>16)+(x.i(V)>>>16);O=R>>>16,b&=65535,R&=65535,A[V]=R<<16|b}return new c(A,A[A.length-1]&-2147483648?-1:0)};function q(x,C){return x.add(L(C))}n.j=function(x){if(F(this)||F(x))return E;if(U(this))return U(x)?L(this).j(L(x)):L(L(this).j(x));if(U(x))return L(this.j(L(x)));if(this.l(P)<0&&x.l(P)<0)return g(this.m()*x.m());const C=this.g.length+x.g.length,A=[];for(var O=0;O<2*C;O++)A[O]=0;for(O=0;O<this.g.length;O++)for(let V=0;V<x.g.length;V++){const b=this.i(O)>>>16,R=this.i(O)&65535,ve=x.i(V)>>>16,J=x.i(V)&65535;A[2*O+2*V]+=R*J,X(A,2*O+2*V),A[2*O+2*V+1]+=b*J,X(A,2*O+2*V+1),A[2*O+2*V+1]+=R*ve,X(A,2*O+2*V+1),A[2*O+2*V+2]+=b*ve,X(A,2*O+2*V+2)}for(x=0;x<C;x++)A[x]=A[2*x+1]<<16|A[2*x];for(x=C;x<2*C;x++)A[x]=0;return new c(A,0)};function X(x,C){for(;(x[C]&65535)!=x[C];)x[C+1]+=x[C]>>>16,x[C]&=65535,C++}function te(x,C){this.g=x,this.h=C}function le(x,C){if(F(C))throw Error("division by zero");if(F(x))return new te(E,E);if(U(x))return C=le(L(x),C),new te(L(C.g),L(C.h));if(U(C))return C=le(x,L(C)),new te(L(C.g),C.h);if(x.g.length>30){if(U(x)||U(C))throw Error("slowDivide_ only works with positive integers.");for(var A=I,O=C;O.l(x)<=0;)A=ne(A),O=ne(O);var V=ie(A,1),b=ie(O,1);for(O=ie(O,2),A=ie(A,2);!F(O);){var R=b.add(O);R.l(x)<=0&&(V=V.add(A),b=R),O=ie(O,1),A=ie(A,1)}return C=q(x,V.j(C)),new te(V,C)}for(V=E;x.l(C)>=0;){for(A=Math.max(1,Math.floor(x.m()/C.m())),O=Math.ceil(Math.log(A)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),b=g(A),R=b.j(C);U(R)||R.l(x)>0;)A-=O,b=g(A),R=b.j(C);F(b)&&(b=I),V=V.add(b),x=q(x,R)}return new te(V,x)}n.B=function(x){return le(this,x).h},n.and=function(x){const C=Math.max(this.g.length,x.g.length),A=[];for(let O=0;O<C;O++)A[O]=this.i(O)&x.i(O);return new c(A,this.h&x.h)},n.or=function(x){const C=Math.max(this.g.length,x.g.length),A=[];for(let O=0;O<C;O++)A[O]=this.i(O)|x.i(O);return new c(A,this.h|x.h)},n.xor=function(x){const C=Math.max(this.g.length,x.g.length),A=[];for(let O=0;O<C;O++)A[O]=this.i(O)^x.i(O);return new c(A,this.h^x.h)};function ne(x){const C=x.g.length+1,A=[];for(let O=0;O<C;O++)A[O]=x.i(O)<<1|x.i(O-1)>>>31;return new c(A,x.h)}function ie(x,C){const A=C>>5;C%=32;const O=x.g.length-A,V=[];for(let b=0;b<O;b++)V[b]=C>0?x.i(b+A)>>>C|x.i(b+A+1)<<32-C:x.i(b+A);return new c(V,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,L_=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=g,c.fromString=_,Gs=c}).apply(typeof _y<"u"?_y:typeof self<"u"?self:typeof window<"u"?window:{});var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var M_,Qa,j_,Gu,qd,F_,U_,z_;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lu=="object"&&Lu];for(var y=0;y<u.length;++y){var v=u[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=t(this);function o(u,y){if(y)e:{var v=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in v))break e;v=v[B]}u=u[u.length-1],S=v[u],y=y(S),y!=S&&y!=null&&e(v,u,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(y){var v=[],S;for(S in y)Object.prototype.hasOwnProperty.call(y,S)&&v.push([S,y[S]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(u){var y=typeof u;return y=="object"&&u!=null||y=="function"}function p(u,y,v){return u.call.apply(u.bind,arguments)}function g(u,y,v){return g=p,g.apply(null,arguments)}function _(u,y){var v=Array.prototype.slice.call(arguments,1);return function(){var S=v.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function E(u,y){function v(){}v.prototype=y.prototype,u.Z=y.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(S,B,G){for(var ge=Array(arguments.length-2),We=2;We<arguments.length;We++)ge[We-2]=arguments[We];return y.prototype[B].apply(S,ge)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function P(u){const y=u.length;if(y>0){const v=Array(y);for(let S=0;S<y;S++)v[S]=u[S];return v}return[]}function F(u,y){for(let S=1;S<arguments.length;S++){const B=arguments[S];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=u.length||0;const G=B.length||0;u.length=v+G;for(let ge=0;ge<G;ge++)u[v+ge]=B[ge]}else u.push(B)}}class U{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function L(u){c.setTimeout(()=>{throw u},0)}function q(){var u=x;let y=null;return u.g&&(y=u.g,u.g=u.g.next,u.g||(u.h=null),y.next=null),y}class X{constructor(){this.h=this.g=null}add(y,v){const S=te.get();S.set(y,v),this.h?this.h.next=S:this.g=S,this.h=S}}var te=new U(()=>new le,u=>u.reset());class le{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,ie=!1,x=new X,C=()=>{const u=Promise.resolve(void 0);ne=()=>{u.then(A)}};function A(){for(var u;u=q();){try{u.h.call(u.g)}catch(v){L(v)}var y=te;y.j(u),y.h<100&&(y.h++,u.next=y.g,y.g=u)}ie=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(u,y){this.type=u,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,y=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function ve(u,y){V.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,y)}E(ve,V),ve.prototype.init=function(u,y){const v=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=y,y=u.relatedTarget,y||(v=="mouseover"?y=u.fromElement:v=="mouseout"&&(y=u.toElement)),this.relatedTarget=y,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ve.Z.h.call(this)},ve.prototype.h=function(){ve.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var J="closure_listenable_"+(Math.random()*1e6|0),Fe=0;function _e(u,y,v,S,B){this.listener=u,this.proxy=null,this.src=y,this.type=v,this.capture=!!S,this.ha=B,this.key=++Fe,this.da=this.fa=!1}function se(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Y(u,y,v){for(const S in u)y.call(v,u[S],S,u)}function Z(u,y){for(const v in u)y.call(void 0,u[v],v,u)}function D(u){const y={};for(const v in u)y[v]=u[v];return y}const K="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ae(u,y){let v,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(v in S)u[v]=S[v];for(let G=0;G<K.length;G++)v=K[G],Object.prototype.hasOwnProperty.call(S,v)&&(u[v]=S[v])}}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,y,v,S,B){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const ge=qe(u,y,S,B);return ge>-1?(y=u[ge],v||(y.fa=!1)):(y=new _e(y,this.src,G,!!S,B),y.fa=v,u.push(y)),y};function Ue(u,y){const v=y.type;if(v in u.g){var S=u.g[v],B=Array.prototype.indexOf.call(S,y,void 0),G;(G=B>=0)&&Array.prototype.splice.call(S,B,1),G&&(se(y),u.g[v].length==0&&(delete u.g[v],u.h--))}}function qe(u,y,v,S){for(let B=0;B<u.length;++B){const G=u[B];if(!G.da&&G.listener==y&&G.capture==!!v&&G.ha==S)return B}return-1}var Ye="closure_lm_"+(Math.random()*1e6|0),ze={};function tt(u,y,v,S,B){if(Array.isArray(y)){for(let G=0;G<y.length;G++)tt(u,y[G],v,S,B);return null}return v=fe(v),u&&u[J]?u.J(y,v,f(S)?!!S.capture:!1,B):At(u,y,v,!1,S,B)}function At(u,y,v,S,B,G){if(!y)throw Error("Invalid event type");const ge=f(B)?!!B.capture:!!B;let We=de(u);if(We||(u[Ye]=We=new xe(u)),v=We.add(y,v,S,ge,G),v.proxy)return v;if(S=Vn(),v.proxy=S,S.src=u,S.listener=v,u.addEventListener)b||(B=ge),B===void 0&&(B=!1),u.addEventListener(y.toString(),S,B);else if(u.attachEvent)u.attachEvent(ce(y.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Vn(){function u(v){return y.call(u.src,u.listener,v)}const y=$;return u}function en(u,y,v,S,B){if(Array.isArray(y))for(var G=0;G<y.length;G++)en(u,y[G],v,S,B);else S=f(S)?!!S.capture:!!S,v=fe(v),u&&u[J]?(u=u.i,G=String(y).toString(),G in u.g&&(y=u.g[G],v=qe(y,v,S,B),v>-1&&(se(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete u.g[G],u.h--)))):u&&(u=de(u))&&(y=u.g[y.toString()],u=-1,y&&(u=qe(y,v,S,B)),(v=u>-1?y[u]:null)&&tn(v))}function tn(u){if(typeof u!="number"&&u&&!u.da){var y=u.src;if(y&&y[J])Ue(y.i,u);else{var v=u.type,S=u.proxy;y.removeEventListener?y.removeEventListener(v,S,u.capture):y.detachEvent?y.detachEvent(ce(v),S):y.addListener&&y.removeListener&&y.removeListener(S),(v=de(y))?(Ue(v,u),v.h==0&&(v.src=null,y[Ye]=null)):se(u)}}}function ce(u){return u in ze?ze[u]:ze[u]="on"+u}function $(u,y){if(u.da)u=!0;else{y=new ve(y,this);const v=u.listener,S=u.ha||u.src;u.fa&&tn(u),u=v.call(S,y)}return u}function de(u){return u=u[Ye],u instanceof xe?u:null}var Ee="__closure_events_fn_"+(Math.random()*1e9>>>0);function fe(u){return typeof u=="function"?u:(u[Ee]||(u[Ee]=function(y){return u.handleEvent(y)}),u[Ee])}function ye(){O.call(this),this.i=new xe(this),this.M=this,this.G=null}E(ye,O),ye.prototype[J]=!0,ye.prototype.removeEventListener=function(u,y,v,S){en(this,u,y,v,S)};function Ne(u,y){var v,S=u.G;if(S)for(v=[];S;S=S.G)v.push(S);if(u=u.M,S=y.type||y,typeof y=="string")y=new V(y,u);else if(y instanceof V)y.target=y.target||u;else{var B=y;y=new V(S,u),Ae(y,B)}B=!0;let G,ge;if(v)for(ge=v.length-1;ge>=0;ge--)G=y.g=v[ge],B=yt(G,S,!0,y)&&B;if(G=y.g=u,B=yt(G,S,!0,y)&&B,B=yt(G,S,!1,y)&&B,v)for(ge=0;ge<v.length;ge++)G=y.g=v[ge],B=yt(G,S,!1,y)&&B}ye.prototype.N=function(){if(ye.Z.N.call(this),this.i){var u=this.i;for(const y in u.g){const v=u.g[y];for(let S=0;S<v.length;S++)se(v[S]);delete u.g[y],u.h--}}this.G=null},ye.prototype.J=function(u,y,v,S){return this.i.add(String(u),y,!1,v,S)},ye.prototype.K=function(u,y,v,S){return this.i.add(String(u),y,!0,v,S)};function yt(u,y,v,S){if(y=u.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let G=0;G<y.length;++G){const ge=y[G];if(ge&&!ge.da&&ge.capture==v){const We=ge.listener,Ot=ge.ha||ge.src;ge.fa&&Ue(u.i,ge),B=We.call(Ot,S)!==!1&&B}}return B&&!S.defaultPrevented}function Nt(u,y){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=g(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(u,y||0)}function Gn(u){u.g=Nt(()=>{u.g=null,u.i&&(u.i=!1,Gn(u))},u.l);const y=u.h;u.h=null,u.m.apply(null,y)}class On extends O{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Gn(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tn(u){O.call(this),this.h=u,this.g={}}E(Tn,O);var vr=[];function Ln(u){Y(u.g,function(y,v){this.g.hasOwnProperty(v)&&tn(y)},u),u.g={}}Tn.prototype.N=function(){Tn.Z.N.call(this),Ln(this)},Tn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kn=c.JSON.stringify,ms=c.JSON.parse,Qn=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function Yn(){}function bt(){}var dn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Cn(){V.call(this,"d")}E(Cn,V);function Pe(){V.call(this,"c")}E(Pe,V);var Ke={},$e=null;function Tt(){return $e=$e||new ye}Ke.Ia="serverreachability";function Kt(u){V.call(this,Ke.Ia,u)}E(Kt,V);function nn(u){const y=Tt();Ne(y,new Kt(y))}Ke.STAT_EVENT="statevent";function rn(u,y){V.call(this,Ke.STAT_EVENT,u),this.stat=y}E(rn,V);function lt(u){const y=Tt();Ne(y,new rn(y,u))}Ke.Ja="timingevent";function _r(u,y){V.call(this,Ke.Ja,u),this.size=y}E(_r,V);function Dt(u,y){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},y)}function ft(){this.g=!0}ft.prototype.ua=function(){this.g=!1};function Ki(u,y,v,S,B,G){u.info(function(){if(u.g)if(G){var ge="",We=G.split("&");for(let dt=0;dt<We.length;dt++){var Ot=We[dt].split("=");if(Ot.length>1){const jt=Ot[0];Ot=Ot[1];const Bn=jt.split("_");ge=Bn.length>=2&&Bn[1]=="type"?ge+(jt+"="+Ot+"&"):ge+(jt+"=redacted&")}}}else ge=null;else ge=G;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+y+`
`+v+`
`+ge})}function Q(u,y,v,S,B,G,ge){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+y+`
`+v+`
`+G+" "+ge})}function ue(u,y,v,S){u.info(function(){return"XMLHTTP TEXT ("+y+"): "+De(u,v)+(S?" "+S:"")})}function me(u,y){u.info(function(){return"TIMEOUT: "+y})}ft.prototype.info=function(){};function De(u,y){if(!u.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var v=G[u];if(!(v.length<2)){var S=v[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ge=1;ge<S.length;ge++)S[ge]=""}}}}return Kn(G)}catch{return y}}var ut={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ge={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},St;function ot(){}E(ot,Yn),ot.prototype.g=function(){return new XMLHttpRequest},St=new ot;function rt(u){return encodeURIComponent(String(u))}function Vt(u){var y=1;u=u.split(":");const v=[];for(;y>0&&u.length;)v.push(u.shift()),y--;return u.length&&v.push(u.join(":")),v}function ct(u,y,v,S){this.j=u,this.i=y,this.l=v,this.S=S||1,this.V=new Tn(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new gs}function gs(){this.i=null,this.g="",this.h=!1}var Al={},ia={};function ir(u,y,v){u.M=1,u.A=qr(Jn(y)),u.u=v,u.R=!0,oa(u,null)}function oa(u,y){u.F=Date.now(),oi(u),u.B=Jn(u.A);var v=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),ga(v.i,"t",S),u.C=0,v=u.j.L,u.h=new gs,u.g=jl(u.j,v?y:null,!u.u),u.P>0&&(u.O=new On(g(u.Y,u,u.g),u.P)),y=u.V,v=u.g,S=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(vr[0]=B.toString()),B=vr);for(let G=0;G<B.length;G++){const ge=tt(v,B[G],S||y.handleEvent,!1,y.h||y);if(!ge)break;y.g[ge.key]=ge}y=u.J?D(u.J):{},u.u?(u.v||(u.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,y)):(u.v="GET",u.g.ea(u.B,u.v,null,y)),nn(),Ki(u.i,u.v,u.B,u.l,u.S,u.u)}ct.prototype.ba=function(u){u=u.target;const y=this.O;y&&kr(u)==3?y.j():this.Y(u)},ct.prototype.Y=function(u){try{if(u==this.g)e:{const We=kr(this.g),Ot=this.g.ya(),dt=this.g.ca();if(!(We<3)&&(We!=3||this.g&&(this.h.h||this.g.la()||Ll(this.g)))){this.K||We!=4||Ot==7||(Ot==8||dt<=0?nn(3):nn(2)),Qi(this);var y=this.g.ca();this.X=y;var v=Pl(this);if(this.o=y==200,Q(this.i,this.v,this.B,this.l,this.S,We,y),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var G=S;break t}}G=null}if(u=G)ue(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vt(this,u);else{this.o=!1,this.m=3,lt(12),Hr(this),ai(this);break e}}if(this.R){u=!0;let jt;for(;!this.K&&this.C<v.length;)if(jt=Nl(this,v),jt==ia){We==4&&(this.m=4,lt(14),u=!1),ue(this.i,this.l,null,"[Incomplete Response]");break}else if(jt==Al){this.m=4,lt(15),ue(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else ue(this.i,this.l,jt,null),vt(this,jt);if(xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),We!=4||v.length!=0||this.h.h||(this.m=1,lt(16),u=!1),this.o=this.o&&u,!u)ue(this.i,this.l,v,"[Invalid Chunked Response]"),Hr(this),ai(this);else if(v.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),gi(ge),ge.P=!0,lt(11))}}else ue(this.i,this.l,v,null),vt(this,v);We==4&&Hr(this),this.o&&!this.K&&(We==4?io(this.j,this):(this.o=!1,oi(this)))}else va(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,lt(12)):(this.m=0,lt(13)),Hr(this),ai(this)}}}catch{}finally{}};function Pl(u){if(!xl(u))return u.g.la();const y=Ll(u.g);if(y==="")return"";let v="";const S=y.length,B=kr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Hr(u),ai(u),"";u.h.i=new c.TextDecoder}for(let G=0;G<S;G++)u.h.h=!0,v+=u.h.i.decode(y[G],{stream:!(B&&G==S-1)});return y.length=0,u.h.g+=v,u.C=0,u.h.g}function xl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Nl(u,y){var v=u.C,S=y.indexOf(`
`,v);return S==-1?ia:(v=Number(y.substring(v,S)),isNaN(v)?Al:(S+=1,S+v>y.length?ia:(y=y.slice(S,S+v),u.C=S+v,y)))}ct.prototype.cancel=function(){this.K=!0,Hr(this)};function oi(u){u.T=Date.now()+u.H,aa(u,u.H)}function aa(u,y){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Dt(g(u.aa,u),y)}function Qi(u){u.D&&(c.clearTimeout(u.D),u.D=null)}ct.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(me(this.i,this.B),this.M!=2&&(nn(),lt(17)),Hr(this),this.m=2,ai(this)):aa(this,this.T-u)};function ai(u){u.j.I==0||u.K||io(u.j,u)}function Hr(u){Qi(u);var y=u.O;y&&typeof y.dispose=="function"&&y.dispose(),u.O=null,Ln(u.V),u.g&&(y=u.g,u.g=null,y.abort(),y.dispose())}function vt(u,y){try{var v=u.j;if(v.I!=0&&(v.g==u||ua(v.h,u))){if(!u.L&&ua(v.h,u)&&v.I==3){try{var S=v.Ba.g.parse(y)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)so(v),Un(v);else break e;Pr(v),lt(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Dt(g(v.Va,v),6e3));li(v.h)<=1&&v.ta&&(v.ta=void 0)}else zn(v,11)}else if((u.L||v.g==u)&&so(v),!R(y))for(B=v.Ba.g.parse(y),y=0;y<B.length;y++){let dt=B[y];const jt=dt[0];if(!(jt<=v.K))if(v.K=jt,dt=dt[1],v.I==2)if(dt[0]=="c"){v.M=dt[1],v.ba=dt[2];const Bn=dt[3];Bn!=null&&(v.ka=Bn,v.j.info("VER="+v.ka));const Jr=dt[4];Jr!=null&&(v.za=Jr,v.j.info("SVER="+v.za));const xr=dt[5];xr!=null&&typeof xr=="number"&&xr>0&&(S=1.5*xr,v.O=S,v.j.info("backChannelRequestTimeoutMs_="+S)),S=v;const Nr=u.g;if(Nr){const lo=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(lo){var G=S.h;G.g||lo.indexOf("spdy")==-1&&lo.indexOf("quic")==-1&&lo.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(Ji(G,G.h),G.h=null))}if(S.G){const Ea=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ea&&(S.wa=Ea,at(S.J,S.G,Ea))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),S=v;var ge=u;if(S.na=wa(S,S.L?S.ba:null,S.W),ge.L){ui(S.h,ge);var We=ge,Ot=S.O;Ot&&(We.H=Ot),We.D&&(Qi(We),oi(We)),S.g=ge}else fn(S);v.i.length>0&&Yr(v)}else dt[0]!="stop"&&dt[0]!="close"||zn(v,7);else v.I==3&&(dt[0]=="stop"||dt[0]=="close"?dt[0]=="stop"?zn(v,7):no(v):dt[0]!="noop"&&v.l&&v.l.qa(dt),v.A=0)}}nn(4)}catch{}}var Hc=class{constructor(u,y){this.g=u,this.map=y}};function Yi(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function la(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function li(u){return u.h?1:u.g?u.g.size:0}function ua(u,y){return u.h?u.h==y:u.g?u.g.has(y):!1}function Ji(u,y){u.g?u.g.add(y):u.h=y}function ui(u,y){u.h&&u.h==y?u.h=null:u.g&&u.g.has(y)&&u.g.delete(y)}Yi.prototype.cancel=function(){if(this.i=Mn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Mn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let y=u.i;for(const v of u.g.values())y=y.concat(v.G);return y}return P(u.i)}var bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jn(u,y){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const S=u[v].indexOf("=");let B,G=null;S>=0?(B=u[v].substring(0,S),G=u[v].substring(S+1)):B=u[v],y(B,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function wr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;u instanceof wr?(this.l=u.l,ci(this,u.j),this.o=u.o,this.g=u.g,Er(this,u.u),this.h=u.h,ys(this,ya(u.i)),this.m=u.m):u&&(y=String(u).match(bl))?(this.l=!1,ci(this,y[1]||"",!0),this.o=hi(y[2]||""),this.g=hi(y[3]||"",!0),Er(this,y[4]),this.h=hi(y[5]||"",!0),ys(this,y[6]||"",!0),this.m=hi(y[7]||"")):(this.l=!1,this.i=new et(null,this.l))}wr.prototype.toString=function(){const u=[];var y=this.j;y&&u.push(di(y,ha,!0),":");var v=this.g;return(v||y=="file")&&(u.push("//"),(y=this.o)&&u.push(di(y,ha,!0),"@"),u.push(rt(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(di(v,v.charAt(0)=="/"?fi:da,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",di(v,fa)),u.join("")},wr.prototype.resolve=function(u){const y=Jn(this);let v=!!u.j;v?ci(y,u.j):v=!!u.o,v?y.o=u.o:v=!!u.g,v?y.g=u.g:v=u.u!=null;var S=u.h;if(v)Er(y,u.u);else if(v=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=y.h.lastIndexOf("/");B!=-1&&(S=y.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const G=[];for(let ge=0;ge<B.length;){const We=B[ge++];We=="."?S&&ge==B.length&&G.push(""):We==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),S&&ge==B.length&&G.push("")):(G.push(We),S=!0)}S=G.join("/")}else S=B}return v?y.h=S:v=u.i.toString()!=="",v?ys(y,ya(u.i)):v=!!u.m,v&&(y.m=u.m),y};function Jn(u){return new wr(u)}function ci(u,y,v){u.j=v?hi(y,!0):y,u.j&&(u.j=u.j.replace(/:$/,""))}function Er(u,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);u.u=y}else u.u=null}function ys(u,y,v){y instanceof et?(u.i=y,Zi(u.i,u.l)):(v||(y=di(y,qc)),u.i=new et(y,u.l))}function at(u,y,v){u.i.set(y,v)}function qr(u){return at(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function hi(u,y){return u?y?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function di(u,y,v){return typeof u=="string"?(u=encodeURI(u).replace(y,ca),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ca(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ha=/[#\/\?@]/g,da=/[#\?:]/g,fi=/[#\?]/g,qc=/[#\?@]/g,fa=/#/g;function et(u,y){this.h=this.g=null,this.i=u||null,this.j=!!y}function Tr(u){u.g||(u.g=new Map,u.h=0,u.i&&jn(u.i,function(y,v){u.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}n=et.prototype,n.add=function(u,y){Tr(this),this.i=null,u=Ir(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(y),this.h+=1,this};function pa(u,y){Tr(u),y=Ir(u,y),u.g.has(y)&&(u.i=null,u.h-=u.g.get(y).length,u.g.delete(y))}function Xi(u,y){return Tr(u),y=Ir(u,y),u.g.has(y)}n.forEach=function(u,y){Tr(this),this.g.forEach(function(v,S){v.forEach(function(B){u.call(y,B,S,this)},this)},this)};function ma(u,y){Tr(u);let v=[];if(typeof y=="string")Xi(u,y)&&(v=v.concat(u.g.get(Ir(u,y))));else for(u=Array.from(u.g.values()),y=0;y<u.length;y++)v=v.concat(u[y]);return v}n.set=function(u,y){return Tr(this),this.i=null,u=Ir(this,u),Xi(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[y]),this.h+=1,this},n.get=function(u,y){return u?(u=ma(this,u),u.length>0?String(u[0]):y):y};function ga(u,y,v){pa(u,y),v.length>0&&(u.i=null,u.g.set(Ir(u,y),P(v)),u.h+=v.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],y=Array.from(this.g.keys());for(let S=0;S<y.length;S++){var v=y[S];const B=rt(v);v=ma(this,v);for(let G=0;G<v.length;G++){let ge=B;v[G]!==""&&(ge+="="+rt(v[G])),u.push(ge)}}return this.i=u.join("&")};function ya(u){const y=new et;return y.i=u.i,u.g&&(y.g=new Map(u.g),y.h=u.h),y}function Ir(u,y){return y=String(y),u.j&&(y=y.toLowerCase()),y}function Zi(u,y){y&&!u.j&&(Tr(u),u.i=null,u.g.forEach(function(v,S){const B=S.toLowerCase();S!=B&&(pa(this,S),ga(this,B,v))},u)),u.j=y}function Sr(u,y){const v=new ft;if(c.Image){const S=new Image;S.onload=_(sn,v,"TestLoadImage: loaded",!0,y,S),S.onerror=_(sn,v,"TestLoadImage: error",!1,y,S),S.onabort=_(sn,v,"TestLoadImage: abort",!1,y,S),S.ontimeout=_(sn,v,"TestLoadImage: timeout",!1,y,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else y(!1)}function Cr(u,y){const v=new ft,S=new AbortController,B=setTimeout(()=>{S.abort(),sn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(u,{signal:S.signal}).then(G=>{clearTimeout(B),G.ok?sn(v,"TestPingServer: ok",!0,y):sn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),sn(v,"TestPingServer: error",!1,y)})}function sn(u,y,v,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(v)}catch{}}function pi(){this.g=new Qn}function Gr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Gr,Yn),Gr.prototype.g=function(){return new Fn(this.i,this.h)};function Fn(u,y){ye.call(this),this.H=u,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Fn,ye),n=Fn.prototype,n.open=function(u,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=y,this.readyState=1,or(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(y.body=u),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,vs(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,or(this)),this.g&&(this.readyState=3,or(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var y=u.value?u.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!u.done}))&&(this.response=this.responseText+=y)}u.done?vs(this):or(this),this.readyState==3&&Dl(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,vs(this))},n.Na=function(u){this.g&&(this.response=u,vs(this))},n.ga=function(){this.g&&vs(this)};function vs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,or(u)}n.setRequestHeader=function(u,y){this.A.append(u,y)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=y.next();return u.join(`\r
`)};function or(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vl(u){let y="";return Y(u,function(v,S){y+=S,y+=":",y+=v,y+=`\r
`}),y}function eo(u,y,v){e:{for(S in v){var S=!1;break e}S=!0}S||(v=Vl(v),typeof u=="string"?v!=null&&rt(v):at(u,y,v))}function pt(u){ye.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(pt,ye);var Ol=/^https?$/i,Gc=["POST","PUT"];n=pt.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,y,v,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);y=y?y.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():St.g(),this.g.onreadystatechange=I(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(u),!0),this.B=!1}catch(G){_s(this,G);return}if(u=v||"",v=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)v.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const G of S.keys())v.set(G,S.get(G));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(v.keys()).find(G=>G.toLowerCase()=="content-type"),B=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(Gc,y,void 0)>=0)||S||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ge]of v)this.g.setRequestHeader(G,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){_s(this,G)}};function _s(u,y){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=y,u.o=5,ws(u),Qr(u)}function ws(u){u.A||(u.A=!0,Ne(u,"complete"),Ne(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ne(this,"complete"),Ne(this,"abort"),Qr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Qr(this,!0)),pt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Kr(this):this.Xa())},n.Xa=function(){Kr(this)};function Kr(u){if(u.h&&typeof l<"u"){if(u.v&&kr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ne(u,"readystatechange"),kr(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var S;if(S=G===0){let ge=String(u.D).match(bl)[1]||null;!ge&&c.self&&c.self.location&&(ge=c.self.location.protocol.slice(0,-1)),S=!Ol.test(ge?ge.toLowerCase():"")}v=S}if(v)Ne(u,"complete"),Ne(u,"success");else{u.o=6;try{var B=kr(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",ws(u)}}finally{Qr(u)}}}}function Qr(u,y){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,y||Ne(u,"ready");try{v.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function kr(u){return u.g?u.g.readyState:0}n.ca=function(){try{return kr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var y=this.g.responseText;return u&&y.indexOf(u)==0&&(y=y.substring(u.length)),ms(y)}};function Ll(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function va(u){const y={};u=(u.g&&kr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(R(u[S]))continue;var v=Vt(u[S]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const G=y[B]||[];y[B]=G,G.push(v)}Z(y,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Rr(u,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||y}function to(u){this.za=0,this.i=[],this.j=new ft,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Rr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Rr("baseRetryDelayMs",5e3,u),this.Za=Rr("retryDelaySeedMs",1e4,u),this.Ta=Rr("forwardChannelMaxRetries",2,u),this.va=Rr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Yi(u&&u.concurrentRequestLimit),this.Ba=new pi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=to.prototype,n.ka=8,n.I=1,n.connect=function(u,y,v,S){lt(0),this.W=u,this.H=y||{},v&&S!==void 0&&(this.H.OSID=v,this.H.OAID=S),this.F=this.X,this.J=wa(this,null,this.W),Yr(this)};function no(u){if(ro(u),u.I==3){var y=u.V++,v=Jn(u.J);if(at(v,"SID",u.M),at(v,"RID",y),at(v,"TYPE","terminate"),Ar(u,v),y=new ct(u,u.j,y),y.M=2,y.A=qr(Jn(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=jl(y.j,null),y.g.ea(y.A)),y.F=Date.now(),oi(y)}yi(u)}function Un(u){u.g&&(gi(u),u.g.cancel(),u.g=null)}function ro(u){Un(u),u.v&&(c.clearTimeout(u.v),u.v=null),so(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Yr(u){if(!la(u.h)&&!u.m){u.m=!0;var y=u.Ea;ne||C(),ie||(ne(),ie=!0),x.add(y,u),u.D=0}}function Ml(u,y){return li(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=y.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Dt(g(u.Ea,u,y),oo(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new ct(this,this.j,u);let G=this.o;if(this.U&&(G?(G=D(G),Ae(G,this.U)):G=this.U),this.u!==null||this.R||(B.J=G,G=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var S=this.i[v];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(y+=S,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=_a(this,B,y),v=Jn(this.J),at(v,"RID",u),at(v,"CVER",22),this.G&&at(v,"X-HTTP-Session-Id",this.G),Ar(this,v),G&&(this.R?y="headers="+rt(Vl(G))+"&"+y:this.u&&eo(v,this.u,G)),Ji(this.h,B),this.Ra&&at(v,"TYPE","init"),this.S?(at(v,"$req",y),at(v,"SID","null"),B.U=!0,ir(B,v,null)):ir(B,v,y),this.I=2}}else this.I==3&&(u?mi(this,u):this.i.length==0||la(this.h)||mi(this))};function mi(u,y){var v;y?v=y.l:v=u.V++;const S=Jn(u.J);at(S,"SID",u.M),at(S,"RID",v),at(S,"AID",u.K),Ar(u,S),u.u&&u.o&&eo(S,u.u,u.o),v=new ct(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),y&&(u.i=y.G.concat(u.i)),y=_a(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Ji(u.h,v),ir(v,S,y)}function Ar(u,y){u.H&&Y(u.H,function(v,S){at(y,S,v)}),u.l&&Y({},function(v,S){at(y,S,v)})}function _a(u,y,v){v=Math.min(u.i.length,v);const S=u.l?g(u.l.Ka,u.l,u):null;e:{var B=u.i;let We=-1;for(;;){const Ot=["count="+v];We==-1?v>0?(We=B[0].g,Ot.push("ofs="+We)):We=0:Ot.push("ofs="+We);let dt=!0;for(let jt=0;jt<v;jt++){var G=B[jt].g;const Bn=B[jt].map;if(G-=We,G<0)We=Math.max(0,B[jt].g-100),dt=!1;else try{G="req"+G+"_"||"";try{var ge=Bn instanceof Map?Bn:Object.entries(Bn);for(const[Jr,xr]of ge){let Nr=xr;f(xr)&&(Nr=Kn(xr)),Ot.push(G+Jr+"="+encodeURIComponent(Nr))}}catch(Jr){throw Ot.push(G+"type="+encodeURIComponent("_badmap")),Jr}}catch{S&&S(Bn)}}if(dt){ge=Ot.join("&");break e}}ge=void 0}return u=u.i.splice(0,v),y.G=u,ge}function fn(u){if(!u.g&&!u.v){u.Y=1;var y=u.Da;ne||C(),ie||(ne(),ie=!0),x.add(y,u),u.A=0}}function Pr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Dt(g(u.Da,u),oo(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,Es(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Dt(g(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,lt(10),Un(this),Es(this))};function gi(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function Es(u){u.g=new ct(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var y=Jn(u.na);at(y,"RID","rpc"),at(y,"SID",u.M),at(y,"AID",u.K),at(y,"CI",u.F?"0":"1"),!u.F&&u.ia&&at(y,"TO",u.ia),at(y,"TYPE","xmlhttp"),Ar(u,y),u.u&&u.o&&eo(y,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=qr(Jn(y)),v.u=null,v.R=!0,oa(v,u)}n.Va=function(){this.C!=null&&(this.C=null,Un(this),Pr(this),lt(19))};function so(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function io(u,y){var v=null;if(u.g==y){so(u),gi(u),u.g=null;var S=2}else if(ua(u.h,y))v=y.G,ui(u.h,y),S=1;else return;if(u.I!=0){if(y.o)if(S==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var B=u.D;S=Tt(),Ne(S,new _r(S,v)),Yr(u)}else fn(u);else if(B=y.m,B==3||B==0&&y.X>0||!(S==1&&Ml(u,y)||S==2&&Pr(u)))switch(v&&v.length>0&&(y=u.h,y.i=y.i.concat(v)),B){case 1:zn(u,5);break;case 4:zn(u,10);break;case 3:zn(u,6);break;default:zn(u,2)}}}function oo(u,y){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*y}function zn(u,y){if(u.j.info("Error code "+y),y==2){var v=g(u.bb,u),S=u.Ua;const B=!S;S=new wr(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ci(S,"https"),qr(S),B?Sr(S.toString(),v):Cr(S.toString(),v)}else lt(2);u.I=0,u.l&&u.l.pa(y),yi(u),ro(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function yi(u){if(u.I=0,u.ja=[],u.l){const y=Mn(u.h);(y.length!=0||u.i.length!=0)&&(F(u.ja,y),F(u.ja,u.i),u.h.i.length=0,P(u.i),u.i.length=0),u.l.oa()}}function wa(u,y,v){var S=v instanceof wr?Jn(v):new wr(v);if(S.g!="")y&&(S.g=y+"."+S.g),Er(S,S.u);else{var B=c.location;S=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const G=new wr(null);S&&ci(G,S),y&&(G.g=y),B&&Er(G,B),v&&(G.h=v),S=G}return v=u.G,y=u.wa,v&&y&&at(S,v,y),at(S,"VER",u.ka),Ar(u,S),S}function jl(u,y,v){if(y&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=u.Aa&&!u.ma?new pt(new Gr({ab:v})):new pt(u.ma),y.Fa(u.L),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fl(){}n=Fl.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ao(){}ao.prototype.g=function(u,y){return new on(u,y)};function on(u,y){ye.call(this),this.g=new to(y),this.l=u,this.h=y&&y.messageUrlParams||null,u=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(u?u["X-WebChannel-Content-Type"]=y.messageContentType:u={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(u?u["X-WebChannel-Client-Profile"]=y.sa:u={"X-WebChannel-Client-Profile":y.sa}),this.g.U=u,(u=y&&y.Qb)&&!R(u)&&(this.g.u=u),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,u=this.h,u!==null&&y in u&&(u=this.h,y in u&&delete u[y])),this.j=new Ts(this)}E(on,ye),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){no(this.g)},on.prototype.o=function(u){var y=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=Kn(u),u=v);y.i.push(new Hc(y.Ya++,u)),y.I==3&&Yr(y)},on.prototype.N=function(){this.g.l=null,delete this.j,no(this.g),delete this.g,on.Z.N.call(this)};function Ul(u){Cn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var y=u.__sm__;if(y){e:{for(const v in y){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,y=y!==null&&u in y?y[u]:void 0),this.data=y}else this.data=u}E(Ul,Cn);function zl(){Pe.call(this),this.status=1}E(zl,Pe);function Ts(u){this.g=u}E(Ts,Fl),Ts.prototype.ra=function(){Ne(this.g,"a")},Ts.prototype.qa=function(u){Ne(this.g,new Ul(u))},Ts.prototype.pa=function(u){Ne(this.g,new zl)},Ts.prototype.oa=function(){Ne(this.g,"b")},ao.prototype.createWebChannel=ao.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,z_=function(){return new ao},U_=function(){return Tt()},F_=Ke,qd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ut.NO_ERROR=0,ut.TIMEOUT=8,ut.HTTP_ERROR=6,Gu=ut,Ge.COMPLETE="complete",j_=Ge,bt.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",ye.prototype.listen=ye.prototype.J,Qa=bt,pt.prototype.listenOnce=pt.prototype.K,pt.prototype.getLastError=pt.prototype.Ha,pt.prototype.getLastErrorCode=pt.prototype.ya,pt.prototype.getStatus=pt.prototype.ca,pt.prototype.getResponseJson=pt.prototype.La,pt.prototype.getResponseText=pt.prototype.la,pt.prototype.send=pt.prototype.ea,pt.prototype.setWithCredentials=pt.prototype.Fa,M_=pt}).apply(typeof Lu<"u"?Lu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea="12.9.0";function j1(n){ea=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new yf("@firebase/firestore");function xo(){return Ui.logLevel}function Ie(n,...e){if(Ui.logLevel<=Je.DEBUG){const t=e.map(xf);Ui.debug(`Firestore (${ea}): ${n}`,...t)}}function ds(n,...e){if(Ui.logLevel<=Je.ERROR){const t=e.map(xf);Ui.error(`Firestore (${ea}): ${n}`,...t)}}function zi(n,...e){if(Ui.logLevel<=Je.WARN){const t=e.map(xf);Ui.warn(`Firestore (${ea}): ${n}`,...t)}}function xf(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Le(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,B_(n,s,t)}function B_(n,e,t){let s=`FIRESTORE (${ea}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ds(s),new Error(s)}function ht(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||B_(e,o,s)}function He(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class we extends ps{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(_n.UNAUTHENTICATED)))}shutdown(){}}class U1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class z1{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ht(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Ks;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ks,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ks)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ht(typeof s.accessToken=="string",31837,{l:s}),new $_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ht(e===null||typeof e=="string",2055,{h:e}),new _n(e)}}class B1{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class $1{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new B1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(_n.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class wy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,fr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ht(this.o===void 0,3512);const s=l=>{l.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,Ie("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new wy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ht(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new wy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=H1(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Xe(n,e){return n<e?-1:n>e?1:0}function Gd(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Rd(o)===Rd(l)?Xe(o,l):Rd(o)?1:-1}return Xe(n.length,e.length)}const q1=55296,G1=57343;function Rd(n){const e=n.charCodeAt(0);return e>=q1&&e<=G1}function Bo(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey="__name__";class Lr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Le(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Le(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Lr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Lr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Lr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Xe(e.length,t.length)}static compareSegments(e,t){const s=Lr.isNumericId(e),o=Lr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Lr.extractNumericId(e).compare(Lr.extractNumericId(t)):Gd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Gs.fromString(e.substring(4,e.length-2))}}class gt extends Lr{construct(e,t,s){return new gt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new we(ee.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new gt(t)}static emptyPath(){return new gt([])}}const K1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Lr{construct(e,t,s){return new cn(e,t,s)}static isValidIdentifier(e){return K1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ey}static keyField(){return new cn([Ey])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new we(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new we(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new we(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(s+=f,o++):(l(),o++)}if(l(),c)throw new we(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(gt.fromString(e))}static fromName(e){return new be(gt.fromString(e).popFirst(5))}static empty(){return new be(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n,e,t){if(!t)throw new we(ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Q1(n,e,t,s){if(e===!0&&s===!0)throw new we(ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Ty(n){if(!be.isDocumentKey(n))throw new we(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Iy(n){if(be.isDocumentKey(n))throw new we(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function H_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Pc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Le(12329,{type:typeof n})}function jr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new we(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Pc(n);throw new we(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function Y1(n,e){if(e<=0)throw new we(ee.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(n,e){const t={typeString:n};return e&&(t.value=e),t}function Tl(n,e){if(!H_(n))throw new we(ee.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new we(ee.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=-62135596800,Cy=1e6;class Et{static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Cy);return new Et(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new we(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new we(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sy)throw new we(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new we(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cy}_compareTo(e){return this.seconds===e.seconds?Xe(this.nanoseconds,e.nanoseconds):Xe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tl(e,Et._jsonSchema))return new Et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Sy;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Et._jsonSchemaVersion="firestore/timestamp/1.0",Et._jsonSchema={type:$t("string",Et._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Et(0,0))}static max(){return new Be(new Et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl=-1;function J1(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Be.fromTimestamp(s===1e9?new Et(t+1,0):new Et(t,s));return new Ys(o,be.empty(),e)}function X1(n){return new Ys(n.readTime,n.key,cl)}class Ys{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ys(Be.min(),be.empty(),cl)}static max(){return new Ys(Be.max(),be.empty(),cl)}}function Z1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Xe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ta(n){if(n.code!==ee.FAILED_PRECONDITION||n.message!==ek)throw n;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,s)=>{t(e)}))}static reject(e){return new re(((t,s)=>{s(e)}))}static waitFor(e){return new re(((t,s)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=re.resolve(!1);for(const s of e)t=t.next((o=>o?re.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new re(((s,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const g=p;t(e[g]).next((_=>{c[g]=_,++f,f===l&&s(c)}),(_=>o(_)))}}))}static doWhile(e,t){return new re(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function nk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function na(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf=-1;function Nc(n){return n==null}function lc(n){return n===0&&1/n==-1/0}function rk(n){return typeof n=="number"&&Number.isInteger(n)&&!lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_="";function sk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ky(e)),e=ik(n.get(t),e);return ky(e)}function ik(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case q_:t+="";break;default:t+=l}}return t}function ky(n){return n+q_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ry(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ri(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function G_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new Rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new Rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}class Mu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??un.RED,this.left=o??un.EMPTY,this.right=l??un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new un(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return un.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Le(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1;un.EMPTY=new class{constructor(){this.size=0}get key(){throw Le(57766)}get value(){throw Le(16141)}get color(){throw Le(16727)}get left(){throw Le(29726)}get right(){throw Le(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.comparator=e,this.data=new Rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ay(this.data.getIterator())}getIteratorFrom(e){return new Ay(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Gt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Gt(this.comparator);return t.data=e,t}}class Ay{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new qn([])}unionWith(e){let t=new Gt(cn.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new K_("Invalid base64 string: "+l):l}})(e);return new hn(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Xe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const ok=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Js(n){if(ht(!!n,39018),typeof n=="string"){let e=0;const t=ok.exec(n);if(ht(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Mt(n.seconds),nanos:Mt(n.nanos)}}function Mt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Xs(n){return typeof n=="string"?hn.fromBase64String(n):hn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q_="server_timestamp",Y_="__type__",J_="__previous_value__",X_="__local_write_time__";function Df(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Y_])==null?void 0:s.stringValue)===Q_}function bc(n){const e=n.mapValue.fields[J_];return Df(e)?bc(e):e}function hl(n){const e=Js(n.mapValue.fields[X_].timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,t,s,o,l,c,f,p,g,_,E){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=g,this.isUsingEmulator=_,this.apiKey=E}}const uc="(default)";class dl{constructor(e,t){this.projectId=e,this.database=t||uc}static empty(){return new dl("","")}get isDefaultDatabase(){return this.database===uc}isEqual(e){return e instanceof dl&&e.projectId===this.projectId&&e.database===this.database}}function lk(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new we(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new dl(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="__type__",uk="__max__",ju={mapValue:{}},ew="__vector__",cc="value";function Zs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Df(n)?4:hk(n)?9007199254740991:ck(n)?10:11:Le(28295,{value:n})}function Wr(n,e){if(n===e)return!0;const t=Zs(n);if(t!==Zs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hl(n).isEqual(hl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Js(o.timestampValue),f=Js(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Xs(o.bytesValue).isEqual(Xs(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return Mt(o.geoPointValue.latitude)===Mt(l.geoPointValue.latitude)&&Mt(o.geoPointValue.longitude)===Mt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return Mt(o.integerValue)===Mt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=Mt(o.doubleValue),f=Mt(l.doubleValue);return c===f?lc(c)===lc(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return Bo(n.arrayValue.values||[],e.arrayValue.values||[],Wr);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Ry(c)!==Ry(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!Wr(c[p],f[p])))return!1;return!0})(n,e);default:return Le(52216,{left:n})}}function fl(n,e){return(n.values||[]).find((t=>Wr(t,e)))!==void 0}function $o(n,e){if(n===e)return 0;const t=Zs(n),s=Zs(e);if(t!==s)return Xe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Xe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=Mt(l.integerValue||l.doubleValue),p=Mt(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return Py(n.timestampValue,e.timestampValue);case 4:return Py(hl(n),hl(e));case 5:return Gd(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Xs(l),p=Xs(c);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),p=c.split("/");for(let g=0;g<f.length&&g<p.length;g++){const _=Xe(f[g],p[g]);if(_!==0)return _}return Xe(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Xe(Mt(l.latitude),Mt(c.latitude));return f!==0?f:Xe(Mt(l.longitude),Mt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return xy(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var I,P,F,U;const f=l.fields||{},p=c.fields||{},g=(I=f[cc])==null?void 0:I.arrayValue,_=(P=p[cc])==null?void 0:P.arrayValue,E=Xe(((F=g==null?void 0:g.values)==null?void 0:F.length)||0,((U=_==null?void 0:_.values)==null?void 0:U.length)||0);return E!==0?E:xy(g,_)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===ju.mapValue&&c===ju.mapValue)return 0;if(l===ju.mapValue)return 1;if(c===ju.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),g=c.fields||{},_=Object.keys(g);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const I=Gd(p[E],_[E]);if(I!==0)return I;const P=$o(f[p[E]],g[_[E]]);if(P!==0)return P}return Xe(p.length,_.length)})(n.mapValue,e.mapValue);default:throw Le(23264,{he:t})}}function Py(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Xe(n,e);const t=Js(n),s=Js(e),o=Xe(t.seconds,s.seconds);return o!==0?o:Xe(t.nanos,s.nanos)}function xy(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=$o(t[o],s[o]);if(l)return l}return Xe(t.length,s.length)}function Wo(n){return Kd(n)}function Kd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Js(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Xs(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Kd(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Kd(t.fields[c])}`;return o+"}"})(n.mapValue):Le(61005,{value:n})}function Ku(n){switch(Zs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bc(n);return e?16+Ku(e):16;case 5:return 2*n.stringValue.length;case 6:return Xs(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Ku(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return ri(s.fields,((l,c)=>{o+=l.length+Ku(c)})),o})(n.mapValue);default:throw Le(13486,{value:n})}}function Ny(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Qd(n){return!!n&&"integerValue"in n}function Vf(n){return!!n&&"arrayValue"in n}function by(n){return!!n&&"nullValue"in n}function Dy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qu(n){return!!n&&"mapValue"in n}function ck(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Z_])==null?void 0:s.stringValue)===ew}function nl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ri(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=nl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=nl(n.arrayValue.values[t]);return e}return{...n}}function hk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===uk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nl(t)}setAll(e){let t=cn.emptyPath(),s={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}c?s[f.lastSegment()]=nl(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Qu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ri(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Dn(nl(this.value))}}function tw(n){const e=[];return ri(n.fields,((t,s)=>{const o=new cn([t]);if(Qu(s)){const l=tw(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,t,s,o,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new wn(e,0,Be.min(),Be.min(),Be.min(),Dn.empty(),0)}static newFoundDocument(e,t,s,o){return new wn(e,1,t,Be.min(),s,o,0)}static newNoDocument(e,t){return new wn(e,2,t,Be.min(),Be.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new wn(e,3,t,Be.min(),Be.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t){this.position=e,this.inclusive=t}}function Vy(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=be.comparator(be.fromName(c.referenceValue),t.key):s=$o(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Oy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,t="asc"){this.field=e,this.dir=t}}function dk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{}class Bt extends nw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new pk(e,t,s):t==="array-contains"?new yk(e,s):t==="in"?new vk(e,s):t==="not-in"?new _k(e,s):t==="array-contains-any"?new wk(e,s):new Bt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new mk(e,s):new gk(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($o(t,this.value)):t!==null&&Zs(this.value)===Zs(t)&&this.matchesComparison($o(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yr extends nw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new yr(e,t)}matches(e){return rw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rw(n){return n.op==="and"}function sw(n){return fk(n)&&rw(n)}function fk(n){for(const e of n.filters)if(e instanceof yr)return!1;return!0}function Yd(n){if(n instanceof Bt)return n.field.canonicalString()+n.op.toString()+Wo(n.value);if(sw(n))return n.filters.map((e=>Yd(e))).join(",");{const e=n.filters.map((t=>Yd(t))).join(",");return`${n.op}(${e})`}}function iw(n,e){return n instanceof Bt?(function(s,o){return o instanceof Bt&&s.op===o.op&&s.field.isEqual(o.field)&&Wr(s.value,o.value)})(n,e):n instanceof yr?(function(s,o){return o instanceof yr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,f)=>l&&iw(c,o.filters[f])),!0):!1})(n,e):void Le(19439)}function ow(n){return n instanceof Bt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wo(t.value)}`})(n):n instanceof yr?(function(t){return t.op.toString()+" {"+t.getFilters().map(ow).join(" ,")+"}"})(n):"Filter"}class pk extends Bt{constructor(e,t,s){super(e,t,s),this.key=be.fromName(s.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class mk extends Bt{constructor(e,t){super(e,"in",t),this.keys=aw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class gk extends Bt{constructor(e,t){super(e,"not-in",t),this.keys=aw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function aw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>be.fromName(s.referenceValue)))}class yk extends Bt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vf(t)&&fl(t.arrayValue,this.value)}}class vk extends Bt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&fl(this.value.arrayValue,t)}}class _k extends Bt{constructor(e,t){super(e,"not-in",t)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fl(this.value.arrayValue,t)}}class wk extends Bt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>fl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e,t=null,s=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Ly(n,e=null,t=[],s=[],o=null,l=null,c=null){return new Ek(n,e,t,s,o,l,c)}function Of(n){const e=He(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Yd(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Nc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Wo(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Wo(s))).join(",")),e.Te=t}return e.Te}function Lf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!iw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Oy(n.startAt,e.startAt)&&Oy(n.endAt,e.endAt)}function Jd(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t=null,s=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Tk(n,e,t,s,o,l,c,f){return new ra(n,e,t,s,o,l,c,f)}function Dc(n){return new ra(n)}function My(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Ik(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function lw(n){return n.collectionGroup!==null}function rl(n){const e=He(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new Gt(cn.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new pl(l,s))})),t.has(cn.keyField().canonicalString())||e.Ie.push(new pl(cn.keyField(),s))}return e.Ie}function Fr(n){const e=He(n);return e.Ee||(e.Ee=Sk(e,rl(n))),e.Ee}function Sk(n,e){if(n.limitType==="F")return Ly(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new pl(o.field,l)}));const t=n.endAt?new hc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new hc(n.startAt.position,n.startAt.inclusive):null;return Ly(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Xd(n,e){const t=n.filters.concat([e]);return new ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ck(n,e){const t=n.explicitOrderBy.concat([e]);return new ra(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function dc(n,e,t){return new ra(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vc(n,e){return Lf(Fr(n),Fr(e))&&n.limitType===e.limitType}function uw(n){return`${Of(Fr(n))}|lt:${n.limitType}`}function No(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>ow(o))).join(", ")}]`),Nc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Wo(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Wo(o))).join(",")),`Target(${s})`})(Fr(n))}; limitType=${n.limitType})`}function Oc(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):be.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of rl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,f,p){const g=Vy(c,f,p);return c.inclusive?g<=0:g<0})(s.startAt,rl(s),o)||s.endAt&&!(function(c,f,p){const g=Vy(c,f,p);return c.inclusive?g>=0:g>0})(s.endAt,rl(s),o))})(n,e)}function kk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cw(n){return(e,t)=>{let s=!1;for(const o of rl(n)){const l=Rk(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function Rk(n,e,t){const s=n.field.isKeyField()?be.comparator(e.key,t.key):(function(l,c,f){const p=c.data.field(l),g=f.data.field(l);return p!==null&&g!==null?$o(p,g):Le(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Le(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ri(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return G_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new Rt(be.comparator);function fs(){return Ak}const hw=new Rt(be.comparator);function Ya(...n){let e=hw;for(const t of n)e=e.insert(t.key,t);return e}function dw(n){let e=hw;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Oi(){return sl()}function fw(){return sl()}function sl(){return new Hi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Pk=new Rt(be.comparator),xk=new Gt(be.comparator);function Ze(...n){let e=xk;for(const t of n)e=e.add(t);return e}const Nk=new Gt(Xe);function bk(){return Nk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function pw(n){return{integerValue:""+n}}function Dk(n,e){return rk(e)?pw(e):Mf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this._=void 0}}function Vk(n,e,t){return n instanceof fc?(function(o,l){const c={fields:{[Y_]:{stringValue:Q_},[X_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Df(l)&&(l=bc(l)),l&&(c.fields[J_]=l),{mapValue:c}})(t,e):n instanceof Ho?gw(n,e):n instanceof qo?yw(n,e):(function(o,l){const c=mw(o,l),f=jy(c)+jy(o.Ae);return Qd(c)&&Qd(o.Ae)?pw(f):Mf(o.serializer,f)})(n,e)}function Ok(n,e,t){return n instanceof Ho?gw(n,e):n instanceof qo?yw(n,e):t}function mw(n,e){return n instanceof pc?(function(s){return Qd(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class fc extends Lc{}class Ho extends Lc{constructor(e){super(),this.elements=e}}function gw(n,e){const t=vw(e);for(const s of n.elements)t.some((o=>Wr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class qo extends Lc{constructor(e){super(),this.elements=e}}function yw(n,e){let t=vw(e);for(const s of n.elements)t=t.filter((o=>!Wr(o,s)));return{arrayValue:{values:t}}}class pc extends Lc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function jy(n){return Mt(n.integerValue||n.doubleValue)}function vw(n){return Vf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e,t){this.field=e,this.transform=t}}function Lk(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Ho&&o instanceof Ho||s instanceof qo&&o instanceof qo?Bo(s.elements,o.elements,Wr):s instanceof pc&&o instanceof pc?Wr(s.Ae,o.Ae):s instanceof fc&&o instanceof fc})(n.transform,e.transform)}class Mk{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yu(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mc{}function ww(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Tw(n.key,Ur.none()):new Il(n.key,n.data,Ur.none());{const t=n.data,s=Dn.empty();let o=new Gt(cn.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new si(n.key,s,new qn(o.toArray()),Ur.none())}}function jk(n,e,t){n instanceof Il?(function(o,l,c){const f=o.value.clone(),p=Uy(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof si?(function(o,l,c){if(!Yu(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Uy(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(Ew(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function il(n,e,t,s){return n instanceof Il?(function(l,c,f,p){if(!Yu(l.precondition,c))return f;const g=l.value.clone(),_=zy(l.fieldTransforms,p,c);return g.setAll(_),c.convertToFoundDocument(c.version,g).setHasLocalMutations(),null})(n,e,t,s):n instanceof si?(function(l,c,f,p){if(!Yu(l.precondition,c))return f;const g=zy(l.fieldTransforms,p,c),_=c.data;return _.setAll(Ew(l)),_.setAll(g),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,f){return Yu(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function Fk(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=mw(s.transform,o||null);l!=null&&(t===null&&(t=Dn.empty()),t.set(s.field,l))}return t||null}function Fy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Bo(s,o,((l,c)=>Lk(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Il extends Mc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class si extends Mc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function Ew(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Uy(n,e,t){const s=new Map;ht(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);s.set(l.field,Ok(c,f,t[o]))}return s}function zy(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,Vk(l,c,e))}return s}class Tw extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uk extends Mc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&jk(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=il(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=il(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=fw();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=ww(c,f);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Be.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ze())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,((t,s)=>Fy(t,s)))&&Bo(this.baseMutations,e.baseMutations,((t,s)=>Fy(t,s)))}}class jf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){ht(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return Pk})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new jf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt,nt;function Wk(n){switch(n){case ee.OK:return Le(64938);case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Le(15467,{code:n})}}function Iw(n){if(n===void 0)return ds("GRPC error has no .code"),ee.UNKNOWN;switch(n){case zt.OK:return ee.OK;case zt.CANCELLED:return ee.CANCELLED;case zt.UNKNOWN:return ee.UNKNOWN;case zt.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case zt.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case zt.INTERNAL:return ee.INTERNAL;case zt.UNAVAILABLE:return ee.UNAVAILABLE;case zt.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case zt.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case zt.NOT_FOUND:return ee.NOT_FOUND;case zt.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case zt.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case zt.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case zt.ABORTED:return ee.ABORTED;case zt.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case zt.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case zt.DATA_LOSS:return ee.DATA_LOSS;default:return Le(39323,{code:n})}}(nt=zt||(zt={}))[nt.OK=0]="OK",nt[nt.CANCELLED=1]="CANCELLED",nt[nt.UNKNOWN=2]="UNKNOWN",nt[nt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nt[nt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nt[nt.NOT_FOUND=5]="NOT_FOUND",nt[nt.ALREADY_EXISTS=6]="ALREADY_EXISTS",nt[nt.PERMISSION_DENIED=7]="PERMISSION_DENIED",nt[nt.UNAUTHENTICATED=16]="UNAUTHENTICATED",nt[nt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nt[nt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nt[nt.ABORTED=10]="ABORTED",nt[nt.OUT_OF_RANGE=11]="OUT_OF_RANGE",nt[nt.UNIMPLEMENTED=12]="UNIMPLEMENTED",nt[nt.INTERNAL=13]="INTERNAL",nt[nt.UNAVAILABLE=14]="UNAVAILABLE",nt[nt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new Gs([4294967295,4294967295],0);function By(n){const e=Hk().encode(n),t=new L_;return t.update(e),new Uint8Array(t.digest())}function $y(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Gs([t,s],0),new Gs([o,l],0)]}class Ff{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ja(`Invalid padding: ${t}`);if(s<0)throw new Ja(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Gs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Gs.fromNumber(s)));return o.compare(qk)===1&&(o=new Gs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=By(e),[s,o]=$y(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Ff(l,o,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=By(e),[s,o]=$y(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.be(c)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Sl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new jc(Be.min(),o,new Rt(Xe),fs(),Ze())}}class Sl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Sl(s,t,Ze(),Ze(),Ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Sw{constructor(e,t){this.targetId=e,this.Ce=t}}class Cw{constructor(e,t,s=hn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Wy{constructor(){this.ve=0,this.Fe=Hy(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ze(),t=Ze(),s=Ze();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Le(38017,{changeType:l})}})),new Sl(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=Hy()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ht(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Gk{constructor(e){this.Ge=e,this.ze=new Map,this.je=fs(),this.He=Fu(),this.Je=Fu(),this.Ze=new Rt(Xe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Le(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Jd(l))if(s===0){const c=new be(l.path);this.et(t,c,wn.newNoDocument(c,Be.min()))}else ht(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(t);const g=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,g)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=Xs(s).toUint8Array()}catch(p){if(p instanceof K_)return zi("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Ff(c,o,l)}catch(p){return zi(p instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Jd(f.target)){const p=new be(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,wn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let s=Ze();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((p=>{const g=this.ot(p);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new jc(e,t,this.Ze,this.je,s);return this.je=fs(),this.He=Fu(),this.Je=Fu(),this.Ze=new Rt(Xe),o}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new Wy,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new Gt(Xe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new Gt(Xe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Ie("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Wy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Fu(){return new Rt(be.comparator)}function Hy(){return new Rt(be.comparator)}const Kk={asc:"ASCENDING",desc:"DESCENDING"},Qk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Yk={and:"AND",or:"OR"};class Jk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Zd(n,e){return n.useProto3Json||Nc(e)?e:{value:e}}function mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Xk(n,e){return mc(n,e.toTimestamp())}function zr(n){return ht(!!n,49232),Be.fromTimestamp((function(t){const s=Js(t);return new Et(s.seconds,s.nanos)})(n))}function Uf(n,e){return ef(n,e).canonicalString()}function ef(n,e){const t=(function(o){return new gt(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Rw(n){const e=gt.fromString(n);return ht(bw(e),10190,{key:e.toString()}),e}function tf(n,e){return Uf(n.databaseId,e.path)}function Ad(n,e){const t=Rw(e);if(t.get(1)!==n.databaseId.projectId)throw new we(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new we(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(Pw(t))}function Aw(n,e){return Uf(n.databaseId,e)}function Zk(n){const e=Rw(n);return e.length===4?gt.emptyPath():Pw(e)}function nf(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Pw(n){return ht(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function qy(n,e,t){return{name:tf(n,e),fields:t.value.mapValue.fields}}function eR(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:Le(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(g,_){return g.useProto3Json?(ht(_===void 0||typeof _=="string",58123),hn.fromBase64String(_||"")):(ht(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),hn.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(g){const _=g.code===void 0?ee.UNKNOWN:Iw(g.code);return new we(_,g.message||"")})(c);t=new Cw(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Ad(n,s.document.name),l=zr(s.document.updateTime),c=s.document.createTime?zr(s.document.createTime):Be.min(),f=new Dn({mapValue:{fields:s.document.fields}}),p=wn.newFoundDocument(o,l,c,f),g=s.targetIds||[],_=s.removedTargetIds||[];t=new Ju(g,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Ad(n,s.document),l=s.readTime?zr(s.readTime):Be.min(),c=wn.newNoDocument(o,l),f=s.removedTargetIds||[];t=new Ju([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Ad(n,s.document),l=s.removedTargetIds||[];t=new Ju([],l,o,null)}else{if(!("filter"in e))return Le(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new $k(o,l),f=s.targetId;t=new Sw(f,c)}}return t}function tR(n,e){let t;if(e instanceof Il)t={update:qy(n,e.key,e.value)};else if(e instanceof Tw)t={delete:tf(n,e.key)};else if(e instanceof si)t={update:qy(n,e.key,e.data),updateMask:cR(e.fieldMask)};else{if(!(e instanceof Uk))return Le(16599,{dt:e.type});t={verify:tf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof fc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Ho)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof qo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Le(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Xk(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Le(27497)})(n,e.precondition)),t}function nR(n,e){return n&&n.length>0?(ht(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?zr(o.updateTime):zr(l);return c.isEqual(Be.min())&&(c=zr(l)),new Mk(c,o.transformResults||[])})(t,e)))):[]}function rR(n,e){return{documents:[Aw(n,e.path)]}}function sR(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Aw(n,o);const l=(function(g){if(g.length!==0)return Nw(yr.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(g){if(g.length!==0)return g.map((_=>(function(I){return{field:bo(I.field),direction:aR(I.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Zd(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:t,parent:o}}function iR(n){let e=Zk(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){ht(s===1,65062);const _=t.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(E){const I=xw(E);return I instanceof yr&&sw(I)?I.getFilters():[I]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((I=>(function(F){return new pl(Do(F.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(F.direction))})(I)))})(t.orderBy));let f=null;t.limit&&(f=(function(E){let I;return I=typeof E=="object"?E.value:E,Nc(I)?null:I})(t.limit));let p=null;t.startAt&&(p=(function(E){const I=!!E.before,P=E.values||[];return new hc(P,I)})(t.startAt));let g=null;return t.endAt&&(g=(function(E){const I=!E.before,P=E.values||[];return new hc(P,I)})(t.endAt)),Tk(e,o,c,l,f,"F",p,g)}function oR(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Le(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function xw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Do(t.unaryFilter.field);return Bt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Do(t.unaryFilter.field);return Bt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Do(t.unaryFilter.field);return Bt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Do(t.unaryFilter.field);return Bt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Le(61313);default:return Le(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Bt.create(Do(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Le(58110);default:return Le(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return yr.create(t.compositeFilter.filters.map((s=>xw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Le(1026)}})(t.compositeFilter.op))})(n):Le(30097,{filter:n})}function aR(n){return Kk[n]}function lR(n){return Qk[n]}function uR(n){return Yk[n]}function bo(n){return{fieldPath:n.canonicalString()}}function Do(n){return cn.fromServerFormat(n.fieldPath)}function Nw(n){return n instanceof Bt?(function(t){if(t.op==="=="){if(Dy(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NAN"}};if(by(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Dy(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NAN"}};if(by(t.value))return{unaryFilter:{field:bo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bo(t.field),op:lR(t.op),value:t.value}}})(n):n instanceof yr?(function(t){const s=t.getFilters().map((o=>Nw(o)));return s.length===1?s[0]:{compositeFilter:{op:uR(t.op),filters:s}}})(n):Le(54877,{filter:n})}function cR(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function bw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function Dw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t,s,o,l=Be.min(),c=Be.min(),f=hn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.yt=e}}function dR(n){const e=iR({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(){this.Sn=new pR}addToCollectionParentIndex(e,t){return this.Sn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Ys.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Ys.min())}updateCollectionGroup(e,t,s){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class pR{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Gt(gt.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Gt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Vw=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(Vw,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Go(0)}static ar(){return new Go(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ky="LruGarbageCollector",mR=1048576;function Qy([n,e],[t,s]){const o=Xe(n,t);return o===0?Xe(e,s):o}class gR{constructor(e){this.Pr=e,this.buffer=new Gt(Qy),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Qy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class yR{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Ie(Ky,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){na(t)?Ie(Ky,"Ignoring IndexedDB error during garbage collection: ",t):await ta(t)}await this.Ar(3e5)}))}}class vR{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(xc.ce);const s=new gR(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Gy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Gy):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,o,l,c,f,p,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,f=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(g=Date.now(),xo()<=Je.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(g-p)+`ms
Total Duration: ${g-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function _R(n,e){return new vR(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(){this.changes=new Hi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,wn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?re.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&il(s.mutation,o,qn.empty(),Et.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Ze()){const o=Oi();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=Ya();return l.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Oi();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Ze())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,o){let l=fs();const c=sl(),f=(function(){return sl()})();return t.forEach(((p,g)=>{const _=s.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof si)?l=l.insert(g.key,g):_!==void 0?(c.set(g.key,_.mutation.getFieldMask()),il(_.mutation,g,_.mutation.getFieldMask(),Et.now())):c.set(g.key,qn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((g,_)=>c.set(g,_))),t.forEach(((g,_)=>f.set(g,new ER(_,c.get(g)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=sl();let o=new Rt(((c,f)=>c-f)),l=Ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const g=t.get(p);if(g===null)return;let _=s.get(p)||qn.empty();_=f.applyToLocalView(g,_),s.set(p,_);const E=(o.get(f.batchId)||Ze()).add(p);o=o.insert(f.batchId,E)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),g=p.key,_=p.value,E=fw();_.forEach((I=>{if(!l.has(I)){const P=ww(t.get(I),s.get(I));P!==null&&E.set(I,P),l=l.add(I)}})),c.push(this.documentOverlayCache.saveOverlays(e,g,E))}return re.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return Ik(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):lw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):re.resolve(Oi());let f=cl,p=l;return c.next((g=>re.forEach(g,((_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((I=>{p=p.insert(_,I)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,p,g,Ze()))).next((_=>({batchId:f,changes:dw(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((s=>{let o=Ya();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=Ya();return this.indexManager.getCollectionParents(e,l).next((f=>re.forEach(f,(p=>{const g=(function(E,I){return new ra(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((_=>{_.forEach(((E,I)=>{c=c.insert(E,I)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,g)=>{const _=g.getKey();c.get(_)===null&&(c=c.insert(_,wn.newInvalidDocument(_)))}));let f=Ya();return c.forEach(((p,g)=>{const _=l.get(p);_!==void 0&&il(_.mutation,g,qn.empty(),Et.now()),Oc(t,g)&&(f=f.insert(p,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return re.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:zr(o.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:dR(o.bundledQuery),readTime:zr(o.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(){this.overlays=new Rt(be.comparator),this.Lr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Oi();return re.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.bt(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),re.resolve()}getOverlaysForCollection(e,t,s){const o=Oi(),l=t.length+1,c=new be(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,g=p.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return re.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new Rt(((g,_)=>g-_));const c=this.overlays.getIterator();for(;c.hasNext();){const g=c.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>s){let _=l.get(g.largestBatchId);_===null&&(_=Oi(),l=l.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const f=Oi(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((g,_)=>f.set(g,_))),!(f.size()>=o)););return re.resolve(f)}bt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new Bk(t,s));let l=this.Lr.get(t);l===void 0&&(l=Ze(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(){this.kr=new Gt(Xt.Kr),this.qr=new Gt(Xt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Xt(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Xt(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new be(new gt([])),s=new Xt(t,e),o=new Xt(t,e+1),l=[];return this.qr.forEachInRange([s,o],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new be(new gt([])),s=new Xt(t,e),o=new Xt(t,e+1);let l=Ze();return this.qr.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Xt(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Xt{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return be.comparator(e.key,t.key)||Xe(e.Hr,t.Hr)}static Ur(e,t){return Xe(e.Hr,t.Hr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new Gt(Xt.Kr)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new zk(l,t,s,o);this.mutationQueue.push(c);for(const f of o)this.Jr=this.Jr.add(new Xt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return re.resolve(c)}lookupMutationBatch(e,t){return re.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?bf:this.Yn-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Xt(t,0),o=new Xt(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,o],(c=>{const f=this.Zr(c.Hr);l.push(f)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Gt(Xe);return t.forEach((o=>{const l=new Xt(o,0),c=new Xt(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{s=s.add(f.Hr)}))})),re.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;be.isDocumentKey(l)||(l=l.child(""));const c=new Xt(new be(l),0);let f=new Gt(Xe);return this.Jr.forEachWhile((p=>{const g=p.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(f=f.add(p.Hr)),!0)}),c),re.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){ht(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return re.forEach(t.mutations,(o=>{const l=new Xt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Xt(t,0),o=this.Jr.firstAfterOrEqual(s);return re.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.ti=e,this.docs=(function(){return new Rt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return re.resolve(s?s.document.mutableCopy():wn.newInvalidDocument(t))}getEntries(e,t){let s=fs();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():wn.newInvalidDocument(o))})),re.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=fs();const c=t.path,f=new be(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:g,value:{document:_}}=p.getNext();if(!c.isPrefixOf(g.path))break;g.path.length>c.length+1||Z1(X1(_),s)<=0||(o.has(_.key)||Oc(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Le(9500)}ni(e,t){return re.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new AR(this)}getSize(e){return re.resolve(this.size)}}class AR extends wR{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),re.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e){this.persistence=e,this.ri=new Hi((t=>Of(t)),Lf),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.ii=0,this.si=new zf,this.targetCount=0,this.oi=Go._r()}forEachTarget(e,t){return this.ri.forEach(((s,o)=>t(o))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),re.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new Go(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.lr(t),re.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),re.waitFor(l).next((()=>o))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return re.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),re.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return re.resolve(s)}containsKey(e,t){return re.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(e,t){this._i={},this.overlays={},this.ai=new xc(0),this.ui=!1,this.ui=!0,this.ci=new CR,this.referenceDelegate=e(this),this.li=new PR(this),this.indexManager=new fR,this.remoteDocumentCache=(function(o){return new RR(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new hR(t),this.Pi=new IR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new kR(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){Ie("MemoryPersistence","Starting transaction:",e);const o=new xR(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return re.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class xR extends tk{constructor(e){super(),this.currentSequenceNumber=e}}class Bf{constructor(e){this.persistence=e,this.Ri=new zf,this.Ai=null}static Vi(e){return new Bf(e)}get di(){if(this.Ai)return this.Ai;throw Le(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),re.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.di,(s=>{const o=be.fromPath(s);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Be.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class gc{constructor(e,t){this.persistence=e,this.fi=new Hi((s=>sk(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=_R(this,t)}static Vi(e,t){return new gc(e,t)}Ti(){}Ii(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return re.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((l=>l?re.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Be.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),re.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ku(e.data.value)),t}wr(e,t,s){return re.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return re.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $f{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=o}static Es(e,t){let s=Ze(),o=Ze();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new $f(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return yI()?8:nk(En())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new NR;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,s,o){return s.documentReadCount<this.Vs?(xo()<=Je.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",No(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),re.resolve()):(xo()<=Je.DEBUG&&Ie("QueryEngine","Query:",No(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(xo()<=Je.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",No(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fr(t))):re.resolve())}gs(e,t){if(My(t))return re.resolve(null);let s=Fr(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=dc(t,null,"F"),s=Fr(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Ze(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const g=this.bs(t,f);return this.Ss(t,g,c,p.readTime)?this.gs(e,dc(t,null,"F")):this.Ds(e,g,t,p)}))))})))))}ps(e,t,s,o){return My(t)||o.isEqual(Be.min())?re.resolve(null):this.fs.getDocuments(e,s).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,s,o)?re.resolve(null):(xo()<=Je.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),No(t)),this.Ds(e,c,t,J1(o,cl)).next((f=>f)))}))}bs(e,t){let s=new Gt(cw(e));return t.forEach(((o,l)=>{Oc(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,s){return xo()<=Je.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",No(t)),this.fs.getDocumentsMatchingQuery(e,t,Ys.min(),s)}Ds(e,t,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="LocalStore",DR=3e8;class VR{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new Rt(Xe),this.Fs=new Hi((l=>Of(l)),Lf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new TR(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function OR(n,e,t,s){return new VR(n,e,t,s)}async function Lw(n,e){const t=He(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let p=Ze();for(const g of o){c.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}for(const g of l){f.push(g.batchId);for(const _ of g.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(s,p).next((g=>({Ns:g,removedBatchIds:c,addedBatchIds:f})))}))}))}function LR(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,p,g,_){const E=g.batch,I=E.keys();let P=re.resolve();return I.forEach((F=>{P=P.next((()=>_.getEntry(p,F))).next((U=>{const L=g.docVersions.get(F);ht(L!==null,48541),U.version.compareTo(L)<0&&(E.applyToRemoteDocument(U,g),U.isValidDocument()&&(U.setReadTime(g.commitVersion),_.addEntry(U)))}))})),P.next((()=>f.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=Ze();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(p=p.add(f.batch.mutations[g].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Mw(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function MR(n,e){const t=He(n),s=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const f=[];e.targetChanges.forEach(((_,E)=>{const I=o.get(E);if(!I)return;f.push(t.li.removeMatchingKeys(l,_.removedDocuments,E).next((()=>t.li.addMatchingKeys(l,_.addedDocuments,E))));let P=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?P=P.withResumeToken(hn.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):_.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(_.resumeToken,s)),o=o.insert(E,P),(function(U,L,q){return U.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=DR?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(I,P,_)&&f.push(t.li.updateTargetData(l,P))}));let p=fs(),g=Ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(jR(l,c,e.documentUpdates).next((_=>{p=_.Bs,g=_.Ls}))),!s.isEqual(Be.min())){const _=t.li.getLastRemoteSnapshotVersion(l).next((E=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(_)}return re.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,g))).next((()=>p))})).then((l=>(t.vs=o,l)))}function jR(n,e,t){let s=Ze(),o=Ze();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=fs();return t.forEach(((f,p)=>{const g=l.get(f);p.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Be.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!g.isValidDocument()||p.version.compareTo(g.version)>0||p.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):Ie(Wf,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",p.version)})),{Bs:c,Ls:o}}))}function FR(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=bf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function UR(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.li.getTargetData(s,e).next((l=>l?(o=l,re.resolve(o)):t.li.allocateTargetId(s).next((c=>(o=new Bs(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function rf(n,e,t){const s=He(n),o=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!na(c))throw c;Ie(Wf,`Failed to update sequence numbers for target ${e}: ${c}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function Yy(n,e,t){const s=He(n);let o=Be.min(),l=Ze();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,g,_){const E=He(p),I=E.Fs.get(_);return I!==void 0?re.resolve(E.vs.get(I)):E.li.getTargetData(g,_)})(s,c,Fr(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(c,f.targetId).next((p=>{l=p}))})).next((()=>s.Cs.getDocumentsMatchingQuery(c,e,t?o:Be.min(),t?l:Ze()))).next((f=>(zR(s,kk(e),f),{documents:f,ks:l})))))}function zR(n,e,t){let s=n.Ms.get(e)||Be.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Ms.set(e,s)}class Jy{constructor(){this.activeTargetIds=bk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BR{constructor(){this.vo=new Jy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Jy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="ConnectivityMonitor";class Zy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Ie(Xy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Ie(Xy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu=null;function sf(){return Uu===null?Uu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uu++,"0x"+Uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd="RestConnection",WR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class HR{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===uc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const c=sf(),f=this.Qo(e,t.toUriEncodedString());Ie(Pd,`Sending RPC '${e}' ${c}:`,f,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,o,l);const{host:g}=new URL(f),_=Jo(g);return this.zo(e,f,p,s,_).then((E=>(Ie(Pd,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw zi(Pd,`RPC '${e}' ${c} failed with error: `,E,"url: ",f,"request:",s),E}))}jo(e,t,s,o,l,c){return this.Wo(e,t,s,o,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ea})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const s=WR[e];let o=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection",Ga=(n,e,t)=>{n.listen(e,(s=>{try{t(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Mo extends HR{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Mo.c_){const e=U_();Ga(e,F_.STAT_EVENT,(t=>{t.stat===qd.PROXY?Ie(vn,"STAT_EVENT: detected buffering proxy"):t.stat===qd.NOPROXY&&Ie(vn,"STAT_EVENT: detected no buffering proxy")})),Mo.c_=!0}}zo(e,t,s,o,l){const c=sf();return new Promise(((f,p)=>{const g=new M_;g.setWithCredentials(!0),g.listenOnce(j_.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Gu.NO_ERROR:const E=g.getResponseJson();Ie(vn,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),f(E);break;case Gu.TIMEOUT:Ie(vn,`RPC '${e}' ${c} timed out`),p(new we(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const I=g.getStatus();if(Ie(vn,`RPC '${e}' ${c} failed with status:`,I,"response text:",g.getResponseText()),I>0){let P=g.getResponseJson();Array.isArray(P)&&(P=P[0]);const F=P==null?void 0:P.error;if(F&&F.status&&F.message){const U=(function(q){const X=q.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(X)>=0?X:ee.UNKNOWN})(F.status);p(new we(U,F.message))}else p(new we(ee.UNKNOWN,"Server responded with status "+g.getStatus()))}else p(new we(ee.UNAVAILABLE,"Connection failed."));break;default:Le(9055,{l_:e,streamId:c,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{Ie(vn,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(o);Ie(vn,`RPC '${e}' ${c} sending request:`,o),g.send(t,"POST",_,s,15)}))}T_(e,t,s){const o=sf(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const g=l.join("");Ie(vn,`Creating RPC '${e}' stream ${o}: ${g}`,f);const _=c.createWebChannel(g,f);this.I_(_);let E=!1,I=!1;const P=new qR({Ho:F=>{I?Ie(vn,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(E||(Ie(vn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),E=!0),Ie(vn,`RPC '${e}' stream ${o} sending:`,F),_.send(F))},Jo:()=>_.close()});return Ga(_,Qa.EventType.OPEN,(()=>{I||(Ie(vn,`RPC '${e}' stream ${o} transport opened.`),P.i_())})),Ga(_,Qa.EventType.CLOSE,(()=>{I||(I=!0,Ie(vn,`RPC '${e}' stream ${o} transport closed`),P.o_(),this.E_(_))})),Ga(_,Qa.EventType.ERROR,(F=>{I||(I=!0,zi(vn,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),P.o_(new we(ee.UNAVAILABLE,"The operation could not be completed")))})),Ga(_,Qa.EventType.MESSAGE,(F=>{var U;if(!I){const L=F.data[0];ht(!!L,16349);const q=L,X=(q==null?void 0:q.error)||((U=q[0])==null?void 0:U.error);if(X){Ie(vn,`RPC '${e}' stream ${o} received error:`,X);const te=X.status;let le=(function(x){const C=zt[x];if(C!==void 0)return Iw(C)})(te),ne=X.message;te==="NOT_FOUND"&&ne.includes("database")&&ne.includes("does not exist")&&ne.includes(this.databaseId.database)&&zi(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),le===void 0&&(le=ee.INTERNAL,ne="Unknown error status: "+te+" with message "+X.message),I=!0,P.o_(new we(le,ne)),_.close()}else Ie(vn,`RPC '${e}' stream ${o} received:`,L),P.__(L)}})),Mo.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return z_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GR(n){return new Mo(n)}function xd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(n){return new Jk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mo.c_=!1;class jw{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&Ie("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="PersistentStream";class Fw{constructor(e,t,s,o,l,c,f,p){this.Ci=e,this.b_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ee.RESOURCE_EXHAUSTED?(ds(t.toString()),ds("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new we(ee.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Ie(ev,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(Ie(ev,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class KR extends Fw{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=eR(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Be.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Be.min():c.readTime?zr(c.readTime):Be.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=nf(this.serializer),t.addTarget=(function(l,c){let f;const p=c.target;if(f=Jd(p)?{documents:rR(l,p)}:{query:sR(l,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=kw(l,c.resumeToken);const g=Zd(l,c.expectedCount);g!==null&&(f.expectedCount=g)}else if(c.snapshotVersion.compareTo(Be.min())>0){f.readTime=mc(l,c.snapshotVersion.toTimestamp());const g=Zd(l,c.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const s=oR(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=nf(this.serializer),t.removeTarget=e,this.K_(t)}}class QR extends Fw{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return ht(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ht(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ht(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=nR(e.writeResults,e.commitTime),s=zr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=nf(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>tR(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{}class JR extends YR{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new we(ee.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,ef(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new we(ee.UNKNOWN,l.toString())}))}jo(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,ef(t,s),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new we(ee.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function XR(n,e,t,s){return new JR(n,e,t,s)}class ZR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ds(t),this.aa=!1):Ie("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi="RemoteStore";class eA{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{s.enqueueAndForget((async()=>{qi(this)&&(Ie(Bi,"Restarting streams for network reachability change."),await(async function(p){const g=He(p);g.Ea.add(4),await Cl(g),g.Va.set("Unknown"),g.Ea.delete(4),await Uc(g)})(this))}))})),this.Va=new ZR(s,o)}}async function Uc(n){if(qi(n))for(const e of n.Ra)await e(!0)}async function Cl(n){for(const e of n.Ra)await e(!1)}function Uw(n,e){const t=He(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Kf(t)?Gf(t):sa(t).O_()&&qf(t,e))}function Hf(n,e){const t=He(n),s=sa(t);t.Ia.delete(e),s.O_()&&zw(t,e),t.Ia.size===0&&(s.O_()?s.L_():qi(t)&&t.Va.set("Unknown"))}function qf(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}sa(n).Z_(e)}function zw(n,e){n.da.$e(e),sa(n).X_(e)}function Gf(n){n.da=new Gk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),sa(n).start(),n.Va.ua()}function Kf(n){return qi(n)&&!sa(n).x_()&&n.Ia.size>0}function qi(n){return He(n).Ea.size===0}function Bw(n){n.da=void 0}async function tA(n){n.Va.set("Online")}async function nA(n){n.Ia.forEach(((e,t)=>{qf(n,e)}))}async function rA(n,e){Bw(n),Kf(n)?(n.Va.ha(e),Gf(n)):n.Va.set("Unknown")}async function sA(n,e,t){if(n.Va.set("Online"),e instanceof Cw&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ia.delete(f),o.da.removeTarget(f))})(n,e)}catch(s){Ie(Bi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yc(n,s)}else if(e instanceof Ju?n.da.Xe(e):e instanceof Sw?n.da.st(e):n.da.tt(e),!t.isEqual(Be.min()))try{const s=await Mw(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((p,g)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.Ia.get(g);_&&l.Ia.set(g,_.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,g)=>{const _=l.Ia.get(p);if(!_)return;l.Ia.set(p,_.withResumeToken(hn.EMPTY_BYTE_STRING,_.snapshotVersion)),zw(l,p);const E=new Bs(_.target,p,g,_.sequenceNumber);qf(l,E)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){Ie(Bi,"Failed to raise snapshot:",s),await yc(n,s)}}async function yc(n,e,t){if(!na(e))throw e;n.Ea.add(1),await Cl(n),n.Va.set("Offline"),t||(t=()=>Mw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Ie(Bi,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Uc(n)}))}function $w(n,e){return e().catch((t=>yc(n,t,e)))}async function zc(n){const e=He(n),t=ei(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bf;for(;iA(e);)try{const o=await FR(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,oA(e,o)}catch(o){await yc(e,o)}Ww(e)&&Hw(e)}function iA(n){return qi(n)&&n.Ta.length<10}function oA(n,e){n.Ta.push(e);const t=ei(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Ww(n){return qi(n)&&!ei(n).x_()&&n.Ta.length>0}function Hw(n){ei(n).start()}async function aA(n){ei(n).ra()}async function lA(n){const e=ei(n);for(const t of n.Ta)e.ea(t.mutations)}async function uA(n,e,t){const s=n.Ta.shift(),o=jf.from(s,e,t);await $w(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await zc(n)}async function cA(n,e){e&&ei(n).Y_&&await(async function(s,o){if((function(c){return Wk(c)&&c!==ee.ABORTED})(o.code)){const l=s.Ta.shift();ei(s).B_(),await $w(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await zc(s)}})(n,e),Ww(n)&&Hw(n)}async function tv(n,e){const t=He(n);t.asyncQueue.verifyOperationInProgress(),Ie(Bi,"RemoteStore received new credentials");const s=qi(t);t.Ea.add(3),await Cl(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Uc(t)}async function hA(n,e){const t=He(n);e?(t.Ea.delete(2),await Uc(t)):e||(t.Ea.add(2),await Cl(t),t.Va.set("Unknown"))}function sa(n){return n.ma||(n.ma=(function(t,s,o){const l=He(t);return l.sa(),new KR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:tA.bind(null,n),Yo:nA.bind(null,n),t_:rA.bind(null,n),J_:sA.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Kf(n)?Gf(n):n.Va.set("Unknown")):(await n.ma.stop(),Bw(n))}))),n.ma}function ei(n){return n.fa||(n.fa=(function(t,s,o){const l=He(t);return l.sa(),new QR(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:aA.bind(null,n),t_:cA.bind(null,n),ta:lA.bind(null,n),na:uA.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await zc(n)):(await n.fa.stop(),n.Ta.length>0&&(Ie(Bi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,f=new Qf(e,t,c,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new we(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yf(n,e){if(ds("AsyncQueue",`${e}: ${n}`),na(n))return new we(ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{static emptySet(e){return new jo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||be.comparator(t.key,s.key):(t,s)=>be.comparator(t.key,s.key),this.keyedMap=Ya(),this.sortedSet=new Rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof jo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new jo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.ga=new Rt(be.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Le(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Ko{constructor(e,t,s,o,l,c,f,p,g){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=g}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Ko(e,t,jo.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class fA{constructor(){this.queries=rv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=He(t),l=o.queries;o.queries=rv(),l.forEach(((c,f)=>{for(const p of f.ba)p.onError(s)}))})(this,new we(ee.ABORTED,"Firestore shutting down"))}}function rv(){return new Hi((n=>uw(n)),Vc)}async function qw(n,e){const t=He(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(s=2):(l=new dA,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=Yf(c,`Initialization of query '${No(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Jf(t)}async function Gw(n,e){const t=He(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function pA(n,e){const t=He(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(o)&&(s=!0);c.wa=o}}s&&Jf(t)}function mA(n,e,t){const s=He(n),o=s.queries.get(e);if(o)for(const l of o.ba)l.onError(t);s.queries.delete(e)}function Jf(n){n.Ca.forEach((e=>{e.next()}))}var of,sv;(sv=of||(of={})).Ma="default",sv.Cache="cache";class Kw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ko(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ko.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==of.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.key=e}}class Yw{constructor(e){this.key=e}}class gA{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Ze(),this.mutatedKeys=Ze(),this.eu=cw(e),this.tu=new jo(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new nv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,E)=>{const I=o.get(_),P=Oc(this.query,E)?E:null,F=!!I&&this.mutatedKeys.has(I.key),U=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let L=!1;I&&P?I.data.isEqual(P.data)?F!==U&&(s.track({type:3,doc:P}),L=!0):this.su(I,P)||(s.track({type:2,doc:P}),L=!0,(p&&this.eu(P,p)>0||g&&this.eu(P,g)<0)&&(f=!0)):!I&&P?(s.track({type:0,doc:P}),L=!0):I&&!P&&(s.track({type:1,doc:I}),L=!0,(p||g)&&(f=!0)),L&&(P?(c=c.add(P),l=U?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{tu:c,iu:s,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,E)=>(function(P,F){const U=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Le(20277,{Vt:L})}};return U(P)-U(F)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],p=this.Ya.size===0&&this.current&&!o?1:0,g=p!==this.Xa;return this.Xa=p,c.length!==0||g?{snapshot:new Ko(this.query,e.tu,l,c,e.mutatedKeys,p===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new Yw(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new Qw(s))})),t}cu(e){this.Za=e.ks,this.Ya=Ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ko.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Xf="SyncEngine";class yA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class vA{constructor(e){this.key=e,this.hu=!1}}class _A{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Hi((f=>uw(f)),Vc),this.Iu=new Map,this.Eu=new Set,this.Ru=new Rt(be.comparator),this.Au=new Map,this.Vu=new zf,this.du={},this.mu=new Map,this.fu=Go.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function wA(n,e,t=!0){const s=nE(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Jw(s,e,t,!0),o}async function EA(n,e){const t=nE(n);await Jw(t,e,!0,!1)}async function Jw(n,e,t,s){const o=await UR(n.localStore,Fr(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await TA(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&Uw(n.remoteStore,o),f}async function TA(n,e,t,s,o){n.pu=(E,I,P)=>(async function(U,L,q,X){let te=L.view.ru(q);te.Ss&&(te=await Yy(U.localStore,L.query,!1).then((({documents:x})=>L.view.ru(x,te))));const le=X&&X.targetChanges.get(L.targetId),ne=X&&X.targetMismatches.get(L.targetId)!=null,ie=L.view.applyChanges(te,U.isPrimaryClient,le,ne);return ov(U,L.targetId,ie.au),ie.snapshot})(n,E,I,P);const l=await Yy(n.localStore,e,!0),c=new gA(e,l.ks),f=c.ru(l.documents),p=Sl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),g=c.applyChanges(f,n.isPrimaryClient,p);ov(n,t,g.au);const _=new yA(e,t,c);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),g.snapshot}async function IA(n,e,t){const s=He(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!Vc(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await rf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Hf(s.remoteStore,o.targetId),af(s,o.targetId)})).catch(ta)):(af(s,o.targetId),await rf(s.localStore,o.targetId,!0))}async function SA(n,e){const t=He(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Hf(t.remoteStore,s.targetId))}async function CA(n,e,t){const s=bA(n);try{const o=await(function(c,f){const p=He(c),g=Et.now(),_=f.reduce(((P,F)=>P.add(F.key)),Ze());let E,I;return p.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let F=fs(),U=Ze();return p.xs.getEntries(P,_).next((L=>{F=L,F.forEach(((q,X)=>{X.isValidDocument()||(U=U.add(q))}))})).next((()=>p.localDocuments.getOverlayedDocuments(P,F))).next((L=>{E=L;const q=[];for(const X of f){const te=Fk(X,E.get(X.key).overlayedDocument);te!=null&&q.push(new si(X.key,te,tw(te.value.mapValue),Ur.exists(!0)))}return p.mutationQueue.addMutationBatch(P,g,q,f)})).next((L=>{I=L;const q=L.applyToLocalDocumentSet(E,U);return p.documentOverlayCache.saveOverlays(P,L.batchId,q)}))})).then((()=>({batchId:I.batchId,changes:dw(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,f,p){let g=c.du[c.currentUser.toKey()];g||(g=new Rt(Xe)),g=g.insert(f,p),c.du[c.currentUser.toKey()]=g})(s,o.batchId,t),await kl(s,o.changes),await zc(s.remoteStore)}catch(o){const l=Yf(o,"Failed to persist write");t.reject(l)}}async function Xw(n,e){const t=He(n);try{const s=await MR(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(ht(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?ht(c.hu,14607):o.removedDocuments.size>0&&(ht(c.hu,42227),c.hu=!1))})),await kl(t,s,e)}catch(s){await ta(s)}}function iv(n,e,t){const s=He(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const p=He(c);p.onlineState=f;let g=!1;p.queries.forEach(((_,E)=>{for(const I of E.ba)I.va(f)&&(g=!0)})),g&&Jf(p)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function kA(n,e,t){const s=He(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new Rt(be.comparator);c=c.insert(l,wn.newNoDocument(l,Be.min()));const f=Ze().add(l),p=new jc(Be.min(),new Map,new Rt(Xe),c,f);await Xw(s,p),s.Ru=s.Ru.remove(l),s.Au.delete(e),Zf(s)}else await rf(s.localStore,e,!1).then((()=>af(s,e,t))).catch(ta)}async function RA(n,e){const t=He(n),s=e.batch.batchId;try{const o=await LR(t.localStore,e);eE(t,s,null),Zw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await kl(t,o)}catch(o){await ta(o)}}async function AA(n,e,t){const s=He(n);try{const o=await(function(c,f){const p=He(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return p.mutationQueue.lookupMutationBatch(g,f).next((E=>(ht(E!==null,37113),_=E.keys(),p.mutationQueue.removeMutationBatch(g,E)))).next((()=>p.mutationQueue.performConsistencyCheck(g))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(g,_,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>p.localDocuments.getDocuments(g,_)))}))})(s.localStore,e);eE(s,e,t),Zw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await kl(s,o)}catch(o){await ta(o)}}function Zw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function eE(n,e,t){const s=He(n);let o=s.du[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function af(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((s=>{n.Vu.containsKey(s)||tE(n,s)}))}function tE(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Hf(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Zf(n))}function ov(n,e,t){for(const s of t)s instanceof Qw?(n.Vu.addReference(s.key,e),PA(n,s)):s instanceof Yw?(Ie(Xf,"Document no longer in limbo: "+s.key),n.Vu.removeReference(s.key,e),n.Vu.containsKey(s.key)||tE(n,s.key)):Le(19791,{wu:s})}function PA(n,e){const t=e.key,s=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(s)||(Ie(Xf,"New document in limbo: "+t),n.Eu.add(s),Zf(n))}function Zf(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new be(gt.fromString(e)),s=n.fu.next();n.Au.set(s,new vA(t)),n.Ru=n.Ru.insert(t,s),Uw(n.remoteStore,new Bs(Fr(Dc(t.path)),s,"TargetPurposeLimboResolution",xc.ce))}}async function kl(n,e,t){const s=He(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,p)=>{c.push(s.pu(p,e,t).then((g=>{var _;if((g||t)&&s.isPrimaryClient){const E=g?!g.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:_.current;s.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(g){o.push(g);const E=$f.Es(p.targetId,g);l.push(E)}})))})),await Promise.all(c),s.Pu.J_(o),await(async function(p,g){const _=He(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>re.forEach(g,(I=>re.forEach(I.Ts,(P=>_.persistence.referenceDelegate.addReference(E,I.targetId,P))).next((()=>re.forEach(I.Is,(P=>_.persistence.referenceDelegate.removeReference(E,I.targetId,P)))))))))}catch(E){if(!na(E))throw E;Ie(Wf,"Failed to update sequence numbers: "+E)}for(const E of g){const I=E.targetId;if(!E.fromCache){const P=_.vs.get(I),F=P.snapshotVersion,U=P.withLastLimboFreeSnapshotVersion(F);_.vs=_.vs.insert(I,U)}}})(s.localStore,l))}async function xA(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Ie(Xf,"User change. New user:",e.toKey());const s=await Lw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new we(ee.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await kl(t,s.Ns)}}function NA(n,e){const t=He(n),s=t.Au.get(e);if(s&&s.hu)return Ze().add(s.key);{let o=Ze();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const f=t.Tu.get(c);o=o.unionWith(f.view.nu)}return o}}function nE(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Xw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NA.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kA.bind(null,e),e.Pu.J_=pA.bind(null,e.eventManager),e.Pu.yu=mA.bind(null,e.eventManager),e}function bA(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AA.bind(null,e),e}class vc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Fc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return OR(this.persistence,new bR,e.initialUser,this.serializer)}Cu(e){return new Ow(Bf.Vi,this.serializer)}Du(e){return new BR}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vc.provider={build:()=>new vc};class DA extends vc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ht(this.persistence.referenceDelegate instanceof gc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new yR(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new Ow((s=>gc.Vi(s,t)),this.serializer)}}class lf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>iv(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=xA.bind(null,this.syncEngine),await hA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fA})()}createDatastore(e){const t=Fc(e.databaseInfo.databaseId),s=GR(e.databaseInfo);return XR(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,f){return new eA(s,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>iv(this.syncEngine,t,0)),(function(){return Zy.v()?new Zy:new $R})())}createSyncEngine(e,t){return(function(o,l,c,f,p,g,_){const E=new _A(o,l,c,f,p,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=He(o);Ie(Bi,"RemoteStore shutting down."),l.Ea.add(5),await Cl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}lf.provider={build:()=>new lf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ds("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="FirestoreClient";class VA{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=o,this.user=_n.UNAUTHENTICATED,this.clientId=Nf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{Ie(ti,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(Ie(ti,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Yf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Nd(n,e){n.asyncQueue.verifyOperationInProgress(),Ie(ti,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Lw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function av(n,e){n.asyncQueue.verifyOperationInProgress();const t=await OA(n);Ie(ti,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>tv(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>tv(e.remoteStore,o))),n._onlineComponents=e}async function OA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ie(ti,"Using user provided OfflineComponentProvider");try{await Nd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ee.FAILED_PRECONDITION||o.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;zi("Error using user provided cache. Falling back to memory cache: "+t),await Nd(n,new vc)}}else Ie(ti,"Using default OfflineComponentProvider"),await Nd(n,new DA(void 0));return n._offlineComponents}async function sE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ie(ti,"Using user provided OnlineComponentProvider"),await av(n,n._uninitializedComponentsProvider._online)):(Ie(ti,"Using default OnlineComponentProvider"),await av(n,new lf))),n._onlineComponents}function LA(n){return sE(n).then((e=>e.syncEngine))}async function uf(n){const e=await sE(n),t=e.eventManager;return t.onListen=wA.bind(null,e.syncEngine),t.onUnlisten=IA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=EA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=SA.bind(null,e.syncEngine),t}function MA(n,e,t,s){const o=new rE(s),l=new Kw(e,o,t);return n.asyncQueue.enqueueAndForget((async()=>qw(await uf(n),l))),()=>{o.Nu(),n.asyncQueue.enqueueAndForget((async()=>Gw(await uf(n),l)))}}function jA(n,e,t={}){const s=new Ks;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,p,g){const _=new rE({next:I=>{_.Nu(),c.enqueueAndForget((()=>Gw(l,E)));const P=I.docs.has(f);!P&&I.fromCache?g.reject(new we(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&I.fromCache&&p&&p.source==="server"?g.reject(new we(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(I)},error:I=>g.reject(I)}),E=new Kw(Dc(f.path),_,{includeMetadataChanges:!0,Ka:!0});return qw(l,E)})(await uf(n),n.asyncQueue,e,t,s))),s.promise}function FA(n,e){const t=new Ks;return n.asyncQueue.enqueueAndForget((async()=>CA(await LA(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA="ComponentProvider",lv=new Map;function zA(n,e,t,s,o){return new ak(n,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,iE(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oE="firestore.googleapis.com",uv=!0;class cv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new we(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oE,this.ssl=uv}else this.host=e.host,this.ssl=e.ssl??uv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Vw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mR)throw new we(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Q1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iE(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new we(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Bc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new we(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new we(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new F1;switch(s.type){case"firstParty":return new $1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new we(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=lv.get(t);s&&(Ie(UA,"Removing Datastore"),lv.delete(t),s.terminate())})(this),Promise.resolve()}}function BA(n,e,t,s={}){var g;n=jr(n,Bc);const o=Jo(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(Xv(`https://${f}`),Zv("Firestore",!0)),l.host!==oE&&l.host!==f&&zi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:o,emulatorOptions:s};if(!us(p,c)&&(n._setSettings(p),s.mockUserToken)){let _,E;if(typeof s.mockUserToken=="string")_=s.mockUserToken,E=_n.MOCK_USER;else{_=lI(s.mockUserToken,(g=n._app)==null?void 0:g.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new we(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new _n(I)}n._authCredentials=new U1(new $_(_,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ii(this.firestore,e,this._query)}}class xt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xt(this.firestore,e,this._key)}toJSON(){return{type:xt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Tl(t,xt._jsonSchema))return new xt(e,s||null,new be(gt.fromString(t.referencePath)))}}xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:$t("string",xt._jsonSchemaVersion),referencePath:$t("string")};class Qs extends ii{constructor(e,t,s){super(e,t,Dc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new be(e))}withConverter(e){return new Qs(this.firestore,e,this._path)}}function $A(n,e,...t){if(n=Zt(n),W_("collection","path",e),n instanceof Bc){const s=gt.fromString(e,...t);return Iy(s),new Qs(n,null,s)}{if(!(n instanceof xt||n instanceof Qs))throw new we(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(gt.fromString(e,...t));return Iy(s),new Qs(n.firestore,null,s)}}function zu(n,e,...t){if(n=Zt(n),arguments.length===1&&(e=Nf.newId()),W_("doc","path",e),n instanceof Bc){const s=gt.fromString(e,...t);return Ty(s),new xt(n,null,new be(s))}{if(!(n instanceof xt||n instanceof Qs))throw new we(ee.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(gt.fromString(e,...t));return Ty(s),new xt(n.firestore,n instanceof Qs?n.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="AsyncQueue";class dv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jw(this,"async_queue_retry"),this._c=()=>{const s=xd();s&&Ie(hv,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=xd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=xd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!na(e))throw e;Ie(hv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ds("INTERNAL UNHANDLED ERROR: ",fv(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=Qf.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Le(47125,{Pc:fv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function fv(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Qo extends Bc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new dv,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dv(e),this._firestoreClient=void 0,await e}}}function WA(n,e){const t=typeof n=="object"?n:r_(),s=typeof n=="string"?n:uc,o=_f(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=oI("firestore");l&&BA(o,...l)}return o}function ep(n){if(n._terminated)throw new we(ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||HA(n),n._firestoreClient}function HA(n){var s,o,l,c;const e=n._freezeSettings(),t=zA(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,(o=n._app)==null?void 0:o.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new VA(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const g=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new sr(hn.fromBase64String(e))}catch(t){throw new we(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new sr(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:sr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tl(e,sr._jsonSchema))return sr.fromBase64String(e.bytes)}}sr._jsonSchemaVersion="firestore/bytes/1.0",sr._jsonSchema={type:$t("string",sr._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new we(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new we(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new we(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Xe(this._lat,e._lat)||Xe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Br._jsonSchemaVersion}}static fromJSON(e){if(Tl(e,Br._jsonSchema))return new Br(e.latitude,e.longitude)}}Br._jsonSchemaVersion="firestore/geoPoint/1.0",Br._jsonSchema={type:$t("string",Br._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:gr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tl(e,gr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new gr(e.vectorValues);throw new we(ee.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gr._jsonSchemaVersion="firestore/vectorValue/1.0",gr._jsonSchema={type:$t("string",gr._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=/^__.*__$/;class GA{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new si(e,this.data,this.fieldMask,t,this.fieldTransforms):new Il(e,this.data,t,this.fieldTransforms)}}class aE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new si(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Le(40011,{dataSource:n})}}class $c{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new $c({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return _c(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(lE(this.dataSource)&&qA.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class KA{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Fc(e)}createContext(e,t,s,o=!1){return new $c({dataSource:e,methodName:t,targetDoc:s,path:cn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function np(n){const e=n._freezeSettings(),t=Fc(n._databaseId);return new KA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function QA(n,e,t,s,o,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,o);ip("Data must be an object, but it was:",c,s);const f=cE(s,c);let p,g;if(l.merge)p=new qn(c.fieldMask),g=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const I=Yo(e,E,t);if(!c.contains(I))throw new we(ee.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);fE(_,I)||_.push(I)}p=new qn(_),g=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,g=c.fieldTransforms;return new GA(new Dn(f),p,g)}class Wc extends Rl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wc}}function uE(n,e,t){return new $c({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class rp extends Rl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=uE(this,e,!0),s=this.Ac.map((l=>Gi(l,t))),o=new Ho(s);return new _w(e.path,o)}isEqual(e){return e instanceof rp&&us(this.Ac,e.Ac)}}class sp extends Rl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=uE(this,e,!0),s=this.Ac.map((l=>Gi(l,t))),o=new qo(s);return new _w(e.path,o)}isEqual(e){return e instanceof sp&&us(this.Ac,e.Ac)}}function YA(n,e,t,s){const o=n.createContext(1,e,t);ip("Data must be an object, but it was:",o,s);const l=[],c=Dn.empty();ri(s,((p,g)=>{const _=dE(e,p,t);g=Zt(g);const E=o.childContextForFieldPath(_);if(g instanceof Wc)l.push(_);else{const I=Gi(g,E);I!=null&&(l.push(_),c.set(_,I))}}));const f=new qn(l);return new aE(c,f,o.fieldTransforms)}function JA(n,e,t,s,o,l){const c=n.createContext(1,e,t),f=[Yo(e,s,t)],p=[o];if(l.length%2!=0)throw new we(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)f.push(Yo(e,l[I])),p.push(l[I+1]);const g=[],_=Dn.empty();for(let I=f.length-1;I>=0;--I)if(!fE(g,f[I])){const P=f[I];let F=p[I];F=Zt(F);const U=c.childContextForFieldPath(P);if(F instanceof Wc)g.push(P);else{const L=Gi(F,U);L!=null&&(g.push(P),_.set(P,L))}}const E=new qn(g);return new aE(_,E,c.fieldTransforms)}function XA(n,e,t,s=!1){return Gi(t,n.createContext(s?4:3,e))}function Gi(n,e){if(hE(n=Zt(n)))return ip("Unsupported field value:",e,n),cE(n,e);if(n instanceof Rl)return(function(s,o){if(!lE(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const f of s){let p=Gi(f,o.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=Zt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Dk(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Et.fromDate(s);return{timestampValue:mc(o.serializer,l)}}if(s instanceof Et){const l=new Et(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:mc(o.serializer,l)}}if(s instanceof Br)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof sr)return{bytesValue:kw(o.serializer,s._byteString)};if(s instanceof xt){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Uf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof gr)return(function(c,f){const p=c instanceof gr?c.toArray():c;return{mapValue:{fields:{[Z_]:{stringValue:ew},[cc]:{arrayValue:{values:p.map((_=>{if(typeof _!="number")throw f.createError("VectorValues must only contain numeric values.");return Mf(f.serializer,_)}))}}}}}})(s,o);if(Dw(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Pc(s)}`)})(n,e)}function cE(n,e){const t={};return G_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ri(n,((s,o)=>{const l=Gi(o,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function hE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Et||n instanceof Br||n instanceof sr||n instanceof xt||n instanceof Rl||n instanceof gr||Dw(n))}function ip(n,e,t){if(!hE(t)||!H_(t)){const s=Pc(t);throw s==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+s)}}function Yo(n,e,t){if((e=Zt(e))instanceof tp)return e._internalPath;if(typeof e=="string")return dE(n,e);throw _c("Field path arguments must be of type string or ",n,!1,void 0,t)}const ZA=new RegExp("[~\\*/\\[\\]]");function dE(n,e,t){if(e.search(ZA)>=0)throw _c(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new tp(...e.split("."))._internalPath}catch{throw _c(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function _c(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new we(ee.INVALID_ARGUMENT,f+n+p)}function fE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{convertValue(e,t="none"){switch(Zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Le(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ri(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[cc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>Mt(c.doubleValue)));return new gr(t)}convertGeoPoint(e){return new Br(Mt(e.latitude),Mt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=bc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(hl(e));default:return null}}convertTimestamp(e){const t=Js(e);return new Et(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=gt.fromString(e);ht(bw(s),9688,{name:e});const o=new dl(s.get(1),s.get(3)),l=new be(s.popFirst(5));return o.isEqual(t)||ds(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pE extends eP{constructor(e){super(),this.firestore=e}convertBytes(e){return new sr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,t)}}function tP(...n){return new rp("arrayUnion",n)}function nP(...n){return new sp("arrayRemove",n)}const pv="@firebase/firestore",mv="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Yo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class rP extends mE{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new we(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class op{}class ap extends op{}function iP(n,e,...t){let s=[];e instanceof op&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((p=>p instanceof up)).length,f=l.filter((p=>p instanceof lp)).length;if(c>1||c>0&&f>0)throw new we(ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class lp extends ap{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new lp(e,t,s)}_apply(e){const t=this._parse(e);return gE(e._query,t),new ii(e.firestore,e.converter,Xd(e._query,t))}_parse(e){const t=np(e.firestore);return(function(l,c,f,p,g,_,E){let I;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new we(ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){vv(E,_);const F=[];for(const U of E)F.push(yv(p,l,U));I={arrayValue:{values:F}}}else I=yv(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||vv(E,_),I=XA(f,c,E,_==="in"||_==="not-in");return Bt.create(g,_,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class up extends op{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new up(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:yr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const f=l.getFlattenedFilters();for(const p of f)gE(c,p),c=Xd(c,p)})(e._query,t),new ii(e.firestore,e.converter,Xd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cp extends ap{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cp(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new we(ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new we(ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pl(l,c)})(e._query,this._field,this._direction);return new ii(e.firestore,e.converter,Ck(e._query,t))}}function oP(n,e="asc"){const t=e,s=Yo("orderBy",n);return cp._create(s,t)}class hp extends ap{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new hp(e,t,s)}_apply(e){return new ii(e.firestore,e.converter,dc(e._query,this._limit,this._limitType))}}function aP(n){return Y1("limit",n),hp._create("limit",n,"F")}function yv(n,e,t){if(typeof(t=Zt(t))=="string"){if(t==="")throw new we(ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!lw(e)&&t.indexOf("/")!==-1)throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(gt.fromString(t));if(!be.isDocumentKey(s))throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ny(n,new be(s))}if(t instanceof xt)return Ny(n,t._key);throw new we(ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Pc(t)}.`)}function vv(n,e){if(!Array.isArray(n)||n.length===0)throw new we(ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gE(n,e){const t=(function(o,l){for(const c of o)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new we(ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new we(ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function lP(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Xa{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Mi extends mE{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Yo("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ee.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Mi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Mi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mi._jsonSchema={type:$t("string",Mi._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class Xu extends Mi{data(e={}){return super.data(e)}}class Fo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Xa(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Xu(this._firestore,this._userDataWriter,s.key,s,new Xa(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new we(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const p=new Xu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Xa(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new Xu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Xa(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return f.type!==0&&(g=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),_=c.indexOf(f.doc.key)),{type:uP(f.type),doc:p,oldIndex:g,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new we(ee.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Nf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Le(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:$t("string",Fo._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _v(n){n=jr(n,xt);const e=jr(n.firestore,Qo),t=ep(e);return jA(t,n._key).then((s=>_E(e,n,s)))}function bd(n,e,t){n=jr(n,xt);const s=jr(n.firestore,Qo),o=lP(n.converter,e),l=np(s);return vE(s,[QA(l,"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Ur.none())])}function Bu(n,e,t,...s){n=jr(n,xt);const o=jr(n.firestore,Qo),l=np(o);let c;return c=typeof(e=Zt(e))=="string"||e instanceof tp?JA(l,"updateDoc",n._key,e,t,s):YA(l,"updateDoc",n._key,e),vE(o,[c.toMutation(n._key,Ur.exists(!0))])}function yE(n,...e){var g,_,E;n=Zt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||gv(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(gv(e[s])){const I=e[s];e[s]=(g=I.next)==null?void 0:g.bind(I),e[s+1]=(_=I.error)==null?void 0:_.bind(I),e[s+2]=(E=I.complete)==null?void 0:E.bind(I)}let l,c,f;if(n instanceof xt)c=jr(n.firestore,Qo),f=Dc(n._key.path),l={next:I=>{e[s]&&e[s](_E(c,n,I))},error:e[s+1],complete:e[s+2]};else{const I=jr(n,ii);c=jr(I.firestore,Qo),f=I._query;const P=new pE(c);l={next:F=>{e[s]&&e[s](new Fo(c,P,I,F))},error:e[s+1],complete:e[s+2]},sP(n._query)}const p=ep(c);return MA(p,f,o,l)}function vE(n,e){const t=ep(n);return FA(t,e)}function _E(n,e,t){const s=t.docs.get(e._key),o=new pE(n);return new Mi(n,o,e._key,s,new Xa(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){j1(Xo),Uo(new ji("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new Qo(new z1(s.getProvider("auth-internal")),new W1(c,s.getProvider("app-check-internal")),lk(c,o),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),qs(pv,mv,e),qs(pv,mv,"esm2020")})();const cP={apiKey:"AIzaSyA8xoktIzGgpPEklg_e_vWgkMU6E3Bjlkw",authDomain:"color-73b3e.firebaseapp.com",projectId:"color-73b3e",storageBucket:"color-73b3e.firebasestorage.app",messagingSenderId:"450293394727",appId:"1:450293394727:web:8486e1ff4d1c083275cd02"},wE=n_(cP),Dd=V1(wE),Za=WA(wE),hP=new os,EE=k.createContext({user:null,loading:!0,signIn:async()=>{},signOut:async()=>{}});function dP({children:n}){const[e,t]=k.useState(null),[s,o]=k.useState(!0);k.useEffect(()=>TC(Dd,f=>{t(f),o(!1)}),[]);const l=async()=>{await $C(Dd,hP)},c=async()=>{await IC(Dd)};return T.jsx(EE.Provider,{value:{user:e,loading:s,signIn:l,signOut:c},children:n})}function dp(){return k.useContext(EE)}const fp="/4color/";function cf(n,e){return Array.from({length:n},()=>Array.from({length:e},()=>({value:null,notes:[],fixedValue:null,fixedColor:null,borders:[0,0,0,0],fixedBorders:[0,0,0,0],color:null,label:null,crossed:!1,mark:null,selected:!1,image:null})))}function fP(n,e){var f;const t=new Map;let s=0;for(const p of n)for(const g of p)g.image&&!t.has(g.image)&&t.set(g.image,`img${s++}`);const o=[];for(let p=0;p<n.length;p++)for(let g=0;g<n[p].length;g++){const _=n[p][g],E=_.borders.some(I=>I>0);if(_.fixedValue||_.fixedColor||_.color||E||_.label||_.crossed||_.mark||_.image){const I={row:p,col:g};_.fixedValue&&(I.fixedValue=_.fixedValue),_.fixedColor&&(I.fixedColor=_.fixedColor),_.color&&(I.color=_.color),E&&(I.borders=_.borders),_.label&&(I.label=_.label),_.crossed&&(I.crossed=_.crossed),_.mark&&(I.mark=_.mark),_.image&&(I.image=t.get(_.image)),o.push(I)}}const l={};for(const[p,g]of t)l[g]=p;const c={...e,gridSize:{rows:n.length,cols:n[0].length},cells:o,rules:e.rules,clues:e.clues,createdAt:new Date().toISOString().split("T")[0]};return Object.keys(l).length>0&&(c.images=l),(f=e.autoCrossRules)!=null&&f.length&&(c.autoCrossRules=e.autoCrossRules),e.forcedInputLayout&&(c.forcedInputLayout=e.forcedInputLayout),c}function hf(n){const e=cf(n.gridSize.rows,n.gridSize.cols),t=n.images||{};for(const s of n.cells)s.fixedValue&&(e[s.row][s.col].fixedValue=s.fixedValue),s.fixedColor&&(e[s.row][s.col].fixedColor=s.fixedColor),s.color&&(e[s.row][s.col].color=s.color),s.borders&&(e[s.row][s.col].borders=s.borders,e[s.row][s.col].fixedBorders=[...s.borders]),s.label&&(e[s.row][s.col].label=s.label),s.crossed&&(e[s.row][s.col].crossed=s.crossed),s.mark&&(e[s.row][s.col].mark=s.mark),s.image&&(e[s.row][s.col].image=t[s.image]??s.image);return e}function pP(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`${n.id}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(s),1e3)}async function pp(){const n=await fetch(`${fp}puzzles/index.json`);return n.ok?n.json():[]}function mP(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`${n.id}-solution.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(s),1e3)}async function TE(n){try{const e=await fetch(`${fp}puzzles/solutions/${n}-solution.json`);if(!e.ok)return null;const t=await e.text();return JSON.parse(t)}catch{return null}}async function IE(n){const t=(await pp()).find(l=>l.id===n),s=(t==null?void 0:t.file)??`${n}.json`,o=await fetch(`${fp}puzzles/${s}`);return o.ok?o.json():null}const wv="4color-theme";function mp(){const[n,e]=k.useState(()=>{const s=localStorage.getItem(wv);return s==="dark"||s==="light"?s:"light"});return k.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),localStorage.setItem(wv,n)},[n]),{theme:n,toggle:()=>e(s=>s==="light"?"dark":"light")}}function SE(){const{user:n}=dp(),[e,t]=k.useState(new Set),[s,o]=k.useState(new Map),[l,c]=k.useState(""),f=k.useRef(e);f.current=e;const p=k.useRef(s);p.current=s,k.useEffect(()=>{if(!n){t(new Set),c("");return}const I=zu(Za,"completions_index",n.uid);return yE(I,P=>{if(P.exists()){const F=P.data(),U=F.puzzleIds||[];t(new Set(U)),c(F.displayName||n.displayName||"");const L=F.times||{};o(new Map(Object.entries(L))),F.count!==U.length&&Bu(I,{count:U.length}).catch(()=>{})}else t(new Set),o(new Map),c(n.displayName||"")},()=>{t(new Set),o(new Map),c(n.displayName||"")})},[n]);const g=k.useCallback(async(I,P)=>{if(!n||f.current.has(I))return;const F=zu(Za,"completions_index",n.uid);try{const U=await _v(F);if(U.exists()){const L=U.data(),q=L.puzzleIds||[];if(q.includes(I))return;const X={puzzleIds:tP(I),count:q.length+1};P!=null&&!(L.times&&L.times[I])&&(X[`times.${I}`]=P),await Bu(F,X)}else{const L=n.displayName||"Anonymous",q={uid:n.uid,puzzleIds:[I],count:1,displayName:L};P!=null&&(q.times={[I]:P}),await bd(F,q)}}catch{const U=n.displayName||"Anonymous",L={uid:n.uid,puzzleIds:[I],count:1,displayName:U};P!=null&&(L.times={[I]:P}),await bd(F,L).catch(()=>{})}},[n]),_=k.useCallback(async I=>{if(!n||!f.current.has(I))return;const P=zu(Za,"completions_index",n.uid);try{const F=await _v(P);if(F.exists()){const U=F.data().puzzleIds||[],L=Math.max(0,U.filter(q=>q!==I).length);await Bu(P,{puzzleIds:nP(I),count:L})}}catch{}},[n]),E=k.useCallback(async I=>{if(!n)return;const P=I.trim();if(!P)return;const F=zu(Za,"completions_index",n.uid);try{await Bu(F,{displayName:P})}catch{await bd(F,{uid:n.uid,puzzleIds:[],count:0,displayName:P})}},[n]);return{completedPuzzleIds:e,completionTimes:s,displayName:l,setDisplayName:E,markCompleted:g,unmarkCompleted:_}}function gp(n){const e=Math.floor(n/1e3),t=Math.floor(e/3600),s=Math.floor(e%3600/60),o=e%60;return t>0?`${t}:${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`:`${s}:${String(o).padStart(2,"0")}`}function gP(n=10){const[e,t]=k.useState([]);return k.useEffect(()=>{const s=iP($A(Za,"completions_index"),oP("count","desc"),aP(n));return yE(s,o=>{const l=[];o.forEach(c=>{const f=c.data();f.count>0&&l.push({uid:c.id,displayName:f.displayName||"Anonymous",count:f.count})}),t(l)},()=>{t([])})},[n]),e}function yp(){const[n,e]=k.useState({open:!1,message:"",hasCancel:!1}),t=k.useRef(null),s=k.useCallback(f=>{var p;e(g=>({...g,open:!1})),(p=t.current)==null||p.call(t,f),t.current=null},[]),o=k.useCallback((f,p)=>new Promise(g=>{var _;(_=t.current)==null||_.call(t,!1),t.current=()=>g(),e({open:!0,message:f,title:p,hasCancel:!1})}),[]),l=k.useCallback((f,p,g,_)=>new Promise(E=>{var I;(I=t.current)==null||I.call(t,!1),t.current=E,e({open:!0,message:f,title:p,confirmLabel:g,cancelLabel:_,hasCancel:!0})}),[]);return{modalProps:{open:n.open,title:n.title,message:n.message,confirmLabel:n.confirmLabel,cancelLabel:n.cancelLabel,onConfirm:()=>s(!0),onCancel:n.hasCancel?()=>s(!1):void 0},showAlert:o,showConfirm:l}}function wc({open:n,title:e,message:t,confirmLabel:s="OK",cancelLabel:o="Cancel",onConfirm:l,onCancel:c}){const f=k.useCallback(()=>{c?c():l()},[c,l]);return k.useEffect(()=>{if(!n)return;const p=g=>{g.key==="Escape"&&f()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[n,f]),n?T.jsx("div",{className:"modal-backdrop",onMouseDown:f,children:T.jsxs("div",{className:"modal-card",onMouseDown:p=>p.stopPropagation(),children:[e&&T.jsx("h3",{className:"modal-title",children:e}),T.jsx("p",{className:"modal-message",children:t}),T.jsxs("div",{className:"modal-actions",children:[c&&T.jsx("button",{className:"modal-btn",onClick:c,children:o}),T.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:l,children:s})]})]})}):null}const Ev=[{code:"",label:"English"},{code:"fr",label:"Franais"},{code:"es",label:"Espaol"},{code:"de",label:"Deutsch"},{code:"pt",label:"Portugus"},{code:"it",label:"Italiano"},{code:"nl",label:"Nederlands"},{code:"ru",label:""},{code:"ja",label:""},{code:"ko",label:""},{code:"zh-CN",label:""},{code:"ar",label:""},{code:"hi",label:""},{code:"pl",label:"Polski"},{code:"tr",label:"Trke"},{code:"sv",label:"Svenska"}];function yP(){return document.querySelector("#google_translate_element select")}function vP(){const n=document.cookie.match(/googtrans=\/en\/([^;]+)/);return n?n[1]:""}function _P(n){const e=yP();if(e){if(!n){document.cookie="googtrans=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC",document.cookie="googtrans=; path=/; domain="+window.location.hostname+"; expires=Thu, 01 Jan 1970 00:00:00 UTC",e.value="",e.dispatchEvent(new Event("change")),window.location.reload();return}e.value=n,e.dispatchEvent(new Event("change"))}}function Ec(){var _;const[n,e]=k.useState(vP),[t,s]=k.useState(!1),o=k.useRef(null),l=k.useRef(null),c=k.useRef(null),[f,p]=k.useState(null);k.useEffect(()=>{const E=I=>{const P=I.target;o.current&&!o.current.contains(P)&&(!l.current||!l.current.contains(P))&&s(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]),k.useEffect(()=>{if(t&&c.current){const E=c.current.getBoundingClientRect();p({top:E.bottom+4,right:window.innerWidth-E.right})}},[t]);const g=((_=Ev.find(E=>E.code===n))==null?void 0:_.label)||"English";return T.jsxs("div",{className:"lang-picker notranslate",ref:o,children:[T.jsx("button",{ref:c,className:"lang-picker-btn",onClick:()=>s(E=>!E),title:"Change language",children:g}),t&&f&&K0.createPortal(T.jsx("div",{ref:l,className:"lang-picker-menu",style:{position:"fixed",top:f.top,right:f.right,zIndex:9999},children:Ev.map(E=>T.jsx("button",{className:`lang-picker-item${E.code===n?" active":""}`,onClick:()=>{e(E.code),_P(E.code),s(!1)},children:E.label},E.code))}),document.body)]})}function wP(){const n=new URLSearchParams(window.location.hash.split("?")[1]||"").get("debug")==="true",{theme:e,toggle:t}=mp(),{user:s,signIn:o,signOut:l}=dp(),{completedPuzzleIds:c,completionTimes:f,displayName:p,setDisplayName:g}=SE(),_=gP(10),{modalProps:E,showConfirm:I}=yp(),[P,F]=k.useState(!1),[U,L]=k.useState(""),[q,X]=k.useState([]),[te,le]=k.useState(!0),[ne,ie]=k.useState(new Set),[x,C]=k.useState("or"),[A,O]=k.useState(new Set),[V,b]=k.useState(!1);k.useEffect(()=>{pp().then(Y=>{X(Y),le(!1)})},[]);const R=k.useMemo(()=>{const Y=new Set;for(const Z of q)for(const D of Z.tags||[])Y.add(D);return[...Y].sort()},[q]),ve=k.useMemo(()=>{const Y=["Very easy","Easy","Medium","Hard","Very hard"],Z=new Set;for(const K of q)K.difficulty&&Z.add(K.difficulty);const D=Y.filter(K=>Z.has(K));for(const K of Z)D.includes(K)||D.push(K);return D},[q]),J=k.useMemo(()=>{let Y=q;return ne.size>0&&(Y=Y.filter(Z=>{const D=Z.tags||[];return x==="or"?D.some(K=>ne.has(K)):[...ne].every(K=>D.includes(K))})),A.size>0&&(Y=Y.filter(Z=>Z.difficulty!=null&&A.has(Z.difficulty))),V&&(Y=Y.filter(Z=>!c.has(Z.id))),Y},[q,ne,x,A,V,c]),Fe=k.useMemo(()=>{const Y=["Very easy","Easy","Medium","Hard","Very hard"],Z=[],D=new Map;for(const K of J){const Ae=K.difficulty||"Unrated";D.has(Ae)||D.set(Ae,[]),D.get(Ae).push(K)}for(const K of Y)D.has(K)&&(Z.push({difficulty:K,puzzles:D.get(K)}),D.delete(K));for(const[K,Ae]of D)Z.push({difficulty:K,puzzles:Ae});return Z},[J]),_e=Y=>{ie(Z=>{const D=new Set(Z);return D.has(Y)?D.delete(Y):D.add(Y),D})},se=Y=>{O(Z=>{const D=new Set(Z);return D.has(Y)?D.delete(Y):D.add(Y),D})};return T.jsxs("div",{className:"puzzle-list-layout",children:[T.jsxs("aside",{className:"puzzle-list-sidebar",children:[T.jsx("div",{className:"sidebar-section",children:s?T.jsx("button",{className:"auth-btn auth-btn-full notranslate",onClick:()=>{L(p),F(!0)},children:p||s.displayName||"User"}):T.jsx("button",{className:"auth-btn auth-btn-full",onClick:o,children:"Sign in with Google"})}),T.jsxs("div",{className:"sidebar-section",children:[T.jsx("h3",{className:"sidebar-title",children:"Leaderboard"}),_.length===0?T.jsx("p",{className:"sidebar-empty",children:"No completions yet"}):T.jsx("ol",{className:"leaderboard-list",children:_.map((Y,Z)=>T.jsxs("li",{className:`leaderboard-entry${s&&Y.uid===s.uid?" leaderboard-self":""}`,children:[T.jsxs("span",{className:"leaderboard-rank",children:[Z+1,"."]}),T.jsx("span",{className:"leaderboard-name notranslate",children:Y.displayName}),T.jsx("span",{className:"leaderboard-count",children:Y.count})]},Y.uid))})]}),T.jsx("div",{className:"sidebar-spacer"})]}),T.jsxs("div",{className:"puzzle-list-main",children:[T.jsxs("div",{className:"puzzle-list-topbar",children:[T.jsx("span",{className:"discord-link notranslate",title:"Click to copy Discord username",onClick:()=>{navigator.clipboard.writeText("pmlemay"),alert("Copied pmlemay to clipboard!")},children:"Contact me on Discord : pmlemay"}),T.jsx(Ec,{}),T.jsx("button",{className:"puzzle-list-theme-btn",onClick:t,title:"Toggle theme",children:e==="light"?"":""})]}),T.jsx("div",{className:"puzzle-list-header",children:T.jsx("h1",{children:"4Color Puzzles"})}),T.jsx("div",{className:"puzzle-list-actions",children:T.jsx(Di,{to:"/edit",className:"new-puzzle-btn",children:"Create New Puzzle"})}),(R.length>0||ve.length>0)&&T.jsxs("div",{className:"filter-bars",children:[T.jsxs("div",{className:"tag-filter-bar",children:[c.size>0&&T.jsxs(T.Fragment,{children:[T.jsx("button",{className:`tag-chip${V?" selected":""}`,onClick:()=>b(Y=>!Y),children:"Hide completed"}),ve.length>0&&T.jsx("span",{className:"filter-separator",children:"|"})]}),ve.map(Y=>T.jsx("button",{className:`tag-chip difficulty${A.has(Y)?" selected":""}`,onClick:()=>se(Y),children:Y},Y))]}),R.length>0&&T.jsxs("div",{className:"tag-filter-bar",children:[R.map(Y=>T.jsx("button",{className:`tag-chip${ne.has(Y)?" selected":""}`,onClick:()=>_e(Y),children:Y},Y)),ne.size>=2&&T.jsx("button",{className:"tag-mode-toggle",onClick:()=>C(Y=>Y==="or"?"and":"or"),title:x==="or"?"Showing puzzles matching ANY tag":"Showing puzzles matching ALL tags",children:x.toUpperCase()})]})]}),te?T.jsx("p",{children:"Loading puzzles..."}):q.length===0?T.jsxs("p",{className:"empty-state",children:["No puzzles yet. ",T.jsx(Di,{to:"/edit",children:"Create one"})," to get started!"]}):T.jsx("div",{className:"puzzle-sections",children:Fe.map(Y=>T.jsxs("div",{className:"puzzle-section",children:[T.jsx("h2",{className:"puzzle-section-title",children:Y.difficulty}),T.jsx("div",{className:"puzzle-cards",children:Y.puzzles.map(Z=>T.jsxs("div",{className:"puzzle-card-row",children:[T.jsxs(Di,{to:`/play/${Z.id}`,className:`puzzle-card${c.has(Z.id)?" puzzle-completed":""}`,children:[T.jsxs("h3",{children:[Z.title,c.has(Z.id)&&T.jsx("span",{className:"completed-badge",title:"Completed",children:""}),f.has(Z.id)&&T.jsx("span",{className:"completion-time",children:gp(f.get(Z.id))})]}),T.jsxs("p",{className:"puzzle-meta",children:["by ",Z.author,"  ",Z.gridSize.rows,"",Z.gridSize.cols]}),Z.tags&&Z.tags.length>0&&T.jsx("div",{className:"puzzle-tags",children:Z.tags.map(D=>T.jsx("span",{className:"puzzle-tag",children:D},D))})]}),n&&T.jsx(Di,{to:`/edit/${Z.id}`,className:"puzzle-edit-btn",title:"Edit puzzle",children:""})]},Z.id))})]},Y.difficulty))})]}),P&&s&&T.jsx("div",{className:"modal-backdrop",onClick:()=>F(!1),children:T.jsxs("div",{className:"modal-card",onClick:Y=>Y.stopPropagation(),children:[T.jsx("h2",{className:"modal-title",children:"Account"}),T.jsxs("p",{className:"account-info",children:["Signed in with Google as ",s.email]}),T.jsxs("div",{className:"account-name-field",children:[T.jsx("label",{children:"Display name"}),T.jsx("input",{value:U,onChange:Y=>L(Y.target.value),onKeyDown:Y=>{Y.key==="Enter"&&U.trim()&&(g(U.trim()),F(!1))},placeholder:s.displayName||"Enter a name"})]}),T.jsxs("div",{className:"modal-actions",children:[T.jsx("button",{className:"modal-btn",onClick:()=>{U.trim()&&g(U.trim()),F(!1)},children:"Save"}),T.jsx("button",{className:"modal-btn modal-btn-danger",onClick:async()=>{F(!1),await I("Are you sure you want to sign out?","Sign Out","Sign out","Cancel")&&l()},children:"Sign out"})]})]})}),T.jsx(wc,{...E})]})}function Tv(n,e){const t=n.map(l=>l.map(c=>({...c}))),s=2,o=new Set(e.map(l=>`${l.row},${l.col}`));for(const l of e){const c=t[l.row][l.col].fixedBorders;t[l.row][l.col].borders=[c[0]>0?c[0]:o.has(`${l.row-1},${l.col}`)?0:s,c[1]>0?c[1]:o.has(`${l.row},${l.col+1}`)?0:s,c[2]>0?c[2]:o.has(`${l.row+1},${l.col}`)?0:s,c[3]>0?c[3]:o.has(`${l.row},${l.col-1}`)?0:s]}return t}function EP(n,e,t,s){const o=[];for(let l=0;l<t;l++)l!==n&&o.push({row:l,col:e});for(let l=0;l<s;l++)l!==e&&o.push({row:n,col:l});return o}function TP(n,e,t,s){const o=[],l=[[-1,-1],[-1,1],[1,-1],[1,1]];for(const[c,f]of l){let p=n+c,g=e+f;for(;p>=0&&p<t&&g>=0&&g<s;)o.push({row:p,col:g}),p+=c,g+=f}return o}function IP(n,e,t,s){const o=[];for(let l=-1;l<=1;l++)for(let c=-1;c<=1;c++){if(l===0&&c===0)continue;const f=n+l,p=e+c;f>=0&&f<t&&p>=0&&p<s&&o.push({row:f,col:p})}return o}function SP(n,e,t,s){const o=[],l=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[c,f]of l){const p=n+c,g=e+f;p>=0&&p<t&&g>=0&&g<s&&o.push({row:p,col:g})}return o}function CP(n,e,t,s){if(e.length===0)return[];const o=new Set(e),l=new Set,c=[];for(const f of n)l.add(`${f.row},${f.col}`);for(const f of n){const p=[];o.has("rook")&&p.push(...EP(f.row,f.col,t,s)),o.has("bishop")&&p.push(...TP(f.row,f.col,t,s)),o.has("king")&&p.push(...IP(f.row,f.col,t,s)),o.has("knight")&&p.push(...SP(f.row,f.col,t,s));for(const g of p){const _=`${g.row},${g.col}`;l.has(_)||(l.add(_),c.push(g))}}return c}const kP=16,xi=500;function Ut(n){return n.map(e=>e.map(t=>({...t,notes:[...t.notes],borders:[...t.borders],fixedBorders:[...t.fixedBorders]})))}function Ni(n){return n.map(e=>e.map(t=>({...t,selected:!1,notes:[...t.notes],borders:[...t.borders],fixedBorders:[...t.fixedBorders]})))}function CE(n,e){const[t,s]=k.useState(()=>cf(n,e)),o=k.useRef(t);o.current=t;const[l,c]=k.useState([]),[f,p]=k.useState("normal"),g=k.useRef([]),_=k.useRef([]),E=k.useRef(!0),I=k.useRef(!1),P=k.useRef(null),F=k.useRef(!1),U=k.useRef(!1),L=k.useRef(null),q=k.useRef(!1),X=k.useRef(null),[te,le]=k.useState(null),[ne,ie]=k.useState(null),x=k.useRef([]),C=k.useRef(""),A=k.useCallback(ce=>{x.current=ce},[]),O=k.useCallback(ce=>{C.current=ce},[]),V=k.useCallback(ce=>{p(ce),ce!=="color"&&ce!=="fixedColor"&&le(null),ce!=="mark"&&ie(null)},[]),b=k.useCallback(ce=>{g.current.push(Ni(o.current)),g.current.length>xi&&g.current.shift(),_.current=[],s($=>typeof ce=="function"?ce($):ce)},[]),R=k.useCallback(()=>{const ce=g.current.pop();ce&&(_.current.push(Ni(o.current)),_.current.length>xi&&_.current.shift(),s(ce),c([]))},[]),ve=k.useCallback(()=>{const ce=_.current.pop();ce&&(g.current.push(Ni(o.current)),g.current.length>xi&&g.current.shift(),s(ce),c([]))},[]),J=k.useCallback(()=>{s(ce=>ce.map($=>$.map(de=>({...de,selected:!1})))),c([])},[]),Fe=k.useCallback(ce=>{if(ce.length!==0){if((f==="color"||f==="fixedColor")&&te!==null){const $=f==="fixedColor"?"fixedColor":"color",de=te==="0";s(Ee=>{U.current||(U.current=!0,g.current.push(Ni(Ee)),g.current.length>xi&&g.current.shift(),_.current=[],de?L.current=null:L.current=Ee[ce[0].row][ce[0].col][$]===te?null:te);const fe=L.current,ye=C.current==="nurikabe";if(!ce.some(Nt=>Ee[Nt.row][Nt.col][$]!==fe||ye&&fe&&Ee[Nt.row][Nt.col].mark==="dot"))return Ee;const yt=Ut(Ee);for(const Nt of ce)yt[Nt.row][Nt.col][$]=fe,ye&&fe&&(yt[Nt.row][Nt.col].mark=null);return yt});return}if(f==="cross"){s($=>{I.current||(I.current=!0,g.current.push(Ni($)),g.current.length>xi&&g.current.shift(),_.current=[],E.current=!$[ce[0].row][ce[0].col].crossed);const de=ce.filter(ye=>!$[ye.row][ye.col].value&&!$[ye.row][ye.col].fixedValue&&!$[ye.row][ye.col].mark);if(!de.some(ye=>$[ye.row][ye.col].crossed!==E.current))return $;const fe=Ut($);for(const ye of de)fe[ye.row][ye.col].crossed=E.current;return fe});return}if(f==="mark"&&ne!==null){s($=>{q.current||(q.current=!0,g.current.push(Ni($)),g.current.length>xi&&g.current.shift(),_.current=[],X.current=$[ce[0].row][ce[0].col].mark===ne?null:ne);const de=X.current,Ee=ce.filter(Ne=>!$[Ne.row][Ne.col].crossed&&!$[Ne.row][Ne.col].value&&!$[Ne.row][Ne.col].fixedValue&&$[Ne.row][Ne.col].notes.length===0);if(!Ee.some(Ne=>$[Ne.row][Ne.col].mark!==de))return $;const ye=Ut($);for(const Ne of Ee)ye[Ne.row][Ne.col].mark=de;return ye});return}if(f==="border"){s($=>{if(!P.current){P.current=Ut($),g.current.push(Ni($)),g.current.length>xi&&g.current.shift(),_.current=[];const Ee=P.current[ce[0].row][ce[0].col];F.current=Ee.borders.some((fe,ye)=>fe>0&&Ee.fixedBorders[ye]===0)}const de=P.current;if(F.current){const Ee=Ut(de);for(const fe of ce){const ye=Ee[fe.row][fe.col].fixedBorders;Ee[fe.row][fe.col].borders=[...ye]}return Ee}else return Tv(de,ce)});return}}},[f,te,ne]),_e=k.useCallback(ce=>{if((f==="color"||f==="fixedColor")&&te!==null){U.current=!1;return}if(f==="cross"){I.current=!1;return}if(f==="mark"&&ne!==null){q.current=!1;return}if(f==="border"){P.current=null;return}s($=>{var Ee;const de=$.map(fe=>fe.map(ye=>({...ye})));for(const fe of ce)(Ee=de[fe.row])!=null&&Ee[fe.col]&&(de[fe.row][fe.col].selected=!0);return de}),c(ce)},[f,te,ne,b]),se=k.useCallback(ce=>{l.length!==0&&b($=>{const de=Ut($),fe=l.every(Ne=>de[Ne.row][Ne.col].value===ce)?null:ce;for(const Ne of l)de[Ne.row][Ne.col].value=fe;const ye=x.current;if(fe!==null&&ye.length>0){const Ne=de.length,yt=de[0].length,Nt=CP(l,ye,Ne,yt);for(const Gn of Nt){const On=de[Gn.row][Gn.col];!On.value&&!On.fixedValue&&!On.mark&&(On.crossed=!0)}}return de})},[l,b]),Y=k.useCallback(ce=>{l.length!==0&&b($=>{const de=Ut($),Ee=l.every(fe=>de[fe.row][fe.col].color===ce);for(const fe of l)de[fe.row][fe.col].color=Ee?null:ce;return de})},[l,b]),Z=k.useCallback(()=>{if(l.length===0)return;const ce=f==="fixedColor"?"fixedColor":"color";b($=>{const de=Ut($);for(const Ee of l)de[Ee.row][Ee.col][ce]=null;return de})},[l,f,b]),D=k.useCallback(ce=>{l.length!==0&&b($=>{const de=Ut($),Ee=l.every(fe=>de[fe.row][fe.col].fixedValue===ce);for(const fe of l)de[fe.row][fe.col].fixedValue=Ee?null:ce;return de})},[l,b]),K=k.useCallback(ce=>{l.length!==0&&b($=>{const de=Ut($),Ee=l.every(fe=>de[fe.row][fe.col].fixedColor===ce);for(const fe of l)de[fe.row][fe.col].fixedColor=Ee?null:ce;return de})},[l,b]),Ae=k.useCallback(ce=>{l.length!==0&&b($=>{const de=Ut($);for(const Ee of l){const fe=de[Ee.row][Ee.col],ye=fe.notes.indexOf(ce);ye!==-1?fe.notes.splice(ye,1):fe.notes.length<kP&&fe.notes.push(ce)}return de})},[l,b]),xe=k.useCallback((ce,$)=>{if(l.length===0)return;const de=l[0];b(Ee=>{var Ne,yt;const fe=Ut(Ee),ye=fe[de.row][de.col];return((Ne=ye.label)==null?void 0:Ne.text)===ce&&((yt=ye.label)==null?void 0:yt.align)===$?ye.label=null:ye.label={text:ce,align:$},fe})},[l,b]),Ue=k.useCallback(()=>{l.length!==0&&b(ce=>{const $=Ut(ce);for(const de of l)$[de.row][de.col].label=null;return $})},[l,b]),qe=k.useCallback(()=>{l.length!==0&&b(ce=>{const $=Ut(ce),de=l.filter(fe=>!$[fe.row][fe.col].value&&!$[fe.row][fe.col].fixedValue&&!$[fe.row][fe.col].mark);if(de.length===0)return ce;const Ee=de.every(fe=>$[fe.row][fe.col].crossed);for(const fe of de)$[fe.row][fe.col].crossed=!Ee;return $})},[l,b]),Ye=k.useCallback(ce=>{l.length!==0&&b($=>{const de=Ut($),Ee=l.filter(ye=>!de[ye.row][ye.col].crossed&&!de[ye.row][ye.col].value&&!de[ye.row][ye.col].fixedValue&&de[ye.row][ye.col].notes.length===0);if(Ee.length===0)return $;const fe=Ee.every(ye=>de[ye.row][ye.col].mark===ce);for(const ye of Ee)de[ye.row][ye.col].mark=fe?null:ce;return de})},[l,b]),ze=k.useCallback(()=>{l.length!==0&&b(ce=>{const $=Ut(ce);for(const de of l)$[de.row][de.col].mark=null;return $})},[l,b]),tt=k.useCallback(ce=>{l.length!==0&&b($=>{const de=Ut($),Ee=l.every(fe=>de[fe.row][fe.col].image===ce);for(const fe of l)de[fe.row][fe.col].image=Ee?null:ce;return de})},[l,b]),At=k.useCallback(()=>{l.length!==0&&b(ce=>{const $=Ut(ce);for(const de of l)$[de.row][de.col].image=null;return $})},[l,b]),Vn=k.useCallback(()=>{l.length!==0&&b(ce=>{const $=Ut(ce);for(const de of l){const Ee=$[de.row][de.col];Ee.value=null,Ee.notes=[],Ee.color=null,Ee.crossed=!1,Ee.mark=null,Ee.borders=[...Ee.fixedBorders]}return $})},[l,b]),en=k.useCallback(()=>{l.length!==0&&b(ce=>{if(l.some(de=>{const Ee=ce[de.row][de.col];return Ee.borders.some((fe,ye)=>fe>0&&Ee.fixedBorders[ye]===0)})){const de=Ut(ce);for(const Ee of l){const fe=de[Ee.row][Ee.col].fixedBorders;de[Ee.row][Ee.col].borders=[...fe]}return de}else return Tv(ce,l)})},[l,b]),tn=k.useCallback((ce,$)=>{g.current=[],s(cf(ce,$)),c([])},[]);return{grid:t,setGrid:s,setGridWithUndo:b,selection:l,setSelection:c,inputMode:f,setInputMode:V,activeColor:te,setActiveColor:le,activeMark:ne,setActiveMark:ie,clearSelection:J,commitSelection:_e,onDragChange:Fe,applyValue:se,applyColor:Y,eraseColor:Z,applyFixedValue:D,applyFixedColor:K,addNote:Ae,applyLabel:xe,removeLabel:Ue,toggleCross:qe,toggleMark:Ye,eraseMark:ze,applyImage:tt,removeImage:At,clearValues:Vn,applyBorders:en,resetGrid:tn,setAutoCrossRules:A,setForcedInputLayout:O,undo:R,redo:ve}}function RP(n){return n.startsWith("Digit")?n.charAt(5):n.startsWith("Key")?n.charAt(3).toUpperCase():null}function AP(n){return n.key.length===1&&!n.ctrlKey&&!n.altKey&&!n.metaKey?n.key.toUpperCase():null}function kE(n){const e=k.useRef(null);k.useEffect(()=>{n.inputMode!=="fixedDouble"&&(e.current=null)},[n.inputMode]),k.useEffect(()=>{const t=s=>{var l,c,f,p,g,_,E,I,P;if(s.target.tagName==="INPUT")return;if((s.ctrlKey||s.metaKey)&&s.key==="z"){s.preventDefault(),n.undo();return}if((s.ctrlKey||s.metaKey)&&s.key==="y"){s.preventDefault(),n.redo();return}if(s.key==="Delete"||s.key==="Backspace"){s.preventDefault(),n.clearValues();return}if(s.key==="Enter"){s.preventDefault(),(l=n.onEnter)==null||l.call(n);return}if(!s.shiftKey&&!s.ctrlKey&&!s.altKey&&!s.metaKey&&n.hasSelection===!1&&n.onInputModeChange){const F={N:"normal",C:"color",X:"cross",B:"border",M:"mark"},U=s.key.toUpperCase();if(U in F){s.preventDefault(),n.onInputModeChange(F[U]);return}}const o=AP(s);if(o){if(s.preventDefault(),s.shiftKey){const F=RP(s.code);F&&n.addNote(F);return}switch(n.inputMode){case"normal":n.applyValue(o);break;case"color":o==="0"?((c=n.onActiveColorChange)==null||c.call(n,o),(f=n.eraseColor)==null||f.call(n)):o>="1"&&o<="9"&&((p=n.onActiveColorChange)==null||p.call(n,o),n.applyColor(o));break;case"fixed":n.applyFixedValue(o);break;case"fixedDouble":o>="0"&&o<="9"&&(e.current===null?e.current=o:(n.applyFixedValue(e.current+o),e.current=null));break;case"fixedColor":o==="0"?((g=n.onActiveColorChange)==null||g.call(n,o),(_=n.eraseColor)==null||_.call(n)):o>="1"&&o<="9"&&((E=n.onActiveColorChange)==null||E.call(n,o),n.applyFixedColor(o));break;case"note":n.addNote(o);break;case"mark":{const F=["circle","square","triangle","diamond","pentagon","hexagon","dot"],U=parseInt(o)-1;if(U>=0&&U<F.length){const L=F[U];(I=n.onActiveMarkChange)==null||I.call(n,L),(P=n.toggleMark)==null||P.call(n,L)}break}}}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[n.inputMode,n.applyValue,n.applyColor,n.applyFixedValue,n.applyFixedColor,n.addNote,n.clearValues,n.eraseColor,n.undo,n.redo,n.onEnter,n.onActiveColorChange,n.onActiveMarkChange,n.toggleMark,n.hasSelection,n.onInputModeChange])}function PP(n){const e=k.useRef(!1),t=k.useRef(!1),s=k.useRef([]),o=k.useRef([]),l=k.useRef(!1),c=k.useRef(null),f=k.useRef(n);f.current=n;const p=(P,F)=>{var te;let U=document.elementFromPoint(P,F);if(!U)return null;for(;U&&U.tagName!=="TD";)U=U.parentElement;if(!U||U.tagName!=="TD")return null;const L=U,q=(te=L.parentElement)==null?void 0:te.rowIndex,X=L.cellIndex;return q==null||X==null||q<0||X<0?null:{row:q,col:X}},g=k.useCallback(P=>{var X;let F=P.target;for(;F&&F.tagName!=="TD";)F=F.parentElement;if(!F||F.tagName!=="TD")return null;const U=F,L=(X=U.parentElement)==null?void 0:X.rowIndex,q=U.cellIndex;return L==null||q==null||L<0||q<0?null:{row:L,col:q}},[]),_=k.useCallback(P=>{if(P.target.closest(".toolbar"))return;if(P.button===2&&f.current.onRightClickCell){P.preventDefault();const U=g(P);U&&(t.current=!0,o.current=[U],f.current.onRightClickCell(U));return}if(P.button!==0)return;P.preventDefault(),l.current=P.ctrlKey,P.ctrlKey||f.current.onSelectionStart();const F=g(P);F&&(e.current=!0,s.current=[F],f.current.onSelectionChange([F]))},[g]),E=k.useCallback(P=>{var U,L;if(t.current){P.preventDefault();const q=g(P);if(!q||o.current.some(X=>X.row===q.row&&X.col===q.col))return;o.current=[...o.current,q],(L=(U=f.current).onRightClickCell)==null||L.call(U,q);return}if(!e.current)return;P.preventDefault();const F=g(P);F&&(s.current.some(q=>q.row===F.row&&q.col===F.col)||(s.current=[...s.current,F],f.current.onSelectionChange(s.current)))},[g]),I=k.useCallback(()=>{if(t.current){t.current=!1,o.current=[];return}e.current&&(e.current=!1,f.current.onSelectionEnd(s.current))},[]);return k.useEffect(()=>{const P=c.current;if(!P)return;const F=L=>{if(L.target.closest(".toolbar")||f.current.isPinching||L.touches.length>=2)return;L.preventDefault(),f.current.onSelectionStart();const q=L.touches[0],X=p(q.clientX,q.clientY);X&&(e.current=!0,s.current=[X],f.current.onSelectionChange([X]))},U=L=>{if(!e.current||f.current.isPinching||L.touches.length>=2)return;L.preventDefault();const q=L.touches[0],X=p(q.clientX,q.clientY);X&&(s.current.some(te=>te.row===X.row&&te.col===X.col)||(s.current=[...s.current,X],f.current.onSelectionChange(s.current)))};return P.addEventListener("touchstart",F,{passive:!1}),P.addEventListener("touchmove",U,{passive:!1}),()=>{P.removeEventListener("touchstart",F),P.removeEventListener("touchmove",U)}},[]),{tableRef:c,handleCellMouseDown:_,handleCellMouseMove:E,handleMouseUp:I,ctrlHeld:l}}const xP={circle:"M25,8 a17,17 0 1,0 0.001,0 Z",square:"M8,8 h34 v34 h-34 Z",triangle:"M25,6 L44,42 L6,42 Z",diamond:"M25,6 L44,25 L25,44 L6,25 Z",pentagon:"M25,6 L43,20 L36,42 L14,42 L7,20 Z",hexagon:"M25,6 L41,15.5 L41,34.5 L25,44 L9,34.5 L9,15.5 Z",dot:"M25,25 m-6,0 a6,6 0 1,0 12,0 a6,6 0 1,0 -12,0 Z"},NP=pf.memo(function({data:e,beingSelected:t,debug:s,row:o,col:l}){const{selected:c,value:f,notes:p,fixedValue:g,fixedColor:_,color:E,borders:I,fixedBorders:P,label:F,crossed:U,mark:L,image:q}=e;let X="grid-cell cell-enabled";c&&(X+=" cell-selected"),t&&(X+=" cell-being-selected");let te="cell-inner";_?te+=` color${_}`:E&&(te+=` color${E}`),g&&(te+=" cell-fixed-value");const le=C=>I[C]>0?P[C]>0?3:2:0,ne={borderTopWidth:`${le(0)}px`,borderRightWidth:`${le(1)}px`,borderBottomWidth:`${le(2)}px`,borderLeftWidth:`${le(3)}px`},ie=g||f||"",x=p.length>0;return T.jsx("td",{className:X,children:T.jsxs("div",{className:te,style:ne,children:[q&&T.jsx("img",{src:q,className:"cell-image",alt:"",draggable:!1}),U&&T.jsx("span",{className:"cell-cross",children:""}),L&&T.jsx("span",{className:"cell-mark","aria-hidden":"true",children:T.jsx("svg",{viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:T.jsx("path",{d:xP[L],fill:L==="dot"?"currentColor":"none",stroke:"currentColor",strokeWidth:"2.5"})})}),x&&!ie&&!U?T.jsx("div",{className:"notes-grid notranslate",children:p.map((C,A)=>T.jsx("span",{className:"note-item",children:C},A))}):!U&&ie&&T.jsx("span",{className:"cell-value notranslate",children:ie}),F&&T.jsx("span",{className:`cell-label cell-label-${F.align}`,children:F.text}),s&&T.jsxs("span",{className:"debug-overlay",children:[o,",",l]})]})})});function RE({grid:n,selection:e,debug:t,inputMode:s,activeColor:o,activeMark:l,clearSelection:c,commitSelection:f,onDragChange:p,onRightClickCell:g,forcedInputLayout:_,isPinching:E}){const I=k.useRef([]),[,P]=k.useState(0),F=(s==="color"||s==="fixedColor")&&o!==null,U=s==="mark"&&l!=null,L=s==="cross"||s==="border"||F||U,q=PP({onSelectionStart:()=>{c(),I.current=[]},onSelectionChange:X=>{I.current=X,L?p==null||p(X):P(te=>te+1)},onSelectionEnd:X=>{I.current=[],f(X)},onRightClickCell:g,isPinching:E});return k.useEffect(()=>{const X=()=>q.handleMouseUp();return window.addEventListener("mouseup",X),window.addEventListener("touchend",X),()=>{window.removeEventListener("mouseup",X),window.removeEventListener("touchend",X)}},[q.handleMouseUp]),T.jsx("div",{className:"grid-container",children:T.jsx("table",{className:"puzzle-grid",ref:q.tableRef,onMouseDown:q.handleCellMouseDown,onMouseMove:q.handleCellMouseMove,onContextMenu:_?X=>X.preventDefault():void 0,children:T.jsx("tbody",{children:n.map((X,te)=>T.jsx("tr",{children:X.map((le,ne)=>T.jsx(NP,{data:le,row:te,col:ne,debug:t,beingSelected:!L&&I.current.some(ie=>ie.row===te&&ie.col===ne)},ne))},te))})})})}const bP=[{mode:"normal",label:"Normal (N)"},{mode:"note",label:"Note (Shift+Key)"},{mode:"color",label:"Color (C)"},{mode:"cross",label:"X Cross (X)"},{mode:"border",label:"Border (B)"},{mode:"mark",label:"Marks (M)"}],DP=["circle","square","triangle","diamond","pentagon","hexagon","dot"],VP={circle:"",square:"",triangle:"",diamond:"",pentagon:"",hexagon:"",dot:""},OP=[{mode:"fixed",label:"Fixed Normal"},{mode:"fixedDouble",label:"Fixed 2-Digit"},{mode:"fixedColor",label:"Fixed Color"},{mode:"label",label:"Label"}];function AE({inputMode:n,onInputModeChange:e,onColorSelect:t,onColorErase:s,activeColor:o=null,onActiveColorChange:l,onLabelApply:c,onLabelRemove:f,onUndo:p,onRedo:g,onErase:_,isEditor:E=!1,theme:I,onThemeToggle:P,imageLibrary:F=[],selectedImageIndex:U=null,onImageSelect:L,onImageApply:q,onImageRemove:X,onImageImport:te,activeMark:le=null,onActiveMarkChange:ne,onMarkSelect:ie,onMarkErase:x,onSubmit:C,forcedInputLayout:A}){const O=n==="color"||n==="fixedColor",V=n==="label",[b,R]=k.useState(""),[ve,J]=k.useState("top"),Fe=_e=>T.jsx("button",{className:`tb-btn ${n===_e.mode?"selected":""}`,onClick:()=>e(n===_e.mode?"normal":_e.mode),children:_e.label},_e.mode);return T.jsxs("div",{className:"toolbar",children:[!A&&T.jsxs("div",{className:"tb-section",children:[T.jsx("div",{className:"tb-section-title",children:"Input Mode"}),bP.map(Fe)]}),T.jsxs("div",{className:"tb-section",children:[T.jsx("div",{className:"tb-section-title",children:"Actions"}),T.jsx("button",{className:"tb-btn",onClick:_,title:"Delete/Backspace",children:"Erase (Del)"}),T.jsx("button",{className:"tb-btn",onClick:p,title:"Ctrl+Z",children:"Undo (Ctrl+Z)"}),T.jsx("button",{className:"tb-btn",onClick:g,title:"Ctrl+Y",children:"Redo (Ctrl+Y)"})]}),O&&!A&&T.jsxs("div",{className:"tb-section",children:[T.jsx("div",{className:"tb-section-title",children:"Colors"}),T.jsxs("div",{className:"tb-palette",children:[T.jsx("button",{className:`palette-swatch color-erase ${o==="0"?"active-color":""}`,onClick:()=>{o==="0"?l==null||l(null):(l==null||l("0"),s==null||s())},title:`No color (erase)${o==="0"?"  drag to erase":""}`,children:""}),Array.from({length:9},(_e,se)=>se+1).map(_e=>T.jsx("button",{className:`palette-swatch color${_e} ${o===String(_e)?"active-color":""}`,onClick:()=>{const se=String(_e);o===se?l==null||l(null):(l==null||l(se),t==null||t(se))},title:`Color ${_e}${o===String(_e)?" (active  drag to paint)":""}`,children:_e},_e))]}),o!==null&&T.jsx("button",{className:"tb-btn",onClick:()=>l==null?void 0:l(null),children:"Deselect Color"})]}),n==="mark"&&!A&&T.jsxs("div",{className:"tb-section",children:[T.jsx("div",{className:"tb-section-title",children:"Shape"}),T.jsxs("div",{className:"tb-mark-palette",children:[T.jsx("button",{className:`mark-swatch mark-erase ${le===null?"active-mark":""}`,onClick:()=>{x==null||x(),ne==null||ne(null)},title:"Erase mark",children:""}),DP.map(_e=>T.jsx("button",{className:`mark-swatch ${le===_e?"active-mark":""}`,onClick:()=>{le===_e?ne==null||ne(null):(ne==null||ne(_e),ie==null||ie(_e))},title:_e,children:VP[_e]},_e))]}),le!==null&&T.jsx("button",{className:"tb-btn",onClick:()=>ne==null?void 0:ne(null),children:"Deselect Shape"})]}),E&&T.jsxs("div",{className:"tb-section",children:[T.jsx("div",{className:"tb-section-title",children:"Editor"}),OP.map(Fe)]}),E&&T.jsxs("div",{className:"tb-section",children:[T.jsx("div",{className:"tb-section-title",children:"Images"}),F.length>0&&T.jsx("div",{className:"tb-image-grid",children:F.map((_e,se)=>T.jsx("button",{className:`tb-image-thumb ${U===se?"selected":""}`,onClick:()=>L==null?void 0:L(U===se?null:se),title:`Image ${se+1}`,children:T.jsx("img",{src:_e,alt:"",draggable:!1})},se))}),T.jsx("button",{className:"tb-btn",onClick:te,children:"Import Image"}),U!==null&&T.jsx("button",{className:"tb-btn",onClick:q,children:"Apply to Cells"}),T.jsx("button",{className:"tb-btn",onClick:X,children:"Remove Image"})]}),V&&T.jsxs("div",{className:"tb-section",children:[T.jsx("div",{className:"tb-section-title",children:"Label"}),T.jsx("input",{className:"tb-input",value:b,onChange:_e=>R(_e.target.value),placeholder:"Label text..."}),T.jsxs("div",{className:"tb-row",children:[T.jsx("button",{className:`tb-btn-sm ${ve==="top"?"selected":""}`,onClick:()=>J("top"),children:"Top"}),T.jsx("button",{className:`tb-btn-sm ${ve==="bottom"?"selected":""}`,onClick:()=>J("bottom"),children:"Bottom"})]}),T.jsx("button",{className:"tb-btn",onClick:()=>{b.trim()&&(c==null||c(b.trim(),ve))},children:"Apply"}),T.jsx("button",{className:"tb-btn",onClick:()=>f==null?void 0:f(),children:"Remove"})]}),T.jsxs("div",{className:"tb-hint",children:[n==="fixed"&&"Type any key for fixed clue.",n==="fixedDouble"&&"Type two digits for a 2-digit fixed clue.",n==="fixedColor"&&(o!==null?"Drag to paint. Click swatch again to deselect.":"Press 0-9 or click swatch. Click to lock color for drag painting."),n==="label"&&"Enter text, pick alignment, Apply.",A&&n!=="fixed"&&n!=="fixedDouble"&&n!=="fixedColor"&&n!=="label"&&T.jsxs(T.Fragment,{children:[T.jsx("div",{children:"Left-click: black  dot  clear"}),T.jsx("div",{children:"Right-click: toggle dot"})]}),!A&&n==="normal"&&"Type any key to set value. Same key to remove.",!A&&n==="color"&&(o!==null?"Drag to paint. Click swatch again to deselect.":"Press 0-9 or click swatch. Click to lock color for drag painting."),!A&&n==="note"&&"Type to add/remove notes (max 16).",!A&&n==="cross"&&"Click/drag to toggle X marks.",!A&&n==="border"&&"Drag to create/remove borders.",!A&&n==="mark"&&(le!==null?"Drag to paint mark. Click swatch again to deselect.":"Press 1-6 or click swatch to select shape.")]}),T.jsx("div",{className:"tb-spacer"}),C&&T.jsx("div",{className:"tb-submit",children:T.jsx("button",{className:"tb-submit-btn",onClick:C,children:"Submit"})}),T.jsx("div",{className:"tb-theme-toggle",children:T.jsx("button",{className:"tb-btn",onClick:P,title:"Toggle theme",children:I==="light"?" Dark":" Light"})})]})}function Iv(){return/googtrans=\/en\/[^;]/.test(document.cookie)}function df({title:n,author:e,gridSize:t,difficulty:s,rulesList:o,cluesList:l,backLink:c=!0,headerRight:f,children:p,struckRuleWords:g,onStruckRuleWordsChange:_,struckClueWords:E,onStruckClueWordsChange:I}){const[P,F]=k.useState(new Set),[U,L]=k.useState(new Set),[q,X]=k.useState(!0),[te,le]=k.useState(!0),[ne,ie]=k.useState(Iv);k.useEffect(()=>{const ve=setInterval(()=>ie(Iv()),1e3);return()=>clearInterval(ve)},[]);const x=g??P,C=_??F,A=E??U,O=I??L,V=(ve,J)=>{ve(Fe=>{const _e=new Set(Fe);return _e.has(J)?_e.delete(J):_e.add(J),_e})},b=(ve,J,Fe,_e)=>{const se=ve.split(/(\s+)/).map((Z,D)=>/^\s+$/.test(Z)?null:`${J}:${D}`).filter(Boolean),Y=se.every(Z=>Fe.has(Z));_e(Z=>{const D=new Set(Z);for(const K of se)Y?D.delete(K):D.add(K);return D})},R=(ve,J,Fe,_e)=>ve.split(/(\s+)/).map((se,Y)=>{if(/^\s+$/.test(se))return se;const Z=`${J}:${Y}`,D=Fe.has(Z);return T.jsx("span",{className:`info-word ${D?"info-word-struck":""}`,onClick:K=>{K.stopPropagation(),V(_e,Z)},children:se},Y)});return T.jsxs("div",{className:"info-panel",children:[(c||f)&&T.jsxs("div",{className:"info-header-row",children:[c&&T.jsx(Di,{to:"/",className:"info-back-link",children:" Puzzles"}),f&&T.jsx("div",{className:"info-header-right",children:f})]}),n&&T.jsxs("div",{className:"info-section",children:[T.jsx("h2",{className:"info-title",children:n}),e&&T.jsxs("p",{className:"info-meta",children:["by ",e]}),t&&T.jsxs("p",{className:"info-meta",children:[t.rows,"",t.cols]}),s&&T.jsxs("p",{className:"info-meta",children:["Difficulty: ",s]})]}),o&&o.length>0&&T.jsxs("div",{className:"info-section",children:[T.jsxs("div",{className:"info-section-title info-collapsible",onClick:()=>X(ve=>!ve),children:[T.jsx("span",{className:`info-chevron ${q?"open":""}`,children:""}),"Rules"]}),q&&T.jsx("ul",{className:"info-list",children:o.map((ve,J)=>T.jsx("li",{className:"info-list-text info-list-bullet",onClick:ne?void 0:()=>b(ve,J,x,C),children:ne?ve:R(ve,J,x,C)},J))})]}),l&&l.length>0&&T.jsxs("div",{className:"info-section",children:[T.jsxs("div",{className:"info-section-title info-collapsible",onClick:()=>le(ve=>!ve),children:[T.jsx("span",{className:`info-chevron ${te?"open":""}`,children:""}),"Clues"]}),te&&T.jsx("ul",{className:"info-list",children:l.map((ve,J)=>T.jsx("li",{className:"info-list-text info-list-bullet",onClick:ne?void 0:()=>b(ve,J,A,O),children:ne?ve:R(ve,J,A,O)},J))})]}),p&&T.jsx("div",{className:"info-section",children:p})]})}function PE({children:n,defaultWidth:e=400,storageKey:t="4color:leftWidth"}){const[s,o]=k.useState(()=>{const g=localStorage.getItem(t);return g?Number(g):e}),l=k.useRef(!1),c=k.useRef(0),f=k.useRef(0),p=k.useCallback(g=>{g.preventDefault(),l.current=!0,c.current=g.clientX,f.current=s,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[s]);return k.useEffect(()=>{const g=E=>{if(!l.current)return;const I=Math.max(180,Math.min(800,f.current+E.clientX-c.current));o(I)},_=()=>{l.current&&(l.current=!1,document.body.style.cursor="",document.body.style.userSelect="",localStorage.setItem(t,String(s)))};return window.addEventListener("mousemove",g),window.addEventListener("mouseup",_),()=>{window.removeEventListener("mousemove",g),window.removeEventListener("mouseup",_)}},[s,t]),k.useEffect(()=>{const g=()=>{const _=Math.min(800,window.innerWidth*.4);s>_&&o(_)};return window.addEventListener("resize",g),g(),()=>window.removeEventListener("resize",g)},[s]),T.jsxs("div",{className:"panel-left-wrapper",children:[T.jsx("aside",{className:"panel-left",style:{width:s},children:n}),T.jsx("div",{className:`panel-left-handle ${l.current?"dragging":""}`,onMouseDown:p})]})}const Sv=.3,Cv=3,LP=.002,kv=50,Rv=2;function xE({rows:n,cols:e}){const t=k.useRef(null),[s,o]=k.useState(1),[l,c]=k.useState(1),[f,p]=k.useState(!1),[g,_]=k.useState({x:0,y:0}),E=k.useRef(0),I=k.useRef(1),P=k.useRef({x:0,y:0}),F=k.useRef({x:0,y:0}),U=k.useRef(!1),L=k.useRef(!1),q=e*kv+Rv,X=n*kv+Rv;k.useEffect(()=>{const A=t.current;if(!A||n===0||e===0)return;const O=()=>{const b=A.clientWidth,R=A.clientHeight;if(b===0||R===0)return;const ve=Math.min(b/q,R/X,1.5)*.92;o(Math.max(.1,ve))},V=new ResizeObserver(O);return V.observe(A),O(),()=>V.disconnect()},[n,e,q,X]),k.useEffect(()=>{c(1),_({x:0,y:0})},[n,e]),k.useEffect(()=>{const A=O=>{const V=t.current;if(!V||!V.contains(O.target))return;O.preventDefault(),O.stopPropagation();const b=le.current,R=-O.deltaY*LP,ve=Math.min(Cv,Math.max(Sv,b+R));if(ve===b)return;const J=V.getBoundingClientRect(),Fe=O.clientX-J.left-J.width/2,_e=O.clientY-J.top-J.height/2,se=te.current*b,Z=te.current*ve/se,D=ne.current;_({x:Fe-Z*(Fe-D.x),y:_e-Z*(_e-D.y)}),c(ve)};return window.addEventListener("wheel",A,{passive:!1,capture:!0}),()=>window.removeEventListener("wheel",A,{capture:!0})},[]),k.useEffect(()=>{const A=b=>{if(b.button!==1)return;const R=t.current;!R||!R.contains(b.target)||(b.preventDefault(),L.current=!0,P.current={x:b.clientX,y:b.clientY},F.current={...ne.current})},O=b=>{if(!L.current)return;b.preventDefault();const R=b.clientX-P.current.x,ve=b.clientY-P.current.y;_({x:F.current.x+R,y:F.current.y+ve})},V=b=>{b.button===1&&(L.current=!1)};return document.addEventListener("mousedown",A),document.addEventListener("mousemove",O),document.addEventListener("mouseup",V),()=>{document.removeEventListener("mousedown",A),document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",V)}},[]),k.useEffect(()=>{const A=(R,ve)=>Math.hypot(ve.clientX-R.clientX,ve.clientY-R.clientY),O=R=>{var J,Fe;const ve=t.current;if(!(!ve||!ve.contains(R.target))){if(R.touches.length===2)p(!0),E.current=A(R.touches[0],R.touches[1]),I.current=le.current;else if(R.touches.length===1){const _e=!!((Fe=(J=R.target).closest)!=null&&Fe.call(J,".puzzle-grid"));(le.current>1.05||!_e)&&(U.current=!0,P.current={x:R.touches[0].clientX,y:R.touches[0].clientY},F.current={...ne.current})}}},V=R=>{if(R.touches.length===2){R.preventDefault();const J=A(R.touches[0],R.touches[1])/E.current,Fe=Math.min(Cv,Math.max(Sv,I.current*J));c(Fe)}else if(R.touches.length===1&&U.current){R.preventDefault();const ve=R.touches[0].clientX-P.current.x,J=R.touches[0].clientY-P.current.y;_({x:F.current.x+ve,y:F.current.y+J})}},b=R=>{R.touches.length<2&&setTimeout(()=>p(!1),50),R.touches.length===0&&(U.current=!1)};return document.addEventListener("touchstart",O,{passive:!0}),document.addEventListener("touchmove",V,{passive:!1}),document.addEventListener("touchend",b,{passive:!0}),()=>{document.removeEventListener("touchstart",O),document.removeEventListener("touchmove",V),document.removeEventListener("touchend",b)}},[]);const te=k.useRef(s);te.current=s;const le=k.useRef(l);le.current=l;const ne=k.useRef(g);ne.current=g;const ie=s*l,x=k.useCallback(()=>{c(1),_({x:0,y:0})},[]),C={transform:`translate(${g.x}px, ${g.y}px) scale(${ie})`,transformOrigin:"center center"};return{containerRef:t,scale:ie,zoomLevel:l,style:C,isPinching:f,resetZoom:x}}function Av(){const{puzzleId:n}=Uv();Sc();const[e]=Hv(),t=e.get("debug")==="true",s=Number(e.get("rows"))||10,o=Number(e.get("cols"))||10,{theme:l,toggle:c}=mp(),[f,p]=k.useState(s),[g,_]=k.useState(o),[E,I]=k.useState(""),[P,F]=k.useState(""),[U,L]=k.useState(""),[q,X]=k.useState([]),[te,le]=k.useState([]),[ne,ie]=k.useState([]),[x,C]=k.useState(""),[A,O]=k.useState(""),[V,b]=k.useState([]),[R,ve]=k.useState(null),[J,Fe]=k.useState([]),[_e,se]=k.useState([]),[Y,Z]=k.useState(""),[D,K]=k.useState(""),[Ae,xe]=k.useState(-1),Ue=k.useRef(null),[qe,Ye]=k.useState(n||""),[ze,tt]=k.useState(!1),[At,Vn]=k.useState(""),{modalProps:en,showAlert:tn,showConfirm:ce}=yp(),$=CE(f,g),de=xE({rows:f,cols:g}),Ee=k.useRef(null),fe=k.useRef(null);k.useEffect(()=>{pp().then(Q=>{const ue=new Set;for(const me of Q)for(const De of me.tags||[])ue.add(De);Fe([...ue].sort())})},[]),k.useEffect(()=>{n&&IE(n).then(Q=>{var ue;if(Q){I(Q.title),F(Q.author),p(Q.gridSize.rows),_(Q.gridSize.cols),L(Q.difficulty||""),X(Q.tags||[]),se(Q.autoCrossRules||[]),Z(Q.forcedInputLayout||""),le(Q.rules||[]),ie(Q.clues||[]),$.setGrid(hf(Q));const me=new Set;for(const De of Q.cells)if(De.image){const ut=((ue=Q.images)==null?void 0:ue[De.image])??De.image;me.add(ut)}b(Array.from(me))}})},[n]),k.useEffect(()=>{$.setAutoCrossRules(_e)},[_e]),k.useEffect(()=>{$.setForcedInputLayout(Y),Y==="nurikabe"&&($.setInputMode("color"),$.setActiveColor("9"))},[Y]),kE({inputMode:$.inputMode,applyValue:$.applyValue,applyColor:$.applyColor,applyFixedValue:$.applyFixedValue,applyFixedColor:$.applyFixedColor,addNote:$.addNote,clearValues:$.clearValues,eraseColor:$.eraseColor,undo:$.undo,redo:$.redo,onActiveColorChange:$.setActiveColor,onActiveMarkChange:$.setActiveMark,toggleMark:$.toggleMark,hasSelection:$.selection.length>0,onInputModeChange:$.setInputMode,onEnter:()=>{R!==null&&V[R]&&$.applyImage(V[R])}});const ye=k.useMemo(()=>{const Q=D.toLowerCase().trim();return Q?J.filter(ue=>ue.toLowerCase().includes(Q)&&!q.includes(ue)):[]},[D,J,q]),Ne=Q=>{var me;const ue=Q.trim().toLowerCase();ue&&!q.includes(ue)&&X(De=>[...De,ue]),K(""),xe(-1),(me=Ue.current)==null||me.focus()},yt=Q=>{X(ue=>ue.filter(me=>me!==Q))},Nt=Q=>{Q.key==="Enter"?(Q.preventDefault(),Ae>=0&&ye[Ae]?Ne(ye[Ae]):D.trim()&&Ne(D)):Q.key==="ArrowDown"?(Q.preventDefault(),xe(ue=>Math.min(ue+1,ye.length-1))):Q.key==="ArrowUp"?(Q.preventDefault(),xe(ue=>Math.max(ue-1,-1))):Q.key==="Backspace"&&!D&&q.length>0?yt(q[q.length-1]):Q.key==="Escape"&&(K(""),xe(-1))},Gn=async()=>{if(!U){await tn("Please select a difficulty before saving.");return}const Q=E.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")||"untitled",ue=fP($.grid,{id:Q,title:E||"Untitled",author:P,rules:te,clues:ne,difficulty:U,tags:q,autoCrossRules:_e,forcedInputLayout:Y||void 0});n&&(ue.id=n),Ye(ue.id),pP(ue)},On=async()=>{await ce("Are you sure you want to clear all? This cannot be undone.","Clear All")&&$.resetGrid(f,g)},Tn=async()=>{await ce("Clear all player input? Puzzle layout (fixed values, colors, borders, images, labels) will be kept.","Clear Player Input")&&$.setGrid(Q=>Q.map(ue=>ue.map(me=>({...me,value:null,notes:[],color:me.fixedColor?me.color:null,crossed:!1,mark:null,selected:!1,borders:[...me.fixedBorders]}))))},vr=()=>{$.setGrid(Q=>Q.map(ue=>ue.map(me=>({...me,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...me.fixedBorders]}))))};function Ln(Q){return Q.map(ue=>ue.map(me=>({fv:me.fixedValue,fc:me.fixedColor,fb:me.fixedBorders,l:me.label,i:me.image})))}const Kn=async()=>{const Q=JSON.stringify(Ln($.grid));if(Vn(Q),$.setGrid(ue=>ue.map(me=>me.map(De=>({...De,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...De.fixedBorders]})))),Y==="nurikabe"?($.setInputMode("color"),$.setActiveColor("9")):$.setInputMode("normal"),n){const ue=await TE(n);ue&&(Object.keys(ue.cells).length>0||Object.keys(ue.borders||{}).length>0||Object.keys(ue.colors||{}).length>0)&&$.setGrid(me=>{var ut,Ge,St;const De=me.map(ot=>ot.map(rt=>({...rt})));for(const[ot,rt]of Object.entries(ue.cells)){const[Vt,ct]=ot.split(",").map(Number);(ut=De[Vt])!=null&&ut[ct]&&(De[Vt][ct].value=rt)}if(ue.borders)for(const[ot,rt]of Object.entries(ue.borders)){const[Vt,ct]=ot.split(",").map(Number);(Ge=De[Vt])!=null&&Ge[ct]&&(De[Vt][ct].borders=rt)}if(ue.colors)for(const[ot,rt]of Object.entries(ue.colors)){const[Vt,ct]=ot.split(",").map(Number);(St=De[Vt])!=null&&St[ct]&&(De[Vt][ct].color=rt)}return De})}tt(!0)},ms=()=>{$.setGrid(Q=>Q.map(ue=>ue.map(me=>({...me,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...me.fixedBorders]})))),tt(!1)},Qn=async()=>{const Q=qe||"untitled";if(JSON.stringify(Ln($.grid))!==At&&!await ce("The puzzle definition has changed since entering solution mode. The solution may be invalid. Save anyway?","Definition Changed"))return;const me={},De={},ut={};for(let St=0;St<$.grid.length;St++)for(let ot=0;ot<$.grid[St].length;ot++){const rt=$.grid[St][ot];rt.value&&(me[`${St},${ot}`]=rt.value);const Vt=rt.fixedBorders,ct=rt.borders;(ct[0]!==Vt[0]||ct[1]!==Vt[1]||ct[2]!==Vt[2]||ct[3]!==Vt[3])&&(De[`${St},${ot}`]=ct),rt.color&&!rt.fixedColor&&(ut[`${St},${ot}`]=rt.color)}if(Object.keys(me).length===0&&Object.keys(De).length===0&&Object.keys(ut).length===0){await tn("No solution values, borders, or colors entered.");return}const Ge={id:Q,cells:me};Object.keys(De).length>0&&(Ge.borders=De),Object.keys(ut).length>0&&(Ge.colors=ut),mP(Ge)},Yn=Q=>{var De;const ue=(De=Q.target.files)==null?void 0:De[0];if(!ue)return;if(ue.size>200*1024){tn("Image must be under 200KB.");return}const me=new Image;me.onload=()=>{const Ge=50/Math.max(me.width,me.height),St=Math.round(me.width*Ge),ot=Math.round(me.height*Ge),rt=document.createElement("canvas");rt.width=St,rt.height=ot,rt.getContext("2d").drawImage(me,0,0,St,ot);const ct=rt.toDataURL("image/png");b(gs=>gs.includes(ct)?gs:[...gs,ct]),URL.revokeObjectURL(me.src)},me.src=URL.createObjectURL(ue),Q.target.value=""},[bt,dn]=k.useState(null),[Cn,Pe]=k.useState(""),Ke=k.useRef(null),$e=k.useRef(null),Tt=k.useCallback((Q,ue)=>{Ke.current={type:Q,index:ue}},[]),Kt=k.useCallback((Q,ue)=>{Q.preventDefault(),$e.current=ue},[]),nn=k.useCallback(Q=>{if(!Ke.current||$e.current===null||Ke.current.type!==Q)return;const ue=Ke.current.index,me=$e.current;if(ue===me)return;(Q==="rule"?le:ie)(ut=>{const Ge=[...ut],[St]=Ge.splice(ue,1);return Ge.splice(me,0,St),Ge}),Ke.current=null,$e.current=null},[]),rn=k.useCallback((Q,ue,me)=>{dn({type:Q,index:ue}),Pe(me)},[]),lt=k.useCallback(()=>{if(!bt)return;const Q=Cn.trim(),ue=bt.type==="rule"?le:ie;ue(Q?me=>me.map((De,ut)=>ut===bt.index?Q:De):me=>me.filter((De,ut)=>ut!==bt.index)),dn(null),Pe("")},[bt,Cn]),_r=k.useCallback(Q=>{ve(Q),Q!==null&&$.setInputMode("normal")},[$]),Dt=k.useCallback(Q=>{Y==="nurikabe"&&$.setGrid(ue=>{const me=ue.map(ut=>ut.map(Ge=>({...Ge}))),De=me[Q.row][Q.col];return De.mark=De.mark==="dot"?null:"dot",De.mark==="dot"&&(De.color=null),me})},[Y,$]),ft=()=>{R===null||!V[R]||$.applyImage(V[R])},Ki=Q=>{var De;const ue=(De=Q.target.files)==null?void 0:De[0];if(!ue)return;const me=new FileReader;me.onload=()=>{var ut;try{const Ge=JSON.parse(me.result);Ye(Ge.id),I(Ge.title),F(Ge.author),p(Ge.gridSize.rows),_(Ge.gridSize.cols),L(Ge.difficulty||""),X(Ge.tags||[]),se(Ge.autoCrossRules||[]),Z(Ge.forcedInputLayout||""),le(Ge.rules||[]),ie(Ge.clues||[]),$.setGrid(hf(Ge));const St=new Set;for(const ot of Ge.cells)if(ot.image){const rt=((ut=Ge.images)==null?void 0:ut[ot.image])??ot.image;St.add(rt)}b(Array.from(St))}catch{tn("Invalid puzzle JSON file")}},me.readAsText(ue)};return T.jsxs("div",{className:"page-layout",children:[T.jsx(PE,{children:T.jsx(df,{title:ze?"Solution Mode":"Puzzle Editor",backLink:!0,headerRight:T.jsx(Ec,{}),children:ze?T.jsxs(T.Fragment,{children:[T.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",margin:"0 0 8px"},children:"Place the correct values for each cell. Only normal inputs (values) and borders will be saved as the solution."}),T.jsx("button",{className:"info-btn",onClick:Qn,children:"Save Solution"}),T.jsx("button",{className:"info-btn",onClick:vr,children:"Clear Solution Input"}),T.jsx("button",{className:"info-btn",onClick:ms,children:"Exit Solution Mode"}),ne.length>0&&T.jsxs(T.Fragment,{children:[T.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),T.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Clues"}),ne.map((Q,ue)=>T.jsx("div",{className:"info-list-item",children:T.jsx("span",{className:"info-list-text",children:Q})},ue))]})]}):T.jsxs(T.Fragment,{children:[T.jsxs("div",{className:"info-editor-field",children:[T.jsx("label",{children:"Title"}),T.jsx("input",{value:E,onChange:Q=>I(Q.target.value),placeholder:"My Puzzle"})]}),T.jsxs("div",{className:"info-editor-field",children:[T.jsx("label",{children:"Author"}),T.jsx("input",{value:P,onChange:Q=>F(Q.target.value)})]}),T.jsxs("div",{className:"info-editor-field",children:[T.jsx("label",{children:"Difficulty"}),T.jsxs("select",{value:U,onChange:Q=>L(Q.target.value),children:[T.jsx("option",{value:"",children:" None "}),T.jsx("option",{value:"Very easy",children:"Very easy"}),T.jsx("option",{value:"Easy",children:"Easy"}),T.jsx("option",{value:"Medium",children:"Medium"}),T.jsx("option",{value:"Hard",children:"Hard"}),T.jsx("option",{value:"Very hard",children:"Very hard"})]})]}),T.jsxs("div",{className:"info-editor-field",children:[T.jsx("label",{children:"Tags"}),T.jsxs("div",{className:"tag-input-wrapper",children:[q.map(Q=>T.jsxs("span",{className:"tag-input-pill",children:[Q,T.jsx("button",{onClick:()=>yt(Q),children:""})]},Q)),T.jsx("input",{ref:Ue,value:D,onChange:Q=>{K(Q.target.value),xe(-1)},onKeyDown:Nt,onBlur:()=>setTimeout(()=>xe(-1),150),placeholder:q.length===0?"Add tags...":"",className:"tag-input-bare"}),ye.length>0&&T.jsx("div",{className:"tag-suggestions",children:ye.map((Q,ue)=>T.jsx("div",{className:`tag-suggestion${ue===Ae?" active":""}`,onMouseDown:()=>Ne(Q),children:Q},Q))})]})]}),T.jsxs("div",{className:"info-editor-field",children:[T.jsx("label",{children:"Auto-Cross Rules"}),T.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px 10px"},children:["king","rook","bishop","knight"].map(Q=>T.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13,cursor:"pointer"},children:[T.jsx("input",{type:"checkbox",checked:_e.includes(Q),onChange:ue=>{se(me=>ue.target.checked?[...me,Q]:me.filter(De=>De!==Q)),ue.target.blur()}}),Q.charAt(0).toUpperCase()+Q.slice(1)]},Q))})]}),T.jsxs("div",{className:"info-editor-field",children:[T.jsx("label",{children:"Forced Input Layout"}),T.jsxs("select",{value:Y,onChange:Q=>Z(Q.target.value),children:[T.jsx("option",{value:"",children:" None "}),T.jsx("option",{value:"nurikabe",children:"Nurikabe"})]})]}),T.jsxs("div",{className:"info-editor-row",children:[T.jsxs("div",{className:"info-editor-field",children:[T.jsx("label",{children:"Rows"}),T.jsx("input",{type:"number",value:f,onChange:Q=>p(Math.min(99,Math.max(1,Number(Q.target.value)))),min:1,max:99})]}),T.jsxs("div",{className:"info-editor-field",children:[T.jsx("label",{children:"Cols"}),T.jsx("input",{type:"number",value:g,onChange:Q=>_(Math.min(99,Math.max(1,Number(Q.target.value)))),min:1,max:99})]})]}),T.jsx("button",{className:"info-btn",onClick:()=>$.resetGrid(f,g),children:"Resize Grid"}),T.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),T.jsx("button",{className:"info-btn",onClick:Gn,children:"Save (Download JSON)"}),T.jsx("button",{className:"info-btn",onClick:()=>{var Q;return(Q=Ee.current)==null?void 0:Q.click()},children:"Load JSON"}),T.jsx("input",{ref:Ee,type:"file",accept:".json",style:{display:"none"},onChange:Ki}),T.jsx("button",{className:"info-btn",onClick:On,children:"Clear All"}),T.jsx("button",{className:"info-btn",onClick:Tn,children:"Clear Player Input"}),T.jsx("button",{className:"info-btn",onClick:Kn,children:"Enter Solution Mode"}),T.jsx("input",{ref:fe,type:"file",accept:"image/*",style:{display:"none"},onChange:Yn}),T.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),T.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Rules"}),te.map((Q,ue)=>T.jsxs("div",{className:"info-list-item info-list-draggable",draggable:!0,onDragStart:()=>Tt("rule",ue),onDragOver:me=>Kt(me,ue),onDrop:()=>nn("rule"),children:[T.jsx("span",{className:"info-drag-handle",title:"Drag to reorder",children:""}),(bt==null?void 0:bt.type)==="rule"&&bt.index===ue?T.jsx("input",{className:"info-edit-input",value:Cn,onChange:me=>Pe(me.target.value),onBlur:lt,onKeyDown:me=>{me.key==="Enter"&&lt(),me.key==="Escape"&&(dn(null),Pe(""))},autoFocus:!0}):T.jsx("span",{className:"info-list-text info-list-editable",onClick:()=>rn("rule",ue,Q),children:Q}),T.jsx("button",{className:"info-list-remove",onClick:()=>le(te.filter((me,De)=>De!==ue)),title:"Remove",children:""})]},ue)),T.jsxs("div",{className:"info-add-row",children:[T.jsx("input",{className:"info-add-input",value:x,onChange:Q=>C(Q.target.value),placeholder:"Add a rule...",onKeyDown:Q=>{Q.key==="Enter"&&x.trim()&&(le([...te,x.trim()]),C(""))}}),T.jsx("button",{className:"info-add-btn",onClick:()=>{x.trim()&&(le([...te,x.trim()]),C(""))},children:"+"})]}),T.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),T.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Clues"}),ne.map((Q,ue)=>T.jsxs("div",{className:"info-list-item info-list-draggable",draggable:!0,onDragStart:()=>Tt("clue",ue),onDragOver:me=>Kt(me,ue),onDrop:()=>nn("clue"),children:[T.jsx("span",{className:"info-drag-handle",title:"Drag to reorder",children:""}),(bt==null?void 0:bt.type)==="clue"&&bt.index===ue?T.jsx("input",{className:"info-edit-input",value:Cn,onChange:me=>Pe(me.target.value),onBlur:lt,onKeyDown:me=>{me.key==="Enter"&&lt(),me.key==="Escape"&&(dn(null),Pe(""))},autoFocus:!0}):T.jsx("span",{className:"info-list-text info-list-editable",onClick:()=>rn("clue",ue,Q),children:Q}),T.jsx("button",{className:"info-list-remove",onClick:()=>ie(ne.filter((me,De)=>De!==ue)),title:"Remove",children:""})]},ue)),T.jsxs("div",{className:"info-add-row",children:[T.jsx("input",{className:"info-add-input",value:A,onChange:Q=>O(Q.target.value),placeholder:"Add a clue...",onKeyDown:Q=>{Q.key==="Enter"&&A.trim()&&(ie([...ne,A.trim()]),O(""))}}),T.jsx("button",{className:"info-add-btn",onClick:()=>{A.trim()&&(ie([...ne,A.trim()]),O(""))},children:"+"})]})]})})}),T.jsx("div",{className:"panel-center-col",children:T.jsx("div",{className:"grid-scale-area",ref:de.containerRef,onMouseDown:Q=>{Q.target.closest(".puzzle-grid")||$.clearSelection()},children:T.jsx("div",{className:"grid-scale-wrapper",style:de.style,children:T.jsx(RE,{grid:$.grid,selection:$.selection,debug:t,inputMode:$.inputMode,activeColor:$.activeColor,activeMark:$.activeMark,clearSelection:$.clearSelection,commitSelection:$.commitSelection,onDragChange:$.onDragChange,onRightClickCell:Y?Dt:void 0,forcedInputLayout:Y||void 0,isPinching:de.isPinching})})})}),T.jsx("aside",{className:"panel-right",children:T.jsx(AE,{inputMode:$.inputMode,onInputModeChange:Q=>{Q==="normal"&&Y==="nurikabe"?($.setInputMode("color"),$.setActiveColor("9")):$.setInputMode(Q),Q!=="normal"&&ve(null)},onColorSelect:Q=>{$.inputMode==="fixedColor"?$.applyFixedColor(Q):$.applyColor(Q)},onColorErase:$.eraseColor,activeColor:$.activeColor,onActiveColorChange:$.setActiveColor,activeMark:$.activeMark,onActiveMarkChange:$.setActiveMark,onMarkSelect:Q=>$.toggleMark(Q),onMarkErase:$.eraseMark,onLabelApply:(Q,ue)=>$.applyLabel(Q,ue),onLabelRemove:()=>$.removeLabel(),onUndo:$.undo,onRedo:$.redo,onErase:$.clearValues,isEditor:!ze,theme:l,onThemeToggle:c,imageLibrary:V,selectedImageIndex:R,onImageSelect:_r,onImageApply:ft,onImageRemove:$.removeImage,onImageImport:()=>{var Q;return(Q=fe.current)==null?void 0:Q.click()},forcedInputLayout:Y||void 0})}),T.jsx(wc,{...en})]})}const Pv=768;function MP(){const[n,e]=k.useState(()=>window.innerWidth<=Pv);return k.useEffect(()=>{const t=window.matchMedia(`(max-width: ${Pv}px)`),s=o=>e(o.matches);return t.addEventListener("change",s),()=>t.removeEventListener("change",s)},[]),n}const jP=["circle","square","triangle","diamond","pentagon","hexagon","dot"],FP={circle:"",square:"",triangle:"",diamond:"",pentagon:"",hexagon:"",dot:""},UP=[{mode:"normal",label:"Normal",icon:""},{mode:"note",label:"Note",icon:""},{mode:"color",label:"Color",icon:""},{mode:"cross",label:"Cross",icon:""},{mode:"border",label:"Border",icon:""},{mode:"mark",label:"Mark",icon:""}];function zP({inputMode:n,onInputModeChange:e,onValueInput:t,onNoteInput:s,valueSet:o,onColorSelect:l,onColorErase:c,activeColor:f=null,onActiveColorChange:p,activeMark:g=null,onActiveMarkChange:_,onMarkSelect:E,onMarkErase:I,onUndo:P,onRedo:F,onErase:U,onSubmit:L,forcedInputLayout:q}){const X=n==="note",te=n==="color",le=n==="mark",ne=ie=>{X?s(ie):t(ie)};return T.jsxs("div",{className:"input-panel",onMouseDown:ie=>ie.preventDefault(),children:[!q&&T.jsx("div",{className:"ip-modes",children:UP.map(ie=>T.jsxs("button",{className:`ip-mode-btn ${n===ie.mode?"selected":""}`,onClick:()=>e(n===ie.mode?"normal":ie.mode),children:[T.jsx("span",{className:"ip-mode-icon",children:ie.icon}),T.jsx("span",{className:"ip-mode-label",children:ie.label})]},ie.mode))}),T.jsxs("div",{className:"ip-context",children:[(n==="normal"||X)&&!q&&T.jsx("div",{className:"ip-values",children:o.map(ie=>T.jsx("button",{className:"ip-val-btn",onClick:()=>ne(ie),children:ie},ie))}),te&&!q&&T.jsxs("div",{className:"ip-colors",children:[T.jsx("button",{className:`ip-color-swatch color-erase ${f==="0"?"active-color":""}`,onClick:()=>{f==="0"?p==null||p(null):(p==null||p("0"),c==null||c())},children:""}),Array.from({length:9},(ie,x)=>x+1).map(ie=>T.jsx("button",{className:`ip-color-swatch color${ie} ${f===String(ie)?"active-color":""}`,onClick:()=>{const x=String(ie);f===x?p==null||p(null):(p==null||p(x),l==null||l(x))},children:ie},ie))]}),le&&!q&&T.jsxs("div",{className:"ip-marks",children:[T.jsx("button",{className:`ip-mark-swatch ${g===null?"active-mark":""}`,onClick:()=>{I==null||I(),_==null||_(null)},children:""}),jP.map(ie=>T.jsx("button",{className:`ip-mark-swatch ${g===ie?"active-mark":""}`,onClick:()=>{g===ie?_==null||_(null):(_==null||_(ie),E==null||E(ie))},children:FP[ie]},ie))]}),q==="nurikabe"&&T.jsx("div",{className:"ip-hint",children:"Tap: black  dot  clear"}),(n==="cross"||n==="border")&&!q&&T.jsx("div",{className:"ip-hint",children:n==="cross"?"Tap/drag cells to toggle X marks":"Drag between cells to create borders"})]}),T.jsxs("div",{className:"ip-actions",children:[T.jsx("button",{className:"ip-action-btn",onClick:U,title:"Erase",children:""}),T.jsx("button",{className:"ip-action-btn",onClick:P,title:"Undo",children:""}),T.jsx("button",{className:"ip-action-btn",onClick:F,title:"Redo",children:""}),L&&T.jsx("button",{className:"ip-submit-btn",onClick:L,children:"Submit"})]})]})}function BP({cluesList:n,struckClueWords:e,onStruckClueWordsChange:t}){if(!n.length)return null;const s=c=>{t(f=>{const p=new Set(f);return p.has(c)?p.delete(c):p.add(c),p})},o=(c,f)=>{const p=c.split(/(\s+)/).map((_,E)=>/^\s+$/.test(_)?null:`${f}:${E}`).filter(Boolean),g=p.every(_=>e.has(_));t(_=>{const E=new Set(_);for(const I of p)g?E.delete(I):E.add(I);return E})},l=(c,f)=>c.split(/(\s+)/).map((p,g)=>{if(/^\s+$/.test(p))return p;const _=`${f}:${g}`,E=e.has(_);return T.jsx("span",{className:`info-word ${E?"info-word-struck":""}`,onClick:I=>{I.stopPropagation(),s(_)},children:p},g)});return T.jsx("div",{className:"clues-bar",children:T.jsx("ul",{className:"clues-bar-list",children:n.map((c,f)=>T.jsx("li",{className:"clues-bar-item",onClick:()=>o(c,f),children:l(c,f)},f))})})}function $P({title:n,timerDisplay:e,onMenuToggle:t}){return T.jsxs("div",{className:"mobile-header",children:[T.jsx("button",{className:"mobile-menu-btn",onClick:t,children:""}),T.jsx(Di,{to:"/",className:"mobile-back-btn",children:""}),T.jsx("div",{className:"mobile-header-title",children:n||"Puzzle"}),e&&T.jsx("div",{className:"mobile-header-timer",children:e})]})}function WP({open:n,onClose:e,children:t}){return k.useEffect(()=>{if(!n)return;const s=o=>{o.key==="Escape"&&e()};return window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)},[n,e]),T.jsx("div",{className:`slide-panel-backdrop ${n?"open":""}`,onClick:e,children:T.jsx("div",{className:`slide-panel ${n?"open":""}`,onClick:s=>s.stopPropagation(),children:t})})}const vp="4color:play:";function xv(n,e,t,s,o){const l=[];for(let f=0;f<e.length;f++)for(let p=0;p<e[f].length;p++){const g=e[f][p];if(!(g.value||g.notes.length>0||g.color||g.crossed||g.mark))continue;const E={row:f,col:p};g.value&&(E.value=g.value),g.notes.length>0&&(E.notes=g.notes),g.color&&(E.color=g.color),g.crossed&&(E.crossed=g.crossed),g.mark&&(E.mark=g.mark),l.push(E)}const c={cells:l,struckRules:Array.from(t),struckClues:Array.from(s),elapsedMs:o};try{localStorage.setItem(vp+n,JSON.stringify(c))}catch{}}function HP(n){try{const e=localStorage.getItem(vp+n);return e?JSON.parse(e):null}catch{return null}}function qP(n){localStorage.removeItem(vp+n)}function GP(n,e){var s;const t=n.map(o=>o.map(l=>({...l,notes:[...l.notes]})));for(const o of e.cells){const l=(s=t[o.row])==null?void 0:s[o.col];l&&(o.value&&(l.value=o.value),o.notes&&(l.notes=o.notes),o.color&&(l.color=o.color),o.crossed&&(l.crossed=o.crossed),o.mark&&(l.mark=o.mark))}return t}function KP(n){return n.color||n.fixedColor||null}function QP(n){const e=n.length,t=n[0].length,s=Array.from({length:e},()=>Array(t).fill(-1));let o=0;for(let l=0;l<e;l++)for(let c=0;c<t;c++){if(s[l][c]!==-1)continue;const f=[[l,c]];for(s[l][c]=o;f.length>0;){const[p,g]=f.shift(),_=n[p][g].fixedBorders;p>0&&_[0]===0&&s[p-1][g]===-1&&(s[p-1][g]=o,f.push([p-1,g])),g<t-1&&_[1]===0&&s[p][g+1]===-1&&(s[p][g+1]=o,f.push([p,g+1])),p<e-1&&_[2]===0&&s[p+1][g]===-1&&(s[p+1][g]=o,f.push([p+1,g])),g>0&&_[3]===0&&s[p][g-1]===-1&&(s[p][g-1]=o,f.push([p,g-1]))}o++}return s}function YP(n){const e=n.length,t=n[0].length,s=QP(n),o=new Map;for(let c=0;c<e;c++)for(let f=0;f<t;f++){const p=s[c][f],g=KP(n[c][f]),_=o.get(p);if(_===void 0)o.set(p,g);else if(_!==g)return _===null||g===null?{valid:!1,error:"Some regions have uncolored cells."}:{valid:!1,error:"All cells in a region must be the same color."}}for(const[,c]of o)if(c===null)return{valid:!1,error:"Some regions are not colored."};const l=new Set(o.values());if(l.size>4)return{valid:!1,error:`Used ${l.size} colors  maximum is 4.`};for(let c=0;c<e;c++)for(let f=0;f<t;f++){const p=s[c][f],g=o.get(p);if(f<t-1){const _=s[c][f+1];if(_!==p&&o.get(_)===g)return{valid:!1,error:"Two adjacent regions share the same color."}}if(c<e-1){const _=s[c+1][f];if(_!==p&&o.get(_)===g)return{valid:!1,error:"Two adjacent regions share the same color."}}}return{valid:!0}}function JP(n,e){var E,I,P,F,U,L,q,X,te;const t=Object.keys(e.cells).length;let s=0;const o=n.length,l=n[0].length;for(let le=0;le<o;le++)for(let ne=0;ne<l;ne++)n[le][ne].value&&s++;const c=Object.keys(e.borders||{}).length;let f=0;if(c>0)for(const[le,ne]of Object.entries(e.borders)){const[ie,x]=le.split(",").map(Number),C=(I=(E=n[ie])==null?void 0:E[x])==null?void 0:I.borders,A=(F=(P=n[ie])==null?void 0:P[x])==null?void 0:F.fixedBorders;C&&A&&(C[0]!==A[0]||C[1]!==A[1]||C[2]!==A[2]||C[3]!==A[3])&&f++}const p=Object.keys(e.colors||{}).length;let g=0;if(p>0)for(const[le]of Object.entries(e.colors)){const[ne,ie]=le.split(",").map(Number),x=(U=n[ne])==null?void 0:U[ie];(x!=null&&x.color||x!=null&&x.fixedColor)&&g++}if(s!==t||f!==c||g!==p){const le=[];return t>0&&le.push(`${s}/${t} values`),c>0&&le.push(`${f}/${c} borders`),p>0&&le.push(`${g}/${p} colors`),{valid:!1,error:`Not ready: ${le.join(", ")}.`}}let _=0;for(const[le,ne]of Object.entries(e.cells)){const[ie,x]=le.split(",").map(Number),C=(L=n[ie])==null?void 0:L[x],A=(C==null?void 0:C.value)||(C==null?void 0:C.fixedValue);(!A||A.toUpperCase()!==ne.toUpperCase())&&_++}if(e.borders)for(const[le,ne]of Object.entries(e.borders)){const[ie,x]=le.split(",").map(Number),C=(X=(q=n[ie])==null?void 0:q[x])==null?void 0:X.borders;(!C||C[0]!==ne[0]||C[1]!==ne[1]||C[2]!==ne[2]||C[3]!==ne[3])&&_++}if(e.colors)for(const[le,ne]of Object.entries(e.colors)){const[ie,x]=le.split(",").map(Number),C=(te=n[ie])==null?void 0:te[x];((C==null?void 0:C.color)||(C==null?void 0:C.fixedColor)||null)!==ne&&_++}return _>0?{valid:!1,error:`${_} wrong.`}:{valid:!0}}function XP(n=0){const[e,t]=k.useState(n),[s,o]=k.useState(!1),l=k.useRef(0),c=k.useRef(n),f=k.useRef(null),p=k.useCallback(()=>{f.current&&(clearInterval(f.current),f.current=null)},[]),g=k.useCallback(()=>{l.current=Date.now(),c.current=e,o(!0)},[e]),_=k.useCallback(()=>{if(p(),l.current){const I=Date.now();c.current+=I-l.current,t(c.current),l.current=0}o(!1)},[p]),E=k.useCallback((I=0)=>{p(),c.current=I,l.current=0,t(I),o(!1)},[p]);return k.useEffect(()=>(s&&(f.current=setInterval(()=>{t(c.current+(Date.now()-l.current))},1e3)),p),[s,p]),k.useEffect(()=>()=>{p()},[p]),{elapsedMs:e,formatted:gp(e),running:s,start:g,pause:_,reset:E}}function ZP(){var bt,dn,Cn;const{puzzleId:n}=Uv(),e=Sc(),[t]=Hv(),s=t.get("debug")==="true",{theme:o,toggle:l}=mp(),{user:c,signIn:f}=dp(),p=MP(),[g,_]=k.useState(!1),[E,I]=k.useState("none"),[P,F]=k.useState(null),[U,L]=k.useState(!0),[q,X]=k.useState(!1),[te,le]=k.useState(new Set),[ne,ie]=k.useState(new Set),[x,C]=k.useState(null),{modalProps:A,showAlert:O,showConfirm:V}=yp(),{completedPuzzleIds:b,completionTimes:R,markCompleted:ve}=SE(),J=CE(1,1),Fe=XP(0),_e=k.useRef(Fe);_e.current=Fe;const se=k.useRef(J.grid);se.current=J.grid;const Y=k.useRef(te);Y.current=te;const Z=k.useRef(ne);Z.current=ne;const D=k.useRef(null),K=k.useRef(!1),[Ae,xe]=k.useState(!1),Ue=k.useRef(null),qe=((bt=P==null?void 0:P.gridSize)==null?void 0:bt.rows)||1,Ye=((dn=P==null?void 0:P.gridSize)==null?void 0:dn.cols)||1,ze=xE({rows:qe,cols:Ye}),tt=k.useMemo(()=>{if(!P)return[];if(x!=null&&x.cells&&Object.keys(x.cells).length>0)return[...new Set(Object.values(x.cells))].sort();const Pe=Math.max(P.gridSize.rows,P.gridSize.cols),Ke=[];for(let $e=1;$e<=Pe&&$e<=9;$e++)Ke.push(String($e));for(let $e=10;$e<=Pe;$e++)Ke.push(String.fromCharCode(55+$e));return Ke},[P,x]);k.useEffect(()=>{n&&IE(n).then(Pe=>{if(Pe){F(Pe);let Ke=hf(Pe);const $e=HP(n);let Tt=0;$e&&(Ke=GP(Ke,$e),le(new Set($e.struckRules)),ie(new Set($e.struckClues)),Tt=$e.elapsedMs||0),J.setGrid(Ke),J.setAutoCrossRules(Pe.autoCrossRules||[]),J.setForcedInputLayout(Pe.forcedInputLayout||""),Pe.forcedInputLayout==="nurikabe"&&(J.setInputMode("color"),J.setActiveColor("9")),TE(n).then(Kt=>{Kt&&C(Kt)}),b.has(n)?xe(!0):(_e.current.reset(Tt),setTimeout(()=>{_e.current.start()},0)),setTimeout(()=>{K.current=!0},0)}else X(!0);L(!1)})},[n]),k.useEffect(()=>{n&&b.has(n)&&!Ae&&(xe(!0),_e.current.pause())},[n,b,Ae]),k.useEffect(()=>{if(c&&Ue.current){const{puzzleId:Pe,timeMs:Ke}=Ue.current;Ue.current=null,ve(Pe,Ke)}},[c,ve]),k.useEffect(()=>{if(!(!n||!K.current))return D.current&&clearTimeout(D.current),D.current=setTimeout(()=>{xv(n,J.grid,te,ne,_e.current.elapsedMs)},500),()=>{D.current&&clearTimeout(D.current)}},[J.grid,te,ne,n]),k.useEffect(()=>()=>{n&&K.current&&xv(n,se.current,Y.current,Z.current,_e.current.elapsedMs)},[n]),kE({inputMode:J.inputMode,applyValue:J.applyValue,applyColor:J.applyColor,applyFixedValue:J.applyFixedValue,applyFixedColor:J.applyFixedColor,addNote:J.addNote,clearValues:J.clearValues,eraseColor:J.eraseColor,undo:J.undo,redo:J.redo,onActiveColorChange:J.setActiveColor,onActiveMarkChange:J.setActiveMark,toggleMark:J.toggleMark,hasSelection:J.selection.length>0,onInputModeChange:J.setInputMode});const At=()=>{J.setGrid(Pe=>Pe.map(Ke=>Ke.map($e=>({...$e,value:$e.fixedValue?$e.value:null,notes:$e.fixedValue?$e.notes:[],color:$e.fixedValue?$e.color:null,crossed:$e.fixedValue?$e.crossed:!1,mark:$e.fixedValue?$e.mark:null,borders:[...$e.fixedBorders]})))),le(new Set),ie(new Set),n&&qP(n)},Vn=async()=>{await V("Are you sure you want to reset all your input?","Reset Input")&&At()},en=(P==null?void 0:P.forcedInputLayout)||"",tn=k.useCallback(Pe=>{en==="nurikabe"&&J.setGrid(Ke=>{const $e=Ke.map(Kt=>Kt.map(nn=>({...nn}))),Tt=$e[Pe.row][Pe.col];return Tt.mark=Tt.mark==="dot"?null:"dot",Tt.mark==="dot"&&(Tt.color=null),$e})},[en,J]),ce=k.useRef(!1),$=k.useRef("black"),de=k.useCallback(Pe=>{if(Pe.length===0)return;const Ke=!ce.current,$e=Ke?J.setGridWithUndo:J.setGrid;Ke&&(ce.current=!0),$e(Tt=>{var lt,_r;if(Ke){const Dt=(lt=Tt[Pe[0].row])==null?void 0:lt[Pe[0].col];if(!Dt||Dt.fixedValue)return Tt;Dt.color==="9"&&!Dt.mark?$.current="dot":Dt.mark==="dot"?$.current="clear":$.current="black"}const Kt=$.current,nn=Tt.map(Dt=>Dt.map(ft=>({...ft})));let rn=!1;for(const Dt of Pe){const ft=(_r=nn[Dt.row])==null?void 0:_r[Dt.col];!ft||ft.fixedValue||(Kt==="black"&&(ft.color!=="9"||ft.mark)?(ft.color="9",ft.mark=null,rn=!0):Kt==="dot"&&(ft.mark!=="dot"||ft.color)?(ft.color=null,ft.mark="dot",rn=!0):Kt==="clear"&&(ft.color||ft.mark)&&(ft.color=null,ft.mark=null,rn=!0))}return rn?nn:Tt})},[J]),Ee=k.useCallback(Pe=>{ce.current=!1},[]),fe=((Cn=P==null?void 0:P.tags)==null?void 0:Cn.includes("4color"))??!1,ye=fe||!!x,Ne=k.useCallback(async()=>{let Pe;if(fe)Pe=YP(J.grid);else if(x)Pe=JP(J.grid,x);else return;if(Pe.valid){Fe.pause();const Ke=Fe.elapsedMs;xe(!0),n&&(c?(ve(n,Ke),I("keepclear")):(Ue.current={puzzleId:n,timeMs:Ke},I("signin")))}else await O(Pe.error||"Not quite right. Keep trying!","Not Quite")},[J.grid,fe,x,O,n,ve,Fe,c]),yt=async()=>{try{await f()}catch{}I("keepclear")},Nt=()=>{I("keepclear")},Gn=()=>{I("none")},On=()=>{At(),I("none")},Tn=en==="nurikabe";if(U)return T.jsx("p",{style:{textAlign:"center",marginTop:40},children:"Loading puzzle..."});if(q||!P)return T.jsxs("div",{style:{textAlign:"center",marginTop:40},children:[T.jsx("p",{children:"Puzzle not found."}),T.jsx(Di,{to:"/",children:"Back to puzzle list"})]});const vr=E!=="none"&&T.jsx("div",{className:"modal-backdrop",onMouseDown:()=>{},children:T.jsxs("div",{className:"modal-card",onMouseDown:Pe=>Pe.stopPropagation(),children:[T.jsx("h3",{className:"modal-title",children:"Puzzle Solved!"}),T.jsx("p",{className:"modal-message",children:"Congratulations!"}),E==="signin"?T.jsxs("div",{className:"completion-signin",children:[T.jsx("p",{className:"completion-signin-text",children:"Save your completed puzzles and times by signing in."}),T.jsxs("div",{className:"modal-actions completion-actions",children:[T.jsx("button",{className:"modal-btn",onClick:Nt,children:"Ignore"}),T.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:yt,children:"Sign in with Google"})]})]}):T.jsxs("div",{className:"modal-actions",children:[T.jsx("button",{className:"modal-btn",onClick:Gn,children:"Keep"}),T.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:On,children:"Clear Puzzle"})]})]})}),Ln=Ae?n&&R.has(n)?T.jsx("div",{className:"info-timer completed",children:gp(R.get(n))}):null:T.jsx("div",{className:"info-timer",children:Fe.formatted}),Kn=T.jsxs(df,{title:P.title,author:P.author,gridSize:P.gridSize,difficulty:P.difficulty,rulesList:P.rules,cluesList:P.clues,backLink:!p,headerRight:T.jsx(Ec,{}),struckRuleWords:te,onStruckRuleWordsChange:le,struckClueWords:ne,onStruckClueWordsChange:ie,children:[!p&&Ln,T.jsx("button",{className:"info-btn",onClick:Vn,children:"Reset My Input"}),s&&T.jsx("button",{className:"info-btn",onClick:()=>e(`/edit/${n}`),children:"Edit Puzzle"})]}),ms=T.jsxs(df,{title:P.title,author:P.author,gridSize:P.gridSize,difficulty:P.difficulty,rulesList:P.rules,backLink:!1,headerRight:T.jsx(Ec,{}),struckRuleWords:te,onStruckRuleWordsChange:le,children:[Ln,T.jsx("button",{className:"info-btn",onClick:Vn,children:"Reset My Input"}),s&&T.jsx("button",{className:"info-btn",onClick:()=>e(`/edit/${n}`),children:"Edit Puzzle"})]}),Qn=T.jsx(RE,{grid:J.grid,selection:J.selection,debug:s,inputMode:Tn?"cross":J.inputMode,activeColor:Tn?null:J.activeColor,activeMark:J.activeMark,clearSelection:J.clearSelection,commitSelection:Tn?Ee:J.commitSelection,onDragChange:Tn?de:J.onDragChange,onRightClickCell:en?tn:void 0,forcedInputLayout:en||void 0,isPinching:ze.isPinching}),Yn=T.jsx(zP,{inputMode:J.inputMode,onInputModeChange:J.setInputMode,onValueInput:J.applyValue,onNoteInput:J.addNote,valueSet:tt,onColorSelect:Pe=>J.applyColor(Pe),onColorErase:J.eraseColor,activeColor:J.activeColor,onActiveColorChange:J.setActiveColor,activeMark:J.activeMark,onActiveMarkChange:J.setActiveMark,onMarkSelect:Pe=>J.toggleMark(Pe),onMarkErase:J.eraseMark,onUndo:J.undo,onRedo:J.redo,onErase:J.clearValues,onSubmit:ye?Ne:void 0,forcedInputLayout:en||void 0});return p?T.jsxs("div",{className:"mobile-layout",children:[T.jsx($P,{title:P.title,timerDisplay:Ln,onMenuToggle:()=>_(Pe=>!Pe)}),P.clues&&P.clues.length>0&&T.jsx(BP,{cluesList:P.clues,struckClueWords:ne,onStruckClueWordsChange:ie}),T.jsx("div",{className:"grid-scale-area",ref:ze.containerRef,onMouseDown:Pe=>{Pe.target.closest(".puzzle-grid")||J.clearSelection()},children:T.jsx("div",{className:"grid-scale-wrapper",style:ze.style,children:Qn})}),Yn,T.jsx(WP,{open:g,onClose:()=>_(!1),children:ms}),vr,T.jsx(wc,{...A})]}):T.jsxs("div",{className:"page-layout",children:[T.jsx(PE,{children:Kn}),T.jsx("div",{className:"panel-center-col",children:T.jsx("div",{className:"grid-scale-area",ref:ze.containerRef,onMouseDown:Pe=>{Pe.target.closest(".puzzle-grid")||J.clearSelection()},children:T.jsx("div",{className:"grid-scale-wrapper",style:ze.style,children:Qn})})}),T.jsx("aside",{className:"panel-right",children:T.jsx(AE,{isEditor:!1,theme:o,onThemeToggle:l,inputMode:J.inputMode,onInputModeChange:J.setInputMode,onColorSelect:Pe=>J.applyColor(Pe),onColorErase:J.eraseColor,activeColor:J.activeColor,onActiveColorChange:J.setActiveColor,activeMark:J.activeMark,onActiveMarkChange:J.setActiveMark,onMarkSelect:Pe=>J.toggleMark(Pe),onMarkErase:J.eraseMark,onUndo:J.undo,onRedo:J.redo,onErase:J.clearValues,onSubmit:ye?Ne:void 0,forcedInputLayout:en||void 0})}),vr,T.jsx(wc,{...A})]})}function ex(){return T.jsx(dP,{children:T.jsx(KT,{children:T.jsxs(UT,{children:[T.jsx(Ka,{path:"/",element:T.jsx(wP,{})}),T.jsx(Ka,{path:"/edit",element:T.jsx(Av,{})}),T.jsx(Ka,{path:"/edit/:puzzleId",element:T.jsx(Av,{})}),T.jsx(Ka,{path:"/play/:puzzleId",element:T.jsx(ZP,{})})]})})})}G0.createRoot(document.getElementById("root")).render(T.jsx(pf.StrictMode,{children:T.jsx(ex,{})}));
