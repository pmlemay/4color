function N0(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function S_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var dd={exports:{}},Ha={},fd={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cg;function b0(){if(Cg)return Ge;Cg=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.iterator;function E(N){return N===null||typeof N!="object"?null:(N=T&&N[T]||N["@@iterator"],typeof N=="function"?N:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,U={};function M(N,G,Pe){this.props=N,this.context=G,this.refs=U,this.updater=Pe||b}M.prototype.isReactComponent={},M.prototype.setState=function(N,G){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,G,"setState")},M.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function Y(){}Y.prototype=M.prototype;function se(N,G,Pe){this.props=N,this.context=G,this.refs=U,this.updater=Pe||b}var ue=se.prototype=new Y;ue.constructor=se,j(ue,M.prototype),ue.isPureReactComponent=!0;var oe=Array.isArray,ne=Object.prototype.hasOwnProperty,Ee={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function I(N,G,Pe){var Ne,ze={},Ce=null,Be=null;if(G!=null)for(Ne in G.ref!==void 0&&(Be=G.ref),G.key!==void 0&&(Ce=""+G.key),G)ne.call(G,Ne)&&!x.hasOwnProperty(Ne)&&(ze[Ne]=G[Ne]);var Ae=arguments.length-2;if(Ae===1)ze.children=Pe;else if(1<Ae){for(var He=Array(Ae),yt=0;yt<Ae;yt++)He[yt]=arguments[yt+2];ze.children=He}if(N&&N.defaultProps)for(Ne in Ae=N.defaultProps,Ae)ze[Ne]===void 0&&(ze[Ne]=Ae[Ne]);return{$$typeof:n,type:N,key:Ce,ref:Be,props:ze,_owner:Ee.current}}function k(N,G){return{$$typeof:n,type:N.type,key:G,ref:N.ref,props:N.props,_owner:N._owner}}function L(N){return typeof N=="object"&&N!==null&&N.$$typeof===n}function D(N){var G={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Pe){return G[Pe]})}var V=/\/+/g;function R(N,G){return typeof N=="object"&&N!==null&&N.key!=null?D(""+N.key):G.toString(36)}function Ie(N,G,Pe,Ne,ze){var Ce=typeof N;(Ce==="undefined"||Ce==="boolean")&&(N=null);var Be=!1;if(N===null)Be=!0;else switch(Ce){case"string":case"number":Be=!0;break;case"object":switch(N.$$typeof){case n:case e:Be=!0}}if(Be)return Be=N,ze=ze(Be),N=Ne===""?"."+R(Be,0):Ne,oe(ze)?(Pe="",N!=null&&(Pe=N.replace(V,"$&/")+"/"),Ie(ze,G,Pe,"",function(yt){return yt})):ze!=null&&(L(ze)&&(ze=k(ze,Pe+(!ze.key||Be&&Be.key===ze.key?"":(""+ze.key).replace(V,"$&/")+"/")+N)),G.push(ze)),1;if(Be=0,Ne=Ne===""?".":Ne+":",oe(N))for(var Ae=0;Ae<N.length;Ae++){Ce=N[Ae];var He=Ne+R(Ce,Ae);Be+=Ie(Ce,G,Pe,He,ze)}else if(He=E(N),typeof He=="function")for(N=He.call(N),Ae=0;!(Ce=N.next()).done;)Ce=Ce.value,He=Ne+R(Ce,Ae++),Be+=Ie(Ce,G,Pe,He,ze);else if(Ce==="object")throw G=String(N),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Be}function Oe(N,G,Pe){if(N==null)return N;var Ne=[],ze=0;return Ie(N,Ne,"","",function(Ce){return G.call(Pe,Ce,ze++)}),Ne}function Ye(N){if(N._status===-1){var G=N._result;G=G(),G.then(function(Pe){(N._status===0||N._status===-1)&&(N._status=1,N._result=Pe)},function(Pe){(N._status===0||N._status===-1)&&(N._status=2,N._result=Pe)}),N._status===-1&&(N._status=0,N._result=G)}if(N._status===1)return N._result.default;throw N._result}var ge={current:null},ee={transition:null},Q={ReactCurrentDispatcher:ge,ReactCurrentBatchConfig:ee,ReactCurrentOwner:Ee};function J(){throw Error("act(...) is not supported in production builds of React.")}return Ge.Children={map:Oe,forEach:function(N,G,Pe){Oe(N,function(){G.apply(this,arguments)},Pe)},count:function(N){var G=0;return Oe(N,function(){G++}),G},toArray:function(N){return Oe(N,function(G){return G})||[]},only:function(N){if(!L(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ge.Component=M,Ge.Fragment=t,Ge.Profiler=o,Ge.PureComponent=se,Ge.StrictMode=s,Ge.Suspense=p,Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q,Ge.act=J,Ge.cloneElement=function(N,G,Pe){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var Ne=j({},N.props),ze=N.key,Ce=N.ref,Be=N._owner;if(G!=null){if(G.ref!==void 0&&(Ce=G.ref,Be=Ee.current),G.key!==void 0&&(ze=""+G.key),N.type&&N.type.defaultProps)var Ae=N.type.defaultProps;for(He in G)ne.call(G,He)&&!x.hasOwnProperty(He)&&(Ne[He]=G[He]===void 0&&Ae!==void 0?Ae[He]:G[He])}var He=arguments.length-2;if(He===1)Ne.children=Pe;else if(1<He){Ae=Array(He);for(var yt=0;yt<He;yt++)Ae[yt]=arguments[yt+2];Ne.children=Ae}return{$$typeof:n,type:N.type,key:ze,ref:Ce,props:Ne,_owner:Be}},Ge.createContext=function(N){return N={$$typeof:c,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:l,_context:N},N.Consumer=N},Ge.createElement=I,Ge.createFactory=function(N){var G=I.bind(null,N);return G.type=N,G},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(N){return{$$typeof:f,render:N}},Ge.isValidElement=L,Ge.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:Ye}},Ge.memo=function(N,G){return{$$typeof:y,type:N,compare:G===void 0?null:G}},Ge.startTransition=function(N){var G=ee.transition;ee.transition={};try{N()}finally{ee.transition=G}},Ge.unstable_act=J,Ge.useCallback=function(N,G){return ge.current.useCallback(N,G)},Ge.useContext=function(N){return ge.current.useContext(N)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(N){return ge.current.useDeferredValue(N)},Ge.useEffect=function(N,G){return ge.current.useEffect(N,G)},Ge.useId=function(){return ge.current.useId()},Ge.useImperativeHandle=function(N,G,Pe){return ge.current.useImperativeHandle(N,G,Pe)},Ge.useInsertionEffect=function(N,G){return ge.current.useInsertionEffect(N,G)},Ge.useLayoutEffect=function(N,G){return ge.current.useLayoutEffect(N,G)},Ge.useMemo=function(N,G){return ge.current.useMemo(N,G)},Ge.useReducer=function(N,G,Pe){return ge.current.useReducer(N,G,Pe)},Ge.useRef=function(N){return ge.current.useRef(N)},Ge.useState=function(N){return ge.current.useState(N)},Ge.useSyncExternalStore=function(N,G,Pe){return ge.current.useSyncExternalStore(N,G,Pe)},Ge.useTransition=function(){return ge.current.useTransition()},Ge.version="18.3.1",Ge}var kg;function cf(){return kg||(kg=1,fd.exports=b0()),fd.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ag;function D0(){if(Ag)return Ha;Ag=1;var n=cf(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,y){var v,T={},E=null,b=null;y!==void 0&&(E=""+y),p.key!==void 0&&(E=""+p.key),p.ref!==void 0&&(b=p.ref);for(v in p)s.call(p,v)&&!l.hasOwnProperty(v)&&(T[v]=p[v]);if(f&&f.defaultProps)for(v in p=f.defaultProps,p)T[v]===void 0&&(T[v]=p[v]);return{$$typeof:e,type:f,key:E,ref:b,props:T,_owner:o.current}}return Ha.Fragment=t,Ha.jsx=c,Ha.jsxs=c,Ha}var Rg;function V0(){return Rg||(Rg=1,dd.exports=D0()),dd.exports}var C=V0(),A=cf();const hf=S_(A),O0=N0({__proto__:null,default:hf},[A]);var Vu={},pd={exports:{}},En={},md={exports:{}},gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function L0(){return Pg||(Pg=1,(function(n){function e(ee,Q){var J=ee.length;ee.push(Q);e:for(;0<J;){var N=J-1>>>1,G=ee[N];if(0<o(G,Q))ee[N]=Q,ee[J]=G,J=N;else break e}}function t(ee){return ee.length===0?null:ee[0]}function s(ee){if(ee.length===0)return null;var Q=ee[0],J=ee.pop();if(J!==Q){ee[0]=J;e:for(var N=0,G=ee.length,Pe=G>>>1;N<Pe;){var Ne=2*(N+1)-1,ze=ee[Ne],Ce=Ne+1,Be=ee[Ce];if(0>o(ze,J))Ce<G&&0>o(Be,ze)?(ee[N]=Be,ee[Ce]=J,N=Ce):(ee[N]=ze,ee[Ne]=J,N=Ne);else if(Ce<G&&0>o(Be,J))ee[N]=Be,ee[Ce]=J,N=Ce;else break e}}return Q}function o(ee,Q){var J=ee.sortIndex-Q.sortIndex;return J!==0?J:ee.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,f=c.now();n.unstable_now=function(){return c.now()-f}}var p=[],y=[],v=1,T=null,E=3,b=!1,j=!1,U=!1,M=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ue(ee){for(var Q=t(y);Q!==null;){if(Q.callback===null)s(y);else if(Q.startTime<=ee)s(y),Q.sortIndex=Q.expirationTime,e(p,Q);else break;Q=t(y)}}function oe(ee){if(U=!1,ue(ee),!j)if(t(p)!==null)j=!0,Ye(ne);else{var Q=t(y);Q!==null&&ge(oe,Q.startTime-ee)}}function ne(ee,Q){j=!1,U&&(U=!1,Y(I),I=-1),b=!0;var J=E;try{for(ue(Q),T=t(p);T!==null&&(!(T.expirationTime>Q)||ee&&!D());){var N=T.callback;if(typeof N=="function"){T.callback=null,E=T.priorityLevel;var G=N(T.expirationTime<=Q);Q=n.unstable_now(),typeof G=="function"?T.callback=G:T===t(p)&&s(p),ue(Q)}else s(p);T=t(p)}if(T!==null)var Pe=!0;else{var Ne=t(y);Ne!==null&&ge(oe,Ne.startTime-Q),Pe=!1}return Pe}finally{T=null,E=J,b=!1}}var Ee=!1,x=null,I=-1,k=5,L=-1;function D(){return!(n.unstable_now()-L<k)}function V(){if(x!==null){var ee=n.unstable_now();L=ee;var Q=!0;try{Q=x(!0,ee)}finally{Q?R():(Ee=!1,x=null)}}else Ee=!1}var R;if(typeof se=="function")R=function(){se(V)};else if(typeof MessageChannel<"u"){var Ie=new MessageChannel,Oe=Ie.port2;Ie.port1.onmessage=V,R=function(){Oe.postMessage(null)}}else R=function(){M(V,0)};function Ye(ee){x=ee,Ee||(Ee=!0,R())}function ge(ee,Q){I=M(function(){ee(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ee){ee.callback=null},n.unstable_continueExecution=function(){j||b||(j=!0,Ye(ne))},n.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<ee?Math.floor(1e3/ee):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(ee){switch(E){case 1:case 2:case 3:var Q=3;break;default:Q=E}var J=E;E=Q;try{return ee()}finally{E=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ee,Q){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var J=E;E=ee;try{return Q()}finally{E=J}},n.unstable_scheduleCallback=function(ee,Q,J){var N=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?N+J:N):J=N,ee){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=J+G,ee={id:v++,callback:Q,priorityLevel:ee,startTime:J,expirationTime:G,sortIndex:-1},J>N?(ee.sortIndex=J,e(y,ee),t(p)===null&&ee===t(y)&&(U?(Y(I),I=-1):U=!0,ge(oe,J-N))):(ee.sortIndex=G,e(p,ee),j||b||(j=!0,Ye(ne))),ee},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(ee){var Q=E;return function(){var J=E;E=Q;try{return ee.apply(this,arguments)}finally{E=J}}}})(gd)),gd}var xg;function M0(){return xg||(xg=1,md.exports=L0()),md.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ng;function F0(){if(Ng)return En;Ng=1;var n=cf(),e=M0();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},T={};function E(r){return p.call(T,r)?!0:p.call(v,r)?!1:y.test(r)?T[r]=!0:(v[r]=!0,!1)}function b(r,i,a,h){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return h?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function j(r,i,a,h){if(i===null||typeof i>"u"||b(r,i,a,h))return!0;if(h)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function U(r,i,a,h,d,m,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=h,this.attributeNamespace=d,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=m,this.removeEmptyString=w}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){M[r]=new U(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];M[i]=new U(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){M[r]=new U(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){M[r]=new U(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){M[r]=new U(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){M[r]=new U(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){M[r]=new U(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){M[r]=new U(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){M[r]=new U(r,5,!1,r.toLowerCase(),null,!1,!1)});var Y=/[\-:]([a-z])/g;function se(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(Y,se);M[i]=new U(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(Y,se);M[i]=new U(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(Y,se);M[i]=new U(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){M[r]=new U(r,1,!1,r.toLowerCase(),null,!1,!1)}),M.xlinkHref=new U("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){M[r]=new U(r,1,!1,r.toLowerCase(),null,!0,!0)});function ue(r,i,a,h){var d=M.hasOwnProperty(i)?M[i]:null;(d!==null?d.type!==0:h||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(j(i,a,d,h)&&(a=null),h||d===null?E(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):d.mustUseProperty?r[d.propertyName]=a===null?d.type===3?!1:"":a:(i=d.attributeName,h=d.attributeNamespace,a===null?r.removeAttribute(i):(d=d.type,a=d===3||d===4&&a===!0?"":""+a,h?r.setAttributeNS(h,i,a):r.setAttribute(i,a))))}var oe=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ne=Symbol.for("react.element"),Ee=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),L=Symbol.for("react.provider"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Ie=Symbol.for("react.suspense_list"),Oe=Symbol.for("react.memo"),Ye=Symbol.for("react.lazy"),ge=Symbol.for("react.offscreen"),ee=Symbol.iterator;function Q(r){return r===null||typeof r!="object"?null:(r=ee&&r[ee]||r["@@iterator"],typeof r=="function"?r:null)}var J=Object.assign,N;function G(r){if(N===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);N=i&&i[1]||""}return`
`+N+r}var Pe=!1;function Ne(r,i){if(!r||Pe)return"";Pe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(H){var h=H}Reflect.construct(r,[],i)}else{try{i.call()}catch(H){h=H}r.call(i.prototype)}else{try{throw Error()}catch(H){h=H}r()}}catch(H){if(H&&h&&typeof H.stack=="string"){for(var d=H.stack.split(`
`),m=h.stack.split(`
`),w=d.length-1,P=m.length-1;1<=w&&0<=P&&d[w]!==m[P];)P--;for(;1<=w&&0<=P;w--,P--)if(d[w]!==m[P]){if(w!==1||P!==1)do if(w--,P--,0>P||d[w]!==m[P]){var O=`
`+d[w].replace(" at new "," at ");return r.displayName&&O.includes("<anonymous>")&&(O=O.replace("<anonymous>",r.displayName)),O}while(1<=w&&0<=P);break}}}finally{Pe=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?G(r):""}function ze(r){switch(r.tag){case 5:return G(r.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return r=Ne(r.type,!1),r;case 11:return r=Ne(r.type.render,!1),r;case 1:return r=Ne(r.type,!0),r;default:return""}}function Ce(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case x:return"Fragment";case Ee:return"Portal";case k:return"Profiler";case I:return"StrictMode";case R:return"Suspense";case Ie:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case D:return(r.displayName||"Context")+".Consumer";case L:return(r._context.displayName||"Context")+".Provider";case V:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case Oe:return i=r.displayName||null,i!==null?i:Ce(r.type)||"Memo";case Ye:i=r._payload,r=r._init;try{return Ce(r(i))}catch{}}return null}function Be(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ce(i);case 8:return i===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Ae(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function He(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function yt(r){var i=He(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),h=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,m=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return d.call(this)},set:function(w){h=""+w,m.call(this,w)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return h},setValue:function(w){h=""+w},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Ln(r){r._valueTracker||(r._valueTracker=yt(r))}function Fr(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),h="";return r&&(h=He(r)?r.checked?"true":"false":r.value),r=h,r!==a?(i.setValue(r),!0):!1}function dn(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function ae(r,i){var a=i.checked;return J({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function W(r,i){var a=i.defaultValue==null?"":i.defaultValue,h=i.checked!=null?i.checked:i.defaultChecked;a=Ae(i.value!=null?i.value:a),r._wrapperState={initialChecked:h,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ce(r,i){i=i.checked,i!=null&&ue(r,"checked",i,!1)}function _e(r,i){ce(r,i);var a=Ae(i.value),h=i.type;if(a!=null)h==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(h==="submit"||h==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?me(r,i.type,a):i.hasOwnProperty("defaultValue")&&me(r,i.type,Ae(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function fe(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var h=i.type;if(!(h!=="submit"&&h!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function me(r,i,a){(i!=="number"||dn(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var Ve=Array.isArray;function St(r,i,a,h){if(r=r.options,i){i={};for(var d=0;d<a.length;d++)i["$"+a[d]]=!0;for(a=0;a<r.length;a++)d=i.hasOwnProperty("$"+r[a].value),r[a].selected!==d&&(r[a].selected=d),d&&h&&(r[a].defaultSelected=!0)}else{for(a=""+Ae(a),i=null,d=0;d<r.length;d++){if(r[d].value===a){r[d].selected=!0,h&&(r[d].defaultSelected=!0);return}i!==null||r[d].disabled||(i=r[d])}i!==null&&(i.selected=!0)}}function Ft(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function lr(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(Ve(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:Ae(a)}}function qn(r,i){var a=Ae(i.value),h=Ae(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),h!=null&&(r.defaultValue=""+h)}function ur(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function fs(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ps(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?fs(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var cr,qi=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,h,d){MSApp.execUnsafeLocalFunction(function(){return r(i,a,h,d)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(cr=cr||document.createElement("div"),cr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=cr.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function jr(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var Ct={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ur=["Webkit","ms","Moz","O"];Object.keys(Ct).forEach(function(r){Ur.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),Ct[i]=Ct[r]})});function Sn(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||Ct.hasOwnProperty(r)&&Ct[r]?(""+i).trim():i+"px"}function Cn(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var h=a.indexOf("--")===0,d=Sn(a,i[a],h);a==="float"&&(a="cssFloat"),h?r.setProperty(a,d):r[a]=d}}var Gn=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function en(r,i){if(i){if(Gn[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function zr(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kn=null;function Br(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Mn=null,mn=null,_t=null;function si(r){if(r=xa(r)){if(typeof Mn!="function")throw Error(t(280));var i=r.stateNode;i&&(i=Ql(i),Mn(r.stateNode,r.type,i))}}function hr(r){mn?_t?_t.push(r):_t=[r]:mn=r}function dr(){if(mn){var r=mn,i=_t;if(_t=mn=null,si(r),i)for(r=0;r<i.length;r++)si(i[r])}}function K(r,i){return r(i)}function le(){}var he=!1;function Le(r,i,a){if(he)return r(i,a);he=!0;try{return K(r,i,a)}finally{he=!1,(mn!==null||_t!==null)&&(le(),dr())}}function it(r,i){var a=r.stateNode;if(a===null)return null;var h=Ql(a);if(h===null)return null;a=h[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(r=r.type,h=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!h;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var qe=!1;if(f)try{var at={};Object.defineProperty(at,"passive",{get:function(){qe=!0}}),window.addEventListener("test",at,at),window.removeEventListener("test",at,at)}catch{qe=!1}function ut(r,i,a,h,d,m,w,P,O){var H=Array.prototype.slice.call(arguments,3);try{i.apply(a,H)}catch(re){this.onError(re)}}var tt=!1,dt=null,vt=!1,tn=null,Al={onError:function(r){tt=!0,dt=r}};function Rl(r,i,a,h,d,m,w,P,O){tt=!1,dt=null,ut.apply(Al,arguments)}function sa(r,i,a,h,d,m,w,P,O){if(Rl.apply(this,arguments),tt){if(tt){var H=dt;tt=!1,dt=null}else throw Error(t(198));vt||(vt=!0,tn=H)}}function Qn(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function ia(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function Pl(r){if(Qn(r)!==r)throw Error(t(188))}function xl(r){var i=r.alternate;if(!i){if(i=Qn(r),i===null)throw Error(t(188));return i!==r?null:r}for(var a=r,h=i;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(h=d.return,h!==null){a=h;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return Pl(d),r;if(m===h)return Pl(d),i;m=m.sibling}throw Error(t(188))}if(a.return!==h.return)a=d,h=m;else{for(var w=!1,P=d.child;P;){if(P===a){w=!0,a=d,h=m;break}if(P===h){w=!0,h=d,a=m;break}P=P.sibling}if(!w){for(P=m.child;P;){if(P===a){w=!0,a=m,h=d;break}if(P===h){w=!0,h=m,a=d;break}P=P.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==h)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:i}function Nl(r){return r=xl(r),r!==null?ii(r):null}function ii(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=ii(r);if(i!==null)return i;r=r.sibling}return null}var oa=e.unstable_scheduleCallback,Gi=e.unstable_cancelCallback,oi=e.unstable_shouldYield,$r=e.unstable_requestPaint,ft=e.unstable_now,$c=e.unstable_getCurrentPriorityLevel,Ki=e.unstable_ImmediatePriority,aa=e.unstable_UserBlockingPriority,ai=e.unstable_NormalPriority,la=e.unstable_LowPriority,Qi=e.unstable_IdlePriority,li=null,kn=null;function bl(r){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(li,r,void 0,(r.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:ui,fr=Math.log,Fn=Math.LN2;function ui(r){return r>>>=0,r===0?32:31-(fr(r)/Fn|0)|0}var pr=64,ms=4194304;function rt(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Wr(r,i){var a=r.pendingLanes;if(a===0)return 0;var h=0,d=r.suspendedLanes,m=r.pingedLanes,w=a&268435455;if(w!==0){var P=w&~d;P!==0?h=rt(P):(m&=w,m!==0&&(h=rt(m)))}else w=a&~d,w!==0?h=rt(w):m!==0&&(h=rt(m));if(h===0)return 0;if(i!==0&&i!==h&&(i&d)===0&&(d=h&-h,m=i&-i,d>=m||d===16&&(m&4194240)!==0))return i;if((h&4)!==0&&(h|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=h;0<i;)a=31-An(i),d=1<<a,h|=r[a],i&=~d;return h}function ci(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hi(r,i){for(var a=r.suspendedLanes,h=r.pingedLanes,d=r.expirationTimes,m=r.pendingLanes;0<m;){var w=31-An(m),P=1<<w,O=d[w];O===-1?((P&a)===0||(P&h)!==0)&&(d[w]=ci(P,i)):O<=i&&(r.expiredLanes|=P),m&=~P}}function ua(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function ca(){var r=pr;return pr<<=1,(pr&4194240)===0&&(pr=64),r}function ha(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function di(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-An(i),r[i]=a}function Wc(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var h=r.eventTimes;for(r=r.expirationTimes;0<a;){var d=31-An(a),m=1<<d;i[d]=0,h[d]=-1,r[d]=-1,a&=~m}}function da(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var h=31-An(a),d=1<<h;d&i|r[h]&i&&(r[h]|=i),a&=~d}}var Xe=0;function mr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var fa,Ji,pa,ma,ga,gr=!1,Yi=[],yr=null,_r=null,Gt=null,fi=new Map,Hr=new Map,Rn=[],Dl="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gs(r,i){switch(r){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":Gt=null;break;case"pointerover":case"pointerout":fi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hr.delete(i.pointerId)}}function Jn(r,i,a,h,d,m){return r===null||r.nativeEvent!==m?(r={blockedOn:i,domEventName:a,eventSystemFlags:h,nativeEvent:m,targetContainers:[d]},i!==null&&(i=xa(i),i!==null&&Ji(i)),r):(r.eventSystemFlags|=h,i=r.targetContainers,d!==null&&i.indexOf(d)===-1&&i.push(d),r)}function Vl(r,i,a,h,d){switch(i){case"focusin":return yr=Jn(yr,r,i,a,h,d),!0;case"dragenter":return _r=Jn(_r,r,i,a,h,d),!0;case"mouseover":return Gt=Jn(Gt,r,i,a,h,d),!0;case"pointerover":var m=d.pointerId;return fi.set(m,Jn(fi.get(m)||null,r,i,a,h,d)),!0;case"gotpointercapture":return m=d.pointerId,Hr.set(m,Jn(Hr.get(m)||null,r,i,a,h,d)),!0}return!1}function Xi(r){var i=yi(r.target);if(i!==null){var a=Qn(i);if(a!==null){if(i=a.tag,i===13){if(i=ia(a),i!==null){r.blockedOn=i,ga(r.priority,function(){pa(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function lt(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=Zi(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var h=new a.constructor(a.type,a);Kn=h,a.target.dispatchEvent(h),Kn=null}else return i=xa(a),i!==null&&Ji(i),r.blockedOn=a,!1;i.shift()}return!0}function Ol(r,i,a){lt(r)&&a.delete(i)}function Hc(){gr=!1,yr!==null&&lt(yr)&&(yr=null),_r!==null&&lt(_r)&&(_r=null),Gt!==null&&lt(Gt)&&(Gt=null),fi.forEach(Ol),Hr.forEach(Ol)}function ys(r,i){r.blockedOn===i&&(r.blockedOn=null,gr||(gr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Hc)))}function _s(r){function i(d){return ys(d,r)}if(0<Yi.length){ys(Yi[0],r);for(var a=1;a<Yi.length;a++){var h=Yi[a];h.blockedOn===r&&(h.blockedOn=null)}}for(yr!==null&&ys(yr,r),_r!==null&&ys(_r,r),Gt!==null&&ys(Gt,r),fi.forEach(i),Hr.forEach(i),a=0;a<Rn.length;a++)h=Rn[a],h.blockedOn===r&&(h.blockedOn=null);for(;0<Rn.length&&(a=Rn[0],a.blockedOn===null);)Xi(a),a.blockedOn===null&&Rn.shift()}var qr=oe.ReactCurrentBatchConfig,Gr=!0;function vr(r,i,a,h){var d=Xe,m=qr.transition;qr.transition=null;try{Xe=1,ya(r,i,a,h)}finally{Xe=d,qr.transition=m}}function Ll(r,i,a,h){var d=Xe,m=qr.transition;qr.transition=null;try{Xe=4,ya(r,i,a,h)}finally{Xe=d,qr.transition=m}}function ya(r,i,a,h){if(Gr){var d=Zi(r,i,a,h);if(d===null)nh(r,i,h,wr,a),gs(r,h);else if(Vl(d,r,i,a,h))h.stopPropagation();else if(gs(r,h),i&4&&-1<Dl.indexOf(r)){for(;d!==null;){var m=xa(d);if(m!==null&&fa(m),m=Zi(r,i,a,h),m===null&&nh(r,i,h,wr,a),m===d)break;d=m}d!==null&&h.stopPropagation()}else nh(r,i,h,null,a)}}var wr=null;function Zi(r,i,a,h){if(wr=null,r=Br(h),r=yi(r),r!==null)if(i=Qn(r),i===null)r=null;else if(a=i.tag,a===13){if(r=ia(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return wr=r,null}function eo(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($c()){case Ki:return 1;case aa:return 4;case ai:case la:return 16;case Qi:return 536870912;default:return 16}default:return 16}}var Pn=null,to=null,Kr=null;function Ml(){if(Kr)return Kr;var r,i=to,a=i.length,h,d="value"in Pn?Pn.value:Pn.textContent,m=d.length;for(r=0;r<a&&i[r]===d[r];r++);var w=a-r;for(h=1;h<=w&&i[a-h]===d[m-h];h++);return Kr=d.slice(r,1<h?1-h:void 0)}function pi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function Er(){return!0}function _a(){return!1}function nn(r){function i(a,h,d,m,w){this._reactName=a,this._targetInst=d,this.type=h,this.nativeEvent=m,this.target=w,this.currentTarget=null;for(var P in r)r.hasOwnProperty(P)&&(a=r[P],this[P]=a?a(m):m[P]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Er:_a,this.isPropagationStopped=_a,this}return J(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Er)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Er)},persist:function(){},isPersistent:Er}),i}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mi=nn(Tr),vs=J({},Tr,{view:0,detail:0}),no=nn(vs),ro,so,xn,gi=J({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$e,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==xn&&(xn&&r.type==="mousemove"?(ro=r.screenX-xn.screenX,so=r.screenY-xn.screenY):so=ro=0,xn=r),ro)},movementY:function(r){return"movementY"in r?r.movementY:so}}),va=nn(gi),Fl=J({},gi,{dataTransfer:0}),jl=nn(Fl),io=J({},vs,{relatedTarget:0}),Kt=nn(io),Ul=J({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),zl=nn(Ul),ws=J({},Tr,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=nn(ws),g=J({},Tr,{data:0}),_=nn(g),S={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},B={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pe(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=q[r])?!!i[r]:!1}function $e(){return pe}var Rt=J({},vs,{key:function(r){if(r.key){var i=S[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=pi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?B[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$e,charCode:function(r){return r.type==="keypress"?pi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?pi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),ot=nn(Rt),Nt=J({},gi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nn=nn(Nt),Qr=J({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$e}),Ir=nn(Qr),Sr=J({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),oo=nn(Sr),wa=J({},gi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),CE=nn(wa),kE=[9,13,27,32],qc=f&&"CompositionEvent"in window,Ea=null;f&&"documentMode"in document&&(Ea=document.documentMode);var AE=f&&"TextEvent"in window&&!Ea,yp=f&&(!qc||Ea&&8<Ea&&11>=Ea),_p=" ",vp=!1;function wp(r,i){switch(r){case"keyup":return kE.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ep(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var ao=!1;function RE(r,i){switch(r){case"compositionend":return Ep(i);case"keypress":return i.which!==32?null:(vp=!0,_p);case"textInput":return r=i.data,r===_p&&vp?null:r;default:return null}}function PE(r,i){if(ao)return r==="compositionend"||!qc&&wp(r,i)?(r=Ml(),Kr=to=Pn=null,ao=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return yp&&i.locale!=="ko"?null:i.data;default:return null}}var xE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tp(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!xE[r.type]:i==="textarea"}function Ip(r,i,a,h){hr(h),i=ql(i,"onChange"),0<i.length&&(a=new mi("onChange","change",null,a,h),r.push({event:a,listeners:i}))}var Ta=null,Ia=null;function NE(r){zp(r,0)}function Bl(r){var i=fo(r);if(Fr(i))return r}function bE(r,i){if(r==="change")return i}var Sp=!1;if(f){var Gc;if(f){var Kc="oninput"in document;if(!Kc){var Cp=document.createElement("div");Cp.setAttribute("oninput","return;"),Kc=typeof Cp.oninput=="function"}Gc=Kc}else Gc=!1;Sp=Gc&&(!document.documentMode||9<document.documentMode)}function kp(){Ta&&(Ta.detachEvent("onpropertychange",Ap),Ia=Ta=null)}function Ap(r){if(r.propertyName==="value"&&Bl(Ia)){var i=[];Ip(i,Ia,r,Br(r)),Le(NE,i)}}function DE(r,i,a){r==="focusin"?(kp(),Ta=i,Ia=a,Ta.attachEvent("onpropertychange",Ap)):r==="focusout"&&kp()}function VE(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Bl(Ia)}function OE(r,i){if(r==="click")return Bl(i)}function LE(r,i){if(r==="input"||r==="change")return Bl(i)}function ME(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Yn=typeof Object.is=="function"?Object.is:ME;function Sa(r,i){if(Yn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),h=Object.keys(i);if(a.length!==h.length)return!1;for(h=0;h<a.length;h++){var d=a[h];if(!p.call(i,d)||!Yn(r[d],i[d]))return!1}return!0}function Rp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Pp(r,i){var a=Rp(r);r=0;for(var h;a;){if(a.nodeType===3){if(h=r+a.textContent.length,r<=i&&h>=i)return{node:a,offset:i-r};r=h}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Rp(a)}}function xp(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?xp(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function Np(){for(var r=window,i=dn();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=dn(r.document)}return i}function Qc(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function FE(r){var i=Np(),a=r.focusedElem,h=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&xp(a.ownerDocument.documentElement,a)){if(h!==null&&Qc(a)){if(i=h.start,r=h.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var d=a.textContent.length,m=Math.min(h.start,d);h=h.end===void 0?m:Math.min(h.end,d),!r.extend&&m>h&&(d=h,h=m,m=d),d=Pp(a,m);var w=Pp(a,h);d&&w&&(r.rangeCount!==1||r.anchorNode!==d.node||r.anchorOffset!==d.offset||r.focusNode!==w.node||r.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(d.node,d.offset),r.removeAllRanges(),m>h?(r.addRange(i),r.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var jE=f&&"documentMode"in document&&11>=document.documentMode,lo=null,Jc=null,Ca=null,Yc=!1;function bp(r,i,a){var h=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Yc||lo==null||lo!==dn(h)||(h=lo,"selectionStart"in h&&Qc(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),Ca&&Sa(Ca,h)||(Ca=h,h=ql(Jc,"onSelect"),0<h.length&&(i=new mi("onSelect","select",null,i,a),r.push({event:i,listeners:h}),i.target=lo)))}function $l(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var uo={animationend:$l("Animation","AnimationEnd"),animationiteration:$l("Animation","AnimationIteration"),animationstart:$l("Animation","AnimationStart"),transitionend:$l("Transition","TransitionEnd")},Xc={},Dp={};f&&(Dp=document.createElement("div").style,"AnimationEvent"in window||(delete uo.animationend.animation,delete uo.animationiteration.animation,delete uo.animationstart.animation),"TransitionEvent"in window||delete uo.transitionend.transition);function Wl(r){if(Xc[r])return Xc[r];if(!uo[r])return r;var i=uo[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Dp)return Xc[r]=i[a];return r}var Vp=Wl("animationend"),Op=Wl("animationiteration"),Lp=Wl("animationstart"),Mp=Wl("transitionend"),Fp=new Map,jp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(r,i){Fp.set(r,i),l(i,[r])}for(var Zc=0;Zc<jp.length;Zc++){var eh=jp[Zc],UE=eh.toLowerCase(),zE=eh[0].toUpperCase()+eh.slice(1);Es(UE,"on"+zE)}Es(Vp,"onAnimationEnd"),Es(Op,"onAnimationIteration"),Es(Lp,"onAnimationStart"),Es("dblclick","onDoubleClick"),Es("focusin","onFocus"),Es("focusout","onBlur"),Es(Mp,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ka="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BE=new Set("cancel close invalid load scroll toggle".split(" ").concat(ka));function Up(r,i,a){var h=r.type||"unknown-event";r.currentTarget=a,sa(h,i,void 0,r),r.currentTarget=null}function zp(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var h=r[a],d=h.event;h=h.listeners;e:{var m=void 0;if(i)for(var w=h.length-1;0<=w;w--){var P=h[w],O=P.instance,H=P.currentTarget;if(P=P.listener,O!==m&&d.isPropagationStopped())break e;Up(d,P,H),m=O}else for(w=0;w<h.length;w++){if(P=h[w],O=P.instance,H=P.currentTarget,P=P.listener,O!==m&&d.isPropagationStopped())break e;Up(d,P,H),m=O}}}if(vt)throw r=tn,vt=!1,tn=null,r}function pt(r,i){var a=i[lh];a===void 0&&(a=i[lh]=new Set);var h=r+"__bubble";a.has(h)||(Bp(i,r,2,!1),a.add(h))}function th(r,i,a){var h=0;i&&(h|=4),Bp(a,r,h,i)}var Hl="_reactListening"+Math.random().toString(36).slice(2);function Aa(r){if(!r[Hl]){r[Hl]=!0,s.forEach(function(a){a!=="selectionchange"&&(BE.has(a)||th(a,!1,r),th(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[Hl]||(i[Hl]=!0,th("selectionchange",!1,i))}}function Bp(r,i,a,h){switch(eo(i)){case 1:var d=vr;break;case 4:d=Ll;break;default:d=ya}a=d.bind(null,i,a,r),d=void 0,!qe||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(d=!0),h?d!==void 0?r.addEventListener(i,a,{capture:!0,passive:d}):r.addEventListener(i,a,!0):d!==void 0?r.addEventListener(i,a,{passive:d}):r.addEventListener(i,a,!1)}function nh(r,i,a,h,d){var m=h;if((i&1)===0&&(i&2)===0&&h!==null)e:for(;;){if(h===null)return;var w=h.tag;if(w===3||w===4){var P=h.stateNode.containerInfo;if(P===d||P.nodeType===8&&P.parentNode===d)break;if(w===4)for(w=h.return;w!==null;){var O=w.tag;if((O===3||O===4)&&(O=w.stateNode.containerInfo,O===d||O.nodeType===8&&O.parentNode===d))return;w=w.return}for(;P!==null;){if(w=yi(P),w===null)return;if(O=w.tag,O===5||O===6){h=m=w;continue e}P=P.parentNode}}h=h.return}Le(function(){var H=m,re=Br(a),ie=[];e:{var te=Fp.get(r);if(te!==void 0){var ve=mi,Se=r;switch(r){case"keypress":if(pi(a)===0)break e;case"keydown":case"keyup":ve=ot;break;case"focusin":Se="focus",ve=Kt;break;case"focusout":Se="blur",ve=Kt;break;case"beforeblur":case"afterblur":ve=Kt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=va;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=jl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=Ir;break;case Vp:case Op:case Lp:ve=zl;break;case Mp:ve=oo;break;case"scroll":ve=no;break;case"wheel":ve=CE;break;case"copy":case"cut":case"paste":ve=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Nn}var ke=(i&4)!==0,Pt=!ke&&r==="scroll",z=ke?te!==null?te+"Capture":null:te;ke=[];for(var F=H,$;F!==null;){$=F;var de=$.stateNode;if($.tag===5&&de!==null&&($=de,z!==null&&(de=it(F,z),de!=null&&ke.push(Ra(F,de,$)))),Pt)break;F=F.return}0<ke.length&&(te=new ve(te,Se,null,a,re),ie.push({event:te,listeners:ke}))}}if((i&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",ve=r==="mouseout"||r==="pointerout",te&&a!==Kn&&(Se=a.relatedTarget||a.fromElement)&&(yi(Se)||Se[Jr]))break e;if((ve||te)&&(te=re.window===re?re:(te=re.ownerDocument)?te.defaultView||te.parentWindow:window,ve?(Se=a.relatedTarget||a.toElement,ve=H,Se=Se?yi(Se):null,Se!==null&&(Pt=Qn(Se),Se!==Pt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(ve=null,Se=H),ve!==Se)){if(ke=va,de="onMouseLeave",z="onMouseEnter",F="mouse",(r==="pointerout"||r==="pointerover")&&(ke=Nn,de="onPointerLeave",z="onPointerEnter",F="pointer"),Pt=ve==null?te:fo(ve),$=Se==null?te:fo(Se),te=new ke(de,F+"leave",ve,a,re),te.target=Pt,te.relatedTarget=$,de=null,yi(re)===H&&(ke=new ke(z,F+"enter",Se,a,re),ke.target=$,ke.relatedTarget=Pt,de=ke),Pt=de,ve&&Se)t:{for(ke=ve,z=Se,F=0,$=ke;$;$=co($))F++;for($=0,de=z;de;de=co(de))$++;for(;0<F-$;)ke=co(ke),F--;for(;0<$-F;)z=co(z),$--;for(;F--;){if(ke===z||z!==null&&ke===z.alternate)break t;ke=co(ke),z=co(z)}ke=null}else ke=null;ve!==null&&$p(ie,te,ve,ke,!1),Se!==null&&Pt!==null&&$p(ie,Pt,Se,ke,!0)}}e:{if(te=H?fo(H):window,ve=te.nodeName&&te.nodeName.toLowerCase(),ve==="select"||ve==="input"&&te.type==="file")var Re=bE;else if(Tp(te))if(Sp)Re=LE;else{Re=VE;var be=DE}else(ve=te.nodeName)&&ve.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(Re=OE);if(Re&&(Re=Re(r,H))){Ip(ie,Re,a,re);break e}be&&be(r,te,H),r==="focusout"&&(be=te._wrapperState)&&be.controlled&&te.type==="number"&&me(te,"number",te.value)}switch(be=H?fo(H):window,r){case"focusin":(Tp(be)||be.contentEditable==="true")&&(lo=be,Jc=H,Ca=null);break;case"focusout":Ca=Jc=lo=null;break;case"mousedown":Yc=!0;break;case"contextmenu":case"mouseup":case"dragend":Yc=!1,bp(ie,a,re);break;case"selectionchange":if(jE)break;case"keydown":case"keyup":bp(ie,a,re)}var De;if(qc)e:{switch(r){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else ao?wp(r,a)&&(Fe="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Fe="onCompositionStart");Fe&&(yp&&a.locale!=="ko"&&(ao||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&ao&&(De=Ml()):(Pn=re,to="value"in Pn?Pn.value:Pn.textContent,ao=!0)),be=ql(H,Fe),0<be.length&&(Fe=new _(Fe,r,null,a,re),ie.push({event:Fe,listeners:be}),De?Fe.data=De:(De=Ep(a),De!==null&&(Fe.data=De)))),(De=AE?RE(r,a):PE(r,a))&&(H=ql(H,"onBeforeInput"),0<H.length&&(re=new _("onBeforeInput","beforeinput",null,a,re),ie.push({event:re,listeners:H}),re.data=De))}zp(ie,i)})}function Ra(r,i,a){return{instance:r,listener:i,currentTarget:a}}function ql(r,i){for(var a=i+"Capture",h=[];r!==null;){var d=r,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=it(r,a),m!=null&&h.unshift(Ra(r,m,d)),m=it(r,i),m!=null&&h.push(Ra(r,m,d))),r=r.return}return h}function co(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function $p(r,i,a,h,d){for(var m=i._reactName,w=[];a!==null&&a!==h;){var P=a,O=P.alternate,H=P.stateNode;if(O!==null&&O===h)break;P.tag===5&&H!==null&&(P=H,d?(O=it(a,m),O!=null&&w.unshift(Ra(a,O,P))):d||(O=it(a,m),O!=null&&w.push(Ra(a,O,P)))),a=a.return}w.length!==0&&r.push({event:i,listeners:w})}var $E=/\r\n?/g,WE=/\u0000|\uFFFD/g;function Wp(r){return(typeof r=="string"?r:""+r).replace($E,`
`).replace(WE,"")}function Gl(r,i,a){if(i=Wp(i),Wp(r)!==i&&a)throw Error(t(425))}function Kl(){}var rh=null,sh=null;function ih(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var oh=typeof setTimeout=="function"?setTimeout:void 0,HE=typeof clearTimeout=="function"?clearTimeout:void 0,Hp=typeof Promise=="function"?Promise:void 0,qE=typeof queueMicrotask=="function"?queueMicrotask:typeof Hp<"u"?function(r){return Hp.resolve(null).then(r).catch(GE)}:oh;function GE(r){setTimeout(function(){throw r})}function ah(r,i){var a=i,h=0;do{var d=a.nextSibling;if(r.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"){if(h===0){r.removeChild(d),_s(i);return}h--}else a!=="$"&&a!=="$?"&&a!=="$!"||h++;a=d}while(a);_s(i)}function Ts(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function qp(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var ho=Math.random().toString(36).slice(2),Cr="__reactFiber$"+ho,Pa="__reactProps$"+ho,Jr="__reactContainer$"+ho,lh="__reactEvents$"+ho,KE="__reactListeners$"+ho,QE="__reactHandles$"+ho;function yi(r){var i=r[Cr];if(i)return i;for(var a=r.parentNode;a;){if(i=a[Jr]||a[Cr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=qp(r);r!==null;){if(a=r[Cr])return a;r=qp(r)}return i}r=a,a=r.parentNode}return null}function xa(r){return r=r[Cr]||r[Jr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function fo(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Ql(r){return r[Pa]||null}var uh=[],po=-1;function Is(r){return{current:r}}function mt(r){0>po||(r.current=uh[po],uh[po]=null,po--)}function ct(r,i){po++,uh[po]=r.current,r.current=i}var Ss={},rn=Is(Ss),gn=Is(!1),_i=Ss;function mo(r,i){var a=r.type.contextTypes;if(!a)return Ss;var h=r.stateNode;if(h&&h.__reactInternalMemoizedUnmaskedChildContext===i)return h.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in a)d[m]=i[m];return h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=d),d}function yn(r){return r=r.childContextTypes,r!=null}function Jl(){mt(gn),mt(rn)}function Gp(r,i,a){if(rn.current!==Ss)throw Error(t(168));ct(rn,i),ct(gn,a)}function Kp(r,i,a){var h=r.stateNode;if(i=i.childContextTypes,typeof h.getChildContext!="function")return a;h=h.getChildContext();for(var d in h)if(!(d in i))throw Error(t(108,Be(r)||"Unknown",d));return J({},a,h)}function Yl(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ss,_i=rn.current,ct(rn,r),ct(gn,gn.current),!0}function Qp(r,i,a){var h=r.stateNode;if(!h)throw Error(t(169));a?(r=Kp(r,i,_i),h.__reactInternalMemoizedMergedChildContext=r,mt(gn),mt(rn),ct(rn,r)):mt(gn),ct(gn,a)}var Yr=null,Xl=!1,ch=!1;function Jp(r){Yr===null?Yr=[r]:Yr.push(r)}function JE(r){Xl=!0,Jp(r)}function Cs(){if(!ch&&Yr!==null){ch=!0;var r=0,i=Xe;try{var a=Yr;for(Xe=1;r<a.length;r++){var h=a[r];do h=h(!0);while(h!==null)}Yr=null,Xl=!1}catch(d){throw Yr!==null&&(Yr=Yr.slice(r+1)),oa(Ki,Cs),d}finally{Xe=i,ch=!1}}return null}var go=[],yo=0,Zl=null,eu=0,jn=[],Un=0,vi=null,Xr=1,Zr="";function wi(r,i){go[yo++]=eu,go[yo++]=Zl,Zl=r,eu=i}function Yp(r,i,a){jn[Un++]=Xr,jn[Un++]=Zr,jn[Un++]=vi,vi=r;var h=Xr;r=Zr;var d=32-An(h)-1;h&=~(1<<d),a+=1;var m=32-An(i)+d;if(30<m){var w=d-d%5;m=(h&(1<<w)-1).toString(32),h>>=w,d-=w,Xr=1<<32-An(i)+d|a<<d|h,Zr=m+r}else Xr=1<<m|a<<d|h,Zr=r}function hh(r){r.return!==null&&(wi(r,1),Yp(r,1,0))}function dh(r){for(;r===Zl;)Zl=go[--yo],go[yo]=null,eu=go[--yo],go[yo]=null;for(;r===vi;)vi=jn[--Un],jn[Un]=null,Zr=jn[--Un],jn[Un]=null,Xr=jn[--Un],jn[Un]=null}var bn=null,Dn=null,wt=!1,Xn=null;function Xp(r,i){var a=Wn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function Zp(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,bn=r,Dn=Ts(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,bn=r,Dn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=vi!==null?{id:Xr,overflow:Zr}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Wn(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,bn=r,Dn=null,!0):!1;default:return!1}}function fh(r){return(r.mode&1)!==0&&(r.flags&128)===0}function ph(r){if(wt){var i=Dn;if(i){var a=i;if(!Zp(r,i)){if(fh(r))throw Error(t(418));i=Ts(a.nextSibling);var h=bn;i&&Zp(r,i)?Xp(h,a):(r.flags=r.flags&-4097|2,wt=!1,bn=r)}}else{if(fh(r))throw Error(t(418));r.flags=r.flags&-4097|2,wt=!1,bn=r}}}function em(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;bn=r}function tu(r){if(r!==bn)return!1;if(!wt)return em(r),wt=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!ih(r.type,r.memoizedProps)),i&&(i=Dn)){if(fh(r))throw tm(),Error(t(418));for(;i;)Xp(r,i),i=Ts(i.nextSibling)}if(em(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){Dn=Ts(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}Dn=null}}else Dn=bn?Ts(r.stateNode.nextSibling):null;return!0}function tm(){for(var r=Dn;r;)r=Ts(r.nextSibling)}function _o(){Dn=bn=null,wt=!1}function mh(r){Xn===null?Xn=[r]:Xn.push(r)}var YE=oe.ReactCurrentBatchConfig;function Na(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var h=a.stateNode}if(!h)throw Error(t(147,r));var d=h,m=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===m?i.ref:(i=function(w){var P=d.refs;w===null?delete P[m]:P[m]=w},i._stringRef=m,i)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function nu(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function nm(r){var i=r._init;return i(r._payload)}function rm(r){function i(z,F){if(r){var $=z.deletions;$===null?(z.deletions=[F],z.flags|=16):$.push(F)}}function a(z,F){if(!r)return null;for(;F!==null;)i(z,F),F=F.sibling;return null}function h(z,F){for(z=new Map;F!==null;)F.key!==null?z.set(F.key,F):z.set(F.index,F),F=F.sibling;return z}function d(z,F){return z=Ds(z,F),z.index=0,z.sibling=null,z}function m(z,F,$){return z.index=$,r?($=z.alternate,$!==null?($=$.index,$<F?(z.flags|=2,F):$):(z.flags|=2,F)):(z.flags|=1048576,F)}function w(z){return r&&z.alternate===null&&(z.flags|=2),z}function P(z,F,$,de){return F===null||F.tag!==6?(F=od($,z.mode,de),F.return=z,F):(F=d(F,$),F.return=z,F)}function O(z,F,$,de){var Re=$.type;return Re===x?re(z,F,$.props.children,de,$.key):F!==null&&(F.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ye&&nm(Re)===F.type)?(de=d(F,$.props),de.ref=Na(z,F,$),de.return=z,de):(de=ku($.type,$.key,$.props,null,z.mode,de),de.ref=Na(z,F,$),de.return=z,de)}function H(z,F,$,de){return F===null||F.tag!==4||F.stateNode.containerInfo!==$.containerInfo||F.stateNode.implementation!==$.implementation?(F=ad($,z.mode,de),F.return=z,F):(F=d(F,$.children||[]),F.return=z,F)}function re(z,F,$,de,Re){return F===null||F.tag!==7?(F=Ri($,z.mode,de,Re),F.return=z,F):(F=d(F,$),F.return=z,F)}function ie(z,F,$){if(typeof F=="string"&&F!==""||typeof F=="number")return F=od(""+F,z.mode,$),F.return=z,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case ne:return $=ku(F.type,F.key,F.props,null,z.mode,$),$.ref=Na(z,null,F),$.return=z,$;case Ee:return F=ad(F,z.mode,$),F.return=z,F;case Ye:var de=F._init;return ie(z,de(F._payload),$)}if(Ve(F)||Q(F))return F=Ri(F,z.mode,$,null),F.return=z,F;nu(z,F)}return null}function te(z,F,$,de){var Re=F!==null?F.key:null;if(typeof $=="string"&&$!==""||typeof $=="number")return Re!==null?null:P(z,F,""+$,de);if(typeof $=="object"&&$!==null){switch($.$$typeof){case ne:return $.key===Re?O(z,F,$,de):null;case Ee:return $.key===Re?H(z,F,$,de):null;case Ye:return Re=$._init,te(z,F,Re($._payload),de)}if(Ve($)||Q($))return Re!==null?null:re(z,F,$,de,null);nu(z,$)}return null}function ve(z,F,$,de,Re){if(typeof de=="string"&&de!==""||typeof de=="number")return z=z.get($)||null,P(F,z,""+de,Re);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case ne:return z=z.get(de.key===null?$:de.key)||null,O(F,z,de,Re);case Ee:return z=z.get(de.key===null?$:de.key)||null,H(F,z,de,Re);case Ye:var be=de._init;return ve(z,F,$,be(de._payload),Re)}if(Ve(de)||Q(de))return z=z.get($)||null,re(F,z,de,Re,null);nu(F,de)}return null}function Se(z,F,$,de){for(var Re=null,be=null,De=F,Fe=F=0,Wt=null;De!==null&&Fe<$.length;Fe++){De.index>Fe?(Wt=De,De=null):Wt=De.sibling;var nt=te(z,De,$[Fe],de);if(nt===null){De===null&&(De=Wt);break}r&&De&&nt.alternate===null&&i(z,De),F=m(nt,F,Fe),be===null?Re=nt:be.sibling=nt,be=nt,De=Wt}if(Fe===$.length)return a(z,De),wt&&wi(z,Fe),Re;if(De===null){for(;Fe<$.length;Fe++)De=ie(z,$[Fe],de),De!==null&&(F=m(De,F,Fe),be===null?Re=De:be.sibling=De,be=De);return wt&&wi(z,Fe),Re}for(De=h(z,De);Fe<$.length;Fe++)Wt=ve(De,z,Fe,$[Fe],de),Wt!==null&&(r&&Wt.alternate!==null&&De.delete(Wt.key===null?Fe:Wt.key),F=m(Wt,F,Fe),be===null?Re=Wt:be.sibling=Wt,be=Wt);return r&&De.forEach(function(Vs){return i(z,Vs)}),wt&&wi(z,Fe),Re}function ke(z,F,$,de){var Re=Q($);if(typeof Re!="function")throw Error(t(150));if($=Re.call($),$==null)throw Error(t(151));for(var be=Re=null,De=F,Fe=F=0,Wt=null,nt=$.next();De!==null&&!nt.done;Fe++,nt=$.next()){De.index>Fe?(Wt=De,De=null):Wt=De.sibling;var Vs=te(z,De,nt.value,de);if(Vs===null){De===null&&(De=Wt);break}r&&De&&Vs.alternate===null&&i(z,De),F=m(Vs,F,Fe),be===null?Re=Vs:be.sibling=Vs,be=Vs,De=Wt}if(nt.done)return a(z,De),wt&&wi(z,Fe),Re;if(De===null){for(;!nt.done;Fe++,nt=$.next())nt=ie(z,nt.value,de),nt!==null&&(F=m(nt,F,Fe),be===null?Re=nt:be.sibling=nt,be=nt);return wt&&wi(z,Fe),Re}for(De=h(z,De);!nt.done;Fe++,nt=$.next())nt=ve(De,z,Fe,nt.value,de),nt!==null&&(r&&nt.alternate!==null&&De.delete(nt.key===null?Fe:nt.key),F=m(nt,F,Fe),be===null?Re=nt:be.sibling=nt,be=nt);return r&&De.forEach(function(x0){return i(z,x0)}),wt&&wi(z,Fe),Re}function Pt(z,F,$,de){if(typeof $=="object"&&$!==null&&$.type===x&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case ne:e:{for(var Re=$.key,be=F;be!==null;){if(be.key===Re){if(Re=$.type,Re===x){if(be.tag===7){a(z,be.sibling),F=d(be,$.props.children),F.return=z,z=F;break e}}else if(be.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Ye&&nm(Re)===be.type){a(z,be.sibling),F=d(be,$.props),F.ref=Na(z,be,$),F.return=z,z=F;break e}a(z,be);break}else i(z,be);be=be.sibling}$.type===x?(F=Ri($.props.children,z.mode,de,$.key),F.return=z,z=F):(de=ku($.type,$.key,$.props,null,z.mode,de),de.ref=Na(z,F,$),de.return=z,z=de)}return w(z);case Ee:e:{for(be=$.key;F!==null;){if(F.key===be)if(F.tag===4&&F.stateNode.containerInfo===$.containerInfo&&F.stateNode.implementation===$.implementation){a(z,F.sibling),F=d(F,$.children||[]),F.return=z,z=F;break e}else{a(z,F);break}else i(z,F);F=F.sibling}F=ad($,z.mode,de),F.return=z,z=F}return w(z);case Ye:return be=$._init,Pt(z,F,be($._payload),de)}if(Ve($))return Se(z,F,$,de);if(Q($))return ke(z,F,$,de);nu(z,$)}return typeof $=="string"&&$!==""||typeof $=="number"?($=""+$,F!==null&&F.tag===6?(a(z,F.sibling),F=d(F,$),F.return=z,z=F):(a(z,F),F=od($,z.mode,de),F.return=z,z=F),w(z)):a(z,F)}return Pt}var vo=rm(!0),sm=rm(!1),ru=Is(null),su=null,wo=null,gh=null;function yh(){gh=wo=su=null}function _h(r){var i=ru.current;mt(ru),r._currentValue=i}function vh(r,i,a){for(;r!==null;){var h=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,h!==null&&(h.childLanes|=i)):h!==null&&(h.childLanes&i)!==i&&(h.childLanes|=i),r===a)break;r=r.return}}function Eo(r,i){su=r,gh=wo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(_n=!0),r.firstContext=null)}function zn(r){var i=r._currentValue;if(gh!==r)if(r={context:r,memoizedValue:i,next:null},wo===null){if(su===null)throw Error(t(308));wo=r,su.dependencies={lanes:0,firstContext:r}}else wo=wo.next=r;return i}var Ei=null;function wh(r){Ei===null?Ei=[r]:Ei.push(r)}function im(r,i,a,h){var d=i.interleaved;return d===null?(a.next=a,wh(i)):(a.next=d.next,d.next=a),i.interleaved=a,es(r,h)}function es(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var ks=!1;function Eh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function om(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ts(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function As(r,i,a){var h=r.updateQueue;if(h===null)return null;if(h=h.shared,(et&2)!==0){var d=h.pending;return d===null?i.next=i:(i.next=d.next,d.next=i),h.pending=i,es(r,a)}return d=h.interleaved,d===null?(i.next=i,wh(h)):(i.next=d.next,d.next=i),h.interleaved=i,es(r,a)}function iu(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,da(r,a)}}function am(r,i){var a=r.updateQueue,h=r.alternate;if(h!==null&&(h=h.updateQueue,a===h)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};m===null?d=m=w:m=m.next=w,a=a.next}while(a!==null);m===null?d=m=i:m=m.next=i}else d=m=i;a={baseState:h.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:h.shared,effects:h.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function ou(r,i,a,h){var d=r.updateQueue;ks=!1;var m=d.firstBaseUpdate,w=d.lastBaseUpdate,P=d.shared.pending;if(P!==null){d.shared.pending=null;var O=P,H=O.next;O.next=null,w===null?m=H:w.next=H,w=O;var re=r.alternate;re!==null&&(re=re.updateQueue,P=re.lastBaseUpdate,P!==w&&(P===null?re.firstBaseUpdate=H:P.next=H,re.lastBaseUpdate=O))}if(m!==null){var ie=d.baseState;w=0,re=H=O=null,P=m;do{var te=P.lane,ve=P.eventTime;if((h&te)===te){re!==null&&(re=re.next={eventTime:ve,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var Se=r,ke=P;switch(te=i,ve=a,ke.tag){case 1:if(Se=ke.payload,typeof Se=="function"){ie=Se.call(ve,ie,te);break e}ie=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=ke.payload,te=typeof Se=="function"?Se.call(ve,ie,te):Se,te==null)break e;ie=J({},ie,te);break e;case 2:ks=!0}}P.callback!==null&&P.lane!==0&&(r.flags|=64,te=d.effects,te===null?d.effects=[P]:te.push(P))}else ve={eventTime:ve,lane:te,tag:P.tag,payload:P.payload,callback:P.callback,next:null},re===null?(H=re=ve,O=ie):re=re.next=ve,w|=te;if(P=P.next,P===null){if(P=d.shared.pending,P===null)break;te=P,P=te.next,te.next=null,d.lastBaseUpdate=te,d.shared.pending=null}}while(!0);if(re===null&&(O=ie),d.baseState=O,d.firstBaseUpdate=H,d.lastBaseUpdate=re,i=d.shared.interleaved,i!==null){d=i;do w|=d.lane,d=d.next;while(d!==i)}else m===null&&(d.shared.lanes=0);Si|=w,r.lanes=w,r.memoizedState=ie}}function lm(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var h=r[i],d=h.callback;if(d!==null){if(h.callback=null,h=a,typeof d!="function")throw Error(t(191,d));d.call(h)}}}var ba={},kr=Is(ba),Da=Is(ba),Va=Is(ba);function Ti(r){if(r===ba)throw Error(t(174));return r}function Th(r,i){switch(ct(Va,i),ct(Da,r),ct(kr,ba),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ps(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=ps(i,r)}mt(kr),ct(kr,i)}function To(){mt(kr),mt(Da),mt(Va)}function um(r){Ti(Va.current);var i=Ti(kr.current),a=ps(i,r.type);i!==a&&(ct(Da,r),ct(kr,a))}function Ih(r){Da.current===r&&(mt(kr),mt(Da))}var Et=Is(0);function au(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Sh=[];function Ch(){for(var r=0;r<Sh.length;r++)Sh[r]._workInProgressVersionPrimary=null;Sh.length=0}var lu=oe.ReactCurrentDispatcher,kh=oe.ReactCurrentBatchConfig,Ii=0,Tt=null,jt=null,Bt=null,uu=!1,Oa=!1,La=0,XE=0;function sn(){throw Error(t(321))}function Ah(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!Yn(r[a],i[a]))return!1;return!0}function Rh(r,i,a,h,d,m){if(Ii=m,Tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,lu.current=r===null||r.memoizedState===null?n0:r0,r=a(h,d),Oa){m=0;do{if(Oa=!1,La=0,25<=m)throw Error(t(301));m+=1,Bt=jt=null,i.updateQueue=null,lu.current=s0,r=a(h,d)}while(Oa)}if(lu.current=du,i=jt!==null&&jt.next!==null,Ii=0,Bt=jt=Tt=null,uu=!1,i)throw Error(t(300));return r}function Ph(){var r=La!==0;return La=0,r}function Ar(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Tt.memoizedState=Bt=r:Bt=Bt.next=r,Bt}function Bn(){if(jt===null){var r=Tt.alternate;r=r!==null?r.memoizedState:null}else r=jt.next;var i=Bt===null?Tt.memoizedState:Bt.next;if(i!==null)Bt=i,jt=r;else{if(r===null)throw Error(t(310));jt=r,r={memoizedState:jt.memoizedState,baseState:jt.baseState,baseQueue:jt.baseQueue,queue:jt.queue,next:null},Bt===null?Tt.memoizedState=Bt=r:Bt=Bt.next=r}return Bt}function Ma(r,i){return typeof i=="function"?i(r):i}function xh(r){var i=Bn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=jt,d=h.baseQueue,m=a.pending;if(m!==null){if(d!==null){var w=d.next;d.next=m.next,m.next=w}h.baseQueue=d=m,a.pending=null}if(d!==null){m=d.next,h=h.baseState;var P=w=null,O=null,H=m;do{var re=H.lane;if((Ii&re)===re)O!==null&&(O=O.next={lane:0,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),h=H.hasEagerState?H.eagerState:r(h,H.action);else{var ie={lane:re,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null};O===null?(P=O=ie,w=h):O=O.next=ie,Tt.lanes|=re,Si|=re}H=H.next}while(H!==null&&H!==m);O===null?w=h:O.next=P,Yn(h,i.memoizedState)||(_n=!0),i.memoizedState=h,i.baseState=w,i.baseQueue=O,a.lastRenderedState=h}if(r=a.interleaved,r!==null){d=r;do m=d.lane,Tt.lanes|=m,Si|=m,d=d.next;while(d!==r)}else d===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Nh(r){var i=Bn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var h=a.dispatch,d=a.pending,m=i.memoizedState;if(d!==null){a.pending=null;var w=d=d.next;do m=r(m,w.action),w=w.next;while(w!==d);Yn(m,i.memoizedState)||(_n=!0),i.memoizedState=m,i.baseQueue===null&&(i.baseState=m),a.lastRenderedState=m}return[m,h]}function cm(){}function hm(r,i){var a=Tt,h=Bn(),d=i(),m=!Yn(h.memoizedState,d);if(m&&(h.memoizedState=d,_n=!0),h=h.queue,bh(pm.bind(null,a,h,r),[r]),h.getSnapshot!==i||m||Bt!==null&&Bt.memoizedState.tag&1){if(a.flags|=2048,Fa(9,fm.bind(null,a,h,d,i),void 0,null),$t===null)throw Error(t(349));(Ii&30)!==0||dm(a,i,d)}return d}function dm(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=Tt.updateQueue,i===null?(i={lastEffect:null,stores:null},Tt.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function fm(r,i,a,h){i.value=a,i.getSnapshot=h,mm(i)&&gm(r)}function pm(r,i,a){return a(function(){mm(i)&&gm(r)})}function mm(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!Yn(r,a)}catch{return!0}}function gm(r){var i=es(r,1);i!==null&&nr(i,r,1,-1)}function ym(r){var i=Ar();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:r},i.queue=r,r=r.dispatch=t0.bind(null,Tt,r),[i.memoizedState,r]}function Fa(r,i,a,h){return r={tag:r,create:i,destroy:a,deps:h,next:null},i=Tt.updateQueue,i===null?(i={lastEffect:null,stores:null},Tt.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(h=a.next,a.next=r,r.next=h,i.lastEffect=r)),r}function _m(){return Bn().memoizedState}function cu(r,i,a,h){var d=Ar();Tt.flags|=r,d.memoizedState=Fa(1|i,a,void 0,h===void 0?null:h)}function hu(r,i,a,h){var d=Bn();h=h===void 0?null:h;var m=void 0;if(jt!==null){var w=jt.memoizedState;if(m=w.destroy,h!==null&&Ah(h,w.deps)){d.memoizedState=Fa(i,a,m,h);return}}Tt.flags|=r,d.memoizedState=Fa(1|i,a,m,h)}function vm(r,i){return cu(8390656,8,r,i)}function bh(r,i){return hu(2048,8,r,i)}function wm(r,i){return hu(4,2,r,i)}function Em(r,i){return hu(4,4,r,i)}function Tm(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function Im(r,i,a){return a=a!=null?a.concat([r]):null,hu(4,4,Tm.bind(null,i,r),a)}function Dh(){}function Sm(r,i){var a=Bn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Ah(i,h[1])?h[0]:(a.memoizedState=[r,i],r)}function Cm(r,i){var a=Bn();i=i===void 0?null:i;var h=a.memoizedState;return h!==null&&i!==null&&Ah(i,h[1])?h[0]:(r=r(),a.memoizedState=[r,i],r)}function km(r,i,a){return(Ii&21)===0?(r.baseState&&(r.baseState=!1,_n=!0),r.memoizedState=a):(Yn(a,i)||(a=ca(),Tt.lanes|=a,Si|=a,r.baseState=!0),i)}function ZE(r,i){var a=Xe;Xe=a!==0&&4>a?a:4,r(!0);var h=kh.transition;kh.transition={};try{r(!1),i()}finally{Xe=a,kh.transition=h}}function Am(){return Bn().memoizedState}function e0(r,i,a){var h=Ns(r);if(a={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null},Rm(r))Pm(i,a);else if(a=im(r,i,a,h),a!==null){var d=pn();nr(a,r,h,d),xm(a,i,h)}}function t0(r,i,a){var h=Ns(r),d={lane:h,action:a,hasEagerState:!1,eagerState:null,next:null};if(Rm(r))Pm(i,d);else{var m=r.alternate;if(r.lanes===0&&(m===null||m.lanes===0)&&(m=i.lastRenderedReducer,m!==null))try{var w=i.lastRenderedState,P=m(w,a);if(d.hasEagerState=!0,d.eagerState=P,Yn(P,w)){var O=i.interleaved;O===null?(d.next=d,wh(i)):(d.next=O.next,O.next=d),i.interleaved=d;return}}catch{}finally{}a=im(r,i,d,h),a!==null&&(d=pn(),nr(a,r,h,d),xm(a,i,h))}}function Rm(r){var i=r.alternate;return r===Tt||i!==null&&i===Tt}function Pm(r,i){Oa=uu=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function xm(r,i,a){if((a&4194240)!==0){var h=i.lanes;h&=r.pendingLanes,a|=h,i.lanes=a,da(r,a)}}var du={readContext:zn,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useInsertionEffect:sn,useLayoutEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useMutableSource:sn,useSyncExternalStore:sn,useId:sn,unstable_isNewReconciler:!1},n0={readContext:zn,useCallback:function(r,i){return Ar().memoizedState=[r,i===void 0?null:i],r},useContext:zn,useEffect:vm,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,cu(4194308,4,Tm.bind(null,i,r),a)},useLayoutEffect:function(r,i){return cu(4194308,4,r,i)},useInsertionEffect:function(r,i){return cu(4,2,r,i)},useMemo:function(r,i){var a=Ar();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var h=Ar();return i=a!==void 0?a(i):i,h.memoizedState=h.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},h.queue=r,r=r.dispatch=e0.bind(null,Tt,r),[h.memoizedState,r]},useRef:function(r){var i=Ar();return r={current:r},i.memoizedState=r},useState:ym,useDebugValue:Dh,useDeferredValue:function(r){return Ar().memoizedState=r},useTransition:function(){var r=ym(!1),i=r[0];return r=ZE.bind(null,r[1]),Ar().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var h=Tt,d=Ar();if(wt){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),$t===null)throw Error(t(349));(Ii&30)!==0||dm(h,i,a)}d.memoizedState=a;var m={value:a,getSnapshot:i};return d.queue=m,vm(pm.bind(null,h,m,r),[r]),h.flags|=2048,Fa(9,fm.bind(null,h,m,a,i),void 0,null),a},useId:function(){var r=Ar(),i=$t.identifierPrefix;if(wt){var a=Zr,h=Xr;a=(h&~(1<<32-An(h)-1)).toString(32)+a,i=":"+i+"R"+a,a=La++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=XE++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},r0={readContext:zn,useCallback:Sm,useContext:zn,useEffect:bh,useImperativeHandle:Im,useInsertionEffect:wm,useLayoutEffect:Em,useMemo:Cm,useReducer:xh,useRef:_m,useState:function(){return xh(Ma)},useDebugValue:Dh,useDeferredValue:function(r){var i=Bn();return km(i,jt.memoizedState,r)},useTransition:function(){var r=xh(Ma)[0],i=Bn().memoizedState;return[r,i]},useMutableSource:cm,useSyncExternalStore:hm,useId:Am,unstable_isNewReconciler:!1},s0={readContext:zn,useCallback:Sm,useContext:zn,useEffect:bh,useImperativeHandle:Im,useInsertionEffect:wm,useLayoutEffect:Em,useMemo:Cm,useReducer:Nh,useRef:_m,useState:function(){return Nh(Ma)},useDebugValue:Dh,useDeferredValue:function(r){var i=Bn();return jt===null?i.memoizedState=r:km(i,jt.memoizedState,r)},useTransition:function(){var r=Nh(Ma)[0],i=Bn().memoizedState;return[r,i]},useMutableSource:cm,useSyncExternalStore:hm,useId:Am,unstable_isNewReconciler:!1};function Zn(r,i){if(r&&r.defaultProps){i=J({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function Vh(r,i,a,h){i=r.memoizedState,a=a(h,i),a=a==null?i:J({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var fu={isMounted:function(r){return(r=r._reactInternals)?Qn(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var h=pn(),d=Ns(r),m=ts(h,d);m.payload=i,a!=null&&(m.callback=a),i=As(r,m,d),i!==null&&(nr(i,r,d,h),iu(i,r,d))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var h=pn(),d=Ns(r),m=ts(h,d);m.tag=1,m.payload=i,a!=null&&(m.callback=a),i=As(r,m,d),i!==null&&(nr(i,r,d,h),iu(i,r,d))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=pn(),h=Ns(r),d=ts(a,h);d.tag=2,i!=null&&(d.callback=i),i=As(r,d,h),i!==null&&(nr(i,r,h,a),iu(i,r,h))}};function Nm(r,i,a,h,d,m,w){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(h,m,w):i.prototype&&i.prototype.isPureReactComponent?!Sa(a,h)||!Sa(d,m):!0}function bm(r,i,a){var h=!1,d=Ss,m=i.contextType;return typeof m=="object"&&m!==null?m=zn(m):(d=yn(i)?_i:rn.current,h=i.contextTypes,m=(h=h!=null)?mo(r,d):Ss),i=new i(a,m),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=fu,r.stateNode=i,i._reactInternals=r,h&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=d,r.__reactInternalMemoizedMaskedChildContext=m),i}function Dm(r,i,a,h){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,h),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,h),i.state!==r&&fu.enqueueReplaceState(i,i.state,null)}function Oh(r,i,a,h){var d=r.stateNode;d.props=a,d.state=r.memoizedState,d.refs={},Eh(r);var m=i.contextType;typeof m=="object"&&m!==null?d.context=zn(m):(m=yn(i)?_i:rn.current,d.context=mo(r,m)),d.state=r.memoizedState,m=i.getDerivedStateFromProps,typeof m=="function"&&(Vh(r,i,m,a),d.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(i=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),i!==d.state&&fu.enqueueReplaceState(d,d.state,null),ou(r,a,d,h),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308)}function Io(r,i){try{var a="",h=i;do a+=ze(h),h=h.return;while(h);var d=a}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:r,source:i,stack:d,digest:null}}function Lh(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function Mh(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var i0=typeof WeakMap=="function"?WeakMap:Map;function Vm(r,i,a){a=ts(-1,a),a.tag=3,a.payload={element:null};var h=i.value;return a.callback=function(){wu||(wu=!0,Xh=h),Mh(r,i)},a}function Om(r,i,a){a=ts(-1,a),a.tag=3;var h=r.type.getDerivedStateFromError;if(typeof h=="function"){var d=i.value;a.payload=function(){return h(d)},a.callback=function(){Mh(r,i)}}var m=r.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(a.callback=function(){Mh(r,i),typeof h!="function"&&(Ps===null?Ps=new Set([this]):Ps.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Lm(r,i,a){var h=r.pingCache;if(h===null){h=r.pingCache=new i0;var d=new Set;h.set(i,d)}else d=h.get(i),d===void 0&&(d=new Set,h.set(i,d));d.has(a)||(d.add(a),r=v0.bind(null,r,i,a),i.then(r,r))}function Mm(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Fm(r,i,a,h,d){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=ts(-1,1),i.tag=2,As(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=d,r)}var o0=oe.ReactCurrentOwner,_n=!1;function fn(r,i,a,h){i.child=r===null?sm(i,null,a,h):vo(i,r.child,a,h)}function jm(r,i,a,h,d){a=a.render;var m=i.ref;return Eo(i,d),h=Rh(r,i,a,h,m,d),a=Ph(),r!==null&&!_n?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,ns(r,i,d)):(wt&&a&&hh(i),i.flags|=1,fn(r,i,h,d),i.child)}function Um(r,i,a,h,d){if(r===null){var m=a.type;return typeof m=="function"&&!id(m)&&m.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=m,zm(r,i,m,h,d)):(r=ku(a.type,null,h,i,i.mode,d),r.ref=i.ref,r.return=i,i.child=r)}if(m=r.child,(r.lanes&d)===0){var w=m.memoizedProps;if(a=a.compare,a=a!==null?a:Sa,a(w,h)&&r.ref===i.ref)return ns(r,i,d)}return i.flags|=1,r=Ds(m,h),r.ref=i.ref,r.return=i,i.child=r}function zm(r,i,a,h,d){if(r!==null){var m=r.memoizedProps;if(Sa(m,h)&&r.ref===i.ref)if(_n=!1,i.pendingProps=h=m,(r.lanes&d)!==0)(r.flags&131072)!==0&&(_n=!0);else return i.lanes=r.lanes,ns(r,i,d)}return Fh(r,i,a,h,d)}function Bm(r,i,a){var h=i.pendingProps,d=h.children,m=r!==null?r.memoizedState:null;if(h.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},ct(Co,Vn),Vn|=a;else{if((a&1073741824)===0)return r=m!==null?m.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,ct(Co,Vn),Vn|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},h=m!==null?m.baseLanes:a,ct(Co,Vn),Vn|=h}else m!==null?(h=m.baseLanes|a,i.memoizedState=null):h=a,ct(Co,Vn),Vn|=h;return fn(r,i,d,a),i.child}function $m(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Fh(r,i,a,h,d){var m=yn(a)?_i:rn.current;return m=mo(i,m),Eo(i,d),a=Rh(r,i,a,h,m,d),h=Ph(),r!==null&&!_n?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~d,ns(r,i,d)):(wt&&h&&hh(i),i.flags|=1,fn(r,i,a,d),i.child)}function Wm(r,i,a,h,d){if(yn(a)){var m=!0;Yl(i)}else m=!1;if(Eo(i,d),i.stateNode===null)mu(r,i),bm(i,a,h),Oh(i,a,h,d),h=!0;else if(r===null){var w=i.stateNode,P=i.memoizedProps;w.props=P;var O=w.context,H=a.contextType;typeof H=="object"&&H!==null?H=zn(H):(H=yn(a)?_i:rn.current,H=mo(i,H));var re=a.getDerivedStateFromProps,ie=typeof re=="function"||typeof w.getSnapshotBeforeUpdate=="function";ie||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==h||O!==H)&&Dm(i,w,h,H),ks=!1;var te=i.memoizedState;w.state=te,ou(i,h,w,d),O=i.memoizedState,P!==h||te!==O||gn.current||ks?(typeof re=="function"&&(Vh(i,a,re,h),O=i.memoizedState),(P=ks||Nm(i,a,P,h,te,O,H))?(ie||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=h,i.memoizedState=O),w.props=h,w.state=O,w.context=H,h=P):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),h=!1)}else{w=i.stateNode,om(r,i),P=i.memoizedProps,H=i.type===i.elementType?P:Zn(i.type,P),w.props=H,ie=i.pendingProps,te=w.context,O=a.contextType,typeof O=="object"&&O!==null?O=zn(O):(O=yn(a)?_i:rn.current,O=mo(i,O));var ve=a.getDerivedStateFromProps;(re=typeof ve=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==ie||te!==O)&&Dm(i,w,h,O),ks=!1,te=i.memoizedState,w.state=te,ou(i,h,w,d);var Se=i.memoizedState;P!==ie||te!==Se||gn.current||ks?(typeof ve=="function"&&(Vh(i,a,ve,h),Se=i.memoizedState),(H=ks||Nm(i,a,H,h,te,Se,O)||!1)?(re||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,Se,O),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,Se,O)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),i.memoizedProps=h,i.memoizedState=Se),w.props=h,w.state=Se,w.context=O,h=H):(typeof w.componentDidUpdate!="function"||P===r.memoizedProps&&te===r.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===r.memoizedProps&&te===r.memoizedState||(i.flags|=1024),h=!1)}return jh(r,i,a,h,m,d)}function jh(r,i,a,h,d,m){$m(r,i);var w=(i.flags&128)!==0;if(!h&&!w)return d&&Qp(i,a,!1),ns(r,i,m);h=i.stateNode,o0.current=i;var P=w&&typeof a.getDerivedStateFromError!="function"?null:h.render();return i.flags|=1,r!==null&&w?(i.child=vo(i,r.child,null,m),i.child=vo(i,null,P,m)):fn(r,i,P,m),i.memoizedState=h.state,d&&Qp(i,a,!0),i.child}function Hm(r){var i=r.stateNode;i.pendingContext?Gp(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Gp(r,i.context,!1),Th(r,i.containerInfo)}function qm(r,i,a,h,d){return _o(),mh(d),i.flags|=256,fn(r,i,a,h),i.child}var Uh={dehydrated:null,treeContext:null,retryLane:0};function zh(r){return{baseLanes:r,cachePool:null,transitions:null}}function Gm(r,i,a){var h=i.pendingProps,d=Et.current,m=!1,w=(i.flags&128)!==0,P;if((P=w)||(P=r!==null&&r.memoizedState===null?!1:(d&2)!==0),P?(m=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(d|=1),ct(Et,d&1),r===null)return ph(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=h.children,r=h.fallback,m?(h=i.mode,m=i.child,w={mode:"hidden",children:w},(h&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=w):m=Au(w,h,0,null),r=Ri(r,h,a,null),m.return=i,r.return=i,m.sibling=r,i.child=m,i.child.memoizedState=zh(a),i.memoizedState=Uh,r):Bh(i,w));if(d=r.memoizedState,d!==null&&(P=d.dehydrated,P!==null))return a0(r,i,w,h,P,d,a);if(m){m=h.fallback,w=i.mode,d=r.child,P=d.sibling;var O={mode:"hidden",children:h.children};return(w&1)===0&&i.child!==d?(h=i.child,h.childLanes=0,h.pendingProps=O,i.deletions=null):(h=Ds(d,O),h.subtreeFlags=d.subtreeFlags&14680064),P!==null?m=Ds(P,m):(m=Ri(m,w,a,null),m.flags|=2),m.return=i,h.return=i,h.sibling=m,i.child=h,h=m,m=i.child,w=r.child.memoizedState,w=w===null?zh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},m.memoizedState=w,m.childLanes=r.childLanes&~a,i.memoizedState=Uh,h}return m=r.child,r=m.sibling,h=Ds(m,{mode:"visible",children:h.children}),(i.mode&1)===0&&(h.lanes=a),h.return=i,h.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=h,i.memoizedState=null,h}function Bh(r,i){return i=Au({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function pu(r,i,a,h){return h!==null&&mh(h),vo(i,r.child,null,a),r=Bh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function a0(r,i,a,h,d,m,w){if(a)return i.flags&256?(i.flags&=-257,h=Lh(Error(t(422))),pu(r,i,w,h)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(m=h.fallback,d=i.mode,h=Au({mode:"visible",children:h.children},d,0,null),m=Ri(m,d,w,null),m.flags|=2,h.return=i,m.return=i,h.sibling=m,i.child=h,(i.mode&1)!==0&&vo(i,r.child,null,w),i.child.memoizedState=zh(w),i.memoizedState=Uh,m);if((i.mode&1)===0)return pu(r,i,w,null);if(d.data==="$!"){if(h=d.nextSibling&&d.nextSibling.dataset,h)var P=h.dgst;return h=P,m=Error(t(419)),h=Lh(m,h,void 0),pu(r,i,w,h)}if(P=(w&r.childLanes)!==0,_n||P){if(h=$t,h!==null){switch(w&-w){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(h.suspendedLanes|w))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,es(r,d),nr(h,r,d,-1))}return sd(),h=Lh(Error(t(421))),pu(r,i,w,h)}return d.data==="$?"?(i.flags|=128,i.child=r.child,i=w0.bind(null,r),d._reactRetry=i,null):(r=m.treeContext,Dn=Ts(d.nextSibling),bn=i,wt=!0,Xn=null,r!==null&&(jn[Un++]=Xr,jn[Un++]=Zr,jn[Un++]=vi,Xr=r.id,Zr=r.overflow,vi=i),i=Bh(i,h.children),i.flags|=4096,i)}function Km(r,i,a){r.lanes|=i;var h=r.alternate;h!==null&&(h.lanes|=i),vh(r.return,i,a)}function $h(r,i,a,h,d){var m=r.memoizedState;m===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:h,tail:a,tailMode:d}:(m.isBackwards=i,m.rendering=null,m.renderingStartTime=0,m.last=h,m.tail=a,m.tailMode=d)}function Qm(r,i,a){var h=i.pendingProps,d=h.revealOrder,m=h.tail;if(fn(r,i,h.children,a),h=Et.current,(h&2)!==0)h=h&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Km(r,a,i);else if(r.tag===19)Km(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}h&=1}if(ct(Et,h),(i.mode&1)===0)i.memoizedState=null;else switch(d){case"forwards":for(a=i.child,d=null;a!==null;)r=a.alternate,r!==null&&au(r)===null&&(d=a),a=a.sibling;a=d,a===null?(d=i.child,i.child=null):(d=a.sibling,a.sibling=null),$h(i,!1,d,a,m);break;case"backwards":for(a=null,d=i.child,i.child=null;d!==null;){if(r=d.alternate,r!==null&&au(r)===null){i.child=d;break}r=d.sibling,d.sibling=a,a=d,d=r}$h(i,!0,a,null,m);break;case"together":$h(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function mu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function ns(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),Si|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,a=Ds(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=Ds(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function l0(r,i,a){switch(i.tag){case 3:Hm(i),_o();break;case 5:um(i);break;case 1:yn(i.type)&&Yl(i);break;case 4:Th(i,i.stateNode.containerInfo);break;case 10:var h=i.type._context,d=i.memoizedProps.value;ct(ru,h._currentValue),h._currentValue=d;break;case 13:if(h=i.memoizedState,h!==null)return h.dehydrated!==null?(ct(Et,Et.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Gm(r,i,a):(ct(Et,Et.current&1),r=ns(r,i,a),r!==null?r.sibling:null);ct(Et,Et.current&1);break;case 19:if(h=(a&i.childLanes)!==0,(r.flags&128)!==0){if(h)return Qm(r,i,a);i.flags|=128}if(d=i.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ct(Et,Et.current),h)break;return null;case 22:case 23:return i.lanes=0,Bm(r,i,a)}return ns(r,i,a)}var Jm,Wh,Ym,Xm;Jm=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Wh=function(){},Ym=function(r,i,a,h){var d=r.memoizedProps;if(d!==h){r=i.stateNode,Ti(kr.current);var m=null;switch(a){case"input":d=ae(r,d),h=ae(r,h),m=[];break;case"select":d=J({},d,{value:void 0}),h=J({},h,{value:void 0}),m=[];break;case"textarea":d=Ft(r,d),h=Ft(r,h),m=[];break;default:typeof d.onClick!="function"&&typeof h.onClick=="function"&&(r.onclick=Kl)}en(a,h);var w;a=null;for(H in d)if(!h.hasOwnProperty(H)&&d.hasOwnProperty(H)&&d[H]!=null)if(H==="style"){var P=d[H];for(w in P)P.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else H!=="dangerouslySetInnerHTML"&&H!=="children"&&H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&H!=="autoFocus"&&(o.hasOwnProperty(H)?m||(m=[]):(m=m||[]).push(H,null));for(H in h){var O=h[H];if(P=d!=null?d[H]:void 0,h.hasOwnProperty(H)&&O!==P&&(O!=null||P!=null))if(H==="style")if(P){for(w in P)!P.hasOwnProperty(w)||O&&O.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in O)O.hasOwnProperty(w)&&P[w]!==O[w]&&(a||(a={}),a[w]=O[w])}else a||(m||(m=[]),m.push(H,a)),a=O;else H==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,P=P?P.__html:void 0,O!=null&&P!==O&&(m=m||[]).push(H,O)):H==="children"?typeof O!="string"&&typeof O!="number"||(m=m||[]).push(H,""+O):H!=="suppressContentEditableWarning"&&H!=="suppressHydrationWarning"&&(o.hasOwnProperty(H)?(O!=null&&H==="onScroll"&&pt("scroll",r),m||P===O||(m=[])):(m=m||[]).push(H,O))}a&&(m=m||[]).push("style",a);var H=m;(i.updateQueue=H)&&(i.flags|=4)}},Xm=function(r,i,a,h){a!==h&&(i.flags|=4)};function ja(r,i){if(!wt)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:h.sibling=null}}function on(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,h=0;if(i)for(var d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags&14680064,h|=d.flags&14680064,d.return=r,d=d.sibling;else for(d=r.child;d!==null;)a|=d.lanes|d.childLanes,h|=d.subtreeFlags,h|=d.flags,d.return=r,d=d.sibling;return r.subtreeFlags|=h,r.childLanes=a,i}function u0(r,i,a){var h=i.pendingProps;switch(dh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return on(i),null;case 1:return yn(i.type)&&Jl(),on(i),null;case 3:return h=i.stateNode,To(),mt(gn),mt(rn),Ch(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(tu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Xn!==null&&(td(Xn),Xn=null))),Wh(r,i),on(i),null;case 5:Ih(i);var d=Ti(Va.current);if(a=i.type,r!==null&&i.stateNode!=null)Ym(r,i,a,h,d),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!h){if(i.stateNode===null)throw Error(t(166));return on(i),null}if(r=Ti(kr.current),tu(i)){h=i.stateNode,a=i.type;var m=i.memoizedProps;switch(h[Cr]=i,h[Pa]=m,r=(i.mode&1)!==0,a){case"dialog":pt("cancel",h),pt("close",h);break;case"iframe":case"object":case"embed":pt("load",h);break;case"video":case"audio":for(d=0;d<ka.length;d++)pt(ka[d],h);break;case"source":pt("error",h);break;case"img":case"image":case"link":pt("error",h),pt("load",h);break;case"details":pt("toggle",h);break;case"input":W(h,m),pt("invalid",h);break;case"select":h._wrapperState={wasMultiple:!!m.multiple},pt("invalid",h);break;case"textarea":lr(h,m),pt("invalid",h)}en(a,m),d=null;for(var w in m)if(m.hasOwnProperty(w)){var P=m[w];w==="children"?typeof P=="string"?h.textContent!==P&&(m.suppressHydrationWarning!==!0&&Gl(h.textContent,P,r),d=["children",P]):typeof P=="number"&&h.textContent!==""+P&&(m.suppressHydrationWarning!==!0&&Gl(h.textContent,P,r),d=["children",""+P]):o.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&pt("scroll",h)}switch(a){case"input":Ln(h),fe(h,m,!0);break;case"textarea":Ln(h),ur(h);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(h.onclick=Kl)}h=d,i.updateQueue=h,h!==null&&(i.flags|=4)}else{w=d.nodeType===9?d:d.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=fs(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=w.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof h.is=="string"?r=w.createElement(a,{is:h.is}):(r=w.createElement(a),a==="select"&&(w=r,h.multiple?w.multiple=!0:h.size&&(w.size=h.size))):r=w.createElementNS(r,a),r[Cr]=i,r[Pa]=h,Jm(r,i,!1,!1),i.stateNode=r;e:{switch(w=zr(a,h),a){case"dialog":pt("cancel",r),pt("close",r),d=h;break;case"iframe":case"object":case"embed":pt("load",r),d=h;break;case"video":case"audio":for(d=0;d<ka.length;d++)pt(ka[d],r);d=h;break;case"source":pt("error",r),d=h;break;case"img":case"image":case"link":pt("error",r),pt("load",r),d=h;break;case"details":pt("toggle",r),d=h;break;case"input":W(r,h),d=ae(r,h),pt("invalid",r);break;case"option":d=h;break;case"select":r._wrapperState={wasMultiple:!!h.multiple},d=J({},h,{value:void 0}),pt("invalid",r);break;case"textarea":lr(r,h),d=Ft(r,h),pt("invalid",r);break;default:d=h}en(a,d),P=d;for(m in P)if(P.hasOwnProperty(m)){var O=P[m];m==="style"?Cn(r,O):m==="dangerouslySetInnerHTML"?(O=O?O.__html:void 0,O!=null&&qi(r,O)):m==="children"?typeof O=="string"?(a!=="textarea"||O!=="")&&jr(r,O):typeof O=="number"&&jr(r,""+O):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(o.hasOwnProperty(m)?O!=null&&m==="onScroll"&&pt("scroll",r):O!=null&&ue(r,m,O,w))}switch(a){case"input":Ln(r),fe(r,h,!1);break;case"textarea":Ln(r),ur(r);break;case"option":h.value!=null&&r.setAttribute("value",""+Ae(h.value));break;case"select":r.multiple=!!h.multiple,m=h.value,m!=null?St(r,!!h.multiple,m,!1):h.defaultValue!=null&&St(r,!!h.multiple,h.defaultValue,!0);break;default:typeof d.onClick=="function"&&(r.onclick=Kl)}switch(a){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}}h&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return on(i),null;case 6:if(r&&i.stateNode!=null)Xm(r,i,r.memoizedProps,h);else{if(typeof h!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ti(Va.current),Ti(kr.current),tu(i)){if(h=i.stateNode,a=i.memoizedProps,h[Cr]=i,(m=h.nodeValue!==a)&&(r=bn,r!==null))switch(r.tag){case 3:Gl(h.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Gl(h.nodeValue,a,(r.mode&1)!==0)}m&&(i.flags|=4)}else h=(a.nodeType===9?a:a.ownerDocument).createTextNode(h),h[Cr]=i,i.stateNode=h}return on(i),null;case 13:if(mt(Et),h=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(wt&&Dn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)tm(),_o(),i.flags|=98560,m=!1;else if(m=tu(i),h!==null&&h.dehydrated!==null){if(r===null){if(!m)throw Error(t(318));if(m=i.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(t(317));m[Cr]=i}else _o(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;on(i),m=!1}else Xn!==null&&(td(Xn),Xn=null),m=!0;if(!m)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(h=h!==null,h!==(r!==null&&r.memoizedState!==null)&&h&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(Et.current&1)!==0?Ut===0&&(Ut=3):sd())),i.updateQueue!==null&&(i.flags|=4),on(i),null);case 4:return To(),Wh(r,i),r===null&&Aa(i.stateNode.containerInfo),on(i),null;case 10:return _h(i.type._context),on(i),null;case 17:return yn(i.type)&&Jl(),on(i),null;case 19:if(mt(Et),m=i.memoizedState,m===null)return on(i),null;if(h=(i.flags&128)!==0,w=m.rendering,w===null)if(h)ja(m,!1);else{if(Ut!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(w=au(r),w!==null){for(i.flags|=128,ja(m,!1),h=w.updateQueue,h!==null&&(i.updateQueue=h,i.flags|=4),i.subtreeFlags=0,h=a,a=i.child;a!==null;)m=a,r=h,m.flags&=14680066,w=m.alternate,w===null?(m.childLanes=0,m.lanes=r,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=w.childLanes,m.lanes=w.lanes,m.child=w.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=w.memoizedProps,m.memoizedState=w.memoizedState,m.updateQueue=w.updateQueue,m.type=w.type,r=w.dependencies,m.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return ct(Et,Et.current&1|2),i.child}r=r.sibling}m.tail!==null&&ft()>ko&&(i.flags|=128,h=!0,ja(m,!1),i.lanes=4194304)}else{if(!h)if(r=au(w),r!==null){if(i.flags|=128,h=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),ja(m,!0),m.tail===null&&m.tailMode==="hidden"&&!w.alternate&&!wt)return on(i),null}else 2*ft()-m.renderingStartTime>ko&&a!==1073741824&&(i.flags|=128,h=!0,ja(m,!1),i.lanes=4194304);m.isBackwards?(w.sibling=i.child,i.child=w):(a=m.last,a!==null?a.sibling=w:i.child=w,m.last=w)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=ft(),i.sibling=null,a=Et.current,ct(Et,h?a&1|2:a&1),i):(on(i),null);case 22:case 23:return rd(),h=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==h&&(i.flags|=8192),h&&(i.mode&1)!==0?(Vn&1073741824)!==0&&(on(i),i.subtreeFlags&6&&(i.flags|=8192)):on(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function c0(r,i){switch(dh(i),i.tag){case 1:return yn(i.type)&&Jl(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return To(),mt(gn),mt(rn),Ch(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return Ih(i),null;case 13:if(mt(Et),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));_o()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return mt(Et),null;case 4:return To(),null;case 10:return _h(i.type._context),null;case 22:case 23:return rd(),null;case 24:return null;default:return null}}var gu=!1,an=!1,h0=typeof WeakSet=="function"?WeakSet:Set,Te=null;function So(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(h){kt(r,i,h)}else a.current=null}function Hh(r,i,a){try{a()}catch(h){kt(r,i,h)}}var Zm=!1;function d0(r,i){if(rh=Gr,r=Np(),Qc(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var h=a.getSelection&&a.getSelection();if(h&&h.rangeCount!==0){a=h.anchorNode;var d=h.anchorOffset,m=h.focusNode;h=h.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break e}var w=0,P=-1,O=-1,H=0,re=0,ie=r,te=null;t:for(;;){for(var ve;ie!==a||d!==0&&ie.nodeType!==3||(P=w+d),ie!==m||h!==0&&ie.nodeType!==3||(O=w+h),ie.nodeType===3&&(w+=ie.nodeValue.length),(ve=ie.firstChild)!==null;)te=ie,ie=ve;for(;;){if(ie===r)break t;if(te===a&&++H===d&&(P=w),te===m&&++re===h&&(O=w),(ve=ie.nextSibling)!==null)break;ie=te,te=ie.parentNode}ie=ve}a=P===-1||O===-1?null:{start:P,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(sh={focusedElem:r,selectionRange:a},Gr=!1,Te=i;Te!==null;)if(i=Te,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,Te=r;else for(;Te!==null;){i=Te;try{var Se=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var ke=Se.memoizedProps,Pt=Se.memoizedState,z=i.stateNode,F=z.getSnapshotBeforeUpdate(i.elementType===i.type?ke:Zn(i.type,ke),Pt);z.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var $=i.stateNode.containerInfo;$.nodeType===1?$.textContent="":$.nodeType===9&&$.documentElement&&$.removeChild($.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(de){kt(i,i.return,de)}if(r=i.sibling,r!==null){r.return=i.return,Te=r;break}Te=i.return}return Se=Zm,Zm=!1,Se}function Ua(r,i,a){var h=i.updateQueue;if(h=h!==null?h.lastEffect:null,h!==null){var d=h=h.next;do{if((d.tag&r)===r){var m=d.destroy;d.destroy=void 0,m!==void 0&&Hh(i,a,m)}d=d.next}while(d!==h)}}function yu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var h=a.create;a.destroy=h()}a=a.next}while(a!==i)}}function qh(r){var i=r.ref;if(i!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof i=="function"?i(r):i.current=r}}function eg(r){var i=r.alternate;i!==null&&(r.alternate=null,eg(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[Cr],delete i[Pa],delete i[lh],delete i[KE],delete i[QE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function tg(r){return r.tag===5||r.tag===3||r.tag===4}function ng(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||tg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Gh(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Kl));else if(h!==4&&(r=r.child,r!==null))for(Gh(r,i,a),r=r.sibling;r!==null;)Gh(r,i,a),r=r.sibling}function Kh(r,i,a){var h=r.tag;if(h===5||h===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(h!==4&&(r=r.child,r!==null))for(Kh(r,i,a),r=r.sibling;r!==null;)Kh(r,i,a),r=r.sibling}var Qt=null,er=!1;function Rs(r,i,a){for(a=a.child;a!==null;)rg(r,i,a),a=a.sibling}function rg(r,i,a){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(li,a)}catch{}switch(a.tag){case 5:an||So(a,i);case 6:var h=Qt,d=er;Qt=null,Rs(r,i,a),Qt=h,er=d,Qt!==null&&(er?(r=Qt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Qt.removeChild(a.stateNode));break;case 18:Qt!==null&&(er?(r=Qt,a=a.stateNode,r.nodeType===8?ah(r.parentNode,a):r.nodeType===1&&ah(r,a),_s(r)):ah(Qt,a.stateNode));break;case 4:h=Qt,d=er,Qt=a.stateNode.containerInfo,er=!0,Rs(r,i,a),Qt=h,er=d;break;case 0:case 11:case 14:case 15:if(!an&&(h=a.updateQueue,h!==null&&(h=h.lastEffect,h!==null))){d=h=h.next;do{var m=d,w=m.destroy;m=m.tag,w!==void 0&&((m&2)!==0||(m&4)!==0)&&Hh(a,i,w),d=d.next}while(d!==h)}Rs(r,i,a);break;case 1:if(!an&&(So(a,i),h=a.stateNode,typeof h.componentWillUnmount=="function"))try{h.props=a.memoizedProps,h.state=a.memoizedState,h.componentWillUnmount()}catch(P){kt(a,i,P)}Rs(r,i,a);break;case 21:Rs(r,i,a);break;case 22:a.mode&1?(an=(h=an)||a.memoizedState!==null,Rs(r,i,a),an=h):Rs(r,i,a);break;default:Rs(r,i,a)}}function sg(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new h0),i.forEach(function(h){var d=E0.bind(null,r,h);a.has(h)||(a.add(h),h.then(d,d))})}}function tr(r,i){var a=i.deletions;if(a!==null)for(var h=0;h<a.length;h++){var d=a[h];try{var m=r,w=i,P=w;e:for(;P!==null;){switch(P.tag){case 5:Qt=P.stateNode,er=!1;break e;case 3:Qt=P.stateNode.containerInfo,er=!0;break e;case 4:Qt=P.stateNode.containerInfo,er=!0;break e}P=P.return}if(Qt===null)throw Error(t(160));rg(m,w,d),Qt=null,er=!1;var O=d.alternate;O!==null&&(O.return=null),d.return=null}catch(H){kt(d,i,H)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ig(i,r),i=i.sibling}function ig(r,i){var a=r.alternate,h=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(tr(i,r),Rr(r),h&4){try{Ua(3,r,r.return),yu(3,r)}catch(ke){kt(r,r.return,ke)}try{Ua(5,r,r.return)}catch(ke){kt(r,r.return,ke)}}break;case 1:tr(i,r),Rr(r),h&512&&a!==null&&So(a,a.return);break;case 5:if(tr(i,r),Rr(r),h&512&&a!==null&&So(a,a.return),r.flags&32){var d=r.stateNode;try{jr(d,"")}catch(ke){kt(r,r.return,ke)}}if(h&4&&(d=r.stateNode,d!=null)){var m=r.memoizedProps,w=a!==null?a.memoizedProps:m,P=r.type,O=r.updateQueue;if(r.updateQueue=null,O!==null)try{P==="input"&&m.type==="radio"&&m.name!=null&&ce(d,m),zr(P,w);var H=zr(P,m);for(w=0;w<O.length;w+=2){var re=O[w],ie=O[w+1];re==="style"?Cn(d,ie):re==="dangerouslySetInnerHTML"?qi(d,ie):re==="children"?jr(d,ie):ue(d,re,ie,H)}switch(P){case"input":_e(d,m);break;case"textarea":qn(d,m);break;case"select":var te=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ve=m.value;ve!=null?St(d,!!m.multiple,ve,!1):te!==!!m.multiple&&(m.defaultValue!=null?St(d,!!m.multiple,m.defaultValue,!0):St(d,!!m.multiple,m.multiple?[]:"",!1))}d[Pa]=m}catch(ke){kt(r,r.return,ke)}}break;case 6:if(tr(i,r),Rr(r),h&4){if(r.stateNode===null)throw Error(t(162));d=r.stateNode,m=r.memoizedProps;try{d.nodeValue=m}catch(ke){kt(r,r.return,ke)}}break;case 3:if(tr(i,r),Rr(r),h&4&&a!==null&&a.memoizedState.isDehydrated)try{_s(i.containerInfo)}catch(ke){kt(r,r.return,ke)}break;case 4:tr(i,r),Rr(r);break;case 13:tr(i,r),Rr(r),d=r.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Yh=ft())),h&4&&sg(r);break;case 22:if(re=a!==null&&a.memoizedState!==null,r.mode&1?(an=(H=an)||re,tr(i,r),an=H):tr(i,r),Rr(r),h&8192){if(H=r.memoizedState!==null,(r.stateNode.isHidden=H)&&!re&&(r.mode&1)!==0)for(Te=r,re=r.child;re!==null;){for(ie=Te=re;Te!==null;){switch(te=Te,ve=te.child,te.tag){case 0:case 11:case 14:case 15:Ua(4,te,te.return);break;case 1:So(te,te.return);var Se=te.stateNode;if(typeof Se.componentWillUnmount=="function"){h=te,a=te.return;try{i=h,Se.props=i.memoizedProps,Se.state=i.memoizedState,Se.componentWillUnmount()}catch(ke){kt(h,a,ke)}}break;case 5:So(te,te.return);break;case 22:if(te.memoizedState!==null){lg(ie);continue}}ve!==null?(ve.return=te,Te=ve):lg(ie)}re=re.sibling}e:for(re=null,ie=r;;){if(ie.tag===5){if(re===null){re=ie;try{d=ie.stateNode,H?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(P=ie.stateNode,O=ie.memoizedProps.style,w=O!=null&&O.hasOwnProperty("display")?O.display:null,P.style.display=Sn("display",w))}catch(ke){kt(r,r.return,ke)}}}else if(ie.tag===6){if(re===null)try{ie.stateNode.nodeValue=H?"":ie.memoizedProps}catch(ke){kt(r,r.return,ke)}}else if((ie.tag!==22&&ie.tag!==23||ie.memoizedState===null||ie===r)&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===r)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===r)break e;re===ie&&(re=null),ie=ie.return}re===ie&&(re=null),ie.sibling.return=ie.return,ie=ie.sibling}}break;case 19:tr(i,r),Rr(r),h&4&&sg(r);break;case 21:break;default:tr(i,r),Rr(r)}}function Rr(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(tg(a)){var h=a;break e}a=a.return}throw Error(t(160))}switch(h.tag){case 5:var d=h.stateNode;h.flags&32&&(jr(d,""),h.flags&=-33);var m=ng(r);Kh(r,m,d);break;case 3:case 4:var w=h.stateNode.containerInfo,P=ng(r);Gh(r,P,w);break;default:throw Error(t(161))}}catch(O){kt(r,r.return,O)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function f0(r,i,a){Te=r,og(r)}function og(r,i,a){for(var h=(r.mode&1)!==0;Te!==null;){var d=Te,m=d.child;if(d.tag===22&&h){var w=d.memoizedState!==null||gu;if(!w){var P=d.alternate,O=P!==null&&P.memoizedState!==null||an;P=gu;var H=an;if(gu=w,(an=O)&&!H)for(Te=d;Te!==null;)w=Te,O=w.child,w.tag===22&&w.memoizedState!==null?ug(d):O!==null?(O.return=w,Te=O):ug(d);for(;m!==null;)Te=m,og(m),m=m.sibling;Te=d,gu=P,an=H}ag(r)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,Te=m):ag(r)}}function ag(r){for(;Te!==null;){var i=Te;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:an||yu(5,i);break;case 1:var h=i.stateNode;if(i.flags&4&&!an)if(a===null)h.componentDidMount();else{var d=i.elementType===i.type?a.memoizedProps:Zn(i.type,a.memoizedProps);h.componentDidUpdate(d,a.memoizedState,h.__reactInternalSnapshotBeforeUpdate)}var m=i.updateQueue;m!==null&&lm(i,m,h);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}lm(i,w,a)}break;case 5:var P=i.stateNode;if(a===null&&i.flags&4){a=P;var O=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":O.autoFocus&&a.focus();break;case"img":O.src&&(a.src=O.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var H=i.alternate;if(H!==null){var re=H.memoizedState;if(re!==null){var ie=re.dehydrated;ie!==null&&_s(ie)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}an||i.flags&512&&qh(i)}catch(te){kt(i,i.return,te)}}if(i===r){Te=null;break}if(a=i.sibling,a!==null){a.return=i.return,Te=a;break}Te=i.return}}function lg(r){for(;Te!==null;){var i=Te;if(i===r){Te=null;break}var a=i.sibling;if(a!==null){a.return=i.return,Te=a;break}Te=i.return}}function ug(r){for(;Te!==null;){var i=Te;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{yu(4,i)}catch(O){kt(i,a,O)}break;case 1:var h=i.stateNode;if(typeof h.componentDidMount=="function"){var d=i.return;try{h.componentDidMount()}catch(O){kt(i,d,O)}}var m=i.return;try{qh(i)}catch(O){kt(i,m,O)}break;case 5:var w=i.return;try{qh(i)}catch(O){kt(i,w,O)}}}catch(O){kt(i,i.return,O)}if(i===r){Te=null;break}var P=i.sibling;if(P!==null){P.return=i.return,Te=P;break}Te=i.return}}var p0=Math.ceil,_u=oe.ReactCurrentDispatcher,Qh=oe.ReactCurrentOwner,$n=oe.ReactCurrentBatchConfig,et=0,$t=null,bt=null,Jt=0,Vn=0,Co=Is(0),Ut=0,za=null,Si=0,vu=0,Jh=0,Ba=null,vn=null,Yh=0,ko=1/0,rs=null,wu=!1,Xh=null,Ps=null,Eu=!1,xs=null,Tu=0,$a=0,Zh=null,Iu=-1,Su=0;function pn(){return(et&6)!==0?ft():Iu!==-1?Iu:Iu=ft()}function Ns(r){return(r.mode&1)===0?1:(et&2)!==0&&Jt!==0?Jt&-Jt:YE.transition!==null?(Su===0&&(Su=ca()),Su):(r=Xe,r!==0||(r=window.event,r=r===void 0?16:eo(r.type)),r)}function nr(r,i,a,h){if(50<$a)throw $a=0,Zh=null,Error(t(185));di(r,a,h),((et&2)===0||r!==$t)&&(r===$t&&((et&2)===0&&(vu|=a),Ut===4&&bs(r,Jt)),wn(r,h),a===1&&et===0&&(i.mode&1)===0&&(ko=ft()+500,Xl&&Cs()))}function wn(r,i){var a=r.callbackNode;hi(r,i);var h=Wr(r,r===$t?Jt:0);if(h===0)a!==null&&Gi(a),r.callbackNode=null,r.callbackPriority=0;else if(i=h&-h,r.callbackPriority!==i){if(a!=null&&Gi(a),i===1)r.tag===0?JE(hg.bind(null,r)):Jp(hg.bind(null,r)),qE(function(){(et&6)===0&&Cs()}),a=null;else{switch(mr(h)){case 1:a=Ki;break;case 4:a=aa;break;case 16:a=ai;break;case 536870912:a=Qi;break;default:a=ai}a=vg(a,cg.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function cg(r,i){if(Iu=-1,Su=0,(et&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Ao()&&r.callbackNode!==a)return null;var h=Wr(r,r===$t?Jt:0);if(h===0)return null;if((h&30)!==0||(h&r.expiredLanes)!==0||i)i=Cu(r,h);else{i=h;var d=et;et|=2;var m=fg();($t!==r||Jt!==i)&&(rs=null,ko=ft()+500,ki(r,i));do try{y0();break}catch(P){dg(r,P)}while(!0);yh(),_u.current=m,et=d,bt!==null?i=0:($t=null,Jt=0,i=Ut)}if(i!==0){if(i===2&&(d=ua(r),d!==0&&(h=d,i=ed(r,d))),i===1)throw a=za,ki(r,0),bs(r,h),wn(r,ft()),a;if(i===6)bs(r,h);else{if(d=r.current.alternate,(h&30)===0&&!m0(d)&&(i=Cu(r,h),i===2&&(m=ua(r),m!==0&&(h=m,i=ed(r,m))),i===1))throw a=za,ki(r,0),bs(r,h),wn(r,ft()),a;switch(r.finishedWork=d,r.finishedLanes=h,i){case 0:case 1:throw Error(t(345));case 2:Ai(r,vn,rs);break;case 3:if(bs(r,h),(h&130023424)===h&&(i=Yh+500-ft(),10<i)){if(Wr(r,0)!==0)break;if(d=r.suspendedLanes,(d&h)!==h){pn(),r.pingedLanes|=r.suspendedLanes&d;break}r.timeoutHandle=oh(Ai.bind(null,r,vn,rs),i);break}Ai(r,vn,rs);break;case 4:if(bs(r,h),(h&4194240)===h)break;for(i=r.eventTimes,d=-1;0<h;){var w=31-An(h);m=1<<w,w=i[w],w>d&&(d=w),h&=~m}if(h=d,h=ft()-h,h=(120>h?120:480>h?480:1080>h?1080:1920>h?1920:3e3>h?3e3:4320>h?4320:1960*p0(h/1960))-h,10<h){r.timeoutHandle=oh(Ai.bind(null,r,vn,rs),h);break}Ai(r,vn,rs);break;case 5:Ai(r,vn,rs);break;default:throw Error(t(329))}}}return wn(r,ft()),r.callbackNode===a?cg.bind(null,r):null}function ed(r,i){var a=Ba;return r.current.memoizedState.isDehydrated&&(ki(r,i).flags|=256),r=Cu(r,i),r!==2&&(i=vn,vn=a,i!==null&&td(i)),r}function td(r){vn===null?vn=r:vn.push.apply(vn,r)}function m0(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var h=0;h<a.length;h++){var d=a[h],m=d.getSnapshot;d=d.value;try{if(!Yn(m(),d))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function bs(r,i){for(i&=~Jh,i&=~vu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-An(i),h=1<<a;r[a]=-1,i&=~h}}function hg(r){if((et&6)!==0)throw Error(t(327));Ao();var i=Wr(r,0);if((i&1)===0)return wn(r,ft()),null;var a=Cu(r,i);if(r.tag!==0&&a===2){var h=ua(r);h!==0&&(i=h,a=ed(r,h))}if(a===1)throw a=za,ki(r,0),bs(r,i),wn(r,ft()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Ai(r,vn,rs),wn(r,ft()),null}function nd(r,i){var a=et;et|=1;try{return r(i)}finally{et=a,et===0&&(ko=ft()+500,Xl&&Cs())}}function Ci(r){xs!==null&&xs.tag===0&&(et&6)===0&&Ao();var i=et;et|=1;var a=$n.transition,h=Xe;try{if($n.transition=null,Xe=1,r)return r()}finally{Xe=h,$n.transition=a,et=i,(et&6)===0&&Cs()}}function rd(){Vn=Co.current,mt(Co)}function ki(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,HE(a)),bt!==null)for(a=bt.return;a!==null;){var h=a;switch(dh(h),h.tag){case 1:h=h.type.childContextTypes,h!=null&&Jl();break;case 3:To(),mt(gn),mt(rn),Ch();break;case 5:Ih(h);break;case 4:To();break;case 13:mt(Et);break;case 19:mt(Et);break;case 10:_h(h.type._context);break;case 22:case 23:rd()}a=a.return}if($t=r,bt=r=Ds(r.current,null),Jt=Vn=i,Ut=0,za=null,Jh=vu=Si=0,vn=Ba=null,Ei!==null){for(i=0;i<Ei.length;i++)if(a=Ei[i],h=a.interleaved,h!==null){a.interleaved=null;var d=h.next,m=a.pending;if(m!==null){var w=m.next;m.next=d,h.next=w}a.pending=h}Ei=null}return r}function dg(r,i){do{var a=bt;try{if(yh(),lu.current=du,uu){for(var h=Tt.memoizedState;h!==null;){var d=h.queue;d!==null&&(d.pending=null),h=h.next}uu=!1}if(Ii=0,Bt=jt=Tt=null,Oa=!1,La=0,Qh.current=null,a===null||a.return===null){Ut=1,za=i,bt=null;break}e:{var m=r,w=a.return,P=a,O=i;if(i=Jt,P.flags|=32768,O!==null&&typeof O=="object"&&typeof O.then=="function"){var H=O,re=P,ie=re.tag;if((re.mode&1)===0&&(ie===0||ie===11||ie===15)){var te=re.alternate;te?(re.updateQueue=te.updateQueue,re.memoizedState=te.memoizedState,re.lanes=te.lanes):(re.updateQueue=null,re.memoizedState=null)}var ve=Mm(w);if(ve!==null){ve.flags&=-257,Fm(ve,w,P,m,i),ve.mode&1&&Lm(m,H,i),i=ve,O=H;var Se=i.updateQueue;if(Se===null){var ke=new Set;ke.add(O),i.updateQueue=ke}else Se.add(O);break e}else{if((i&1)===0){Lm(m,H,i),sd();break e}O=Error(t(426))}}else if(wt&&P.mode&1){var Pt=Mm(w);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),Fm(Pt,w,P,m,i),mh(Io(O,P));break e}}m=O=Io(O,P),Ut!==4&&(Ut=2),Ba===null?Ba=[m]:Ba.push(m),m=w;do{switch(m.tag){case 3:m.flags|=65536,i&=-i,m.lanes|=i;var z=Vm(m,O,i);am(m,z);break e;case 1:P=O;var F=m.type,$=m.stateNode;if((m.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||$!==null&&typeof $.componentDidCatch=="function"&&(Ps===null||!Ps.has($)))){m.flags|=65536,i&=-i,m.lanes|=i;var de=Om(m,P,i);am(m,de);break e}}m=m.return}while(m!==null)}mg(a)}catch(Re){i=Re,bt===a&&a!==null&&(bt=a=a.return);continue}break}while(!0)}function fg(){var r=_u.current;return _u.current=du,r===null?du:r}function sd(){(Ut===0||Ut===3||Ut===2)&&(Ut=4),$t===null||(Si&268435455)===0&&(vu&268435455)===0||bs($t,Jt)}function Cu(r,i){var a=et;et|=2;var h=fg();($t!==r||Jt!==i)&&(rs=null,ki(r,i));do try{g0();break}catch(d){dg(r,d)}while(!0);if(yh(),et=a,_u.current=h,bt!==null)throw Error(t(261));return $t=null,Jt=0,Ut}function g0(){for(;bt!==null;)pg(bt)}function y0(){for(;bt!==null&&!oi();)pg(bt)}function pg(r){var i=_g(r.alternate,r,Vn);r.memoizedProps=r.pendingProps,i===null?mg(r):bt=i,Qh.current=null}function mg(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=u0(a,i,Vn),a!==null){bt=a;return}}else{if(a=c0(a,i),a!==null){a.flags&=32767,bt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Ut=6,bt=null;return}}if(i=i.sibling,i!==null){bt=i;return}bt=i=r}while(i!==null);Ut===0&&(Ut=5)}function Ai(r,i,a){var h=Xe,d=$n.transition;try{$n.transition=null,Xe=1,_0(r,i,a,h)}finally{$n.transition=d,Xe=h}return null}function _0(r,i,a,h){do Ao();while(xs!==null);if((et&6)!==0)throw Error(t(327));a=r.finishedWork;var d=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var m=a.lanes|a.childLanes;if(Wc(r,m),r===$t&&(bt=$t=null,Jt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Eu||(Eu=!0,vg(ai,function(){return Ao(),null})),m=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||m){m=$n.transition,$n.transition=null;var w=Xe;Xe=1;var P=et;et|=4,Qh.current=null,d0(r,a),ig(a,r),FE(sh),Gr=!!rh,sh=rh=null,r.current=a,f0(a),$r(),et=P,Xe=w,$n.transition=m}else r.current=a;if(Eu&&(Eu=!1,xs=r,Tu=d),m=r.pendingLanes,m===0&&(Ps=null),bl(a.stateNode),wn(r,ft()),i!==null)for(h=r.onRecoverableError,a=0;a<i.length;a++)d=i[a],h(d.value,{componentStack:d.stack,digest:d.digest});if(wu)throw wu=!1,r=Xh,Xh=null,r;return(Tu&1)!==0&&r.tag!==0&&Ao(),m=r.pendingLanes,(m&1)!==0?r===Zh?$a++:($a=0,Zh=r):$a=0,Cs(),null}function Ao(){if(xs!==null){var r=mr(Tu),i=$n.transition,a=Xe;try{if($n.transition=null,Xe=16>r?16:r,xs===null)var h=!1;else{if(r=xs,xs=null,Tu=0,(et&6)!==0)throw Error(t(331));var d=et;for(et|=4,Te=r.current;Te!==null;){var m=Te,w=m.child;if((Te.flags&16)!==0){var P=m.deletions;if(P!==null){for(var O=0;O<P.length;O++){var H=P[O];for(Te=H;Te!==null;){var re=Te;switch(re.tag){case 0:case 11:case 15:Ua(8,re,m)}var ie=re.child;if(ie!==null)ie.return=re,Te=ie;else for(;Te!==null;){re=Te;var te=re.sibling,ve=re.return;if(eg(re),re===H){Te=null;break}if(te!==null){te.return=ve,Te=te;break}Te=ve}}}var Se=m.alternate;if(Se!==null){var ke=Se.child;if(ke!==null){Se.child=null;do{var Pt=ke.sibling;ke.sibling=null,ke=Pt}while(ke!==null)}}Te=m}}if((m.subtreeFlags&2064)!==0&&w!==null)w.return=m,Te=w;else e:for(;Te!==null;){if(m=Te,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Ua(9,m,m.return)}var z=m.sibling;if(z!==null){z.return=m.return,Te=z;break e}Te=m.return}}var F=r.current;for(Te=F;Te!==null;){w=Te;var $=w.child;if((w.subtreeFlags&2064)!==0&&$!==null)$.return=w,Te=$;else e:for(w=F;Te!==null;){if(P=Te,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:yu(9,P)}}catch(Re){kt(P,P.return,Re)}if(P===w){Te=null;break e}var de=P.sibling;if(de!==null){de.return=P.return,Te=de;break e}Te=P.return}}if(et=d,Cs(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(li,r)}catch{}h=!0}return h}finally{Xe=a,$n.transition=i}}return!1}function gg(r,i,a){i=Io(a,i),i=Vm(r,i,1),r=As(r,i,1),i=pn(),r!==null&&(di(r,1,i),wn(r,i))}function kt(r,i,a){if(r.tag===3)gg(r,r,a);else for(;i!==null;){if(i.tag===3){gg(i,r,a);break}else if(i.tag===1){var h=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Ps===null||!Ps.has(h))){r=Io(a,r),r=Om(i,r,1),i=As(i,r,1),r=pn(),i!==null&&(di(i,1,r),wn(i,r));break}}i=i.return}}function v0(r,i,a){var h=r.pingCache;h!==null&&h.delete(i),i=pn(),r.pingedLanes|=r.suspendedLanes&a,$t===r&&(Jt&a)===a&&(Ut===4||Ut===3&&(Jt&130023424)===Jt&&500>ft()-Yh?ki(r,0):Jh|=a),wn(r,i)}function yg(r,i){i===0&&((r.mode&1)===0?i=1:(i=ms,ms<<=1,(ms&130023424)===0&&(ms=4194304)));var a=pn();r=es(r,i),r!==null&&(di(r,i,a),wn(r,a))}function w0(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),yg(r,a)}function E0(r,i){var a=0;switch(r.tag){case 13:var h=r.stateNode,d=r.memoizedState;d!==null&&(a=d.retryLane);break;case 19:h=r.stateNode;break;default:throw Error(t(314))}h!==null&&h.delete(i),yg(r,a)}var _g;_g=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||gn.current)_n=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return _n=!1,l0(r,i,a);_n=(r.flags&131072)!==0}else _n=!1,wt&&(i.flags&1048576)!==0&&Yp(i,eu,i.index);switch(i.lanes=0,i.tag){case 2:var h=i.type;mu(r,i),r=i.pendingProps;var d=mo(i,rn.current);Eo(i,a),d=Rh(null,i,h,r,d,a);var m=Ph();return i.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,yn(h)?(m=!0,Yl(i)):m=!1,i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Eh(i),d.updater=fu,i.stateNode=d,d._reactInternals=i,Oh(i,h,r,a),i=jh(null,i,h,!0,m,a)):(i.tag=0,wt&&m&&hh(i),fn(null,i,d,a),i=i.child),i;case 16:h=i.elementType;e:{switch(mu(r,i),r=i.pendingProps,d=h._init,h=d(h._payload),i.type=h,d=i.tag=I0(h),r=Zn(h,r),d){case 0:i=Fh(null,i,h,r,a);break e;case 1:i=Wm(null,i,h,r,a);break e;case 11:i=jm(null,i,h,r,a);break e;case 14:i=Um(null,i,h,Zn(h.type,r),a);break e}throw Error(t(306,h,""))}return i;case 0:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:Zn(h,d),Fh(r,i,h,d,a);case 1:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:Zn(h,d),Wm(r,i,h,d,a);case 3:e:{if(Hm(i),r===null)throw Error(t(387));h=i.pendingProps,m=i.memoizedState,d=m.element,om(r,i),ou(i,h,null,a);var w=i.memoizedState;if(h=w.element,m.isDehydrated)if(m={element:h,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=m,i.memoizedState=m,i.flags&256){d=Io(Error(t(423)),i),i=qm(r,i,h,a,d);break e}else if(h!==d){d=Io(Error(t(424)),i),i=qm(r,i,h,a,d);break e}else for(Dn=Ts(i.stateNode.containerInfo.firstChild),bn=i,wt=!0,Xn=null,a=sm(i,null,h,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(_o(),h===d){i=ns(r,i,a);break e}fn(r,i,h,a)}i=i.child}return i;case 5:return um(i),r===null&&ph(i),h=i.type,d=i.pendingProps,m=r!==null?r.memoizedProps:null,w=d.children,ih(h,d)?w=null:m!==null&&ih(h,m)&&(i.flags|=32),$m(r,i),fn(r,i,w,a),i.child;case 6:return r===null&&ph(i),null;case 13:return Gm(r,i,a);case 4:return Th(i,i.stateNode.containerInfo),h=i.pendingProps,r===null?i.child=vo(i,null,h,a):fn(r,i,h,a),i.child;case 11:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:Zn(h,d),jm(r,i,h,d,a);case 7:return fn(r,i,i.pendingProps,a),i.child;case 8:return fn(r,i,i.pendingProps.children,a),i.child;case 12:return fn(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(h=i.type._context,d=i.pendingProps,m=i.memoizedProps,w=d.value,ct(ru,h._currentValue),h._currentValue=w,m!==null)if(Yn(m.value,w)){if(m.children===d.children&&!gn.current){i=ns(r,i,a);break e}}else for(m=i.child,m!==null&&(m.return=i);m!==null;){var P=m.dependencies;if(P!==null){w=m.child;for(var O=P.firstContext;O!==null;){if(O.context===h){if(m.tag===1){O=ts(-1,a&-a),O.tag=2;var H=m.updateQueue;if(H!==null){H=H.shared;var re=H.pending;re===null?O.next=O:(O.next=re.next,re.next=O),H.pending=O}}m.lanes|=a,O=m.alternate,O!==null&&(O.lanes|=a),vh(m.return,a,i),P.lanes|=a;break}O=O.next}}else if(m.tag===10)w=m.type===i.type?null:m.child;else if(m.tag===18){if(w=m.return,w===null)throw Error(t(341));w.lanes|=a,P=w.alternate,P!==null&&(P.lanes|=a),vh(w,a,i),w=m.sibling}else w=m.child;if(w!==null)w.return=m;else for(w=m;w!==null;){if(w===i){w=null;break}if(m=w.sibling,m!==null){m.return=w.return,w=m;break}w=w.return}m=w}fn(r,i,d.children,a),i=i.child}return i;case 9:return d=i.type,h=i.pendingProps.children,Eo(i,a),d=zn(d),h=h(d),i.flags|=1,fn(r,i,h,a),i.child;case 14:return h=i.type,d=Zn(h,i.pendingProps),d=Zn(h.type,d),Um(r,i,h,d,a);case 15:return zm(r,i,i.type,i.pendingProps,a);case 17:return h=i.type,d=i.pendingProps,d=i.elementType===h?d:Zn(h,d),mu(r,i),i.tag=1,yn(h)?(r=!0,Yl(i)):r=!1,Eo(i,a),bm(i,h,d),Oh(i,h,d,a),jh(null,i,h,!0,r,a);case 19:return Qm(r,i,a);case 22:return Bm(r,i,a)}throw Error(t(156,i.tag))};function vg(r,i){return oa(r,i)}function T0(r,i,a,h){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wn(r,i,a,h){return new T0(r,i,a,h)}function id(r){return r=r.prototype,!(!r||!r.isReactComponent)}function I0(r){if(typeof r=="function")return id(r)?1:0;if(r!=null){if(r=r.$$typeof,r===V)return 11;if(r===Oe)return 14}return 2}function Ds(r,i){var a=r.alternate;return a===null?(a=Wn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function ku(r,i,a,h,d,m){var w=2;if(h=r,typeof r=="function")id(r)&&(w=1);else if(typeof r=="string")w=5;else e:switch(r){case x:return Ri(a.children,d,m,i);case I:w=8,d|=8;break;case k:return r=Wn(12,a,i,d|2),r.elementType=k,r.lanes=m,r;case R:return r=Wn(13,a,i,d),r.elementType=R,r.lanes=m,r;case Ie:return r=Wn(19,a,i,d),r.elementType=Ie,r.lanes=m,r;case ge:return Au(a,d,m,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case L:w=10;break e;case D:w=9;break e;case V:w=11;break e;case Oe:w=14;break e;case Ye:w=16,h=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Wn(w,a,i,d),i.elementType=r,i.type=h,i.lanes=m,i}function Ri(r,i,a,h){return r=Wn(7,r,h,i),r.lanes=a,r}function Au(r,i,a,h){return r=Wn(22,r,h,i),r.elementType=ge,r.lanes=a,r.stateNode={isHidden:!1},r}function od(r,i,a){return r=Wn(6,r,null,i),r.lanes=a,r}function ad(r,i,a){return i=Wn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function S0(r,i,a,h,d){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ha(0),this.expirationTimes=ha(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ha(0),this.identifierPrefix=h,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function ld(r,i,a,h,d,m,w,P,O){return r=new S0(r,i,a,P,O),i===1?(i=1,m===!0&&(i|=8)):i=0,m=Wn(3,null,null,i),r.current=m,m.stateNode=r,m.memoizedState={element:h,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Eh(m),r}function C0(r,i,a){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ee,key:h==null?null:""+h,children:r,containerInfo:i,implementation:a}}function wg(r){if(!r)return Ss;r=r._reactInternals;e:{if(Qn(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(yn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(yn(a))return Kp(r,a,i)}return i}function Eg(r,i,a,h,d,m,w,P,O){return r=ld(a,h,!0,r,d,m,w,P,O),r.context=wg(null),a=r.current,h=pn(),d=Ns(a),m=ts(h,d),m.callback=i??null,As(a,m,d),r.current.lanes=d,di(r,d,h),wn(r,h),r}function Ru(r,i,a,h){var d=i.current,m=pn(),w=Ns(d);return a=wg(a),i.context===null?i.context=a:i.pendingContext=a,i=ts(m,w),i.payload={element:r},h=h===void 0?null:h,h!==null&&(i.callback=h),r=As(d,i,w),r!==null&&(nr(r,d,w,m),iu(r,d,w)),w}function Pu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Tg(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function ud(r,i){Tg(r,i),(r=r.alternate)&&Tg(r,i)}function k0(){return null}var Ig=typeof reportError=="function"?reportError:function(r){console.error(r)};function cd(r){this._internalRoot=r}xu.prototype.render=cd.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));Ru(r,i,null,null)},xu.prototype.unmount=cd.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;Ci(function(){Ru(null,r,null,null)}),i[Jr]=null}};function xu(r){this._internalRoot=r}xu.prototype.unstable_scheduleHydration=function(r){if(r){var i=ma();r={blockedOn:null,target:r,priority:i};for(var a=0;a<Rn.length&&i!==0&&i<Rn[a].priority;a++);Rn.splice(a,0,r),a===0&&Xi(r)}};function hd(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Nu(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function Sg(){}function A0(r,i,a,h,d){if(d){if(typeof h=="function"){var m=h;h=function(){var H=Pu(w);m.call(H)}}var w=Eg(i,h,r,0,null,!1,!1,"",Sg);return r._reactRootContainer=w,r[Jr]=w.current,Aa(r.nodeType===8?r.parentNode:r),Ci(),w}for(;d=r.lastChild;)r.removeChild(d);if(typeof h=="function"){var P=h;h=function(){var H=Pu(O);P.call(H)}}var O=ld(r,0,!1,null,null,!1,!1,"",Sg);return r._reactRootContainer=O,r[Jr]=O.current,Aa(r.nodeType===8?r.parentNode:r),Ci(function(){Ru(i,O,a,h)}),O}function bu(r,i,a,h,d){var m=a._reactRootContainer;if(m){var w=m;if(typeof d=="function"){var P=d;d=function(){var O=Pu(w);P.call(O)}}Ru(i,w,r,d)}else w=A0(a,i,r,d,h);return Pu(w)}fa=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=rt(i.pendingLanes);a!==0&&(da(i,a|1),wn(i,ft()),(et&6)===0&&(ko=ft()+500,Cs()))}break;case 13:Ci(function(){var h=es(r,1);if(h!==null){var d=pn();nr(h,r,1,d)}}),ud(r,1)}},Ji=function(r){if(r.tag===13){var i=es(r,134217728);if(i!==null){var a=pn();nr(i,r,134217728,a)}ud(r,134217728)}},pa=function(r){if(r.tag===13){var i=Ns(r),a=es(r,i);if(a!==null){var h=pn();nr(a,r,i,h)}ud(r,i)}},ma=function(){return Xe},ga=function(r,i){var a=Xe;try{return Xe=r,i()}finally{Xe=a}},Mn=function(r,i,a){switch(i){case"input":if(_e(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var h=a[i];if(h!==r&&h.form===r.form){var d=Ql(h);if(!d)throw Error(t(90));Fr(h),_e(h,d)}}}break;case"textarea":qn(r,a);break;case"select":i=a.value,i!=null&&St(r,!!a.multiple,i,!1)}},K=nd,le=Ci;var R0={usingClientEntryPoint:!1,Events:[xa,fo,Ql,hr,dr,nd]},Wa={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},P0={bundleType:Wa.bundleType,version:Wa.version,rendererPackageName:Wa.rendererPackageName,rendererConfig:Wa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Nl(r),r===null?null:r.stateNode},findFiberByHostInstance:Wa.findFiberByHostInstance||k0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Du.isDisabled&&Du.supportsFiber)try{li=Du.inject(P0),kn=Du}catch{}}return En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R0,En.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hd(i))throw Error(t(200));return C0(r,i,null,a)},En.createRoot=function(r,i){if(!hd(r))throw Error(t(299));var a=!1,h="",d=Ig;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(h=i.identifierPrefix),i.onRecoverableError!==void 0&&(d=i.onRecoverableError)),i=ld(r,1,!1,null,null,a,!1,h,d),r[Jr]=i.current,Aa(r.nodeType===8?r.parentNode:r),new cd(i)},En.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=Nl(i),r=r===null?null:r.stateNode,r},En.flushSync=function(r){return Ci(r)},En.hydrate=function(r,i,a){if(!Nu(i))throw Error(t(200));return bu(null,r,i,!0,a)},En.hydrateRoot=function(r,i,a){if(!hd(r))throw Error(t(405));var h=a!=null&&a.hydratedSources||null,d=!1,m="",w=Ig;if(a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Eg(i,null,r,1,a??null,d,!1,m,w),r[Jr]=i.current,Aa(r),h)for(r=0;r<h.length;r++)a=h[r],d=a._getVersion,d=d(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,d]:i.mutableSourceEagerHydrationData.push(a,d);return new xu(i)},En.render=function(r,i,a){if(!Nu(i))throw Error(t(200));return bu(null,r,i,!1,a)},En.unmountComponentAtNode=function(r){if(!Nu(r))throw Error(t(40));return r._reactRootContainer?(Ci(function(){bu(null,null,r,!1,function(){r._reactRootContainer=null,r[Jr]=null})}),!0):!1},En.unstable_batchedUpdates=nd,En.unstable_renderSubtreeIntoContainer=function(r,i,a,h){if(!Nu(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return bu(r,i,a,!1,h)},En.version="18.3.1-next-f1338f8080-20240426",En}var bg;function C_(){if(bg)return pd.exports;bg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),pd.exports=F0(),pd.exports}var Dg;function j0(){if(Dg)return Vu;Dg=1;var n=C_();return Vu.createRoot=n.createRoot,Vu.hydrateRoot=n.hydrateRoot,Vu}var U0=j0();const z0=S_(U0);C_();/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function il(){return il=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},il.apply(this,arguments)}var js;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(js||(js={}));const Vg="popstate";function B0(n){n===void 0&&(n={});function e(o,l){let{pathname:c="/",search:f="",hash:p=""}=zi(o.location.hash.substr(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),bd("",{pathname:c,search:f,hash:p},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(o,l){let c=o.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let p=o.location.href,y=p.indexOf("#");f=y===-1?p:p.slice(0,y)}return f+"#"+(typeof l=="string"?l:Zu(l))}function s(o,l){wc(o.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return W0(e,t,s,n)}function Mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function wc(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function $0(){return Math.random().toString(36).substr(2,8)}function Og(n,e){return{usr:n.state,key:n.key,idx:e}}function bd(n,e,t,s){return t===void 0&&(t=null),il({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?zi(e):e,{state:t,key:e&&e.key||s||$0()})}function Zu(n){let{pathname:e="/",search:t="",hash:s=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function zi(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substr(s),n=n.substr(0,s)),n&&(e.pathname=n)}return e}function W0(n,e,t,s){s===void 0&&(s={});let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,f=js.Pop,p=null,y=v();y==null&&(y=0,c.replaceState(il({},c.state,{idx:y}),""));function v(){return(c.state||{idx:null}).idx}function T(){f=js.Pop;let M=v(),Y=M==null?null:M-y;y=M,p&&p({action:f,location:U.location,delta:Y})}function E(M,Y){f=js.Push;let se=bd(U.location,M,Y);t&&t(se,M),y=v()+1;let ue=Og(se,y),oe=U.createHref(se);try{c.pushState(ue,"",oe)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;o.location.assign(oe)}l&&p&&p({action:f,location:U.location,delta:1})}function b(M,Y){f=js.Replace;let se=bd(U.location,M,Y);t&&t(se,M),y=v();let ue=Og(se,y),oe=U.createHref(se);c.replaceState(ue,"",oe),l&&p&&p({action:f,location:U.location,delta:0})}function j(M){let Y=o.location.origin!=="null"?o.location.origin:o.location.href,se=typeof M=="string"?M:Zu(M);return se=se.replace(/ $/,"%20"),Mt(Y,"No window.location.(origin|href) available to create URL for href: "+se),new URL(se,Y)}let U={get action(){return f},get location(){return n(o,c)},listen(M){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Vg,T),p=M,()=>{o.removeEventListener(Vg,T),p=null}},createHref(M){return e(o,M)},createURL:j,encodeLocation(M){let Y=j(M);return{pathname:Y.pathname,search:Y.search,hash:Y.hash}},push:E,replace:b,go(M){return c.go(M)}};return U}var Lg;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Lg||(Lg={}));function H0(n,e,t){return t===void 0&&(t="/"),q0(n,e,t)}function q0(n,e,t,s){let o=typeof e=="string"?zi(e):e,l=df(o.pathname||"/",t);if(l==null)return null;let c=k_(n);G0(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let y=iT(l);f=nT(c[p],y)}return f}function k_(n,e,t,s){e===void 0&&(e=[]),t===void 0&&(t=[]),s===void 0&&(s="");let o=(l,c,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};p.relativePath.startsWith("/")&&(Mt(p.relativePath.startsWith(s),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(s.length));let y=zs([s,p.relativePath]),v=t.concat(p);l.children&&l.children.length>0&&(Mt(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+y+'".')),k_(l.children,e,v,y)),!(l.path==null&&!l.index)&&e.push({path:y,score:eT(y,l.index),routesMeta:v})};return n.forEach((l,c)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))o(l,c);else for(let p of A_(l.path))o(l,c,p)}),e}function A_(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=A_(s.join("/")),f=[];return f.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&f.push(...c),f.map(p=>n.startsWith("/")&&p===""?"/":p)}function G0(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:tT(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}const K0=/^:[\w-]+$/,Q0=3,J0=2,Y0=1,X0=10,Z0=-2,Mg=n=>n==="*";function eT(n,e){let t=n.split("/"),s=t.length;return t.some(Mg)&&(s+=Z0),e&&(s+=J0),t.filter(o=>!Mg(o)).reduce((o,l)=>o+(K0.test(l)?Q0:l===""?Y0:X0),s)}function tT(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function nT(n,e,t){let{routesMeta:s}=n,o={},l="/",c=[];for(let f=0;f<s.length;++f){let p=s[f],y=f===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",T=rT({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},v),E=p.route;if(!T)return null;Object.assign(o,T.params),c.push({params:o,pathname:zs([l,T.pathname]),pathnameBase:cT(zs([l,T.pathnameBase])),route:E}),T.pathnameBase!=="/"&&(l=zs([l,T.pathnameBase]))}return c}function rT(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=sT(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),f=o.slice(1);return{params:s.reduce((y,v,T)=>{let{paramName:E,isOptional:b}=v;if(E==="*"){let U=f[T]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const j=f[T];return b&&!j?y[E]=void 0:y[E]=(j||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function sT(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),wc(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(s.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function iT(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wc(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function df(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}const oT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aT=n=>oT.test(n);function lT(n,e){e===void 0&&(e="/");let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?zi(n):n,l;if(t)if(aT(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),wc(!1,"Pathnames cannot have embedded double slashes - normalizing "+(c+" -> "+t))}t.startsWith("/")?l=Fg(t.substring(1),"/"):l=Fg(t,e)}else l=e;return{pathname:l,search:hT(s),hash:dT(o)}}function Fg(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function yd(n,e,t,s){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uT(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function R_(n,e){let t=uT(n);return e?t.map((s,o)=>o===t.length-1?s.pathname:s.pathnameBase):t.map(s=>s.pathnameBase)}function P_(n,e,t,s){s===void 0&&(s=!1);let o;typeof n=="string"?o=zi(n):(o=il({},n),Mt(!o.pathname||!o.pathname.includes("?"),yd("?","pathname","search",o)),Mt(!o.pathname||!o.pathname.includes("#"),yd("#","pathname","hash",o)),Mt(!o.search||!o.search.includes("#"),yd("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,f;if(c==null)f=t;else{let T=e.length-1;if(!s&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),T-=1;o.pathname=E.join("/")}f=T>=0?e[T]:"/"}let p=lT(o,f),y=c&&c!=="/"&&c.endsWith("/"),v=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||v)&&(p.pathname+="/"),p}const zs=n=>n.join("/").replace(/\/\/+/g,"/"),cT=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),hT=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,dT=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function fT(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const x_=["post","put","patch","delete"];new Set(x_);const pT=["get",...x_];new Set(pT);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ol(){return ol=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},ol.apply(this,arguments)}const ff=A.createContext(null),mT=A.createContext(null),Bi=A.createContext(null),Ec=A.createContext(null),ei=A.createContext({outlet:null,matches:[],isDataRoute:!1}),N_=A.createContext(null);function gT(n,e){let{relative:t}=e===void 0?{}:e;pl()||Mt(!1);let{basename:s,navigator:o}=A.useContext(Bi),{hash:l,pathname:c,search:f}=V_(n,{relative:t}),p=c;return s!=="/"&&(p=c==="/"?s:zs([s,c])),o.createHref({pathname:p,search:f,hash:l})}function pl(){return A.useContext(Ec)!=null}function ml(){return pl()||Mt(!1),A.useContext(Ec).location}function b_(n){A.useContext(Bi).static||A.useLayoutEffect(n)}function Tc(){let{isDataRoute:n}=A.useContext(ei);return n?PT():yT()}function yT(){pl()||Mt(!1);let n=A.useContext(ff),{basename:e,future:t,navigator:s}=A.useContext(Bi),{matches:o}=A.useContext(ei),{pathname:l}=ml(),c=JSON.stringify(R_(o,t.v7_relativeSplatPath)),f=A.useRef(!1);return b_(()=>{f.current=!0}),A.useCallback(function(y,v){if(v===void 0&&(v={}),!f.current)return;if(typeof y=="number"){s.go(y);return}let T=P_(y,JSON.parse(c),l,v.relative==="path");n==null&&e!=="/"&&(T.pathname=T.pathname==="/"?e:zs([e,T.pathname])),(v.replace?s.replace:s.push)(T,v.state,v)},[e,s,c,l,n])}function D_(){let{matches:n}=A.useContext(ei),e=n[n.length-1];return e?e.params:{}}function V_(n,e){let{relative:t}=e===void 0?{}:e,{future:s}=A.useContext(Bi),{matches:o}=A.useContext(ei),{pathname:l}=ml(),c=JSON.stringify(R_(o,s.v7_relativeSplatPath));return A.useMemo(()=>P_(n,JSON.parse(c),l,t==="path"),[n,c,l,t])}function _T(n,e){return vT(n,e)}function vT(n,e,t,s){pl()||Mt(!1);let{navigator:o}=A.useContext(Bi),{matches:l}=A.useContext(ei),c=l[l.length-1],f=c?c.params:{};c&&c.pathname;let p=c?c.pathnameBase:"/";c&&c.route;let y=ml(),v;if(e){var T;let M=typeof e=="string"?zi(e):e;p==="/"||(T=M.pathname)!=null&&T.startsWith(p)||Mt(!1),v=M}else v=y;let E=v.pathname||"/",b=E;if(p!=="/"){let M=p.replace(/^\//,"").split("/");b="/"+E.replace(/^\//,"").split("/").slice(M.length).join("/")}let j=H0(n,{pathname:b}),U=ST(j&&j.map(M=>Object.assign({},M,{params:Object.assign({},f,M.params),pathname:zs([p,o.encodeLocation?o.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?p:zs([p,o.encodeLocation?o.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),l,t,s);return e&&U?A.createElement(Ec.Provider,{value:{location:ol({pathname:"/",search:"",hash:"",state:null,key:"default"},v),navigationType:js.Pop}},U):U}function wT(){let n=RT(),e=fT(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),t?A.createElement("pre",{style:o},t):null,null)}const ET=A.createElement(wT,null);class TT extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(ei.Provider,{value:this.props.routeContext},A.createElement(N_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function IT(n){let{routeContext:e,match:t,children:s}=n,o=A.useContext(ff);return o&&o.static&&o.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(ei.Provider,{value:e},s)}function ST(n,e,t,s){var o;if(e===void 0&&(e=[]),t===void 0&&(t=null),s===void 0&&(s=null),n==null){var l;if(!t)return null;if(t.errors)n=t.matches;else if((l=s)!=null&&l.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let c=n,f=(o=t)==null?void 0:o.errors;if(f!=null){let v=c.findIndex(T=>T.route.id&&(f==null?void 0:f[T.route.id])!==void 0);v>=0||Mt(!1),c=c.slice(0,Math.min(c.length,v+1))}let p=!1,y=-1;if(t&&s&&s.v7_partialHydration)for(let v=0;v<c.length;v++){let T=c[v];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(y=v),T.route.id){let{loaderData:E,errors:b}=t,j=T.route.loader&&E[T.route.id]===void 0&&(!b||b[T.route.id]===void 0);if(T.route.lazy||j){p=!0,y>=0?c=c.slice(0,y+1):c=[c[0]];break}}}return c.reduceRight((v,T,E)=>{let b,j=!1,U=null,M=null;t&&(b=f&&T.route.id?f[T.route.id]:void 0,U=T.route.errorElement||ET,p&&(y<0&&E===0?(xT("route-fallback"),j=!0,M=null):y===E&&(j=!0,M=T.route.hydrateFallbackElement||null)));let Y=e.concat(c.slice(0,E+1)),se=()=>{let ue;return b?ue=U:j?ue=M:T.route.Component?ue=A.createElement(T.route.Component,null):T.route.element?ue=T.route.element:ue=v,A.createElement(IT,{match:T,routeContext:{outlet:v,matches:Y,isDataRoute:t!=null},children:ue})};return t&&(T.route.ErrorBoundary||T.route.errorElement||E===0)?A.createElement(TT,{location:t.location,revalidation:t.revalidation,component:U,error:b,children:se(),routeContext:{outlet:null,matches:Y,isDataRoute:!0}}):se()},null)}var O_=(function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n})(O_||{}),L_=(function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n})(L_||{});function CT(n){let e=A.useContext(ff);return e||Mt(!1),e}function kT(n){let e=A.useContext(mT);return e||Mt(!1),e}function AT(n){let e=A.useContext(ei);return e||Mt(!1),e}function M_(n){let e=AT(),t=e.matches[e.matches.length-1];return t.route.id||Mt(!1),t.route.id}function RT(){var n;let e=A.useContext(N_),t=kT(),s=M_();return e!==void 0?e:(n=t.errors)==null?void 0:n[s]}function PT(){let{router:n}=CT(O_.UseNavigateStable),e=M_(L_.UseNavigateStable),t=A.useRef(!1);return b_(()=>{t.current=!0}),A.useCallback(function(o,l){l===void 0&&(l={}),t.current&&(typeof o=="number"?n.navigate(o):n.navigate(o,ol({fromRouteId:e},l)))},[n,e])}const jg={};function xT(n,e,t){jg[n]||(jg[n]=!0)}function NT(n,e){n==null||n.v7_startTransition,n==null||n.v7_relativeSplatPath}function Ga(n){Mt(!1)}function bT(n){let{basename:e="/",children:t=null,location:s,navigationType:o=js.Pop,navigator:l,static:c=!1,future:f}=n;pl()&&Mt(!1);let p=e.replace(/^\/*/,"/"),y=A.useMemo(()=>({basename:p,navigator:l,static:c,future:ol({v7_relativeSplatPath:!1},f)}),[p,f,l,c]);typeof s=="string"&&(s=zi(s));let{pathname:v="/",search:T="",hash:E="",state:b=null,key:j="default"}=s,U=A.useMemo(()=>{let M=df(v,p);return M==null?null:{location:{pathname:M,search:T,hash:E,state:b,key:j},navigationType:o}},[p,v,T,E,b,j,o]);return U==null?null:A.createElement(Bi.Provider,{value:y},A.createElement(Ec.Provider,{children:t,value:U}))}function DT(n){let{children:e,location:t}=n;return _T(Dd(e),t)}new Promise(()=>{});function Dd(n,e){e===void 0&&(e=[]);let t=[];return A.Children.forEach(n,(s,o)=>{if(!A.isValidElement(s))return;let l=[...e,o];if(s.type===A.Fragment){t.push.apply(t,Dd(s.props.children,l));return}s.type!==Ga&&Mt(!1),!s.props.index||!s.props.children||Mt(!1);let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Dd(s.props.children,l)),t.push(c)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Vd(){return Vd=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}return n},Vd.apply(this,arguments)}function VT(n,e){if(n==null)return{};var t={},s=Object.keys(n),o,l;for(l=0;l<s.length;l++)o=s[l],!(e.indexOf(o)>=0)&&(t[o]=n[o]);return t}function OT(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function LT(n,e){return n.button===0&&(!e||e==="_self")&&!OT(n)}function Od(n){return n===void 0&&(n=""),new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let s=n[t];return e.concat(Array.isArray(s)?s.map(o=>[t,o]):[[t,s]])},[]))}function MT(n,e){let t=Od(n);return e&&e.forEach((s,o)=>{t.has(o)||e.getAll(o).forEach(l=>{t.append(o,l)})}),t}const FT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jT="6";try{window.__reactRouterVersion=jT}catch{}const UT="startTransition",Ug=O0[UT];function zT(n){let{basename:e,children:t,future:s,window:o}=n,l=A.useRef();l.current==null&&(l.current=B0({window:o,v5Compat:!0}));let c=l.current,[f,p]=A.useState({action:c.action,location:c.location}),{v7_startTransition:y}=s||{},v=A.useCallback(T=>{y&&Ug?Ug(()=>p(T)):p(T)},[p,y]);return A.useLayoutEffect(()=>c.listen(v),[c,v]),A.useEffect(()=>NT(s),[s]),A.createElement(bT,{basename:e,children:t,location:f.location,navigationType:f.action,navigator:c,future:s})}const BT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",$T=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bo=A.forwardRef(function(e,t){let{onClick:s,relative:o,reloadDocument:l,replace:c,state:f,target:p,to:y,preventScrollReset:v,viewTransition:T}=e,E=VT(e,FT),{basename:b}=A.useContext(Bi),j,U=!1;if(typeof y=="string"&&$T.test(y)&&(j=y,BT))try{let ue=new URL(window.location.href),oe=y.startsWith("//")?new URL(ue.protocol+y):new URL(y),ne=df(oe.pathname,b);oe.origin===ue.origin&&ne!=null?y=ne+oe.search+oe.hash:U=!0}catch{}let M=gT(y,{relative:o}),Y=WT(y,{replace:c,state:f,target:p,preventScrollReset:v,relative:o,viewTransition:T});function se(ue){s&&s(ue),ue.defaultPrevented||Y(ue)}return A.createElement("a",Vd({},E,{href:j||M,onClick:U||l?s:se,ref:t,target:p}))});var zg;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(zg||(zg={}));var Bg;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Bg||(Bg={}));function WT(n,e){let{target:t,replace:s,state:o,preventScrollReset:l,relative:c,viewTransition:f}=e===void 0?{}:e,p=Tc(),y=ml(),v=V_(n,{relative:c});return A.useCallback(T=>{if(LT(T,t)){T.preventDefault();let E=s!==void 0?s:Zu(y)===Zu(v);p(n,{replace:E,state:o,preventScrollReset:l,relative:c,viewTransition:f})}},[y,p,v,s,o,t,n,l,c,f])}function F_(n){let e=A.useRef(Od(n)),t=A.useRef(!1),s=ml(),o=A.useMemo(()=>MT(s.search,t.current?null:e.current),[s.search]),l=Tc(),c=A.useCallback((f,p)=>{const y=Od(typeof f=="function"?f(o):f);t.current=!0,l("?"+y,p)},[l,o]);return[o,c]}const HT=()=>{};var $g={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j_=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},qT=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],f=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},U_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,f=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,v=l>>2,T=(l&3)<<4|f>>4;let E=(f&15)<<2|y>>6,b=y&63;p||(b=64,c||(E=64)),s.push(t[v],t[T],t[E],t[b])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(j_(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):qT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],f=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const T=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||f==null||y==null||T==null)throw new GT;const E=l<<2|f>>4;if(s.push(E),y!==64){const b=f<<4&240|y>>2;if(s.push(b),T!==64){const j=y<<6&192|T;s.push(j)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class GT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const KT=function(n){const e=j_(n);return U_.encodeByteArray(e,!0)},ec=function(n){return KT(n).replace(/\./g,"")},z_=function(n){try{return U_.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT=()=>QT().__FIREBASE_DEFAULTS__,YT=()=>{if(typeof process>"u"||typeof $g>"u")return;const n=$g.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},XT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&z_(n[1]);return e&&JSON.parse(e)},Ic=()=>{try{return HT()||JT()||YT()||XT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},B_=n=>{var e,t;return(t=(e=Ic())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},ZT=n=>{const e=B_(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},$_=()=>{var n;return(n=Ic())==null?void 0:n.config},W_=n=>{var e;return(e=Ic())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function H_(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[ec(JSON.stringify(t)),ec(JSON.stringify(c)),""].join(".")}const Za={};function nI(){const n={prod:[],emulator:[]};for(const e of Object.keys(Za))Za[e]?n.emulator.push(e):n.prod.push(e);return n}function rI(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Wg=!1;function q_(n,e){if(typeof window>"u"||typeof document>"u"||!Jo(window.location.host)||Za[n]===e||Za[n]||Wg)return;Za[n]=e;function t(E){return`__firebase__banner__${E}`}const s="__firebase__banner",l=nI().prod.length>0;function c(){const E=document.getElementById(s);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function p(E,b){E.setAttribute("width","24"),E.setAttribute("id",b),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function y(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Wg=!0,c()},E}function v(E,b){E.setAttribute("id",b),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=rI(s),b=t("text"),j=document.getElementById(b)||document.createElement("span"),U=t("learnmore"),M=document.getElementById(U)||document.createElement("a"),Y=t("preprendIcon"),se=document.getElementById(Y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const ue=E.element;f(ue),v(M,U);const oe=y();p(se,Y),ue.append(se,j,M,oe),document.body.appendChild(ue)}l?(j.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,j.innerText="Preview backend running in this workspace."),j.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hn())}function iI(){var e;const n=(e=Ic())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function lI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uI(){const n=hn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cI(){return!iI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function hI(){try{return typeof indexedDB=="object"}catch{return!1}}function dI(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="FirebaseError";class ds extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=fI,Object.setPrototypeOf(this,ds.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gl.prototype.create)}}class gl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?pI(l,s):"Error",f=`${this.serviceName}: ${c} (${o}).`;return new ds(o,f,s)}}function pI(n,e){return n.replace(mI,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const mI=/\{\$([^}]+)}/g;function gI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function as(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(Hg(l)&&Hg(c)){if(!as(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Hg(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function yI(n,e){const t=new _I(n,e);return t.subscribe.bind(t)}class _I{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");vI(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=_d),o.error===void 0&&(o.error=_d),o.complete===void 0&&(o.complete=_d);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function vI(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function _d(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(n){return n&&n._delegate?n._delegate:n}class Li{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new eI;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TI(e))try{this.getOrInitializeService({instanceIdentifier:Ni})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Ni){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ni){return this.instances.has(e)}getOptions(e=Ni){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:EI(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ni){return this.component?this.component.multipleInstances?e:Ni:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function EI(n){return n===Ni?void 0:n}function TI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new wI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const SI={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},CI=Ke.INFO,kI={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},AI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=kI[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class pf{constructor(e){this.name=e,this._logLevel=CI,this._logHandler=AI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?SI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const RI=(n,e)=>e.some(t=>n instanceof t);let qg,Gg;function PI(){return qg||(qg=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xI(){return Gg||(Gg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G_=new WeakMap,Ld=new WeakMap,K_=new WeakMap,vd=new WeakMap,mf=new WeakMap;function NI(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(Bs(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&G_.set(t,n)}).catch(()=>{}),mf.set(e,n),e}function bI(n){if(Ld.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Ld.set(n,e)}let Md={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ld.get(n);if(e==="objectStoreNames")return n.objectStoreNames||K_.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Bs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DI(n){Md=n(Md)}function VI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(wd(this),e,...t);return K_.set(s,e.sort?e.sort():[e]),Bs(s)}:xI().includes(n)?function(...e){return n.apply(wd(this),e),Bs(G_.get(this))}:function(...e){return Bs(n.apply(wd(this),e))}}function OI(n){return typeof n=="function"?VI(n):(n instanceof IDBTransaction&&bI(n),RI(n,PI())?new Proxy(n,Md):n)}function Bs(n){if(n instanceof IDBRequest)return NI(n);if(vd.has(n))return vd.get(n);const e=OI(n);return e!==n&&(vd.set(n,e),mf.set(e,n)),e}const wd=n=>mf.get(n);function LI(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),f=Bs(c);return s&&c.addEventListener("upgradeneeded",p=>{s(Bs(c.result),p.oldVersion,p.newVersion,Bs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),f}const MI=["get","getKey","getAll","getAllKeys","count"],FI=["put","add","delete","clear"],Ed=new Map;function Kg(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ed.get(e))return Ed.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=FI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||MI.includes(t)))return;const l=async function(c,...f){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(f.shift())),(await Promise.all([y[t](...f),o&&p.done]))[0]};return Ed.set(e,l),l}DI(n=>({...n,get:(e,t,s)=>Kg(e,t)||n.get(e,t,s),has:(e,t)=>!!Kg(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(UI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function UI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fd="@firebase/app",Qg="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls=new pf("@firebase/app"),zI="@firebase/app-compat",BI="@firebase/analytics-compat",$I="@firebase/analytics",WI="@firebase/app-check-compat",HI="@firebase/app-check",qI="@firebase/auth",GI="@firebase/auth-compat",KI="@firebase/database",QI="@firebase/data-connect",JI="@firebase/database-compat",YI="@firebase/functions",XI="@firebase/functions-compat",ZI="@firebase/installations",eS="@firebase/installations-compat",tS="@firebase/messaging",nS="@firebase/messaging-compat",rS="@firebase/performance",sS="@firebase/performance-compat",iS="@firebase/remote-config",oS="@firebase/remote-config-compat",aS="@firebase/storage",lS="@firebase/storage-compat",uS="@firebase/firestore",cS="@firebase/ai",hS="@firebase/firestore-compat",dS="firebase",fS="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="[DEFAULT]",pS={[Fd]:"fire-core",[zI]:"fire-core-compat",[$I]:"fire-analytics",[BI]:"fire-analytics-compat",[HI]:"fire-app-check",[WI]:"fire-app-check-compat",[qI]:"fire-auth",[GI]:"fire-auth-compat",[KI]:"fire-rtdb",[QI]:"fire-data-connect",[JI]:"fire-rtdb-compat",[YI]:"fire-fn",[XI]:"fire-fn-compat",[ZI]:"fire-iid",[eS]:"fire-iid-compat",[tS]:"fire-fcm",[nS]:"fire-fcm-compat",[rS]:"fire-perf",[sS]:"fire-perf-compat",[iS]:"fire-rc",[oS]:"fire-rc-compat",[aS]:"fire-gcs",[lS]:"fire-gcs-compat",[uS]:"fire-fst",[hS]:"fire-fst-compat",[cS]:"fire-vertex","fire-js":"fire-js",[dS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=new Map,mS=new Map,Ud=new Map;function Jg(n,e){try{n.container.addComponent(e)}catch(t){ls.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function jo(n){const e=n.name;if(Ud.has(e))return ls.debug(`There were multiple attempts to register component ${e}.`),!1;Ud.set(e,n);for(const t of tc.values())Jg(t,n);for(const t of mS.values())Jg(t,n);return!0}function gf(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function rr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new gl("app","Firebase",gS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Li("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo=fS;function Q_(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:jd,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw $s.create("bad-app-name",{appName:String(o)});if(t||(t=$_()),!t)throw $s.create("no-options");const l=tc.get(o);if(l){if(as(t,l.options)&&as(s,l.config))return l;throw $s.create("duplicate-app",{appName:o})}const c=new II(o);for(const p of Ud.values())c.addComponent(p);const f=new yS(t,s,c);return tc.set(o,f),f}function J_(n=jd){const e=tc.get(n);if(!e&&n===jd&&$_())return Q_();if(!e)throw $s.create("no-app",{appName:n});return e}function Ws(n,e,t){let s=pS[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ls.warn(c.join(" "));return}jo(new Li(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S="firebase-heartbeat-database",vS=1,al="firebase-heartbeat-store";let Td=null;function Y_(){return Td||(Td=LI(_S,vS,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(al)}catch(t){console.warn(t)}}}}).catch(n=>{throw $s.create("idb-open",{originalErrorMessage:n.message})})),Td}async function wS(n){try{const t=(await Y_()).transaction(al),s=await t.objectStore(al).get(X_(n));return await t.done,s}catch(e){if(e instanceof ds)ls.warn(e.message);else{const t=$s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ls.warn(t.message)}}}async function Yg(n,e){try{const s=(await Y_()).transaction(al,"readwrite");await s.objectStore(al).put(e,X_(n)),await s.done}catch(t){if(t instanceof ds)ls.warn(t.message);else{const s=$s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ls.warn(s.message)}}}function X_(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ES=1024,TS=30;class IS{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new CS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Xg();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>TS){const c=kS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){ls.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Xg(),{heartbeatsToSend:s,unsentEntries:o}=SS(this._heartbeatsCache.heartbeats),l=ec(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return ls.warn(t),""}}}function Xg(){return new Date().toISOString().substring(0,10)}function SS(n,e=ES){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),Zg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),Zg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class CS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return hI()?dI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await wS(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Yg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Zg(n){return ec(JSON.stringify({version:2,heartbeats:n})).length}function kS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(n){jo(new Li("platform-logger",e=>new jI(e),"PRIVATE")),jo(new Li("heartbeat",e=>new IS(e),"PRIVATE")),Ws(Fd,Qg,n),Ws(Fd,Qg,"esm2020"),Ws("fire-js","")}AS("");function Z_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RS=Z_,ev=new gl("auth","Firebase",Z_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new pf("@firebase/auth");function PS(n,...e){nc.logLevel<=Ke.WARN&&nc.warn(`Auth (${Yo}): ${n}`,...e)}function $u(n,...e){nc.logLevel<=Ke.ERROR&&nc.error(`Auth (${Yo}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lr(n,...e){throw _f(n,...e)}function ir(n,...e){return _f(n,...e)}function yf(n,e,t){const s={...RS(),[e]:t};return new gl("auth","Firebase",s).create(e,{appName:n.name})}function Vi(n){return yf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xS(n,e,t){const s=t;if(!(e instanceof s))throw s.name!==e.constructor.name&&Lr(n,"argument-error"),yf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _f(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return ev.create(n,...e)}function je(n,e,...t){if(!n)throw _f(e,...t)}function is(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $u(e),new Error(e)}function us(n,e){n||is(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function NS(){return ey()==="http:"||ey()==="https:"}function ey(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NS()||aI()||"connection"in navigator)?navigator.onLine:!0}function DS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,t){this.shortDelay=e,this.longDelay=t,us(t>e,"Short delay should be less than long delay!"),this.isMobile=sI()||lI()}get(){return bS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(n,e){us(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;is("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;is("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;is("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LS=new _l(3e4,6e4);function wf(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Xo(n,e,t,s,o={}){return nv(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const f=yl({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:p,...l};return oI()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&Jo(n.emulatorConfig.host)&&(y.credentials="include"),tv.fetch()(await rv(n,n.config.apiHost,t,f),y)})}async function nv(n,e,t){n._canInitEmulator=!1;const s={...VS,...e};try{const o=new FS(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Ou(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const f=l.ok?c.errorMessage:c.error.message,[p,y]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ou(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw Ou(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw Ou(n,"user-disabled",c);const v=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw yf(n,v,y);Lr(n,v)}}catch(o){if(o instanceof ds)throw o;Lr(n,"network-request-failed",{message:String(o)})}}async function MS(n,e,t,s,o={}){const l=await Xo(n,e,t,s,o);return"mfaPendingCredential"in l&&Lr(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function rv(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?vf(n.config,o):`${n.config.apiScheme}://${o}`;return OS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class FS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(ir(this.auth,"network-request-failed")),LS.get())})}}function Ou(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=ir(n,e,s);return o.customData._tokenResponse=t,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jS(n,e){return Xo(n,"POST","/v1/accounts:delete",e)}async function rc(n,e){return Xo(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function US(n,e=!1){const t=qt(n),s=await t.getIdToken(e),o=Ef(s);je(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l==null?void 0:l.sign_in_provider;return{claims:o,token:s,authTime:el(Id(o.auth_time)),issuedAtTime:el(Id(o.iat)),expirationTime:el(Id(o.exp)),signInProvider:c||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function Id(n){return Number(n)*1e3}function Ef(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return $u("JWT malformed, contained fewer than 3 sections"),null;try{const o=z_(t);return o?JSON.parse(o):($u("Failed to decode base64 JWT payload"),null)}catch(o){return $u("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function ty(n){const e=Ef(n);return je(e,"internal-error"),je(typeof e.exp<"u","internal-error"),je(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ll(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ds&&zS(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function zS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=el(this.lastLoginAt),this.creationTime=el(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sc(n){var T;const e=n.auth,t=await n.getIdToken(),s=await ll(n,rc(e,{idToken:t}));je(s==null?void 0:s.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=(T=o.providerUserInfo)!=null&&T.length?sv(o.providerUserInfo):[],c=WS(n.providerData,l),f=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!(c!=null&&c.length),y=f?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Bd(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,v)}async function $S(n){const e=qt(n);await sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WS(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function sv(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HS(n,e){const t=await nv(n,{},async()=>{const s=yl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await rv(n,o,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:f,body:s};return n.emulatorConfig&&Jo(n.emulatorConfig.host)&&(p.credentials="include"),tv.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function qS(n,e){return Xo(n,"POST","/v2/accounts:revokeToken",wf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){je(e.idToken,"internal-error"),je(typeof e.idToken<"u","internal-error"),je(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ty(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){je(e.length!==0,"internal-error");const t=ty(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(je(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await HS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new Do;return s&&(je(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(je(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(je(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Do,this.toJSON())}_performRefresh(){return is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(n,e){je(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class sr{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new BS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Bd(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await ll(this,this.stsTokenManager.getToken(this.auth,e));return je(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return US(this,e)}reload(){return $S(this)}_assign(e){this!==e&&(je(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new sr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){je(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await sc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(rr(this.auth.app))return Promise.reject(Vi(this.auth));const e=await this.getIdToken();return await ll(this,jS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,f=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:T,emailVerified:E,isAnonymous:b,providerData:j,stsTokenManager:U}=t;je(T&&U,e,"internal-error");const M=Do.fromJSON(this.name,U);je(typeof T=="string",e,"internal-error"),Os(s,e.name),Os(o,e.name),je(typeof E=="boolean",e,"internal-error"),je(typeof b=="boolean",e,"internal-error"),Os(l,e.name),Os(c,e.name),Os(f,e.name),Os(p,e.name),Os(y,e.name),Os(v,e.name);const Y=new sr({uid:T,auth:e,email:o,emailVerified:E,displayName:s,isAnonymous:b,photoURL:c,phoneNumber:l,tenantId:f,stsTokenManager:M,createdAt:y,lastLoginAt:v});return j&&Array.isArray(j)&&(Y.providerData=j.map(se=>({...se}))),p&&(Y._redirectEventId=p),Y}static async _fromIdTokenResponse(e,t,s=!1){const o=new Do;o.updateFromServerResponse(t);const l=new sr({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await sc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];je(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?sv(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!(l!=null&&l.length),f=new Do;f.updateFromIdToken(s);const p=new sr({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Bd(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=new Map;function os(n){us(n instanceof Function,"Expected a class definition");let e=ny.get(n);return e?(us(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,ny.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}iv.type="NONE";const ry=iv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(n,e,t){return`firebase:${n}:${e}:${t}`}class Vo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Wu(this.userKey,o.apiKey,l),this.fullPersistenceKey=Wu("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await rc(this.auth,{idToken:e}).catch(()=>{});return t?sr._fromGetAccountInfoResponse(this.auth,t,e):null}return sr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new Vo(os(ry),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||os(ry);const c=Wu(s,e.config.apiKey,e.name);let f=null;for(const y of t)try{const v=await y._get(c);if(v){let T;if(typeof v=="string"){const E=await rc(e,{idToken:v}).catch(()=>{});if(!E)break;T=await sr._fromGetAccountInfoResponse(e,E,v)}else T=sr._fromJSON(e,v);y!==l&&(f=T),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Vo(l,e,s):(l=p[0],f&&await l._set(c,f.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new Vo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ov(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(hv(e))return"Blackberry";if(dv(e))return"Webos";if(av(e))return"Safari";if((e.includes("chrome/")||lv(e))&&!e.includes("edge/"))return"Chrome";if(cv(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ov(n=hn()){return/firefox\//i.test(n)}function av(n=hn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lv(n=hn()){return/crios\//i.test(n)}function uv(n=hn()){return/iemobile/i.test(n)}function cv(n=hn()){return/android/i.test(n)}function hv(n=hn()){return/blackberry/i.test(n)}function dv(n=hn()){return/webos/i.test(n)}function Tf(n=hn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function GS(n=hn()){var e;return Tf(n)&&!!((e=window.navigator)!=null&&e.standalone)}function KS(){return uI()&&document.documentMode===10}function fv(n=hn()){return Tf(n)||cv(n)||dv(n)||hv(n)||/windows phone/i.test(n)||uv(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(n,e=[]){let t;switch(n){case"Browser":t=sy(hn());break;case"Worker":t=`${sy(hn())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yo}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,f)=>{try{const p=e(l);c(p)}catch(p){f(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(n,e={}){return Xo(n,"GET","/v2/passwordPolicy",wf(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS=6;class XS{constructor(e){var s;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??YS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((s=e.allowedNonAlphanumericCharacters)==null?void 0:s.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iy(this),this.idTokenSubscription=new iy(this),this.beforeStateQueue=new QS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ev,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=os(t)),this._initializationPromise=this.queue(async()=>{var s,o,l;if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),(s=this._resolvePersistenceManagerAvailable)==null||s.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)==null?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await rc(this,{idToken:e}),s=await sr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var l;if(rr(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(f,f))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(l=this.redirectUser)==null?void 0:l._redirectEventId,f=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!c||c===f)&&(p!=null&&p.user)&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return je(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await sc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(rr(this.app))return Promise.reject(Vi(this));const t=e?qt(e):null;return t&&je(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&je(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return rr(this.app)?Promise.reject(Vi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return rr(this.app)?Promise.reject(Vi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(os(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JS(this),t=new XS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await qS(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&os(e)||this._popupRedirectResolver;je(t,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[os(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,s;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((s=this.redirectUser)==null?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(je(f,this,"internal-error"),f.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return je(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pv(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){var t;if(rr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&PS(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Sc(n){return qt(n)}class iy{constructor(e){this.auth=e,this.observer=null,this.addObserver=yI(t=>this.observer=t)}get next(){return je(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eC(n){If=n}function tC(n){return If.loadJS(n)}function nC(){return If.gapiScript}function rC(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(n,e){const t=gf(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(as(l,e??{}))return o;Lr(o,"already-initialized")}return t.initialize({options:e})}function iC(n,e){const t=(e==null?void 0:e.persistence)||[],s=(Array.isArray(t)?t:[t]).map(os);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function oC(n,e,t){const s=Sc(n);je(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=mv(e),{host:c,port:f}=aC(e),p=f===null?"":`:${f}`,y={url:`${l}//${c}${p}/`},v=Object.freeze({host:c,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){je(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),je(as(y,s.config.emulator)&&as(v,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=v,s.settings.appVerificationDisabledForTesting=!0,Jo(c)?(H_(`${l}//${c}${p}`),q_("Auth",!0)):lC()}function mv(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aC(n){const e=mv(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:oy(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:oy(c)}}}function oy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function lC(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return is("not implemented")}_getIdTokenResponse(e){return is("not implemented")}_linkToIdToken(e,t){return is("not implemented")}_getReauthenticationResolver(e){return is("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(n,e){return MS(n,"POST","/v1/accounts:signInWithIdp",wf(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC="http://localhost";class Mi extends gv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Mi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Lr("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Mi(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Oo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Oo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Oo(e,t)}buildRequest(){const e={requestUri:uC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=yl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl extends Sf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends vl{constructor(){super("facebook.com")}static credential(e){return Mi._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss extends vl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Mi._fromParams({providerId:ss.PROVIDER_ID,signInMethod:ss.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ss.credentialFromTaggedObject(e)}static credentialFromError(e){return ss.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return ss.credential(t,s)}catch{return null}}}ss.GOOGLE_SIGN_IN_METHOD="google.com";ss.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends vl{constructor(){super("github.com")}static credential(e){return Mi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ms.credential(e.oauthAccessToken)}catch{return null}}}Ms.GITHUB_SIGN_IN_METHOD="github.com";Ms.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends vl{constructor(){super("twitter.com")}static credential(e,t){return Mi._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Fs.credential(t,s)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await sr._fromIdTokenResponse(e,s,o),c=ay(s);return new Uo({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=ay(s);return new Uo({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function ay(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends ds{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,ic.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new ic(e,t,s,o)}}function yv(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?ic._fromErrorAndOperation(n,l,e,s):l})}async function cC(n,e,t=!1){const s=await ll(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Uo._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(n,e,t=!1){const{auth:s}=n;if(rr(s.app))return Promise.reject(Vi(s));const o="reauthenticate";try{const l=await ll(n,yv(s,o,e,n),t);je(l.idToken,s,"internal-error");const c=Ef(l.idToken);je(c,s,"internal-error");const{sub:f}=c;return je(n.uid===f,s,"user-mismatch"),Uo._forOperation(n,o,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Lr(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(n,e,t=!1){if(rr(n.app))return Promise.reject(Vi(n));const s="signIn",o=await yv(n,s,e),l=await Uo._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}function fC(n,e,t,s){return qt(n).onIdTokenChanged(e,t,s)}function pC(n,e,t){return qt(n).beforeAuthStateChanged(e,t)}function mC(n,e,t,s){return qt(n).onAuthStateChanged(e,t,s)}function gC(n){return qt(n).signOut()}const oc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(oc,"1"),this.storage.removeItem(oc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC=1e3,_C=10;class vv extends _v{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fv(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,f,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);KS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,_C):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},yC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}vv.type="LOCAL";const vC=vv;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv extends _v{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wv.type="SESSION";const Ev=wv;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new Cc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!(c!=null&&c.size))return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const f=Array.from(c).map(async y=>y(t.origin,l)),p=await wC(f);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((f,p)=>{const y=Cf("",20);o.port1.start();const v=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(T){const E=T;if(E.data.eventId===y)switch(E.data.status){case"ack":clearTimeout(v),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(E.data.response);break;default:clearTimeout(v),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return window}function TC(n){xr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tv(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function IC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SC(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function CC(){return Tv()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iv="firebaseLocalStorageDb",kC=1,ac="firebaseLocalStorage",Sv="fbase_key";class wl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function kc(n,e){return n.transaction([ac],e?"readwrite":"readonly").objectStore(ac)}function AC(){const n=indexedDB.deleteDatabase(Iv);return new wl(n).toPromise()}function $d(){const n=indexedDB.open(Iv,kC);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(ac,{keyPath:Sv})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(ac)?e(s):(s.close(),await AC(),e(await $d()))})})}async function ly(n,e,t){const s=kc(n,!0).put({[Sv]:e,value:t});return new wl(s).toPromise()}async function RC(n,e){const t=kc(n,!1).get(e),s=await new wl(t).toPromise();return s===void 0?null:s.value}function uy(n,e){const t=kc(n,!0).delete(e);return new wl(t).toPromise()}const PC=800,xC=3;class Cv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $d(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>xC)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Tv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cc._getInstance(CC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,s;if(this.activeServiceWorker=await IC(),!this.activeServiceWorker)return;this.sender=new EC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(s=e[0])!=null&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $d();return await ly(e,oc,"1"),await uy(e,oc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>ly(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>RC(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>uy(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=kc(o,!1).getAll();return new wl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),PC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Cv.type="LOCAL";const NC=Cv;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(n,e){return e?os(e):(je(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf extends gv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Oo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Oo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bC(n){return dC(n.auth,new kf(n),n.bypassAuthState)}function DC(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),hC(t,new kf(n),n.bypassAuthState)}async function VC(n){const{auth:e,user:t}=n;return je(t,e,"internal-error"),cC(t,new kf(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:f}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bC;case"linkViaPopup":case"linkViaRedirect":return VC;case"reauthViaPopup":case"reauthViaRedirect":return DC;default:Lr(this.auth,"internal-error")}}resolve(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){us(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=new _l(2e3,1e4);async function LC(n,e,t){if(rr(n.app))return Promise.reject(ir(n,"operation-not-supported-in-this-environment"));const s=Sc(n);xS(n,e,Sf);const o=kv(s,t);return new bi(s,"signInViaPopup",e,o).executeNotNull()}class bi extends Av{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,bi.currentPopupAction&&bi.currentPopupAction.cancel(),bi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return je(e,this.auth,"internal-error"),e}async onExecution(){us(this.filter.length===1,"Popup operations only handle one event");const e=Cf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(ir(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(ir(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,s;if((s=(t=this.authWindow)==null?void 0:t.window)!=null&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ir(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OC.get())};e()}}bi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC="pendingRedirect",Hu=new Map;class FC extends Av{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Hu.get(this.auth._key());if(!e){try{const s=await jC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Hu.set(this.auth._key(),e)}return this.bypassAuthState||Hu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jC(n,e){const t=BC(e),s=zC(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function UC(n,e){Hu.set(n._key(),e)}function zC(n){return os(n._redirectPersistence)}function BC(n){return Wu(MC,n.config.apiKey,n.name)}async function $C(n,e,t=!1){if(rr(n.app))return Promise.reject(Vi(n));const s=Sc(n),o=kv(s,e),c=await new FC(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC=600*1e3;class HC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var s;if(e.error&&!Rv(e)){const o=((s=e.error.code)==null?void 0:s.split("auth/")[1])||"internal-error";t.onError(ir(this.auth,o))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=WC&&this.cachedEventUids.clear(),this.cachedEventUids.has(cy(e))}saveEventToCache(e){this.cachedEventUids.add(cy(e)),this.lastProcessedEventTime=Date.now()}}function cy(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Rv({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Rv(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(n,e={}){return Xo(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QC=/^https?/;async function JC(n){if(n.config.emulator)return;const{authorizedDomains:e}=await GC(n);for(const t of e)try{if(YC(t))return}catch{}Lr(n,"unauthorized-domain")}function YC(n){const e=zd(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!QC.test(t))return!1;if(KC.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC=new _l(3e4,6e4);function hy(){const n=xr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function ZC(n){return new Promise((e,t)=>{var o,l,c;function s(){hy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hy(),t(ir(n,"network-request-failed"))},timeout:XC.get()})}if((l=(o=xr().gapi)==null?void 0:o.iframes)!=null&&l.Iframe)e(gapi.iframes.getContext());else if((c=xr().gapi)!=null&&c.load)s();else{const f=rC("iframefcb");return xr()[f]=()=>{gapi.load?s():t(ir(n,"network-request-failed"))},tC(`${nC()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw qu=null,e})}let qu=null;function e1(n){return qu=qu||ZC(n),qu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=new _l(5e3,15e3),n1="__/auth/iframe",r1="emulator/auth/iframe",s1={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i1=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function o1(n){const e=n.config;je(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?vf(e,r1):`https://${n.config.authDomain}/${n1}`,s={apiKey:e.apiKey,appName:n.name,v:Yo},o=i1.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${yl(s).slice(1)}`}async function a1(n){const e=await e1(n),t=xr().gapi;return je(t,n,"internal-error"),e.open({where:document.body,url:o1(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:s1,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=ir(n,"network-request-failed"),f=xr().setTimeout(()=>{l(c)},t1.get());function p(){xr().clearTimeout(f),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},u1=500,c1=600,h1="_blank",d1="http://localhost";class dy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function f1(n,e,t,s=u1,o=c1){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let f="";const p={...l1,width:s.toString(),height:o.toString(),top:l,left:c},y=hn().toLowerCase();t&&(f=lv(y)?h1:t),ov(y)&&(e=e||d1,p.scrollbars="yes");const v=Object.entries(p).reduce((E,[b,j])=>`${E}${b}=${j},`,"");if(GS(y)&&f!=="_self")return p1(e||"",f),new dy(null);const T=window.open(e||"",f,v);je(T,n,"popup-blocked");try{T.focus()}catch{}return new dy(T)}function p1(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="__/auth/handler",g1="emulator/auth/handler",y1=encodeURIComponent("fac");async function fy(n,e,t,s,o,l){je(n.config.authDomain,n,"auth-domain-config-required"),je(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:Yo,eventId:o};if(e instanceof Sf){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",gI(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,T]of Object.entries({}))c[v]=T}if(e instanceof vl){const v=e.getScopes().filter(T=>T!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);const f=c;for(const v of Object.keys(f))f[v]===void 0&&delete f[v];const p=await n._getAppCheckToken(),y=p?`#${y1}=${encodeURIComponent(p)}`:"";return`${_1(n)}?${yl(f).slice(1)}${y}`}function _1({config:n}){return n.emulator?vf(n,g1):`https://${n.authDomain}/${m1}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd="webStorageSupport";class v1{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ev,this._completeRedirectFn=$C,this._overrideRedirectResult=UC}async _openPopup(e,t,s,o){var c;us((c=this.eventManagers[e._key()])==null?void 0:c.manager,"_initialize() not called before _openPopup()");const l=await fy(e,t,s,zd(),o);return f1(e,l,Cf())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await fy(e,t,s,zd(),o);return TC(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(us(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await a1(e),s=new HC(e);return t.register("authEvent",o=>(je(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sd,{type:Sd},o=>{var c;const l=(c=o==null?void 0:o[0])==null?void 0:c[Sd];l!==void 0&&t(!!l),Lr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=JC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return fv()||av()||Tf()}}const w1=v1;var py="@firebase/auth",my="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){je(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function I1(n){jo(new Li("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:f}=s.options;je(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pv(n)},y=new ZS(s,o,l,p);return iC(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),jo(new Li("auth-internal",e=>{const t=Sc(e.getProvider("auth").getImmediate());return(s=>new E1(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ws(py,my,T1(n)),Ws(py,my,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=300,C1=W_("authIdTokenMaxAge")||S1;let gy=null;const k1=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>C1)return;const o=t==null?void 0:t.token;gy!==o&&(gy=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function A1(n=J_()){const e=gf(n,"auth");if(e.isInitialized())return e.getImmediate();const t=sC(n,{popupRedirectResolver:w1,persistence:[NC,vC,Ev]}),s=W_("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=k1(l.toString());pC(t,c,()=>c(t.currentUser)),fC(t,f=>c(f))}}const o=B_("auth");return o&&oC(t,`http://${o}`),t}function R1(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}eC({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=ir("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",R1().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});I1("Browser");var P1="firebase",x1="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ws(P1,x1,"app");var yy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hs,Pv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,I){function k(){}k.prototype=I.prototype,x.F=I.prototype,x.prototype=new k,x.prototype.constructor=x,x.D=function(L,D,V){for(var R=Array(arguments.length-2),Ie=2;Ie<arguments.length;Ie++)R[Ie-2]=arguments[Ie];return I.prototype[D].apply(L,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,I,k){k||(k=0);const L=Array(16);if(typeof I=="string")for(var D=0;D<16;++D)L[D]=I.charCodeAt(k++)|I.charCodeAt(k++)<<8|I.charCodeAt(k++)<<16|I.charCodeAt(k++)<<24;else for(D=0;D<16;++D)L[D]=I[k++]|I[k++]<<8|I[k++]<<16|I[k++]<<24;I=x.g[0],k=x.g[1],D=x.g[2];let V=x.g[3],R;R=I+(V^k&(D^V))+L[0]+3614090360&4294967295,I=k+(R<<7&4294967295|R>>>25),R=V+(D^I&(k^D))+L[1]+3905402710&4294967295,V=I+(R<<12&4294967295|R>>>20),R=D+(k^V&(I^k))+L[2]+606105819&4294967295,D=V+(R<<17&4294967295|R>>>15),R=k+(I^D&(V^I))+L[3]+3250441966&4294967295,k=D+(R<<22&4294967295|R>>>10),R=I+(V^k&(D^V))+L[4]+4118548399&4294967295,I=k+(R<<7&4294967295|R>>>25),R=V+(D^I&(k^D))+L[5]+1200080426&4294967295,V=I+(R<<12&4294967295|R>>>20),R=D+(k^V&(I^k))+L[6]+2821735955&4294967295,D=V+(R<<17&4294967295|R>>>15),R=k+(I^D&(V^I))+L[7]+4249261313&4294967295,k=D+(R<<22&4294967295|R>>>10),R=I+(V^k&(D^V))+L[8]+1770035416&4294967295,I=k+(R<<7&4294967295|R>>>25),R=V+(D^I&(k^D))+L[9]+2336552879&4294967295,V=I+(R<<12&4294967295|R>>>20),R=D+(k^V&(I^k))+L[10]+4294925233&4294967295,D=V+(R<<17&4294967295|R>>>15),R=k+(I^D&(V^I))+L[11]+2304563134&4294967295,k=D+(R<<22&4294967295|R>>>10),R=I+(V^k&(D^V))+L[12]+1804603682&4294967295,I=k+(R<<7&4294967295|R>>>25),R=V+(D^I&(k^D))+L[13]+4254626195&4294967295,V=I+(R<<12&4294967295|R>>>20),R=D+(k^V&(I^k))+L[14]+2792965006&4294967295,D=V+(R<<17&4294967295|R>>>15),R=k+(I^D&(V^I))+L[15]+1236535329&4294967295,k=D+(R<<22&4294967295|R>>>10),R=I+(D^V&(k^D))+L[1]+4129170786&4294967295,I=k+(R<<5&4294967295|R>>>27),R=V+(k^D&(I^k))+L[6]+3225465664&4294967295,V=I+(R<<9&4294967295|R>>>23),R=D+(I^k&(V^I))+L[11]+643717713&4294967295,D=V+(R<<14&4294967295|R>>>18),R=k+(V^I&(D^V))+L[0]+3921069994&4294967295,k=D+(R<<20&4294967295|R>>>12),R=I+(D^V&(k^D))+L[5]+3593408605&4294967295,I=k+(R<<5&4294967295|R>>>27),R=V+(k^D&(I^k))+L[10]+38016083&4294967295,V=I+(R<<9&4294967295|R>>>23),R=D+(I^k&(V^I))+L[15]+3634488961&4294967295,D=V+(R<<14&4294967295|R>>>18),R=k+(V^I&(D^V))+L[4]+3889429448&4294967295,k=D+(R<<20&4294967295|R>>>12),R=I+(D^V&(k^D))+L[9]+568446438&4294967295,I=k+(R<<5&4294967295|R>>>27),R=V+(k^D&(I^k))+L[14]+3275163606&4294967295,V=I+(R<<9&4294967295|R>>>23),R=D+(I^k&(V^I))+L[3]+4107603335&4294967295,D=V+(R<<14&4294967295|R>>>18),R=k+(V^I&(D^V))+L[8]+1163531501&4294967295,k=D+(R<<20&4294967295|R>>>12),R=I+(D^V&(k^D))+L[13]+2850285829&4294967295,I=k+(R<<5&4294967295|R>>>27),R=V+(k^D&(I^k))+L[2]+4243563512&4294967295,V=I+(R<<9&4294967295|R>>>23),R=D+(I^k&(V^I))+L[7]+1735328473&4294967295,D=V+(R<<14&4294967295|R>>>18),R=k+(V^I&(D^V))+L[12]+2368359562&4294967295,k=D+(R<<20&4294967295|R>>>12),R=I+(k^D^V)+L[5]+4294588738&4294967295,I=k+(R<<4&4294967295|R>>>28),R=V+(I^k^D)+L[8]+2272392833&4294967295,V=I+(R<<11&4294967295|R>>>21),R=D+(V^I^k)+L[11]+1839030562&4294967295,D=V+(R<<16&4294967295|R>>>16),R=k+(D^V^I)+L[14]+4259657740&4294967295,k=D+(R<<23&4294967295|R>>>9),R=I+(k^D^V)+L[1]+2763975236&4294967295,I=k+(R<<4&4294967295|R>>>28),R=V+(I^k^D)+L[4]+1272893353&4294967295,V=I+(R<<11&4294967295|R>>>21),R=D+(V^I^k)+L[7]+4139469664&4294967295,D=V+(R<<16&4294967295|R>>>16),R=k+(D^V^I)+L[10]+3200236656&4294967295,k=D+(R<<23&4294967295|R>>>9),R=I+(k^D^V)+L[13]+681279174&4294967295,I=k+(R<<4&4294967295|R>>>28),R=V+(I^k^D)+L[0]+3936430074&4294967295,V=I+(R<<11&4294967295|R>>>21),R=D+(V^I^k)+L[3]+3572445317&4294967295,D=V+(R<<16&4294967295|R>>>16),R=k+(D^V^I)+L[6]+76029189&4294967295,k=D+(R<<23&4294967295|R>>>9),R=I+(k^D^V)+L[9]+3654602809&4294967295,I=k+(R<<4&4294967295|R>>>28),R=V+(I^k^D)+L[12]+3873151461&4294967295,V=I+(R<<11&4294967295|R>>>21),R=D+(V^I^k)+L[15]+530742520&4294967295,D=V+(R<<16&4294967295|R>>>16),R=k+(D^V^I)+L[2]+3299628645&4294967295,k=D+(R<<23&4294967295|R>>>9),R=I+(D^(k|~V))+L[0]+4096336452&4294967295,I=k+(R<<6&4294967295|R>>>26),R=V+(k^(I|~D))+L[7]+1126891415&4294967295,V=I+(R<<10&4294967295|R>>>22),R=D+(I^(V|~k))+L[14]+2878612391&4294967295,D=V+(R<<15&4294967295|R>>>17),R=k+(V^(D|~I))+L[5]+4237533241&4294967295,k=D+(R<<21&4294967295|R>>>11),R=I+(D^(k|~V))+L[12]+1700485571&4294967295,I=k+(R<<6&4294967295|R>>>26),R=V+(k^(I|~D))+L[3]+2399980690&4294967295,V=I+(R<<10&4294967295|R>>>22),R=D+(I^(V|~k))+L[10]+4293915773&4294967295,D=V+(R<<15&4294967295|R>>>17),R=k+(V^(D|~I))+L[1]+2240044497&4294967295,k=D+(R<<21&4294967295|R>>>11),R=I+(D^(k|~V))+L[8]+1873313359&4294967295,I=k+(R<<6&4294967295|R>>>26),R=V+(k^(I|~D))+L[15]+4264355552&4294967295,V=I+(R<<10&4294967295|R>>>22),R=D+(I^(V|~k))+L[6]+2734768916&4294967295,D=V+(R<<15&4294967295|R>>>17),R=k+(V^(D|~I))+L[13]+1309151649&4294967295,k=D+(R<<21&4294967295|R>>>11),R=I+(D^(k|~V))+L[4]+4149444226&4294967295,I=k+(R<<6&4294967295|R>>>26),R=V+(k^(I|~D))+L[11]+3174756917&4294967295,V=I+(R<<10&4294967295|R>>>22),R=D+(I^(V|~k))+L[2]+718787259&4294967295,D=V+(R<<15&4294967295|R>>>17),R=k+(V^(D|~I))+L[9]+3951481745&4294967295,x.g[0]=x.g[0]+I&4294967295,x.g[1]=x.g[1]+(D+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+D&4294967295,x.g[3]=x.g[3]+V&4294967295}s.prototype.v=function(x,I){I===void 0&&(I=x.length);const k=I-this.blockSize,L=this.C;let D=this.h,V=0;for(;V<I;){if(D==0)for(;V<=k;)o(this,x,V),V+=this.blockSize;if(typeof x=="string"){for(;V<I;)if(L[D++]=x.charCodeAt(V++),D==this.blockSize){o(this,L),D=0;break}}else for(;V<I;)if(L[D++]=x[V++],D==this.blockSize){o(this,L),D=0;break}}this.h=D,this.o+=I},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var I=1;I<x.length-8;++I)x[I]=0;I=this.o*8;for(var k=x.length-8;k<x.length;++k)x[k]=I&255,I/=256;for(this.v(x),x=Array(16),I=0,k=0;k<4;++k)for(let L=0;L<32;L+=8)x[I++]=this.g[k]>>>L&255;return x};function l(x,I){var k=f;return Object.prototype.hasOwnProperty.call(k,x)?k[x]:k[x]=I(x)}function c(x,I){this.h=I;const k=[];let L=!0;for(let D=x.length-1;D>=0;D--){const V=x[D]|0;L&&V==I||(k[D]=V,L=!1)}this.g=k}var f={};function p(x){return-128<=x&&x<128?l(x,function(I){return new c([I|0],I<0?-1:0)}):new c([x|0],x<0?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return T;if(x<0)return M(y(-x));const I=[];let k=1;for(let L=0;x>=k;L++)I[L]=x/k|0,k*=4294967296;return new c(I,0)}function v(x,I){if(x.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(x.charAt(0)=="-")return M(v(x.substring(1),I));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const k=y(Math.pow(I,8));let L=T;for(let V=0;V<x.length;V+=8){var D=Math.min(8,x.length-V);const R=parseInt(x.substring(V,V+D),I);D<8?(D=y(Math.pow(I,D)),L=L.j(D).add(y(R))):(L=L.j(k),L=L.add(y(R)))}return L}var T=p(0),E=p(1),b=p(16777216);n=c.prototype,n.m=function(){if(U(this))return-M(this).m();let x=0,I=1;for(let k=0;k<this.g.length;k++){const L=this.i(k);x+=(L>=0?L:4294967296+L)*I,I*=4294967296}return x},n.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(j(this))return"0";if(U(this))return"-"+M(this).toString(x);const I=y(Math.pow(x,6));var k=this;let L="";for(;;){const D=oe(k,I).g;k=Y(k,D.j(I));let V=((k.g.length>0?k.g[0]:k.h)>>>0).toString(x);if(k=D,j(k))return V+L;for(;V.length<6;)V="0"+V;L=V+L}},n.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function j(x){if(x.h!=0)return!1;for(let I=0;I<x.g.length;I++)if(x.g[I]!=0)return!1;return!0}function U(x){return x.h==-1}n.l=function(x){return x=Y(this,x),U(x)?-1:j(x)?0:1};function M(x){const I=x.g.length,k=[];for(let L=0;L<I;L++)k[L]=~x.g[L];return new c(k,~x.h).add(E)}n.abs=function(){return U(this)?M(this):this},n.add=function(x){const I=Math.max(this.g.length,x.g.length),k=[];let L=0;for(let D=0;D<=I;D++){let V=L+(this.i(D)&65535)+(x.i(D)&65535),R=(V>>>16)+(this.i(D)>>>16)+(x.i(D)>>>16);L=R>>>16,V&=65535,R&=65535,k[D]=R<<16|V}return new c(k,k[k.length-1]&-2147483648?-1:0)};function Y(x,I){return x.add(M(I))}n.j=function(x){if(j(this)||j(x))return T;if(U(this))return U(x)?M(this).j(M(x)):M(M(this).j(x));if(U(x))return M(this.j(M(x)));if(this.l(b)<0&&x.l(b)<0)return y(this.m()*x.m());const I=this.g.length+x.g.length,k=[];for(var L=0;L<2*I;L++)k[L]=0;for(L=0;L<this.g.length;L++)for(let D=0;D<x.g.length;D++){const V=this.i(L)>>>16,R=this.i(L)&65535,Ie=x.i(D)>>>16,Oe=x.i(D)&65535;k[2*L+2*D]+=R*Oe,se(k,2*L+2*D),k[2*L+2*D+1]+=V*Oe,se(k,2*L+2*D+1),k[2*L+2*D+1]+=R*Ie,se(k,2*L+2*D+1),k[2*L+2*D+2]+=V*Ie,se(k,2*L+2*D+2)}for(x=0;x<I;x++)k[x]=k[2*x+1]<<16|k[2*x];for(x=I;x<2*I;x++)k[x]=0;return new c(k,0)};function se(x,I){for(;(x[I]&65535)!=x[I];)x[I+1]+=x[I]>>>16,x[I]&=65535,I++}function ue(x,I){this.g=x,this.h=I}function oe(x,I){if(j(I))throw Error("division by zero");if(j(x))return new ue(T,T);if(U(x))return I=oe(M(x),I),new ue(M(I.g),M(I.h));if(U(I))return I=oe(x,M(I)),new ue(M(I.g),I.h);if(x.g.length>30){if(U(x)||U(I))throw Error("slowDivide_ only works with positive integers.");for(var k=E,L=I;L.l(x)<=0;)k=ne(k),L=ne(L);var D=Ee(k,1),V=Ee(L,1);for(L=Ee(L,2),k=Ee(k,2);!j(L);){var R=V.add(L);R.l(x)<=0&&(D=D.add(k),V=R),L=Ee(L,1),k=Ee(k,1)}return I=Y(x,D.j(I)),new ue(D,I)}for(D=T;x.l(I)>=0;){for(k=Math.max(1,Math.floor(x.m()/I.m())),L=Math.ceil(Math.log(k)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),V=y(k),R=V.j(I);U(R)||R.l(x)>0;)k-=L,V=y(k),R=V.j(I);j(V)&&(V=E),D=D.add(V),x=Y(x,R)}return new ue(D,x)}n.B=function(x){return oe(this,x).h},n.and=function(x){const I=Math.max(this.g.length,x.g.length),k=[];for(let L=0;L<I;L++)k[L]=this.i(L)&x.i(L);return new c(k,this.h&x.h)},n.or=function(x){const I=Math.max(this.g.length,x.g.length),k=[];for(let L=0;L<I;L++)k[L]=this.i(L)|x.i(L);return new c(k,this.h|x.h)},n.xor=function(x){const I=Math.max(this.g.length,x.g.length),k=[];for(let L=0;L<I;L++)k[L]=this.i(L)^x.i(L);return new c(k,this.h^x.h)};function ne(x){const I=x.g.length+1,k=[];for(let L=0;L<I;L++)k[L]=x.i(L)<<1|x.i(L-1)>>>31;return new c(k,x.h)}function Ee(x,I){const k=I>>5;I%=32;const L=x.g.length-k,D=[];for(let V=0;V<L;V++)D[V]=I>0?x.i(V+k)>>>I|x.i(V+k+1)<<32-I:x.i(V+k);return new c(D,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Pv=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=v,Hs=c}).apply(typeof yy<"u"?yy:typeof self<"u"?self:typeof window<"u"?window:{});var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xv,Ka,Nv,Gu,Wd,bv,Dv,Vv;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Lu=="object"&&Lu];for(var g=0;g<u.length;++g){var _=u[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,g){if(g)e:{var _=s;u=u.split(".");for(var S=0;S<u.length-1;S++){var B=u[S];if(!(B in _))break e;_=_[B]}u=u[u.length-1],S=_[u],g=g(S),g!=S&&g!=null&&e(_,u,{configurable:!0,writable:!0,value:g})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(g){var _=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&_.push([S,g[S]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function f(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function p(u,g,_){return u.call.apply(u.bind,arguments)}function y(u,g,_){return y=p,y.apply(null,arguments)}function v(u,g){var _=Array.prototype.slice.call(arguments,1);return function(){var S=_.slice();return S.push.apply(S,arguments),u.apply(this,S)}}function T(u,g){function _(){}_.prototype=g.prototype,u.Z=g.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(S,B,q){for(var pe=Array(arguments.length-2),$e=2;$e<arguments.length;$e++)pe[$e-2]=arguments[$e];return g.prototype[B].apply(S,pe)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function b(u){const g=u.length;if(g>0){const _=Array(g);for(let S=0;S<g;S++)_[S]=u[S];return _}return[]}function j(u,g){for(let S=1;S<arguments.length;S++){const B=arguments[S];var _=typeof B;if(_=_!="object"?_:B?Array.isArray(B)?"array":_:"null",_=="array"||_=="object"&&typeof B.length=="number"){_=u.length||0;const q=B.length||0;u.length=_+q;for(let pe=0;pe<q;pe++)u[_+pe]=B[pe]}else u.push(B)}}class U{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function M(u){c.setTimeout(()=>{throw u},0)}function Y(){var u=x;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class se{constructor(){this.h=this.g=null}add(g,_){const S=ue.get();S.set(g,_),this.h?this.h.next=S:this.g=S,this.h=S}}var ue=new U(()=>new oe,u=>u.reset());class oe{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ne,Ee=!1,x=new se,I=()=>{const u=Promise.resolve(void 0);ne=()=>{u.then(k)}};function k(){for(var u;u=Y();){try{u.h.call(u.g)}catch(_){M(_)}var g=ue;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}Ee=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};c.addEventListener("test",_,g),c.removeEventListener("test",_,g)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Ie(u,g){D.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}T(Ie,D),Ie.prototype.init=function(u,g){const _=this.type=u.type,S=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(_=="mouseover"?g=u.fromElement:_=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Ie.Z.h.call(this)},Ie.prototype.h=function(){Ie.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var Oe="closure_listenable_"+(Math.random()*1e6|0),Ye=0;function ge(u,g,_,S,B){this.listener=u,this.proxy=null,this.src=g,this.type=_,this.capture=!!S,this.ha=B,this.key=++Ye,this.da=this.fa=!1}function ee(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Q(u,g,_){for(const S in u)g.call(_,u[S],S,u)}function J(u,g){for(const _ in u)g.call(void 0,u[_],_,u)}function N(u){const g={};for(const _ in u)g[_]=u[_];return g}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pe(u,g){let _,S;for(let B=1;B<arguments.length;B++){S=arguments[B];for(_ in S)u[_]=S[_];for(let q=0;q<G.length;q++)_=G[q],Object.prototype.hasOwnProperty.call(S,_)&&(u[_]=S[_])}}function Ne(u){this.src=u,this.g={},this.h=0}Ne.prototype.add=function(u,g,_,S,B){const q=u.toString();u=this.g[q],u||(u=this.g[q]=[],this.h++);const pe=Ce(u,g,S,B);return pe>-1?(g=u[pe],_||(g.fa=!1)):(g=new ge(g,this.src,q,!!S,B),g.fa=_,u.push(g)),g};function ze(u,g){const _=g.type;if(_ in u.g){var S=u.g[_],B=Array.prototype.indexOf.call(S,g,void 0),q;(q=B>=0)&&Array.prototype.splice.call(S,B,1),q&&(ee(g),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ce(u,g,_,S){for(let B=0;B<u.length;++B){const q=u[B];if(!q.da&&q.listener==g&&q.capture==!!_&&q.ha==S)return B}return-1}var Be="closure_lm_"+(Math.random()*1e6|0),Ae={};function He(u,g,_,S,B){if(Array.isArray(g)){for(let q=0;q<g.length;q++)He(u,g[q],_,S,B);return null}return _=fe(_),u&&u[Oe]?u.J(g,_,f(S)?!!S.capture:!1,B):yt(u,g,_,!1,S,B)}function yt(u,g,_,S,B,q){if(!g)throw Error("Invalid event type");const pe=f(B)?!!B.capture:!!B;let $e=ce(u);if($e||(u[Be]=$e=new Ne(u)),_=$e.add(g,_,S,pe,q),_.proxy)return _;if(S=Ln(),_.proxy=S,S.src=u,S.listener=_,u.addEventListener)V||(B=pe),B===void 0&&(B=!1),u.addEventListener(g.toString(),S,B);else if(u.attachEvent)u.attachEvent(ae(g.toString()),S);else if(u.addListener&&u.removeListener)u.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Ln(){function u(_){return g.call(u.src,u.listener,_)}const g=W;return u}function Fr(u,g,_,S,B){if(Array.isArray(g))for(var q=0;q<g.length;q++)Fr(u,g[q],_,S,B);else S=f(S)?!!S.capture:!!S,_=fe(_),u&&u[Oe]?(u=u.i,q=String(g).toString(),q in u.g&&(g=u.g[q],_=Ce(g,_,S,B),_>-1&&(ee(g[_]),Array.prototype.splice.call(g,_,1),g.length==0&&(delete u.g[q],u.h--)))):u&&(u=ce(u))&&(g=u.g[g.toString()],u=-1,g&&(u=Ce(g,_,S,B)),(_=u>-1?g[u]:null)&&dn(_))}function dn(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[Oe])ze(g.i,u);else{var _=u.type,S=u.proxy;g.removeEventListener?g.removeEventListener(_,S,u.capture):g.detachEvent?g.detachEvent(ae(_),S):g.addListener&&g.removeListener&&g.removeListener(S),(_=ce(g))?(ze(_,u),_.h==0&&(_.src=null,g[Be]=null)):ee(u)}}}function ae(u){return u in Ae?Ae[u]:Ae[u]="on"+u}function W(u,g){if(u.da)u=!0;else{g=new Ie(g,this);const _=u.listener,S=u.ha||u.src;u.fa&&dn(u),u=_.call(S,g)}return u}function ce(u){return u=u[Be],u instanceof Ne?u:null}var _e="__closure_events_fn_"+(Math.random()*1e9>>>0);function fe(u){return typeof u=="function"?u:(u[_e]||(u[_e]=function(g){return u.handleEvent(g)}),u[_e])}function me(){L.call(this),this.i=new Ne(this),this.M=this,this.G=null}T(me,L),me.prototype[Oe]=!0,me.prototype.removeEventListener=function(u,g,_,S){Fr(this,u,g,_,S)};function Ve(u,g){var _,S=u.G;if(S)for(_=[];S;S=S.G)_.push(S);if(u=u.M,S=g.type||g,typeof g=="string")g=new D(g,u);else if(g instanceof D)g.target=g.target||u;else{var B=g;g=new D(S,u),Pe(g,B)}B=!0;let q,pe;if(_)for(pe=_.length-1;pe>=0;pe--)q=g.g=_[pe],B=St(q,S,!0,g)&&B;if(q=g.g=u,B=St(q,S,!0,g)&&B,B=St(q,S,!1,g)&&B,_)for(pe=0;pe<_.length;pe++)q=g.g=_[pe],B=St(q,S,!1,g)&&B}me.prototype.N=function(){if(me.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const _=u.g[g];for(let S=0;S<_.length;S++)ee(_[S]);delete u.g[g],u.h--}}this.G=null},me.prototype.J=function(u,g,_,S){return this.i.add(String(u),g,!1,_,S)},me.prototype.K=function(u,g,_,S){return this.i.add(String(u),g,!0,_,S)};function St(u,g,_,S){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let B=!0;for(let q=0;q<g.length;++q){const pe=g[q];if(pe&&!pe.da&&pe.capture==_){const $e=pe.listener,Rt=pe.ha||pe.src;pe.fa&&ze(u.i,pe),B=$e.call(Rt,S)!==!1&&B}}return B&&!S.defaultPrevented}function Ft(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:c.setTimeout(u,g||0)}function lr(u){u.g=Ft(()=>{u.g=null,u.i&&(u.i=!1,lr(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class qn extends L{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:lr(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ur(u){L.call(this),this.h=u,this.g={}}T(ur,L);var fs=[];function ps(u){Q(u.g,function(g,_){this.g.hasOwnProperty(_)&&dn(g)},u),u.g={}}ur.prototype.N=function(){ur.Z.N.call(this),ps(this)},ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var cr=c.JSON.stringify,qi=c.JSON.parse,jr=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function Ct(){}function Ur(){}var Sn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Cn(){D.call(this,"d")}T(Cn,D);function Gn(){D.call(this,"c")}T(Gn,D);var en={},zr=null;function Kn(){return zr=zr||new me}en.Ia="serverreachability";function Br(u){D.call(this,en.Ia,u)}T(Br,D);function Mn(u){const g=Kn();Ve(g,new Br(g))}en.STAT_EVENT="statevent";function mn(u,g){D.call(this,en.STAT_EVENT,u),this.stat=g}T(mn,D);function _t(u){const g=Kn();Ve(g,new mn(g,u))}en.Ja="timingevent";function si(u,g){D.call(this,en.Ja,u),this.size=g}T(si,D);function hr(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},g)}function dr(){this.g=!0}dr.prototype.ua=function(){this.g=!1};function K(u,g,_,S,B,q){u.info(function(){if(u.g)if(q){var pe="",$e=q.split("&");for(let ot=0;ot<$e.length;ot++){var Rt=$e[ot].split("=");if(Rt.length>1){const Nt=Rt[0];Rt=Rt[1];const Nn=Nt.split("_");pe=Nn.length>=2&&Nn[1]=="type"?pe+(Nt+"="+Rt+"&"):pe+(Nt+"=redacted&")}}}else pe=null;else pe=q;return"XMLHTTP REQ ("+S+") [attempt "+B+"]: "+g+`
`+_+`
`+pe})}function le(u,g,_,S,B,q,pe){u.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+B+"]: "+g+`
`+_+`
`+q+" "+pe})}function he(u,g,_,S){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+it(u,_)+(S?" "+S:"")})}function Le(u,g){u.info(function(){return"TIMEOUT: "+g})}dr.prototype.info=function(){};function it(u,g){if(!u.g)return g;if(!g)return null;try{const q=JSON.parse(g);if(q){for(u=0;u<q.length;u++)if(Array.isArray(q[u])){var _=q[u];if(!(_.length<2)){var S=_[1];if(Array.isArray(S)&&!(S.length<1)){var B=S[0];if(B!="noop"&&B!="stop"&&B!="close")for(let pe=1;pe<S.length;pe++)S[pe]=""}}}}return cr(q)}catch{return g}}var qe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},at={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ut;function tt(){}T(tt,Ct),tt.prototype.g=function(){return new XMLHttpRequest},ut=new tt;function dt(u){return encodeURIComponent(String(u))}function vt(u){var g=1;u=u.split(":");const _=[];for(;g>0&&u.length;)_.push(u.shift()),g--;return u.length&&_.push(u.join(":")),_}function tn(u,g,_,S){this.j=u,this.i=g,this.l=_,this.S=S||1,this.V=new ur(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Al}function Al(){this.i=null,this.g="",this.h=!1}var Rl={},sa={};function Qn(u,g,_){u.M=1,u.A=Wr(Fn(g)),u.u=_,u.R=!0,ia(u,null)}function ia(u,g){u.F=Date.now(),ii(u),u.B=Fn(u.A);var _=u.B,S=u.S;Array.isArray(S)||(S=[String(S)]),ma(_.i,"t",S),u.C=0,_=u.j.L,u.h=new Al,u.g=Fl(u.j,_?g:null,!u.u),u.P>0&&(u.O=new qn(y(u.Y,u,u.g),u.P)),g=u.V,_=u.g,S=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(fs[0]=B.toString()),B=fs);for(let q=0;q<B.length;q++){const pe=He(_,B[q],S||g.handleEvent,!1,g.h||g);if(!pe)break;g.g[pe.key]=pe}g=u.J?N(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),Mn(),K(u.i,u.v,u.B,u.l,u.S,u.u)}tn.prototype.ba=function(u){u=u.target;const g=this.O;g&&vr(u)==3?g.j():this.Y(u)},tn.prototype.Y=function(u){try{if(u==this.g)e:{const $e=vr(this.g),Rt=this.g.ya(),ot=this.g.ca();if(!($e<3)&&($e!=3||this.g&&(this.h.h||this.g.la()||Ll(this.g)))){this.K||$e!=4||Rt==7||(Rt==8||ot<=0?Mn(3):Mn(2)),Gi(this);var g=this.g.ca();this.X=g;var _=Pl(this);if(this.o=g==200,le(this.i,this.v,this.B,this.l,this.S,$e,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,B=this.g;if((S=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(S)){var q=S;break t}}q=null}if(u=q)he(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ft(this,u);else{this.o=!1,this.m=3,_t(12),$r(this),oi(this);break e}}if(this.R){u=!0;let Nt;for(;!this.K&&this.C<_.length;)if(Nt=Nl(this,_),Nt==sa){$e==4&&(this.m=4,_t(14),u=!1),he(this.i,this.l,null,"[Incomplete Response]");break}else if(Nt==Rl){this.m=4,_t(15),he(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else he(this.i,this.l,Nt,null),ft(this,Nt);if(xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||_.length!=0||this.h.h||(this.m=1,_t(16),u=!1),this.o=this.o&&u,!u)he(this.i,this.l,_,"[Invalid Chunked Response]"),$r(this),oi(this);else if(_.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),mi(pe),pe.P=!0,_t(11))}}else he(this.i,this.l,_,null),ft(this,_);$e==4&&$r(this),this.o&&!this.K&&($e==4?ro(this.j,this):(this.o=!1,ii(this)))}else ya(this.g),g==400&&_.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),$r(this),oi(this)}}}catch{}finally{}};function Pl(u){if(!xl(u))return u.g.la();const g=Ll(u.g);if(g==="")return"";let _="";const S=g.length,B=vr(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return $r(u),oi(u),"";u.h.i=new c.TextDecoder}for(let q=0;q<S;q++)u.h.h=!0,_+=u.h.i.decode(g[q],{stream:!(B&&q==S-1)});return g.length=0,u.h.g+=_,u.C=0,u.h.g}function xl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Nl(u,g){var _=u.C,S=g.indexOf(`
`,_);return S==-1?sa:(_=Number(g.substring(_,S)),isNaN(_)?Rl:(S+=1,S+_>g.length?sa:(g=g.slice(S,S+_),u.C=S+_,g)))}tn.prototype.cancel=function(){this.K=!0,$r(this)};function ii(u){u.T=Date.now()+u.H,oa(u,u.H)}function oa(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=hr(y(u.aa,u),g)}function Gi(u){u.D&&(c.clearTimeout(u.D),u.D=null)}tn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Le(this.i,this.B),this.M!=2&&(Mn(),_t(17)),$r(this),this.m=2,oi(this)):oa(this,this.T-u)};function oi(u){u.j.I==0||u.K||ro(u.j,u)}function $r(u){Gi(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,ps(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function ft(u,g){try{var _=u.j;if(_.I!=0&&(_.g==u||la(_.h,u))){if(!u.L&&la(_.h,u)&&_.I==3){try{var S=_.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var B=S;if(B[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)no(_),Pn(_);else break e;Tr(_),_t(18)}}else _.xa=B[1],0<_.xa-_.K&&B[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=hr(y(_.Va,_),6e3));ai(_.h)<=1&&_.ta&&(_.ta=void 0)}else xn(_,11)}else if((u.L||_.g==u)&&no(_),!R(g))for(B=_.Ba.g.parse(g),g=0;g<B.length;g++){let ot=B[g];const Nt=ot[0];if(!(Nt<=_.K))if(_.K=Nt,ot=ot[1],_.I==2)if(ot[0]=="c"){_.M=ot[1],_.ba=ot[2];const Nn=ot[3];Nn!=null&&(_.ka=Nn,_.j.info("VER="+_.ka));const Qr=ot[4];Qr!=null&&(_.za=Qr,_.j.info("SVER="+_.za));const Ir=ot[5];Ir!=null&&typeof Ir=="number"&&Ir>0&&(S=1.5*Ir,_.O=S,_.j.info("backChannelRequestTimeoutMs_="+S)),S=_;const Sr=u.g;if(Sr){const oo=Sr.g?Sr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oo){var q=S.h;q.g||oo.indexOf("spdy")==-1&&oo.indexOf("quic")==-1&&oo.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(Qi(q,q.h),q.h=null))}if(S.G){const wa=Sr.g?Sr.g.getResponseHeader("X-HTTP-Session-Id"):null;wa&&(S.wa=wa,rt(S.J,S.G,wa))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),S=_;var pe=u;if(S.na=va(S,S.L?S.ba:null,S.W),pe.L){li(S.h,pe);var $e=pe,Rt=S.O;Rt&&($e.H=Rt),$e.D&&(Gi($e),ii($e)),S.g=pe}else nn(S);_.i.length>0&&Kr(_)}else ot[0]!="stop"&&ot[0]!="close"||xn(_,7);else _.I==3&&(ot[0]=="stop"||ot[0]=="close"?ot[0]=="stop"?xn(_,7):eo(_):ot[0]!="noop"&&_.l&&_.l.qa(ot),_.A=0)}}Mn(4)}catch{}}var $c=class{constructor(u,g){this.g=u,this.map=g}};function Ki(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function aa(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ai(u){return u.h?1:u.g?u.g.size:0}function la(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Qi(u,g){u.g?u.g.add(g):u.h=g}function li(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}Ki.prototype.cancel=function(){if(this.i=kn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function kn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const _ of u.g.values())g=g.concat(_.G);return g}return b(u.i)}var bl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function An(u,g){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const S=u[_].indexOf("=");let B,q=null;S>=0?(B=u[_].substring(0,S),q=u[_].substring(S+1)):B=u[_],g(B,q?decodeURIComponent(q.replace(/\+/g," ")):"")}}}function fr(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof fr?(this.l=u.l,ui(this,u.j),this.o=u.o,this.g=u.g,pr(this,u.u),this.h=u.h,ms(this,ga(u.i)),this.m=u.m):u&&(g=String(u).match(bl))?(this.l=!1,ui(this,g[1]||"",!0),this.o=ci(g[2]||""),this.g=ci(g[3]||"",!0),pr(this,g[4]),this.h=ci(g[5]||"",!0),ms(this,g[6]||"",!0),this.m=ci(g[7]||"")):(this.l=!1,this.i=new Xe(null,this.l))}fr.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(hi(g,ca,!0),":");var _=this.g;return(_||g=="file")&&(u.push("//"),(g=this.o)&&u.push(hi(g,ca,!0),"@"),u.push(dt(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(hi(_,_.charAt(0)=="/"?di:ha,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",hi(_,da)),u.join("")},fr.prototype.resolve=function(u){const g=Fn(this);let _=!!u.j;_?ui(g,u.j):_=!!u.o,_?g.o=u.o:_=!!u.g,_?g.g=u.g:_=u.u!=null;var S=u.h;if(_)pr(g,u.u);else if(_=!!u.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var B=g.h.lastIndexOf("/");B!=-1&&(S=g.h.slice(0,B+1)+S)}if(B=S,B==".."||B==".")S="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){S=B.lastIndexOf("/",0)==0,B=B.split("/");const q=[];for(let pe=0;pe<B.length;){const $e=B[pe++];$e=="."?S&&pe==B.length&&q.push(""):$e==".."?((q.length>1||q.length==1&&q[0]!="")&&q.pop(),S&&pe==B.length&&q.push("")):(q.push($e),S=!0)}S=q.join("/")}else S=B}return _?g.h=S:_=u.i.toString()!=="",_?ms(g,ga(u.i)):_=!!u.m,_&&(g.m=u.m),g};function Fn(u){return new fr(u)}function ui(u,g,_){u.j=_?ci(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function pr(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function ms(u,g,_){g instanceof Xe?(u.i=g,Yi(u.i,u.l)):(_||(g=hi(g,Wc)),u.i=new Xe(g,u.l))}function rt(u,g,_){u.i.set(g,_)}function Wr(u){return rt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function ci(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function hi(u,g,_){return typeof u=="string"?(u=encodeURI(u).replace(g,ua),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function ua(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var ca=/[#\/\?@]/g,ha=/[#\?:]/g,di=/[#\?]/g,Wc=/[#\?@]/g,da=/#/g;function Xe(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function mr(u){u.g||(u.g=new Map,u.h=0,u.i&&An(u.i,function(g,_){u.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}n=Xe.prototype,n.add=function(u,g){mr(this),this.i=null,u=gr(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(g),this.h+=1,this};function fa(u,g){mr(u),g=gr(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function Ji(u,g){return mr(u),g=gr(u,g),u.g.has(g)}n.forEach=function(u,g){mr(this),this.g.forEach(function(_,S){_.forEach(function(B){u.call(g,B,S,this)},this)},this)};function pa(u,g){mr(u);let _=[];if(typeof g=="string")Ji(u,g)&&(_=_.concat(u.g.get(gr(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)_=_.concat(u[g]);return _}n.set=function(u,g){return mr(this),this.i=null,u=gr(this,u),Ji(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},n.get=function(u,g){return u?(u=pa(this,u),u.length>0?String(u[0]):g):g};function ma(u,g,_){fa(u,g),_.length>0&&(u.i=null,u.g.set(gr(u,g),b(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var _=g[S];const B=dt(_);_=pa(this,_);for(let q=0;q<_.length;q++){let pe=B;_[q]!==""&&(pe+="="+dt(_[q])),u.push(pe)}}return this.i=u.join("&")};function ga(u){const g=new Xe;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function gr(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Yi(u,g){g&&!u.j&&(mr(u),u.i=null,u.g.forEach(function(_,S){const B=S.toLowerCase();S!=B&&(fa(this,S),ma(this,B,_))},u)),u.j=g}function yr(u,g){const _=new dr;if(c.Image){const S=new Image;S.onload=v(Gt,_,"TestLoadImage: loaded",!0,g,S),S.onerror=v(Gt,_,"TestLoadImage: error",!1,g,S),S.onabort=v(Gt,_,"TestLoadImage: abort",!1,g,S),S.ontimeout=v(Gt,_,"TestLoadImage: timeout",!1,g,S),c.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=u}else g(!1)}function _r(u,g){const _=new dr,S=new AbortController,B=setTimeout(()=>{S.abort(),Gt(_,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:S.signal}).then(q=>{clearTimeout(B),q.ok?Gt(_,"TestPingServer: ok",!0,g):Gt(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Gt(_,"TestPingServer: error",!1,g)})}function Gt(u,g,_,S,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),S(_)}catch{}}function fi(){this.g=new jr}function Hr(u){this.i=u.Sb||null,this.h=u.ab||!1}T(Hr,Ct),Hr.prototype.g=function(){return new Rn(this.i,this.h)};function Rn(u,g){me.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Rn,me),n=Rn.prototype,n.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Jn(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||c).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Dl(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Dl(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?gs(this):Jn(this),this.readyState==3&&Dl(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,gs(this))},n.Na=function(u){this.g&&(this.response=u,gs(this))},n.ga=function(){this.g&&gs(this)};function gs(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Jn(u)}n.setRequestHeader=function(u,g){this.A.append(u,g)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=g.next();return u.join(`\r
`)};function Jn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Rn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Vl(u){let g="";return Q(u,function(_,S){g+=S,g+=":",g+=_,g+=`\r
`}),g}function Xi(u,g,_){e:{for(S in _){var S=!1;break e}S=!0}S||(_=Vl(_),typeof u=="string"?_!=null&&dt(_):rt(u,g,_))}function lt(u){me.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(lt,me);var Ol=/^https?$/i,Hc=["POST","PUT"];n=lt.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,g,_,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ut.g(),this.g.onreadystatechange=E(y(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(q){ys(this,q);return}if(u=_||"",_=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var B in S)_.set(B,S[B]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const q of S.keys())_.set(q,S.get(q));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(_.keys()).find(q=>q.toLowerCase()=="content-type"),B=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(Hc,g,void 0)>=0)||S||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,pe]of _)this.g.setRequestHeader(q,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(q){ys(this,q)}};function ys(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,_s(u),Gr(u)}function _s(u){u.A||(u.A=!0,Ve(u,"complete"),Ve(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Ve(this,"complete"),Ve(this,"abort"),Gr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gr(this,!0)),lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?qr(this):this.Xa())},n.Xa=function(){qr(this)};function qr(u){if(u.h&&typeof l<"u"){if(u.v&&vr(u)==4)setTimeout(u.Ca.bind(u),0);else if(Ve(u,"readystatechange"),vr(u)==4){u.h=!1;try{const q=u.ca();e:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var S;if(S=q===0){let pe=String(u.D).match(bl)[1]||null;!pe&&c.self&&c.self.location&&(pe=c.self.location.protocol.slice(0,-1)),S=!Ol.test(pe?pe.toLowerCase():"")}_=S}if(_)Ve(u,"complete"),Ve(u,"success");else{u.o=6;try{var B=vr(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",_s(u)}}finally{Gr(u)}}}}function Gr(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,g||Ve(u,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function vr(u){return u.g?u.g.readyState:0}n.ca=function(){try{return vr(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),qi(g)}};function Ll(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ya(u){const g={};u=(u.g&&vr(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<u.length;S++){if(R(u[S]))continue;var _=vt(u[S]);const B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const q=g[B]||[];g[B]=q,q.push(_)}J(g,function(S){return S.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wr(u,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||g}function Zi(u){this.za=0,this.i=[],this.j=new dr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wr("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wr("baseRetryDelayMs",5e3,u),this.Za=wr("retryDelaySeedMs",1e4,u),this.Ta=wr("forwardChannelMaxRetries",2,u),this.va=wr("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Ki(u&&u.concurrentRequestLimit),this.Ba=new fi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Zi.prototype,n.ka=8,n.I=1,n.connect=function(u,g,_,S){_t(0),this.W=u,this.H=g||{},_&&S!==void 0&&(this.H.OSID=_,this.H.OAID=S),this.F=this.X,this.J=va(this,null,this.W),Kr(this)};function eo(u){if(to(u),u.I==3){var g=u.V++,_=Fn(u.J);if(rt(_,"SID",u.M),rt(_,"RID",g),rt(_,"TYPE","terminate"),Er(u,_),g=new tn(u,u.j,g),g.M=2,g.A=Wr(Fn(_)),_=!1,c.navigator&&c.navigator.sendBeacon)try{_=c.navigator.sendBeacon(g.A.toString(),"")}catch{}!_&&c.Image&&(new Image().src=g.A,_=!0),_||(g.g=Fl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),ii(g)}gi(u)}function Pn(u){u.g&&(mi(u),u.g.cancel(),u.g=null)}function to(u){Pn(u),u.v&&(c.clearTimeout(u.v),u.v=null),no(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Kr(u){if(!aa(u.h)&&!u.m){u.m=!0;var g=u.Ea;ne||I(),Ee||(ne(),Ee=!0),x.add(g,u),u.D=0}}function Ml(u,g){return ai(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=hr(y(u.Ea,u,g),so(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new tn(this,this.j,u);let q=this.o;if(this.U&&(q?(q=N(q),Pe(q,this.U)):q=this.U),this.u!==null||this.R||(B.J=q,q=null),this.S)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var S=this.i[_];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=_a(this,B,g),_=Fn(this.J),rt(_,"RID",u),rt(_,"CVER",22),this.G&&rt(_,"X-HTTP-Session-Id",this.G),Er(this,_),q&&(this.R?g="headers="+dt(Vl(q))+"&"+g:this.u&&Xi(_,this.u,q)),Qi(this.h,B),this.Ra&&rt(_,"TYPE","init"),this.S?(rt(_,"$req",g),rt(_,"SID","null"),B.U=!0,Qn(B,_,null)):Qn(B,_,g),this.I=2}}else this.I==3&&(u?pi(this,u):this.i.length==0||aa(this.h)||pi(this))};function pi(u,g){var _;g?_=g.l:_=u.V++;const S=Fn(u.J);rt(S,"SID",u.M),rt(S,"RID",_),rt(S,"AID",u.K),Er(u,S),u.u&&u.o&&Xi(S,u.u,u.o),_=new tn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),g&&(u.i=g.G.concat(u.i)),g=_a(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Qi(u.h,_),Qn(_,S,g)}function Er(u,g){u.H&&Q(u.H,function(_,S){rt(g,S,_)}),u.l&&Q({},function(_,S){rt(g,S,_)})}function _a(u,g,_){_=Math.min(u.i.length,_);const S=u.l?y(u.l.Ka,u.l,u):null;e:{var B=u.i;let $e=-1;for(;;){const Rt=["count="+_];$e==-1?_>0?($e=B[0].g,Rt.push("ofs="+$e)):$e=0:Rt.push("ofs="+$e);let ot=!0;for(let Nt=0;Nt<_;Nt++){var q=B[Nt].g;const Nn=B[Nt].map;if(q-=$e,q<0)$e=Math.max(0,B[Nt].g-100),ot=!1;else try{q="req"+q+"_"||"";try{var pe=Nn instanceof Map?Nn:Object.entries(Nn);for(const[Qr,Ir]of pe){let Sr=Ir;f(Ir)&&(Sr=cr(Ir)),Rt.push(q+Qr+"="+encodeURIComponent(Sr))}}catch(Qr){throw Rt.push(q+"type="+encodeURIComponent("_badmap")),Qr}}catch{S&&S(Nn)}}if(ot){pe=Rt.join("&");break e}}pe=void 0}return u=u.i.splice(0,_),g.G=u,pe}function nn(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;ne||I(),Ee||(ne(),Ee=!0),x.add(g,u),u.A=0}}function Tr(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=hr(y(u.Da,u),so(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,vs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=hr(y(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),Pn(this),vs(this))};function mi(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function vs(u){u.g=new tn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=Fn(u.na);rt(g,"RID","rpc"),rt(g,"SID",u.M),rt(g,"AID",u.K),rt(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&rt(g,"TO",u.ia),rt(g,"TYPE","xmlhttp"),Er(u,g),u.u&&u.o&&Xi(g,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Wr(Fn(g)),_.u=null,_.R=!0,ia(_,u)}n.Va=function(){this.C!=null&&(this.C=null,Pn(this),Tr(this),_t(19))};function no(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function ro(u,g){var _=null;if(u.g==g){no(u),mi(u),u.g=null;var S=2}else if(la(u.h,g))_=g.G,li(u.h,g),S=1;else return;if(u.I!=0){if(g.o)if(S==1){_=g.u?g.u.length:0,g=Date.now()-g.F;var B=u.D;S=Kn(),Ve(S,new si(S,_)),Kr(u)}else nn(u);else if(B=g.m,B==3||B==0&&g.X>0||!(S==1&&Ml(u,g)||S==2&&Tr(u)))switch(_&&_.length>0&&(g=u.h,g.i=g.i.concat(_)),B){case 1:xn(u,5);break;case 4:xn(u,10);break;case 3:xn(u,6);break;default:xn(u,2)}}}function so(u,g){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*g}function xn(u,g){if(u.j.info("Error code "+g),g==2){var _=y(u.bb,u),S=u.Ua;const B=!S;S=new fr(S||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ui(S,"https"),Wr(S),B?yr(S.toString(),_):_r(S.toString(),_)}else _t(2);u.I=0,u.l&&u.l.pa(g),gi(u),to(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function gi(u){if(u.I=0,u.ja=[],u.l){const g=kn(u.h);(g.length!=0||u.i.length!=0)&&(j(u.ja,g),j(u.ja,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.oa()}}function va(u,g,_){var S=_ instanceof fr?Fn(_):new fr(_);if(S.g!="")g&&(S.g=g+"."+S.g),pr(S,S.u);else{var B=c.location;S=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;const q=new fr(null);S&&ui(q,S),g&&(q.g=g),B&&pr(q,B),_&&(q.h=_),S=q}return _=u.G,g=u.wa,_&&g&&rt(S,_,g),rt(S,"VER",u.ka),Er(u,S),S}function Fl(u,g,_){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new lt(new Hr({ab:_})):new lt(u.ma),g.Fa(u.L),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jl(){}n=jl.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function io(){}io.prototype.g=function(u,g){return new Kt(u,g)};function Kt(u,g){me.call(this),this.g=new Zi(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!R(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!R(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new ws(this)}T(Kt,me),Kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){eo(this.g)},Kt.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=cr(u),u=_);g.i.push(new $c(g.Ya++,u)),g.I==3&&Kr(g)},Kt.prototype.N=function(){this.g.l=null,delete this.j,eo(this.g),delete this.g,Kt.Z.N.call(this)};function Ul(u){Cn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const _ in g){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}T(Ul,Cn);function zl(){Gn.call(this),this.status=1}T(zl,Gn);function ws(u){this.g=u}T(ws,jl),ws.prototype.ra=function(){Ve(this.g,"a")},ws.prototype.qa=function(u){Ve(this.g,new Ul(u))},ws.prototype.pa=function(u){Ve(this.g,new zl)},ws.prototype.oa=function(){Ve(this.g,"b")},io.prototype.createWebChannel=io.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,Vv=function(){return new io},Dv=function(){return Kn()},bv=en,Wd={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},qe.NO_ERROR=0,qe.TIMEOUT=8,qe.HTTP_ERROR=6,Gu=qe,at.COMPLETE="complete",Nv=at,Ur.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",me.prototype.listen=me.prototype.J,Ka=Ur,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,xv=lt}).apply(typeof Lu<"u"?Lu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}un.UNAUTHENTICATED=new un(null),un.GOOGLE_CREDENTIALS=new un("google-credentials-uid"),un.FIRST_PARTY=new un("first-party-uid"),un.MOCK_USER=new un("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zo="12.9.0";function N1(n){Zo=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new pf("@firebase/firestore");function Ro(){return Fi.logLevel}function we(n,...e){if(Fi.logLevel<=Ke.DEBUG){const t=e.map(Af);Fi.debug(`Firestore (${Zo}): ${n}`,...t)}}function cs(n,...e){if(Fi.logLevel<=Ke.ERROR){const t=e.map(Af);Fi.error(`Firestore (${Zo}): ${n}`,...t)}}function ji(n,...e){if(Fi.logLevel<=Ke.WARN){const t=e.map(Af);Fi.warn(`Firestore (${Zo}): ${n}`,...t)}}function Af(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,Ov(n,s,t)}function Ov(n,e,t){let s=`FIRESTORE (${Zo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw cs(s),new Error(s)}function st(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||Ov(e,o,s)}function We(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends ds{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(un.UNAUTHENTICATED)))}shutdown(){}}class D1{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class V1{constructor(e){this.t=e,this.currentUser=un.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){st(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new qs;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new qs,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},f=p=>{we("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>f(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(we("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new qs)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(we("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(st(typeof s.accessToken=="string",31837,{l:s}),new Lv(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return st(e===null||typeof e=="string",2055,{h:e}),new un(e)}}class O1{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=un.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class L1{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new O1(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(un.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class _y{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M1{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,rr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){st(this.o===void 0,3512);const s=l=>{l.error!=null&&we("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,we("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{we("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):we("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new _y(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(st(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new _y(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=F1(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Qe(n,e){return n<e?-1:n>e?1:0}function Hd(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return Cd(o)===Cd(l)?Qe(o,l):Cd(o)?1:-1}return Qe(n.length,e.length)}const j1=55296,U1=57343;function Cd(n){const e=n.charCodeAt(0);return e>=j1&&e<=U1}function zo(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="__name__";class Pr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Me(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Me(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Pr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Pr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Qe(e.length,t.length)}static compareSegments(e,t){const s=Pr.isNumericId(e),o=Pr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Pr.extractNumericId(e).compare(Pr.extractNumericId(t)):Hd(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hs.fromString(e.substring(4,e.length-2))}}class ht extends Pr{construct(e,t,s){return new ht(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new ht(t)}static emptyPath(){return new ht([])}}const z1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Pr{construct(e,t,s){return new Xt(e,t,s)}static isValidIdentifier(e){return z1.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vy}static keyField(){return new Xt([vy])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ye(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new ye(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new ye(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else f==="`"?(c=!c,o++):f!=="."||c?(s+=f,o++):(l(),o++)}if(l(),c)throw new ye(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xe{constructor(e){this.path=e}static fromPath(e){return new xe(ht.fromString(e))}static fromName(e){return new xe(ht.fromString(e).popFirst(5))}static empty(){return new xe(ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ht.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ht.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new xe(new ht(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mv(n,e,t){if(!t)throw new ye(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function B1(n,e,t,s){if(e===!0&&s===!0)throw new ye(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function wy(n){if(!xe.isDocumentKey(n))throw new ye(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Ey(n){if(xe.isDocumentKey(n))throw new ye(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fv(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Ac(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Me(12329,{type:typeof n})}function Nr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Ac(n);throw new ye(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $1(n,e){if(e<=0)throw new ye(X.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(n,e){const t={typeString:n};return e&&(t.value=e),t}function El(n,e){if(!Fv(n))throw new ye(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ye(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=-62135596800,Iy=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Iy);return new gt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ty)throw new ye(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iy}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(El(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ty;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Lt("string",gt._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new gt(0,0))}static max(){return new Ue(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ul=-1;function W1(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Ue.fromTimestamp(s===1e9?new gt(t+1,0):new gt(t,s));return new Ks(o,xe.empty(),e)}function H1(n){return new Ks(n.readTime,n.key,ul)}class Ks{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Ks(Ue.min(),xe.empty(),ul)}static max(){return new Ks(Ue.max(),xe.empty(),ul)}}function q1(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=xe.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class K1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ea(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==G1)throw n;we("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Z(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Z?t:Z.resolve(t)}catch(t){return Z.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Z.reject(t)}static resolve(e){return new Z(((t,s)=>{t(e)}))}static reject(e){return new Z(((t,s)=>{s(e)}))}static waitFor(e){return new Z(((t,s)=>{let o=0,l=0,c=!1;e.forEach((f=>{++o,f.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=Z.resolve(!1);for(const s of e)t=t.next((o=>o?Z.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new Z(((s,o)=>{const l=e.length,c=new Array(l);let f=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((v=>{c[y]=v,++f,f===l&&s(c)}),(v=>o(v)))}}))}static doWhile(e,t){return new Z(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function Q1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ta(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Rc.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf=-1;function Pc(n){return n==null}function lc(n){return n===0&&1/n==-1/0}function J1(n){return typeof n=="number"&&Number.isInteger(n)&&!lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv="";function Y1(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Sy(e)),e=X1(n.get(t),e);return Sy(e)}function X1(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case jv:t+="";break;default:t+=l}}return t}function Sy(n){return n+jv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ti(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Uv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e,t){this.comparator=e,this.root=t||Yt.EMPTY}insert(e,t){return new It(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new It(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mu(this.root,e,this.comparator,!0)}}class Mu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Yt.RED,this.left=o??Yt.EMPTY,this.right=l??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Yt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Yt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Yt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new It(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ky(this.data.getIterator())}getIteratorFrom(e){return new ky(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new zt(this.comparator);return t.data=e,t}}class ky{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new On([])}unionWith(e){let t=new zt(Xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new On(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new zv("Invalid base64 string: "+l):l}})(e);return new Zt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Zt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const Z1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Qs(n){if(st(!!n,39018),typeof n=="string"){let e=0;const t=Z1.exec(n);if(st(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:xt(n.seconds),nanos:xt(n.nanos)}}function xt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Js(n){return typeof n=="string"?Zt.fromBase64String(n):Zt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv="server_timestamp",$v="__type__",Wv="__previous_value__",Hv="__local_write_time__";function xf(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[$v])==null?void 0:s.stringValue)===Bv}function xc(n){const e=n.mapValue.fields[Wv];return xf(e)?xc(e):e}function cl(n){const e=Qs(n.mapValue.fields[Hv].timestampValue);return new gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ek{constructor(e,t,s,o,l,c,f,p,y,v,T){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=v,this.apiKey=T}}const uc="(default)";class hl{constructor(e,t){this.projectId=e,this.database=t||uc}static empty(){return new hl("","")}get isDefaultDatabase(){return this.database===uc}isEqual(e){return e instanceof hl&&e.projectId===this.projectId&&e.database===this.database}}function tk(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ye(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hl(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="__type__",nk="__max__",Fu={mapValue:{}},Gv="__vector__",cc="value";function Ys(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?xf(n)?4:sk(n)?9007199254740991:rk(n)?10:11:Me(28295,{value:n})}function Mr(n,e){if(n===e)return!0;const t=Ys(n);if(t!==Ys(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return cl(n).isEqual(cl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Qs(o.timestampValue),f=Qs(l.timestampValue);return c.seconds===f.seconds&&c.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Js(o.bytesValue).isEqual(Js(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return xt(o.geoPointValue.latitude)===xt(l.geoPointValue.latitude)&&xt(o.geoPointValue.longitude)===xt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return xt(o.integerValue)===xt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=xt(o.doubleValue),f=xt(l.doubleValue);return c===f?lc(c)===lc(f):isNaN(c)&&isNaN(f)}return!1})(n,e);case 9:return zo(n.arrayValue.values||[],e.arrayValue.values||[],Mr);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},f=l.mapValue.fields||{};if(Cy(c)!==Cy(f))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(f[p]===void 0||!Mr(c[p],f[p])))return!1;return!0})(n,e);default:return Me(52216,{left:n})}}function dl(n,e){return(n.values||[]).find((t=>Mr(t,e)))!==void 0}function Bo(n,e){if(n===e)return 0;const t=Ys(n),s=Ys(e);if(t!==s)return Qe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const f=xt(l.integerValue||l.doubleValue),p=xt(c.integerValue||c.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1})(n,e);case 3:return Ay(n.timestampValue,e.timestampValue);case 4:return Ay(cl(n),cl(e));case 5:return Hd(n.stringValue,e.stringValue);case 6:return(function(l,c){const f=Js(l),p=Js(c);return f.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const f=l.split("/"),p=c.split("/");for(let y=0;y<f.length&&y<p.length;y++){const v=Qe(f[y],p[y]);if(v!==0)return v}return Qe(f.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const f=Qe(xt(l.latitude),xt(c.latitude));return f!==0?f:Qe(xt(l.longitude),xt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Ry(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var E,b,j,U;const f=l.fields||{},p=c.fields||{},y=(E=f[cc])==null?void 0:E.arrayValue,v=(b=p[cc])==null?void 0:b.arrayValue,T=Qe(((j=y==null?void 0:y.values)==null?void 0:j.length)||0,((U=v==null?void 0:v.values)==null?void 0:U.length)||0);return T!==0?T:Ry(y,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Fu.mapValue&&c===Fu.mapValue)return 0;if(l===Fu.mapValue)return 1;if(c===Fu.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),y=c.fields||{},v=Object.keys(y);p.sort(),v.sort();for(let T=0;T<p.length&&T<v.length;++T){const E=Hd(p[T],v[T]);if(E!==0)return E;const b=Bo(f[p[T]],y[v[T]]);if(b!==0)return b}return Qe(p.length,v.length)})(n.mapValue,e.mapValue);default:throw Me(23264,{he:t})}}function Ay(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=Qs(n),s=Qs(e),o=Qe(t.seconds,s.seconds);return o!==0?o:Qe(t.nanos,s.nanos)}function Ry(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Bo(t[o],s[o]);if(l)return l}return Qe(t.length,s.length)}function $o(n){return qd(n)}function qd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Qs(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Js(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return xe.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=qd(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${qd(t.fields[c])}`;return o+"}"})(n.mapValue):Me(61005,{value:n})}function Ku(n){switch(Ys(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xc(n);return e?16+Ku(e):16;case 5:return 2*n.stringValue.length;case 6:return Js(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+Ku(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return ti(s.fields,((l,c)=>{o+=l.length+Ku(c)})),o})(n.mapValue);default:throw Me(13486,{value:n})}}function Py(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Gd(n){return!!n&&"integerValue"in n}function Nf(n){return!!n&&"arrayValue"in n}function xy(n){return!!n&&"nullValue"in n}function Ny(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qu(n){return!!n&&"mapValue"in n}function rk(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[qv])==null?void 0:s.stringValue)===Gv}function tl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ti(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=tl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tl(n.arrayValue.values[t]);return e}return{...n}}function sk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.value=e}static empty(){return new In({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Qu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tl(t)}setAll(e){let t=Xt.emptyPath(),s={},o=[];e.forEach(((c,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=f.popLast()}c?s[f.lastSegment()]=tl(c):o.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Qu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Qu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ti(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new In(tl(this.value))}}function Kv(n){const e=[];return ti(n.fields,((t,s)=>{const o=new Xt([t]);if(Qu(s)){const l=Kv(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e,t,s,o,l,c,f){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=f}static newInvalidDocument(e){return new cn(e,0,Ue.min(),Ue.min(),Ue.min(),In.empty(),0)}static newFoundDocument(e,t,s,o){return new cn(e,1,t,Ue.min(),s,o,0)}static newNoDocument(e,t){return new cn(e,2,t,Ue.min(),Ue.min(),In.empty(),0)}static newUnknownDocument(e,t){return new cn(e,3,t,Ue.min(),Ue.min(),In.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=In.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=In.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(e,t){this.position=e,this.inclusive=t}}function by(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=xe.comparator(xe.fromName(c.referenceValue),t.key):s=Bo(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Dy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(e,t="asc"){this.field=e,this.dir=t}}function ik(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{}class Ot extends Qv{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new ak(e,t,s):t==="array-contains"?new ck(e,s):t==="in"?new hk(e,s):t==="not-in"?new dk(e,s):t==="array-contains-any"?new fk(e,s):new Ot(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new lk(e,s):new uk(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Bo(t,this.value)):t!==null&&Ys(this.value)===Ys(t)&&this.matchesComparison(Bo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ar extends Qv{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ar(e,t)}matches(e){return Jv(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Jv(n){return n.op==="and"}function Yv(n){return ok(n)&&Jv(n)}function ok(n){for(const e of n.filters)if(e instanceof ar)return!1;return!0}function Kd(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+$o(n.value);if(Yv(n))return n.filters.map((e=>Kd(e))).join(",");{const e=n.filters.map((t=>Kd(t))).join(",");return`${n.op}(${e})`}}function Xv(n,e){return n instanceof Ot?(function(s,o){return o instanceof Ot&&s.op===o.op&&s.field.isEqual(o.field)&&Mr(s.value,o.value)})(n,e):n instanceof ar?(function(s,o){return o instanceof ar&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,f)=>l&&Xv(c,o.filters[f])),!0):!1})(n,e):void Me(19439)}function Zv(n){return n instanceof Ot?(function(t){return`${t.field.canonicalString()} ${t.op} ${$o(t.value)}`})(n):n instanceof ar?(function(t){return t.op.toString()+" {"+t.getFilters().map(Zv).join(" ,")+"}"})(n):"Filter"}class ak extends Ot{constructor(e,t,s){super(e,t,s),this.key=xe.fromName(s.referenceValue)}matches(e){const t=xe.comparator(e.key,this.key);return this.matchesComparison(t)}}class lk extends Ot{constructor(e,t){super(e,"in",t),this.keys=ew("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class uk extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=ew("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ew(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>xe.fromName(s.referenceValue)))}class ck extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nf(t)&&dl(t.arrayValue,this.value)}}class hk extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&dl(this.value.arrayValue,t)}}class dk extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!dl(this.value.arrayValue,t)}}class fk extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>dl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e,t=null,s=[],o=[],l=null,c=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=f,this.Te=null}}function Vy(n,e=null,t=[],s=[],o=null,l=null,c=null){return new pk(n,e,t,s,o,l,c)}function bf(n){const e=We(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Kd(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Pc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>$o(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>$o(s))).join(",")),e.Te=t}return e.Te}function Df(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ik(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Xv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Dy(n.startAt,e.startAt)&&Dy(n.endAt,e.endAt)}function Qd(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t=null,s=[],o=[],l=null,c="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=f,this.endAt=p,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function mk(n,e,t,s,o,l,c,f){return new na(n,e,t,s,o,l,c,f)}function Nc(n){return new na(n)}function Oy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gk(n){return xe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function tw(n){return n.collectionGroup!==null}function nl(n){const e=We(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let f=new zt(Xt.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(f=f.add(y.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new fl(l,s))})),t.has(Xt.keyField().canonicalString())||e.Ie.push(new fl(Xt.keyField(),s))}return e.Ie}function br(n){const e=We(n);return e.Ee||(e.Ee=yk(e,nl(n))),e.Ee}function yk(n,e){if(n.limitType==="F")return Vy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new fl(o.field,l)}));const t=n.endAt?new hc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new hc(n.startAt.position,n.startAt.inclusive):null;return Vy(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Jd(n,e){const t=n.filters.concat([e]);return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function _k(n,e){const t=n.explicitOrderBy.concat([e]);return new na(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.limitType,n.startAt,n.endAt)}function dc(n,e,t){return new na(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function bc(n,e){return Df(br(n),br(e))&&n.limitType===e.limitType}function nw(n){return`${bf(br(n))}|lt:${n.limitType}`}function Po(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>Zv(o))).join(", ")}]`),Pc(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>$o(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>$o(o))).join(",")),`Target(${s})`})(br(n))}; limitType=${n.limitType})`}function Dc(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):xe.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of nl(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,f,p){const y=by(c,f,p);return c.inclusive?y<=0:y<0})(s.startAt,nl(s),o)||s.endAt&&!(function(c,f,p){const y=by(c,f,p);return c.inclusive?y>=0:y>0})(s.endAt,nl(s),o))})(n,e)}function vk(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function rw(n){return(e,t)=>{let s=!1;for(const o of nl(n)){const l=wk(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function wk(n,e,t){const s=n.field.isKeyField()?xe.comparator(e.key,t.key):(function(l,c,f){const p=c.data.field(l),y=f.data.field(l);return p!==null&&y!==null?Bo(p,y):Me(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Me(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ti(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return Uv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ek=new It(xe.comparator);function hs(){return Ek}const sw=new It(xe.comparator);function Qa(...n){let e=sw;for(const t of n)e=e.insert(t.key,t);return e}function iw(n){let e=sw;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Di(){return rl()}function ow(){return rl()}function rl(){return new $i((n=>n.toString()),((n,e)=>n.isEqual(e)))}const Tk=new It(xe.comparator),Ik=new zt(xe.comparator);function Je(...n){let e=Ik;for(const t of n)e=e.add(t);return e}const Sk=new zt(Qe);function Ck(){return Sk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lc(e)?"-0":e}}function aw(n){return{integerValue:""+n}}function kk(n,e){return J1(e)?aw(e):Vf(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(){this._=void 0}}function Ak(n,e,t){return n instanceof fc?(function(o,l){const c={fields:{[$v]:{stringValue:Bv},[Hv]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&xf(l)&&(l=xc(l)),l&&(c.fields[Wv]=l),{mapValue:c}})(t,e):n instanceof Wo?uw(n,e):n instanceof Ho?cw(n,e):(function(o,l){const c=lw(o,l),f=Ly(c)+Ly(o.Ae);return Gd(c)&&Gd(o.Ae)?aw(f):Vf(o.serializer,f)})(n,e)}function Rk(n,e,t){return n instanceof Wo?uw(n,e):n instanceof Ho?cw(n,e):t}function lw(n,e){return n instanceof pc?(function(s){return Gd(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class fc extends Vc{}class Wo extends Vc{constructor(e){super(),this.elements=e}}function uw(n,e){const t=hw(e);for(const s of n.elements)t.some((o=>Mr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Ho extends Vc{constructor(e){super(),this.elements=e}}function cw(n,e){let t=hw(e);for(const s of n.elements)t=t.filter((o=>!Mr(o,s)));return{arrayValue:{values:t}}}class pc extends Vc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ly(n){return xt(n.integerValue||n.doubleValue)}function hw(n){return Nf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t){this.field=e,this.transform=t}}function Pk(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof Wo&&o instanceof Wo||s instanceof Ho&&o instanceof Ho?zo(s.elements,o.elements,Mr):s instanceof pc&&o instanceof pc?Mr(s.Ae,o.Ae):s instanceof fc&&o instanceof fc})(n.transform,e.transform)}class xk{constructor(e,t){this.version=e,this.transformResults=t}}class Dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Dr}static exists(e){return new Dr(void 0,e)}static updateTime(e){return new Dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ju(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Oc{}function fw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new mw(n.key,Dr.none()):new Tl(n.key,n.data,Dr.none());{const t=n.data,s=In.empty();let o=new zt(Xt.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new ni(n.key,s,new On(o.toArray()),Dr.none())}}function Nk(n,e,t){n instanceof Tl?(function(o,l,c){const f=o.value.clone(),p=Fy(o.fieldTransforms,l,c.transformResults);f.setAll(p),l.convertToFoundDocument(c.version,f).setHasCommittedMutations()})(n,e,t):n instanceof ni?(function(o,l,c){if(!Ju(o.precondition,l))return void l.convertToUnknownDocument(c.version);const f=Fy(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(pw(o)),p.setAll(f),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function sl(n,e,t,s){return n instanceof Tl?(function(l,c,f,p){if(!Ju(l.precondition,c))return f;const y=l.value.clone(),v=jy(l.fieldTransforms,p,c);return y.setAll(v),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,s):n instanceof ni?(function(l,c,f,p){if(!Ju(l.precondition,c))return f;const y=jy(l.fieldTransforms,p,c),v=c.data;return v.setAll(pw(l)),v.setAll(y),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(l,c,f){return Ju(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):f})(n,e,t)}function bk(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=lw(s.transform,o||null);l!=null&&(t===null&&(t=In.empty()),t.set(s.field,l))}return t||null}function My(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&zo(s,o,((l,c)=>Pk(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Tl extends Oc{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ni extends Oc{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function pw(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Fy(n,e,t){const s=new Map;st(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,f=e.data.field(l.field);s.set(l.field,Rk(c,f,t[o]))}return s}function jy(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,Ak(l,c,e))}return s}class mw extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Dk extends Oc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&Nk(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=sl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=sl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=ow();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let f=this.applyToLocalView(c,l.mutatedFields);f=t.has(o.key)?null:f;const p=fw(c,f);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Ue.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Je())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((t,s)=>My(t,s)))&&zo(this.baseMutations,e.baseMutations,((t,s)=>My(t,s)))}}class Of{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){st(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return Tk})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new Of(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lk{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vt,Ze;function Mk(n){switch(n){case X.OK:return Me(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Me(15467,{code:n})}}function gw(n){if(n===void 0)return cs("GRPC error has no .code"),X.UNKNOWN;switch(n){case Vt.OK:return X.OK;case Vt.CANCELLED:return X.CANCELLED;case Vt.UNKNOWN:return X.UNKNOWN;case Vt.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Vt.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Vt.INTERNAL:return X.INTERNAL;case Vt.UNAVAILABLE:return X.UNAVAILABLE;case Vt.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Vt.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Vt.NOT_FOUND:return X.NOT_FOUND;case Vt.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Vt.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Vt.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Vt.ABORTED:return X.ABORTED;case Vt.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Vt.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Vt.DATA_LOSS:return X.DATA_LOSS;default:return Me(39323,{code:n})}}(Ze=Vt||(Vt={}))[Ze.OK=0]="OK",Ze[Ze.CANCELLED=1]="CANCELLED",Ze[Ze.UNKNOWN=2]="UNKNOWN",Ze[Ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ze[Ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ze[Ze.NOT_FOUND=5]="NOT_FOUND",Ze[Ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ze[Ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ze[Ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ze[Ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ze[Ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ze[Ze.ABORTED=10]="ABORTED",Ze[Ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ze[Ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ze[Ze.INTERNAL=13]="INTERNAL",Ze[Ze.UNAVAILABLE=14]="UNAVAILABLE",Ze[Ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new Hs([4294967295,4294967295],0);function Uy(n){const e=Fk().encode(n),t=new Pv;return t.update(e),new Uint8Array(t.digest())}function zy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Hs([t,s],0),new Hs([o,l],0)]}class Lf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Ja(`Invalid padding: ${t}`);if(s<0)throw new Ja(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Ja(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Ja(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Hs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Hs.fromNumber(s)));return o.compare(jk)===1&&(o=new Hs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Uy(e),[s,o]=zy(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Lf(l,o,t);return s.forEach((f=>c.insert(f))),c}insert(e){if(this.ge===0)return;const t=Uy(e),[s,o]=zy(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.be(c)}}be(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Ja extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Il.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Lc(Ue.min(),o,new It(Qe),hs(),Je())}}class Il{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Il(s,t,Je(),Je(),Je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(e,t,s,o){this.Se=e,this.removedTargetIds=t,this.key=s,this.De=o}}class yw{constructor(e,t){this.targetId=e,this.Ce=t}}class _w{constructor(e,t,s=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class By{constructor(){this.ve=0,this.Fe=$y(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),t=Je(),s=Je();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Me(38017,{changeType:l})}})),new Il(this.Me,this.xe,e,t,s)}Ke(){this.Oe=!1,this.Fe=$y()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,st(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Uk{constructor(e){this.Ge=e,this.ze=new Map,this.je=hs(),this.He=ju(),this.Je=ju(),this.Ze=new It(Qe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(Qd(l))if(s===0){const c=new xe(l.path);this.et(t,c,cn.newNoDocument(c,Ue.min()))}else st(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const f=this.ut(e),p=f?this.ct(f,e,c):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,f;try{c=Js(s).toUint8Array()}catch(p){if(p instanceof zv)return ji("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Lf(c,o,l)}catch(p){return ji(p instanceof Ja?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),f=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const f=this.ot(c);if(f){if(l.current&&Qd(f.target)){const p=new xe(f.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,cn.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.Ke())}}));let s=Je();this.Je.forEach(((l,c)=>{let f=!0;c.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new Lc(e,t,this.Ze,this.je,s);return this.je=hs(),this.He=ju(),this.Je=ju(),this.Ze=new It(Qe),o}Ye(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,s),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.qe(t,1):o.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new By,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new zt(Qe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new zt(Qe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||we("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new By),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function ju(){return new It(xe.comparator)}function $y(){return new It(xe.comparator)}const zk={asc:"ASCENDING",desc:"DESCENDING"},Bk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$k={and:"AND",or:"OR"};class Wk{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yd(n,e){return n.useProto3Json||Pc(e)?e:{value:e}}function mc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Hk(n,e){return mc(n,e.toTimestamp())}function Vr(n){return st(!!n,49232),Ue.fromTimestamp((function(t){const s=Qs(t);return new gt(s.seconds,s.nanos)})(n))}function Mf(n,e){return Xd(n,e).canonicalString()}function Xd(n,e){const t=(function(o){return new ht(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function ww(n){const e=ht.fromString(n);return st(Cw(e),10190,{key:e.toString()}),e}function Zd(n,e){return Mf(n.databaseId,e.path)}function kd(n,e){const t=ww(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new xe(Tw(t))}function Ew(n,e){return Mf(n.databaseId,e)}function qk(n){const e=ww(n);return e.length===4?ht.emptyPath():Tw(e)}function ef(n){return new ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Tw(n){return st(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Wy(n,e,t){return{name:Zd(n,e),fields:t.value.mapValue.fields}}function Gk(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Me(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(st(v===void 0||typeof v=="string",58123),Zt.fromBase64String(v||"")):(st(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Zt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,f=c&&(function(y){const v=y.code===void 0?X.UNKNOWN:gw(y.code);return new ye(v,y.message||"")})(c);t=new _w(s,o,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=kd(n,s.document.name),l=Vr(s.document.updateTime),c=s.document.createTime?Vr(s.document.createTime):Ue.min(),f=new In({mapValue:{fields:s.document.fields}}),p=cn.newFoundDocument(o,l,c,f),y=s.targetIds||[],v=s.removedTargetIds||[];t=new Yu(y,v,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=kd(n,s.document),l=s.readTime?Vr(s.readTime):Ue.min(),c=cn.newNoDocument(o,l),f=s.removedTargetIds||[];t=new Yu([],f,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=kd(n,s.document),l=s.removedTargetIds||[];t=new Yu([],l,o,null)}else{if(!("filter"in e))return Me(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new Lk(o,l),f=s.targetId;t=new yw(f,c)}}return t}function Kk(n,e){let t;if(e instanceof Tl)t={update:Wy(n,e.key,e.value)};else if(e instanceof mw)t={delete:Zd(n,e.key)};else if(e instanceof ni)t={update:Wy(n,e.key,e.data),updateMask:rA(e.fieldMask)};else{if(!(e instanceof Dk))return Me(16599,{dt:e.type});t={verify:Zd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const f=c.transform;if(f instanceof fc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Wo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Ho)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof pc)return{fieldPath:c.field.canonicalString(),increment:f.Ae};throw Me(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:Hk(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Me(27497)})(n,e.precondition)),t}function Qk(n,e){return n&&n.length>0?(st(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?Vr(o.updateTime):Vr(l);return c.isEqual(Ue.min())&&(c=Vr(l)),new xk(c,o.transformResults||[])})(t,e)))):[]}function Jk(n,e){return{documents:[Ew(n,e.path)]}}function Yk(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Ew(n,o);const l=(function(y){if(y.length!==0)return Sw(ar.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((v=>(function(E){return{field:xo(E.field),direction:eA(E.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const f=Yd(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function Xk(n){let e=qk(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){st(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const E=Iw(T);return E instanceof ar&&Yv(E)?E.getFilters():[E]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((E=>(function(j){return new fl(No(j.field),(function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(j.direction))})(E)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let E;return E=typeof T=="object"?T.value:T,Pc(E)?null:E})(t.limit));let p=null;t.startAt&&(p=(function(T){const E=!!T.before,b=T.values||[];return new hc(b,E)})(t.startAt));let y=null;return t.endAt&&(y=(function(T){const E=!T.before,b=T.values||[];return new hc(b,E)})(t.endAt)),mk(e,o,c,l,f,"F",p,y)}function Zk(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Iw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=No(t.unaryFilter.field);return Ot.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=No(t.unaryFilter.field);return Ot.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=No(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=No(t.unaryFilter.field);return Ot.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Ot.create(No(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ar.create(t.compositeFilter.filters.map((s=>Iw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(t.compositeFilter.op))})(n):Me(30097,{filter:n})}function eA(n){return zk[n]}function tA(n){return Bk[n]}function nA(n){return $k[n]}function xo(n){return{fieldPath:n.canonicalString()}}function No(n){return Xt.fromServerFormat(n.fieldPath)}function Sw(n){return n instanceof Ot?(function(t){if(t.op==="=="){if(Ny(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NAN"}};if(xy(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ny(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NAN"}};if(xy(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(t.field),op:tA(t.op),value:t.value}}})(n):n instanceof ar?(function(t){const s=t.getFilters().map((o=>Sw(o)));return s.length===1?s[0]:{compositeFilter:{op:nA(t.op),filters:s}}})(n):Me(54877,{filter:n})}function rA(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Cw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function kw(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t,s,o,l=Ue.min(),c=Ue.min(),f=Zt.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.yt=e}}function iA(n){const e=Xk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.Sn=new aA}addToCollectionParentIndex(e,t){return this.Sn.add(t),Z.resolve()}getCollectionParents(e,t){return Z.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Z.resolve()}deleteFieldIndex(e,t){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,t){return Z.resolve()}getDocumentsMatchingTarget(e,t){return Z.resolve(null)}getIndexType(e,t){return Z.resolve(0)}getFieldIndexes(e,t){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,t){return Z.resolve(Ks.min())}getMinOffsetFromCollectionGroup(e,t){return Z.resolve(Ks.min())}updateCollectionGroup(e,t,s){return Z.resolve()}updateIndexEntries(e,t){return Z.resolve()}}class aA{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new zt(ht.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new zt(ht.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Aw=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(Aw,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new qo(0)}static ar(){return new qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy="LruGarbageCollector",lA=1048576;function Gy([n,e],[t,s]){const o=Qe(n,t);return o===0?Qe(e,s):o}class uA{constructor(e){this.Pr=e,this.buffer=new zt(Gy),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Gy(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class cA{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){we(qy,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ta(t)?we(qy,"Ignoring IndexedDB error during garbage collection: ",t):await ea(t)}await this.Ar(3e5)}))}}class hA{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return Z.resolve(Rc.ce);const s=new uA(t);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.Vr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(we("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Hy)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(we("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hy):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let s,o,l,c,f,p,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(we("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,c=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,f=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(y=Date.now(),Ro()<=Ke.DEBUG&&we("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${o} in `+(f-c)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${T} documents in `+(y-p)+`ms
Total Duration: ${y-v}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:T}))))}}function dA(n,e){return new hA(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(){this.changes=new $i((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?Z.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&sl(s.mutation,o,On.empty(),gt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Je()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Je()){const o=Di();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=Qa();return l.forEach(((f,p)=>{c=c.insert(f,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Di();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Je())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,f)=>{t.set(c,f)}))}))}computeViews(e,t,s,o){let l=hs();const c=rl(),f=(function(){return rl()})();return t.forEach(((p,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof ni)?l=l.insert(y.key,y):v!==void 0?(c.set(y.key,v.mutation.getFieldMask()),sl(v.mutation,y,v.mutation.getFieldMask(),gt.now())):c.set(y.key,On.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,v)=>c.set(y,v))),t.forEach(((y,v)=>f.set(y,new pA(v,c.get(y)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=rl();let o=new It(((c,f)=>c-f)),l=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const f of c)f.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let v=s.get(p)||On.empty();v=f.applyToLocalView(y,v),s.set(p,v);const T=(o.get(f.batchId)||Je()).add(p);o=o.insert(f.batchId,T)}))})).next((()=>{const c=[],f=o.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),y=p.key,v=p.value,T=ow();v.forEach((E=>{if(!l.has(E)){const b=fw(t.get(E),s.get(E));b!==null&&T.set(E,b),l=l.add(E)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,T))}return Z.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return gk(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):Z.resolve(Di());let f=ul,p=l;return c.next((y=>Z.forEach(y,((v,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(v)?Z.resolve():this.remoteDocumentCache.getEntry(e,v).next((E=>{p=p.insert(v,E)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,Je()))).next((v=>({batchId:f,changes:iw(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new xe(t)).next((s=>{let o=Qa();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=Qa();return this.indexManager.getCollectionParents(e,l).next((f=>Z.forEach(f,(p=>{const y=(function(T,E){return new na(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((T,E)=>{c=c.insert(T,E)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,y)=>{const v=y.getKey();c.get(v)===null&&(c=c.insert(v,cn.newInvalidDocument(v)))}));let f=Qa();return c.forEach(((p,y)=>{const v=l.get(p);v!==void 0&&sl(v.mutation,y,On.empty(),gt.now()),Dc(t,y)&&(f=f.insert(p,y))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Z.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Vr(o.createTime)}})(t)),Z.resolve()}getNamedQuery(e,t){return Z.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(o){return{name:o.name,query:iA(o.bundledQuery),readTime:Vr(o.readTime)}})(t)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.overlays=new It(xe.comparator),this.Lr=new Map}getOverlay(e,t){return Z.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Di();return Z.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.bt(e,t,l)})),Z.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.Lr.delete(s)),Z.resolve()}getOverlaysForCollection(e,t,s){const o=Di(),l=t.length+1,c=new xe(t.child("")),f=this.overlays.getIteratorFrom(c);for(;f.hasNext();){const p=f.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return Z.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new It(((y,v)=>y-v));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=Di(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const f=Di(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,v)=>f.set(y,v))),!(f.size()>=o)););return Z.resolve(f)}bt(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new Ok(t,s));let l=this.Lr.get(t);l===void 0&&(l=Je(),this.Lr.set(t,l)),this.Lr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{constructor(){this.kr=new zt(Ht.Kr),this.qr=new zt(Ht.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const s=new Ht(e,t);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Wr(new Ht(e,t))}Qr(e,t){e.forEach((s=>this.removeReference(s,t)))}Gr(e){const t=new xe(new ht([])),s=new Ht(t,e),o=new Ht(t,e+1),l=[];return this.qr.forEachInRange([s,o],(c=>{this.Wr(c),l.push(c.key)})),l}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new xe(new ht([])),s=new Ht(t,e),o=new Ht(t,e+1);let l=Je();return this.qr.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ht(e,0),s=this.kr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ht{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return xe.comparator(e.key,t.key)||Qe(e.Hr,t.Hr)}static Ur(e,t){return Qe(e.Hr,t.Hr)||xe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new zt(Ht.Kr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new Vk(l,t,s,o);this.mutationQueue.push(c);for(const f of o)this.Jr=this.Jr.add(new Ht(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return Z.resolve(c)}lookupMutationBatch(e,t){return Z.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.Xr(s),l=o<0?0:o;return Z.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Pf:this.Yn-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ht(t,0),o=new Ht(t,Number.POSITIVE_INFINITY),l=[];return this.Jr.forEachInRange([s,o],(c=>{const f=this.Zr(c.Hr);l.push(f)})),Z.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new zt(Qe);return t.forEach((o=>{const l=new Ht(o,0),c=new Ht(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([l,c],(f=>{s=s.add(f.Hr)}))})),Z.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;xe.isDocumentKey(l)||(l=l.child(""));const c=new Ht(new xe(l),0);let f=new zt(Qe);return this.Jr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(f=f.add(p.Hr)),!0)}),c),Z.resolve(this.Yr(f))}Yr(e){const t=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){st(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return Z.forEach(t.mutations,(o=>{const l=new Ht(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,t){const s=new Ht(t,0),o=this.Jr.firstAfterOrEqual(s);return Z.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.ti=e,this.docs=(function(){return new It(xe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ti(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return Z.resolve(s?s.document.mutableCopy():cn.newInvalidDocument(t))}getEntries(e,t){let s=hs();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():cn.newInvalidDocument(o))})),Z.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=hs();const c=t.path,f=new xe(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:y,value:{document:v}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||q1(H1(v),s)<=0||(o.has(v.key)||Dc(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return Z.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Me(9500)}ni(e,t){return Z.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new EA(this)}getSize(e){return Z.resolve(this.size)}}class EA extends fA{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),Z.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.persistence=e,this.ri=new $i((t=>bf(t)),Df),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.ii=0,this.si=new Ff,this.targetCount=0,this.oi=qo._r()}forEachTarget(e,t){return this.ri.forEach(((s,o)=>t(o))),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.ii&&(this.ii=t),Z.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new qo(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Z.resolve()}updateTargetData(e,t){return this.lr(t),Z.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.ri.forEach(((c,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.ri.delete(c),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),o++)})),Z.waitFor(l).next((()=>o))}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,t){const s=this.ri.get(t)||null;return Z.resolve(s)}addMatchingKeys(e,t,s){return this.si.$r(t,s),Z.resolve()}removeMatchingKeys(e,t,s){this.si.Qr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),Z.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Z.resolve()}getMatchingKeysForTargetId(e,t){const s=this.si.jr(t);return Z.resolve(s)}containsKey(e,t){return Z.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rw{constructor(e,t){this._i={},this.overlays={},this.ai=new Rc(0),this.ui=!1,this.ui=!0,this.ci=new _A,this.referenceDelegate=e(this),this.li=new TA(this),this.indexManager=new oA,this.remoteDocumentCache=(function(o){return new wA(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new sA(t),this.Pi=new gA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this._i[e.toKey()];return s||(s=new vA(t,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,s){we("MemoryPersistence","Starting transaction:",e);const o=new IA(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((l=>this.referenceDelegate.Ii(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ei(e,t){return Z.or(Object.values(this._i).map((s=>()=>s.containsKey(e,t))))}}class IA extends K1{constructor(e){super(),this.currentSequenceNumber=e}}class jf{constructor(e){this.persistence=e,this.Ri=new Ff,this.Ai=null}static Vi(e){return new jf(e)}get di(){if(this.Ai)return this.Ai;throw Me(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.di.delete(s.toString()),Z.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.di.add(s.toString()),Z.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Z.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.di.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.di,(s=>{const o=xe.fromPath(s);return this.mi(e,o).next((l=>{l||t.removeEntry(o,Ue.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((s=>{s?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Z.or([()=>Z.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class gc{constructor(e,t){this.persistence=e,this.fi=new $i((s=>Y1(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=dA(this,t)}static Vi(e,t){return new gc(e,t)}Ti(){}Ii(e){return Z.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}pr(e){let t=0;return this.mr(e,(s=>{t++})).next((()=>t))}mr(e,t){return Z.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((l=>l?Z.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ni(e,(c=>this.wr(e,c,t).next((f=>{f||(s++,l.removeEntry(c,Ue.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),Z.resolve()}removeReference(e,t,s){return this.fi.set(s,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Z.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ku(e.data.value)),t}wr(e,t,s){return Z.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.fi.get(t);return Z.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Ts=s,this.Is=o}static Es(e,t){let s=Je(),o=Je();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Uf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return cI()?8:Q1(hn())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.gs(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ps(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new SA;return this.ys(e,t,c).next((f=>{if(l.result=f,this.As)return this.ws(e,t,c,f.size)}))})).next((()=>l.result))}ws(e,t,s,o){return s.documentReadCount<this.Vs?(Ro()<=Ke.DEBUG&&we("QueryEngine","SDK will not create cache indexes for query:",Po(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(Ro()<=Ke.DEBUG&&we("QueryEngine","Query:",Po(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Ro()<=Ke.DEBUG&&we("QueryEngine","The SDK decides to create cache indexes for query:",Po(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,br(t))):Z.resolve())}gs(e,t){if(Oy(t))return Z.resolve(null);let s=br(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=dc(t,null,"F"),s=br(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=Je(...l);return this.fs.getDocuments(e,c).next((f=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.bs(t,f);return this.Ss(t,y,c,p.readTime)?this.gs(e,dc(t,null,"F")):this.Ds(e,y,t,p)}))))})))))}ps(e,t,s,o){return Oy(t)||o.isEqual(Ue.min())?Z.resolve(null):this.fs.getDocuments(e,s).next((l=>{const c=this.bs(t,l);return this.Ss(t,c,s,o)?Z.resolve(null):(Ro()<=Ke.DEBUG&&we("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Po(t)),this.Ds(e,c,t,W1(o,ul)).next((f=>f)))}))}bs(e,t){let s=new zt(rw(e));return t.forEach(((o,l)=>{Dc(e,l)&&(s=s.add(l))})),s}Ss(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}ys(e,t,s){return Ro()<=Ke.DEBUG&&we("QueryEngine","Using full collection scan to execute query:",Po(t)),this.fs.getDocumentsMatchingQuery(e,t,Ks.min(),s)}Ds(e,t,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="LocalStore",kA=3e8;class AA{constructor(e,t,s,o){this.persistence=e,this.Cs=t,this.serializer=o,this.vs=new It(Qe),this.Fs=new $i((l=>bf(l)),Df),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function RA(n,e,t,s){return new AA(n,e,t,s)}async function Pw(n,e){const t=We(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Os(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],f=[];let p=Je();for(const y of o){c.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}for(const y of l){f.push(y.batchId);for(const v of y.mutations)p=p.add(v.key)}return t.localDocuments.getDocuments(s,p).next((y=>({Ns:y,removedBatchIds:c,addedBatchIds:f})))}))}))}function PA(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.xs.newChangeBuffer({trackRemovals:!0});return(function(f,p,y,v){const T=y.batch,E=T.keys();let b=Z.resolve();return E.forEach((j=>{b=b.next((()=>v.getEntry(p,j))).next((U=>{const M=y.docVersions.get(j);st(M!==null,48541),U.version.compareTo(M)<0&&(T.applyToRemoteDocument(U,y),U.isValidDocument()&&(U.setReadTime(y.commitVersion),v.addEntry(U)))}))})),b.next((()=>f.mutationQueue.removeMutationBatch(p,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let p=Je();for(let y=0;y<f.mutationResults.length;++y)f.mutationResults[y].transformResults.length>0&&(p=p.add(f.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function xw(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function xA(n,e){const t=We(n),s=e.snapshotVersion;let o=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.xs.newChangeBuffer({trackRemovals:!0});o=t.vs;const f=[];e.targetChanges.forEach(((v,T)=>{const E=o.get(T);if(!E)return;f.push(t.li.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.li.addMatchingKeys(l,v.addedDocuments,T))));let b=E.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?b=b.withResumeToken(Zt.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):v.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(v.resumeToken,s)),o=o.insert(T,b),(function(U,M,Y){return U.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=kA?!0:Y.addedDocuments.size+Y.modifiedDocuments.size+Y.removedDocuments.size>0})(E,b,v)&&f.push(t.li.updateTargetData(l,b))}));let p=hs(),y=Je();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),f.push(NA(l,c,e.documentUpdates).next((v=>{p=v.Bs,y=v.Ls}))),!s.isEqual(Ue.min())){const v=t.li.getLastRemoteSnapshotVersion(l).next((T=>t.li.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(v)}return Z.waitFor(f).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.vs=o,l)))}function NA(n,e,t){let s=Je(),o=Je();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=hs();return t.forEach(((f,p)=>{const y=l.get(f);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(f)),p.isNoDocument()&&p.version.isEqual(Ue.min())?(e.removeEntry(f,p.readTime),c=c.insert(f,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(f,p)):we(zf,"Ignoring outdated watch update for ",f,". Current version:",y.version," Watch version:",p.version)})),{Bs:c,Ls:o}}))}function bA(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Pf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function DA(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.li.getTargetData(s,e).next((l=>l?(o=l,Z.resolve(o)):t.li.allocateTargetId(s).next((c=>(o=new Us(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.vs=t.vs.insert(s.targetId,s),t.Fs.set(e,s.targetId)),s}))}async function tf(n,e,t){const s=We(n),o=s.vs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!ta(c))throw c;we(zf,`Failed to update sequence numbers for target ${e}: ${c}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function Ky(n,e,t){const s=We(n);let o=Ue.min(),l=Je();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,v){const T=We(p),E=T.Fs.get(v);return E!==void 0?Z.resolve(T.vs.get(E)):T.li.getTargetData(y,v)})(s,c,br(e)).next((f=>{if(f)return o=f.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(c,f.targetId).next((p=>{l=p}))})).next((()=>s.Cs.getDocumentsMatchingQuery(c,e,t?o:Ue.min(),t?l:Je()))).next((f=>(VA(s,vk(e),f),{documents:f,ks:l})))))}function VA(n,e,t){let s=n.Ms.get(e)||Ue.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Ms.set(e,s)}class Qy{constructor(){this.activeTargetIds=Ck()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class OA{constructor(){this.vo=new Qy,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,s){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Qy,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jy="ConnectivityMonitor";class Yy{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){we(Jy,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){we(Jy,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uu=null;function nf(){return Uu===null?Uu=(function(){return 268435456+Math.round(2147483648*Math.random())})():Uu++,"0x"+Uu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="RestConnection",MA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class FA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===uc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,t,s,o,l){const c=nf(),f=this.Qo(e,t.toUriEncodedString());we(Ad,`Sending RPC '${e}' ${c}:`,f,s);const p={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(p,o,l);const{host:y}=new URL(f),v=Jo(y);return this.zo(e,f,p,s,v).then((T=>(we(Ad,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw ji(Ad,`RPC '${e}' ${c} failed with error: `,T,"url: ",f,"request:",s),T}))}jo(e,t,s,o,l,c){return this.Wo(e,t,s,o,l)}Go(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Zo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}Qo(e,t){const s=MA[e];let o=`${this.qo}/v1/${t}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ln="WebChannelConnection",qa=(n,e,t)=>{n.listen(e,(s=>{try{t(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class Lo extends FA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Lo.c_){const e=Dv();qa(e,bv.STAT_EVENT,(t=>{t.stat===Wd.PROXY?we(ln,"STAT_EVENT: detected buffering proxy"):t.stat===Wd.NOPROXY&&we(ln,"STAT_EVENT: detected no buffering proxy")})),Lo.c_=!0}}zo(e,t,s,o,l){const c=nf();return new Promise(((f,p)=>{const y=new xv;y.setWithCredentials(!0),y.listenOnce(Nv.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Gu.NO_ERROR:const T=y.getResponseJson();we(ln,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),f(T);break;case Gu.TIMEOUT:we(ln,`RPC '${e}' ${c} timed out`),p(new ye(X.DEADLINE_EXCEEDED,"Request time out"));break;case Gu.HTTP_ERROR:const E=y.getStatus();if(we(ln,`RPC '${e}' ${c} failed with status:`,E,"response text:",y.getResponseText()),E>0){let b=y.getResponseJson();Array.isArray(b)&&(b=b[0]);const j=b==null?void 0:b.error;if(j&&j.status&&j.message){const U=(function(Y){const se=Y.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(se)>=0?se:X.UNKNOWN})(j.status);p(new ye(U,j.message))}else p(new ye(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new ye(X.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{we(ln,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(o);we(ln,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=nf(),l=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=this.createWebChannelTransport(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(f.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(f.useFetchStreams=!0),this.Go(f.initMessageHeaders,t,s),f.encodeInitMessageHeaders=!0;const y=l.join("");we(ln,`Creating RPC '${e}' stream ${o}: ${y}`,f);const v=c.createWebChannel(y,f);this.I_(v);let T=!1,E=!1;const b=new jA({Ho:j=>{E?we(ln,`Not sending because RPC '${e}' stream ${o} is closed:`,j):(T||(we(ln,`Opening RPC '${e}' stream ${o} transport.`),v.open(),T=!0),we(ln,`RPC '${e}' stream ${o} sending:`,j),v.send(j))},Jo:()=>v.close()});return qa(v,Ka.EventType.OPEN,(()=>{E||(we(ln,`RPC '${e}' stream ${o} transport opened.`),b.i_())})),qa(v,Ka.EventType.CLOSE,(()=>{E||(E=!0,we(ln,`RPC '${e}' stream ${o} transport closed`),b.o_(),this.E_(v))})),qa(v,Ka.EventType.ERROR,(j=>{E||(E=!0,ji(ln,`RPC '${e}' stream ${o} transport errored. Name:`,j.name,"Message:",j.message),b.o_(new ye(X.UNAVAILABLE,"The operation could not be completed")))})),qa(v,Ka.EventType.MESSAGE,(j=>{var U;if(!E){const M=j.data[0];st(!!M,16349);const Y=M,se=(Y==null?void 0:Y.error)||((U=Y[0])==null?void 0:U.error);if(se){we(ln,`RPC '${e}' stream ${o} received error:`,se);const ue=se.status;let oe=(function(x){const I=Vt[x];if(I!==void 0)return gw(I)})(ue),ne=se.message;ue==="NOT_FOUND"&&ne.includes("database")&&ne.includes("does not exist")&&ne.includes(this.databaseId.database)&&ji(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),oe===void 0&&(oe=X.INTERNAL,ne="Unknown error status: "+ue+" with message "+se.message),E=!0,b.o_(new ye(oe,ne)),v.close()}else we(ln,`RPC '${e}' stream ${o} received:`,M),b.__(M)}})),Lo.u_(),setTimeout((()=>{b.s_()}),0),b}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,s){super.Go(e,t,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Vv()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(n){return new Lo(n)}function Rd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mc(n){return new Wk(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Lo.c_=!1;class Nw{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Ci=e,this.timerId=t,this.R_=s,this.A_=o,this.V_=l,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&we("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="PersistentStream";class bw{constructor(e,t,s,o,l,c,f,p){this.Ci=e,this.b_=s,this.S_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Nw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(cs(t.toString()),cs("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ye(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return we(Xy,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(we(Xy,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class zA extends bw{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=Gk(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ue.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ue.min():c.readTime?Vr(c.readTime):Ue.min()})(e);return this.listener.J_(t,s)}Z_(e){const t={};t.database=ef(this.serializer),t.addTarget=(function(l,c){let f;const p=c.target;if(f=Qd(p)?{documents:Jk(l,p)}:{query:Yk(l,p).ft},f.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){f.resumeToken=vw(l,c.resumeToken);const y=Yd(l,c.expectedCount);y!==null&&(f.expectedCount=y)}else if(c.snapshotVersion.compareTo(Ue.min())>0){f.readTime=mc(l,c.snapshotVersion.toTimestamp());const y=Yd(l,c.expectedCount);y!==null&&(f.expectedCount=y)}return f})(this.serializer,e);const s=Zk(this.serializer,e);s&&(t.labels=s),this.K_(t)}X_(e){const t={};t.database=ef(this.serializer),t.removeTarget=e,this.K_(t)}}class BA extends bw{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return st(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,st(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){st(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=Qk(e.writeResults,e.commitTime),s=Vr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=ef(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>Kk(this.serializer,s)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{}class WA extends $A{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(X.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Wo(e,Xd(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(X.UNKNOWN,l.toString())}))}jo(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.jo(e,Xd(t,s),o,c,f,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function HA(n,e,t,s){return new WA(n,e,t,s)}class qA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(cs(t),this.aa=!1):we("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui="RemoteStore";class GA{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=l,this.Aa.Mo((c=>{s.enqueueAndForget((async()=>{Wi(this)&&(we(Ui,"Restarting streams for network reachability change."),await(async function(p){const y=We(p);y.Ea.add(4),await Sl(y),y.Va.set("Unknown"),y.Ea.delete(4),await Fc(y)})(this))}))})),this.Va=new qA(s,o)}}async function Fc(n){if(Wi(n))for(const e of n.Ra)await e(!0)}async function Sl(n){for(const e of n.Ra)await e(!1)}function Dw(n,e){const t=We(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Hf(t)?Wf(t):ra(t).O_()&&$f(t,e))}function Bf(n,e){const t=We(n),s=ra(t);t.Ia.delete(e),s.O_()&&Vw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Wi(t)&&t.Va.set("Unknown"))}function $f(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ra(n).Z_(e)}function Vw(n,e){n.da.$e(e),ra(n).X_(e)}function Wf(n){n.da=new Uk({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ra(n).start(),n.Va.ua()}function Hf(n){return Wi(n)&&!ra(n).x_()&&n.Ia.size>0}function Wi(n){return We(n).Ea.size===0}function Ow(n){n.da=void 0}async function KA(n){n.Va.set("Online")}async function QA(n){n.Ia.forEach(((e,t)=>{$f(n,e)}))}async function JA(n,e){Ow(n),Hf(n)?(n.Va.ha(e),Wf(n)):n.Va.set("Unknown")}async function YA(n,e,t){if(n.Va.set("Online"),e instanceof _w&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const f of l.targetIds)o.Ia.has(f)&&(await o.remoteSyncer.rejectListen(f,c),o.Ia.delete(f),o.da.removeTarget(f))})(n,e)}catch(s){we(Ui,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await yc(n,s)}else if(e instanceof Yu?n.da.Xe(e):e instanceof yw?n.da.st(e):n.da.tt(e),!t.isEqual(Ue.min()))try{const s=await xw(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const f=l.da.Tt(c);return f.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(p.resumeToken,c))}})),f.targetMismatches.forEach(((p,y)=>{const v=l.Ia.get(p);if(!v)return;l.Ia.set(p,v.withResumeToken(Zt.EMPTY_BYTE_STRING,v.snapshotVersion)),Vw(l,p);const T=new Us(v.target,p,y,v.sequenceNumber);$f(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){we(Ui,"Failed to raise snapshot:",s),await yc(n,s)}}async function yc(n,e,t){if(!ta(e))throw e;n.Ea.add(1),await Sl(n),n.Va.set("Offline"),t||(t=()=>xw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{we(Ui,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Fc(n)}))}function Lw(n,e){return e().catch((t=>yc(n,t,e)))}async function jc(n){const e=We(n),t=Xs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Pf;for(;XA(e);)try{const o=await bA(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,ZA(e,o)}catch(o){await yc(e,o)}Mw(e)&&Fw(e)}function XA(n){return Wi(n)&&n.Ta.length<10}function ZA(n,e){n.Ta.push(e);const t=Xs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function Mw(n){return Wi(n)&&!Xs(n).x_()&&n.Ta.length>0}function Fw(n){Xs(n).start()}async function eR(n){Xs(n).ra()}async function tR(n){const e=Xs(n);for(const t of n.Ta)e.ea(t.mutations)}async function nR(n,e,t){const s=n.Ta.shift(),o=Of.from(s,e,t);await Lw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await jc(n)}async function rR(n,e){e&&Xs(n).Y_&&await(async function(s,o){if((function(c){return Mk(c)&&c!==X.ABORTED})(o.code)){const l=s.Ta.shift();Xs(s).B_(),await Lw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await jc(s)}})(n,e),Mw(n)&&Fw(n)}async function Zy(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),we(Ui,"RemoteStore received new credentials");const s=Wi(t);t.Ea.add(3),await Sl(t),s&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Fc(t)}async function sR(n,e){const t=We(n);e?(t.Ea.delete(2),await Fc(t)):e||(t.Ea.add(2),await Sl(t),t.Va.set("Unknown"))}function ra(n){return n.ma||(n.ma=(function(t,s,o){const l=We(t);return l.sa(),new zA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:KA.bind(null,n),Yo:QA.bind(null,n),t_:JA.bind(null,n),J_:YA.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),Hf(n)?Wf(n):n.Va.set("Unknown")):(await n.ma.stop(),Ow(n))}))),n.ma}function Xs(n){return n.fa||(n.fa=(function(t,s,o){const l=We(t);return l.sa(),new BA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:eR.bind(null,n),t_:rR.bind(null,n),ta:tR.bind(null,n),na:nR.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await jc(n)):(await n.fa.stop(),n.Ta.length>0&&(we(Ui,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,f=new qf(e,t,c,o,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gf(n,e){if(cs("AsyncQueue",`${e}: ${n}`),ta(n))return new ye(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{static emptySet(e){return new Mo(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||xe.comparator(t.key,s.key):(t,s)=>xe.comparator(t.key,s.key),this.keyedMap=Qa(),this.sortedSet=new It(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Mo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.ga=new It(xe.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Me(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Go{constructor(e,t,s,o,l,c,f,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((f=>{c.push({type:0,doc:f})})),new Go(e,t,Mo.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class oR{constructor(){this.queries=t_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=We(t),l=o.queries;o.queries=t_(),l.forEach(((c,f)=>{for(const p of f.ba)p.onError(s)}))})(this,new ye(X.ABORTED,"Firestore shutting down"))}}function t_(){return new $i((n=>nw(n)),bc)}async function jw(n,e){const t=We(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.Sa()&&e.Da()&&(s=2):(l=new iR,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const f=Gf(c,`Initialization of query '${Po(e.query)}' failed`);return void e.onError(f)}t.queries.set(o,l),l.ba.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Kf(t)}async function Uw(n,e){const t=We(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.ba.indexOf(e);c>=0&&(l.ba.splice(c,1),l.ba.length===0?o=e.Da()?0:1:!l.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function aR(n,e){const t=We(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const f of c.ba)f.Fa(o)&&(s=!0);c.wa=o}}s&&Kf(t)}function lR(n,e,t){const s=We(n),o=s.queries.get(e);if(o)for(const l of o.ba)l.onError(t);s.queries.delete(e)}function Kf(n){n.Ca.forEach((e=>{e.next()}))}var rf,n_;(n_=rf||(rf={})).Ma="default",n_.Cache="cache";class zw{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Go(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Go.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==rf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.key=e}}class $w{constructor(e){this.key=e}}class uR{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Je(),this.mutatedKeys=Je(),this.eu=rw(e),this.tu=new Mo(this.eu)}get nu(){return this.Za}ru(e,t){const s=t?t.iu:new e_,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,f=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,T)=>{const E=o.get(v),b=Dc(this.query,T)?T:null,j=!!E&&this.mutatedKeys.has(E.key),U=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let M=!1;E&&b?E.data.isEqual(b.data)?j!==U&&(s.track({type:3,doc:b}),M=!0):this.su(E,b)||(s.track({type:2,doc:b}),M=!0,(p&&this.eu(b,p)>0||y&&this.eu(b,y)<0)&&(f=!0)):!E&&b?(s.track({type:0,doc:b}),M=!0):E&&!b&&(s.track({type:1,doc:E}),M=!0,(p||y)&&(f=!0)),M&&(b?(c=c.add(b),l=U?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:c,iu:s,Ss:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,T)=>(function(b,j){const U=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Vt:M})}};return U(b)-U(j)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(s),o=o??!1;const f=t&&!o?this._u():[],p=this.Ya.size===0&&this.current&&!o?1:0,y=p!==this.Xa;return this.Xa=p,c.length!==0||y?{snapshot:new Go(this.query,e.tu,l,c,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new e_,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Je(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const t=[];return e.forEach((s=>{this.Ya.has(s)||t.push(new $w(s))})),this.Ya.forEach((s=>{e.has(s)||t.push(new Bw(s))})),t}cu(e){this.Za=e.ks,this.Ya=Je();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Go.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Qf="SyncEngine";class cR{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class hR{constructor(e){this.key=e,this.hu=!1}}class dR{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new $i((f=>nw(f)),bc),this.Iu=new Map,this.Eu=new Set,this.Ru=new It(xe.comparator),this.Au=new Map,this.Vu=new Ff,this.du={},this.mu=new Map,this.fu=qo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function fR(n,e,t=!0){const s=Qw(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Ww(s,e,t,!0),o}async function pR(n,e){const t=Qw(n);await Ww(t,e,!0,!1)}async function Ww(n,e,t,s){const o=await DA(n.localStore,br(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await mR(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&Dw(n.remoteStore,o),f}async function mR(n,e,t,s,o){n.pu=(T,E,b)=>(async function(U,M,Y,se){let ue=M.view.ru(Y);ue.Ss&&(ue=await Ky(U.localStore,M.query,!1).then((({documents:x})=>M.view.ru(x,ue))));const oe=se&&se.targetChanges.get(M.targetId),ne=se&&se.targetMismatches.get(M.targetId)!=null,Ee=M.view.applyChanges(ue,U.isPrimaryClient,oe,ne);return s_(U,M.targetId,Ee.au),Ee.snapshot})(n,T,E,b);const l=await Ky(n.localStore,e,!0),c=new uR(e,l.ks),f=c.ru(l.documents),p=Il.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),y=c.applyChanges(f,n.isPrimaryClient,p);s_(n,t,y.au);const v=new cR(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function gR(n,e,t){const s=We(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!bc(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await tf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Bf(s.remoteStore,o.targetId),sf(s,o.targetId)})).catch(ea)):(sf(s,o.targetId),await tf(s.localStore,o.targetId,!0))}async function yR(n,e){const t=We(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Bf(t.remoteStore,s.targetId))}async function _R(n,e,t){const s=CR(n);try{const o=await(function(c,f){const p=We(c),y=gt.now(),v=f.reduce(((b,j)=>b.add(j.key)),Je());let T,E;return p.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let j=hs(),U=Je();return p.xs.getEntries(b,v).next((M=>{j=M,j.forEach(((Y,se)=>{se.isValidDocument()||(U=U.add(Y))}))})).next((()=>p.localDocuments.getOverlayedDocuments(b,j))).next((M=>{T=M;const Y=[];for(const se of f){const ue=bk(se,T.get(se.key).overlayedDocument);ue!=null&&Y.push(new ni(se.key,ue,Kv(ue.value.mapValue),Dr.exists(!0)))}return p.mutationQueue.addMutationBatch(b,y,Y,f)})).next((M=>{E=M;const Y=M.applyToLocalDocumentSet(T,U);return p.documentOverlayCache.saveOverlays(b,M.batchId,Y)}))})).then((()=>({batchId:E.batchId,changes:iw(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,f,p){let y=c.du[c.currentUser.toKey()];y||(y=new It(Qe)),y=y.insert(f,p),c.du[c.currentUser.toKey()]=y})(s,o.batchId,t),await Cl(s,o.changes),await jc(s.remoteStore)}catch(o){const l=Gf(o,"Failed to persist write");t.reject(l)}}async function Hw(n,e){const t=We(n);try{const s=await xA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(st(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?st(c.hu,14607):o.removedDocuments.size>0&&(st(c.hu,42227),c.hu=!1))})),await Cl(t,s,e)}catch(s){await ea(s)}}function r_(n,e,t){const s=We(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const f=c.view.va(e);f.snapshot&&o.push(f.snapshot)})),(function(c,f){const p=We(c);p.onlineState=f;let y=!1;p.queries.forEach(((v,T)=>{for(const E of T.ba)E.va(f)&&(y=!0)})),y&&Kf(p)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function vR(n,e,t){const s=We(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new It(xe.comparator);c=c.insert(l,cn.newNoDocument(l,Ue.min()));const f=Je().add(l),p=new Lc(Ue.min(),new Map,new It(Qe),c,f);await Hw(s,p),s.Ru=s.Ru.remove(l),s.Au.delete(e),Jf(s)}else await tf(s.localStore,e,!1).then((()=>sf(s,e,t))).catch(ea)}async function wR(n,e){const t=We(n),s=e.batch.batchId;try{const o=await PA(t.localStore,e);Gw(t,s,null),qw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Cl(t,o)}catch(o){await ea(o)}}async function ER(n,e,t){const s=We(n);try{const o=await(function(c,f){const p=We(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return p.mutationQueue.lookupMutationBatch(y,f).next((T=>(st(T!==null,37113),v=T.keys(),p.mutationQueue.removeMutationBatch(y,T)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,v,f))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>p.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);Gw(s,e,t),qw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Cl(s,o)}catch(o){await ea(o)}}function qw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Gw(n,e,t){const s=We(n);let o=s.du[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function sf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((s=>{n.Vu.containsKey(s)||Kw(n,s)}))}function Kw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Bf(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),Jf(n))}function s_(n,e,t){for(const s of t)s instanceof Bw?(n.Vu.addReference(s.key,e),TR(n,s)):s instanceof $w?(we(Qf,"Document no longer in limbo: "+s.key),n.Vu.removeReference(s.key,e),n.Vu.containsKey(s.key)||Kw(n,s.key)):Me(19791,{wu:s})}function TR(n,e){const t=e.key,s=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(s)||(we(Qf,"New document in limbo: "+t),n.Eu.add(s),Jf(n))}function Jf(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new xe(ht.fromString(e)),s=n.fu.next();n.Au.set(s,new hR(t)),n.Ru=n.Ru.insert(t,s),Dw(n.remoteStore,new Us(br(Nc(t.path)),s,"TargetPurposeLimboResolution",Rc.ce))}}async function Cl(n,e,t){const s=We(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,p)=>{c.push(s.pu(p,e,t).then((y=>{var v;if((y||t)&&s.isPrimaryClient){const T=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(p.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(p.targetId,T?"current":"not-current")}if(y){o.push(y);const T=Uf.Es(p.targetId,y);l.push(T)}})))})),await Promise.all(c),s.Pu.J_(o),await(async function(p,y){const v=We(p);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Z.forEach(y,(E=>Z.forEach(E.Ts,(b=>v.persistence.referenceDelegate.addReference(T,E.targetId,b))).next((()=>Z.forEach(E.Is,(b=>v.persistence.referenceDelegate.removeReference(T,E.targetId,b)))))))))}catch(T){if(!ta(T))throw T;we(zf,"Failed to update sequence numbers: "+T)}for(const T of y){const E=T.targetId;if(!T.fromCache){const b=v.vs.get(E),j=b.snapshotVersion,U=b.withLastLimboFreeSnapshotVersion(j);v.vs=v.vs.insert(E,U)}}})(s.localStore,l))}async function IR(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){we(Qf,"User change. New user:",e.toKey());const s=await Pw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((f=>{f.forEach((p=>{p.reject(new ye(X.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Cl(t,s.Ns)}}function SR(n,e){const t=We(n),s=t.Au.get(e);if(s&&s.hu)return Je().add(s.key);{let o=Je();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const f=t.Tu.get(c);o=o.unionWith(f.view.nu)}return o}}function Qw(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vR.bind(null,e),e.Pu.J_=aR.bind(null,e.eventManager),e.Pu.yu=lR.bind(null,e.eventManager),e}function CR(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ER.bind(null,e),e}class _c{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return RA(this.persistence,new CA,e.initialUser,this.serializer)}Cu(e){return new Rw(jf.Vi,this.serializer)}Du(e){return new OA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_c.provider={build:()=>new _c};class kR extends _c{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){st(this.persistence.referenceDelegate instanceof gc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new cA(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new Rw((s=>gc.Vi(s,t)),this.serializer)}}class of{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>r_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=IR.bind(null,this.syncEngine),await sR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new oR})()}createDatastore(e){const t=Mc(e.databaseInfo.databaseId),s=UA(e.databaseInfo);return HA(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,f){return new GA(s,o,l,c,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>r_(this.syncEngine,t,0)),(function(){return Yy.v()?new Yy:new LA})())}createSyncEngine(e,t){return(function(o,l,c,f,p,y,v){const T=new dR(o,l,c,f,p,y);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=We(o);we(Ui,"RemoteStore shutting down."),l.Ea.add(5),await Sl(l),l.Aa.shutdown(),l.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}of.provider={build:()=>new of};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):cs("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zs="FirestoreClient";class AR{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this._databaseInfo=o,this.user=un.UNAUTHENTICATED,this.clientId=Rf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{we(Zs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(we(Zs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Gf(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Pd(n,e){n.asyncQueue.verifyOperationInProgress(),we(Zs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Pw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function i_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await RR(n);we(Zs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Zy(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>Zy(e.remoteStore,o))),n._onlineComponents=e}async function RR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){we(Zs,"Using user provided OfflineComponentProvider");try{await Pd(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;ji("Error using user provided cache. Falling back to memory cache: "+t),await Pd(n,new _c)}}else we(Zs,"Using default OfflineComponentProvider"),await Pd(n,new kR(void 0));return n._offlineComponents}async function Yw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(we(Zs,"Using user provided OnlineComponentProvider"),await i_(n,n._uninitializedComponentsProvider._online)):(we(Zs,"Using default OnlineComponentProvider"),await i_(n,new of))),n._onlineComponents}function PR(n){return Yw(n).then((e=>e.syncEngine))}async function af(n){const e=await Yw(n),t=e.eventManager;return t.onListen=fR.bind(null,e.syncEngine),t.onUnlisten=gR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=pR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=yR.bind(null,e.syncEngine),t}function xR(n,e,t,s){const o=new Jw(s),l=new zw(e,o,t);return n.asyncQueue.enqueueAndForget((async()=>jw(await af(n),l))),()=>{o.Nu(),n.asyncQueue.enqueueAndForget((async()=>Uw(await af(n),l)))}}function NR(n,e,t={}){const s=new qs;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,f,p,y){const v=new Jw({next:E=>{v.Nu(),c.enqueueAndForget((()=>Uw(l,T)));const b=E.docs.has(f);!b&&E.fromCache?y.reject(new ye(X.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&E.fromCache&&p&&p.source==="server"?y.reject(new ye(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(E)},error:E=>y.reject(E)}),T=new zw(Nc(f.path),v,{includeMetadataChanges:!0,Ka:!0});return jw(l,T)})(await af(n),n.asyncQueue,e,t,s))),s.promise}function bR(n,e){const t=new qs;return n.asyncQueue.enqueueAndForget((async()=>_R(await PR(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DR="ComponentProvider",o_=new Map;function VR(n,e,t,s,o){return new ek(n,e,t,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,Xw(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw="firestore.googleapis.com",a_=!0;class l_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Zw,this.ssl=a_}else this.host=e.host,this.ssl=e.ssl??a_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Aw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lA)throw new ye(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new l_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new l_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new b1;switch(s.type){case"firstParty":return new L1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=o_.get(t);s&&(we(DR,"Removing Datastore"),o_.delete(t),s.terminate())})(this),Promise.resolve()}}function OR(n,e,t,s={}){var y;n=Nr(n,Uc);const o=Jo(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;o&&(H_(`https://${f}`),q_("Firestore",!0)),l.host!==Zw&&l.host!==f&&ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:f,ssl:o,emulatorOptions:s};if(!as(p,c)&&(n._setSettings(p),s.mockUserToken)){let v,T;if(typeof s.mockUserToken=="string")v=s.mockUserToken,T=un.MOCK_USER;else{v=tI(s.mockUserToken,(y=n._app)==null?void 0:y.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new ye(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new un(E)}n._authCredentials=new D1(new Lv(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ri(this.firestore,e,this._query)}}class At{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(El(t,At._jsonSchema))return new At(e,s||null,new xe(ht.fromString(t.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Lt("string",At._jsonSchemaVersion),referencePath:Lt("string")};class Gs extends ri{constructor(e,t,s){super(e,t,Nc(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new xe(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function LR(n,e,...t){if(n=qt(n),Mv("collection","path",e),n instanceof Uc){const s=ht.fromString(e,...t);return Ey(s),new Gs(n,null,s)}{if(!(n instanceof At||n instanceof Gs))throw new ye(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ht.fromString(e,...t));return Ey(s),new Gs(n.firestore,null,s)}}function zu(n,e,...t){if(n=qt(n),arguments.length===1&&(e=Rf.newId()),Mv("doc","path",e),n instanceof Uc){const s=ht.fromString(e,...t);return wy(s),new At(n,null,new xe(s))}{if(!(n instanceof At||n instanceof Gs))throw new ye(X.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(ht.fromString(e,...t));return wy(s),new At(n.firestore,n instanceof Gs?n.converter:null,new xe(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="AsyncQueue";class c_{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Nw(this,"async_queue_retry"),this._c=()=>{const s=Rd();s&&we(u_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Rd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Rd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new qs;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ta(e))throw e;we(u_,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,cs("INTERNAL UNHANDLED ERROR: ",h_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=qf.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Me(47125,{Pc:h_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function h_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Ko extends Uc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new c_,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new c_(e),this._firestoreClient=void 0,await e}}}function MR(n,e){const t=typeof n=="object"?n:J_(),s=typeof n=="string"?n:uc,o=gf(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=ZT("firestore");l&&OR(o,...l)}return o}function Yf(n){if(n._terminated)throw new ye(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||FR(n),n._firestoreClient}function FR(n){var s,o,l,c;const e=n._freezeSettings(),t=VR(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,(o=n._app)==null?void 0:o.options.apiKey,e);n._componentsProvider||(l=e.localCache)!=null&&l._offlineComponentProvider&&((c=e.localCache)!=null&&c._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new AR(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(p){const y=p==null?void 0:p._online.build();return{_offline:p==null?void 0:p._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(Zt.fromBase64String(e))}catch(t){throw new ye(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(El(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:Lt("string",Hn._jsonSchemaVersion),bytes:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Or._jsonSchemaVersion}}static fromJSON(e){if(El(e,Or._jsonSchema))return new Or(e.latitude,e.longitude)}}Or._jsonSchemaVersion="firestore/geoPoint/1.0",Or._jsonSchema={type:Lt("string",Or._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(El(e,or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new or(e.vectorValues);throw new ye(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}or._jsonSchemaVersion="firestore/vectorValue/1.0",or._jsonSchema={type:Lt("string",or._jsonSchemaVersion),vectorValues:Lt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=/^__.*__$/;class UR{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ni(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tl(e,this.data,t,this.fieldTransforms)}}class eE{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ni(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{dataSource:n})}}class zc{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.validatePath(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new zc({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.contextWith({path:t,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return vc(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(tE(this.dataSource)&&jR.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class zR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Mc(e)}createContext(e,t,s,o=!1){return new zc({dataSource:e,methodName:t,targetDoc:s,path:Xt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zf(n){const e=n._freezeSettings(),t=Mc(n._databaseId);return new zR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function BR(n,e,t,s,o,l={}){const c=n.createContext(l.merge||l.mergeFields?2:0,e,t,o);np("Data must be an object, but it was:",c,s);const f=rE(s,c);let p,y;if(l.merge)p=new On(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const E=Qo(e,T,t);if(!c.contains(E))throw new ye(X.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);oE(v,E)||v.push(E)}p=new On(v),y=c.fieldTransforms.filter((T=>p.covers(T.field)))}else p=null,y=c.fieldTransforms;return new UR(new In(f),p,y)}class Bc extends kl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bc}}function nE(n,e,t){return new zc({dataSource:3,targetDoc:e.settings.targetDoc,methodName:n._methodName,arrayElement:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ep extends kl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=nE(this,e,!0),s=this.Ac.map((l=>Hi(l,t))),o=new Wo(s);return new dw(e.path,o)}isEqual(e){return e instanceof ep&&as(this.Ac,e.Ac)}}class tp extends kl{constructor(e,t){super(e),this.Ac=t}_toFieldTransform(e){const t=nE(this,e,!0),s=this.Ac.map((l=>Hi(l,t))),o=new Ho(s);return new dw(e.path,o)}isEqual(e){return e instanceof tp&&as(this.Ac,e.Ac)}}function $R(n,e,t,s){const o=n.createContext(1,e,t);np("Data must be an object, but it was:",o,s);const l=[],c=In.empty();ti(s,((p,y)=>{const v=iE(e,p,t);y=qt(y);const T=o.childContextForFieldPath(v);if(y instanceof Bc)l.push(v);else{const E=Hi(y,T);E!=null&&(l.push(v),c.set(v,E))}}));const f=new On(l);return new eE(c,f,o.fieldTransforms)}function WR(n,e,t,s,o,l){const c=n.createContext(1,e,t),f=[Qo(e,s,t)],p=[o];if(l.length%2!=0)throw new ye(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<l.length;E+=2)f.push(Qo(e,l[E])),p.push(l[E+1]);const y=[],v=In.empty();for(let E=f.length-1;E>=0;--E)if(!oE(y,f[E])){const b=f[E];let j=p[E];j=qt(j);const U=c.childContextForFieldPath(b);if(j instanceof Bc)y.push(b);else{const M=Hi(j,U);M!=null&&(y.push(b),v.set(b,M))}}const T=new On(y);return new eE(v,T,c.fieldTransforms)}function HR(n,e,t,s=!1){return Hi(t,n.createContext(s?4:3,e))}function Hi(n,e){if(sE(n=qt(n)))return np("Unsupported field value:",e,n),rE(n,e);if(n instanceof kl)return(function(s,o){if(!tE(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const f of s){let p=Hi(f,o.childContextForArray(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=qt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return kk(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=gt.fromDate(s);return{timestampValue:mc(o.serializer,l)}}if(s instanceof gt){const l=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:mc(o.serializer,l)}}if(s instanceof Or)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Hn)return{bytesValue:vw(o.serializer,s._byteString)};if(s instanceof At){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.createError(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Mf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof or)return(function(c,f){const p=c instanceof or?c.toArray():c;return{mapValue:{fields:{[qv]:{stringValue:Gv},[cc]:{arrayValue:{values:p.map((v=>{if(typeof v!="number")throw f.createError("VectorValues must only contain numeric values.");return Vf(f.serializer,v)}))}}}}}})(s,o);if(kw(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${Ac(s)}`)})(n,e)}function rE(n,e){const t={};return Uv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ti(n,((s,o)=>{const l=Hi(o,e.childContextForField(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function sE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof gt||n instanceof Or||n instanceof Hn||n instanceof At||n instanceof kl||n instanceof or||kw(n))}function np(n,e,t){if(!sE(t)||!Fv(t)){const s=Ac(t);throw s==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+s)}}function Qo(n,e,t){if((e=qt(e))instanceof Xf)return e._internalPath;if(typeof e=="string")return iE(n,e);throw vc("Field path arguments must be of type string or ",n,!1,void 0,t)}const qR=new RegExp("[~\\*/\\[\\]]");function iE(n,e,t){if(e.search(qR)>=0)throw vc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xf(...e.split("."))._internalPath}catch{throw vc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vc(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new ye(X.INVALID_ARGUMENT,f+n+p)}function oE(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{convertValue(e,t="none"){switch(Ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ti(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[cc].arrayValue)==null?void 0:o.values)==null?void 0:l.map((c=>xt(c.doubleValue)));return new or(t)}convertGeoPoint(e){return new Or(xt(e.latitude),xt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=xc(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(cl(e));default:return null}}convertTimestamp(e){const t=Qs(e);return new gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=ht.fromString(e);st(Cw(s),9688,{name:e});const o=new hl(s.get(1),s.get(3)),l=new xe(s.popFirst(5));return o.isEqual(t)||cs(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE extends GR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,t)}}function KR(...n){return new ep("arrayUnion",n)}function QR(...n){return new tp("arrayRemove",n)}const d_="@firebase/firestore",f_="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new JR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(Qo("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class JR extends lE{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rp{}class sp extends rp{}function XR(n,e,...t){let s=[];e instanceof rp&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((p=>p instanceof op)).length,f=l.filter((p=>p instanceof ip)).length;if(c>1||c>0&&f>0)throw new ye(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class ip extends sp{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new ip(e,t,s)}_apply(e){const t=this._parse(e);return uE(e._query,t),new ri(e.firestore,e.converter,Jd(e._query,t))}_parse(e){const t=Zf(e.firestore);return(function(l,c,f,p,y,v,T){let E;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ye(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){g_(T,v);const j=[];for(const U of T)j.push(m_(p,l,U));E={arrayValue:{values:j}}}else E=m_(p,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||g_(T,v),E=HR(f,c,T,v==="in"||v==="not-in");return Ot.create(y,v,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class op extends rp{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new op(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ar.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const f=l.getFlattenedFilters();for(const p of f)uE(c,p),c=Jd(c,p)})(e._query,t),new ri(e.firestore,e.converter,Jd(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ap extends sp{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ap(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new ye(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ye(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fl(l,c)})(e._query,this._field,this._direction);return new ri(e.firestore,e.converter,_k(e._query,t))}}function ZR(n,e="asc"){const t=e,s=Qo("orderBy",n);return ap._create(s,t)}class lp extends sp{constructor(e,t,s){super(),this.type=e,this._limit=t,this._limitType=s}static _create(e,t,s){return new lp(e,t,s)}_apply(e){return new ri(e.firestore,e.converter,dc(e._query,this._limit,this._limitType))}}function eP(n){return $1("limit",n),lp._create("limit",n,"F")}function m_(n,e,t){if(typeof(t=qt(t))=="string"){if(t==="")throw new ye(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tw(e)&&t.indexOf("/")!==-1)throw new ye(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(ht.fromString(t));if(!xe.isDocumentKey(s))throw new ye(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Py(n,new xe(s))}if(t instanceof At)return Py(n,t._key);throw new ye(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ac(t)}.`)}function g_(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function uE(n,e){const t=(function(o,l){for(const c of o)for(const f of c.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function tP(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class Ya{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Oi extends lE{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Xu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(Qo("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Oi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Oi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Oi._jsonSchema={type:Lt("string",Oi._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class Xu extends Oi{data(e={}){return super.data(e)}}class Fo{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ya(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Xu(this._firestore,this._userDataWriter,s.key,s,new Ya(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((f=>{const p=new Xu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ya(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const p=new Xu(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Ya(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return f.type!==0&&(y=c.indexOf(f.doc.key),c=c.delete(f.doc.key)),f.type!==1&&(c=c.add(f.doc),v=c.indexOf(f.doc.key)),{type:nP(f.type),doc:p,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Fo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rf.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function nP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fo._jsonSchemaVersion="firestore/querySnapshot/1.0",Fo._jsonSchema={type:Lt("string",Fo._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(n){n=Nr(n,At);const e=Nr(n.firestore,Ko),t=Yf(e);return NR(t,n._key).then((s=>dE(e,n,s)))}function xd(n,e,t){n=Nr(n,At);const s=Nr(n.firestore,Ko),o=tP(n.converter,e),l=Zf(s);return hE(s,[BR(l,"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Dr.none())])}function Bu(n,e,t,...s){n=Nr(n,At);const o=Nr(n.firestore,Ko),l=Zf(o);let c;return c=typeof(e=qt(e))=="string"||e instanceof Xf?WR(l,"updateDoc",n._key,e,t,s):$R(l,"updateDoc",n._key,e),hE(o,[c.toMutation(n._key,Dr.exists(!0))])}function cE(n,...e){var y,v,T;n=qt(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||p_(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(p_(e[s])){const E=e[s];e[s]=(y=E.next)==null?void 0:y.bind(E),e[s+1]=(v=E.error)==null?void 0:v.bind(E),e[s+2]=(T=E.complete)==null?void 0:T.bind(E)}let l,c,f;if(n instanceof At)c=Nr(n.firestore,Ko),f=Nc(n._key.path),l={next:E=>{e[s]&&e[s](dE(c,n,E))},error:e[s+1],complete:e[s+2]};else{const E=Nr(n,ri);c=Nr(E.firestore,Ko),f=E._query;const b=new aE(c);l={next:j=>{e[s]&&e[s](new Fo(c,b,E,j))},error:e[s+1],complete:e[s+2]},YR(n._query)}const p=Yf(c);return xR(p,f,o,l)}function hE(n,e){const t=Yf(n);return bR(t,e)}function dE(n,e,t){const s=t.docs.get(e._key),o=new aE(n);return new Oi(n,o,e._key,s,new Ya(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){N1(Yo),jo(new Li("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),f=new Ko(new V1(s.getProvider("auth-internal")),new M1(c,s.getProvider("app-check-internal")),tk(c,o),c);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Ws(d_,f_,e),Ws(d_,f_,"esm2020")})();const rP={apiKey:"AIzaSyA8xoktIzGgpPEklg_e_vWgkMU6E3Bjlkw",authDomain:"color-73b3e.firebaseapp.com",projectId:"color-73b3e",storageBucket:"color-73b3e.firebasestorage.app",messagingSenderId:"450293394727",appId:"1:450293394727:web:8486e1ff4d1c083275cd02"},fE=Q_(rP),Nd=A1(fE),Xa=MR(fE),sP=new ss,pE=A.createContext({user:null,loading:!0,signIn:async()=>{},signOut:async()=>{}});function iP({children:n}){const[e,t]=A.useState(null),[s,o]=A.useState(!0);A.useEffect(()=>mC(Nd,f=>{t(f),o(!1)}),[]);const l=async()=>{await LC(Nd,sP)},c=async()=>{await gC(Nd)};return C.jsx(pE.Provider,{value:{user:e,loading:s,signIn:l,signOut:c},children:n})}function mE(){return A.useContext(pE)}const up="/4color/";function lf(n,e){return Array.from({length:n},()=>Array.from({length:e},()=>({value:null,notes:[],fixedValue:null,fixedColor:null,borders:[0,0,0,0],fixedBorders:[0,0,0,0],color:null,label:null,crossed:!1,mark:null,selected:!1,image:null})))}function oP(n,e){var f;const t=new Map;let s=0;for(const p of n)for(const y of p)y.image&&!t.has(y.image)&&t.set(y.image,`img${s++}`);const o=[];for(let p=0;p<n.length;p++)for(let y=0;y<n[p].length;y++){const v=n[p][y],T=v.borders.some(E=>E>0);if(v.fixedValue||v.fixedColor||v.color||T||v.label||v.crossed||v.mark||v.image){const E={row:p,col:y};v.fixedValue&&(E.fixedValue=v.fixedValue),v.fixedColor&&(E.fixedColor=v.fixedColor),v.color&&(E.color=v.color),T&&(E.borders=v.borders),v.label&&(E.label=v.label),v.crossed&&(E.crossed=v.crossed),v.mark&&(E.mark=v.mark),v.image&&(E.image=t.get(v.image)),o.push(E)}}const l={};for(const[p,y]of t)l[y]=p;const c={...e,gridSize:{rows:n.length,cols:n[0].length},cells:o,rules:e.rules,clues:e.clues,createdAt:new Date().toISOString().split("T")[0]};return Object.keys(l).length>0&&(c.images=l),(f=e.autoCrossRules)!=null&&f.length&&(c.autoCrossRules=e.autoCrossRules),e.forcedInputLayout&&(c.forcedInputLayout=e.forcedInputLayout),c}function uf(n){const e=lf(n.gridSize.rows,n.gridSize.cols),t=n.images||{};for(const s of n.cells)s.fixedValue&&(e[s.row][s.col].fixedValue=s.fixedValue),s.fixedColor&&(e[s.row][s.col].fixedColor=s.fixedColor),s.color&&(e[s.row][s.col].color=s.color),s.borders&&(e[s.row][s.col].borders=s.borders,e[s.row][s.col].fixedBorders=[...s.borders]),s.label&&(e[s.row][s.col].label=s.label),s.crossed&&(e[s.row][s.col].crossed=s.crossed),s.mark&&(e[s.row][s.col].mark=s.mark),s.image&&(e[s.row][s.col].image=t[s.image]??s.image);return e}function aP(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`${n.id}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(s),1e3)}async function cp(){const n=await fetch(`${up}puzzles/index.json`);return n.ok?n.json():[]}function lP(n){const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`${n.id}-solution.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(()=>URL.revokeObjectURL(s),1e3)}async function gE(n){try{const e=await fetch(`${up}puzzles/solutions/${n}-solution.json`);if(!e.ok)return null;const t=await e.text();return JSON.parse(t)}catch{return null}}async function yE(n){const t=(await cp()).find(l=>l.id===n),s=(t==null?void 0:t.file)??`${n}.json`,o=await fetch(`${up}puzzles/${s}`);return o.ok?o.json():null}const __="4color-theme";function hp(){const[n,e]=A.useState(()=>{const s=localStorage.getItem(__);return s==="dark"||s==="light"?s:"light"});return A.useEffect(()=>{document.documentElement.setAttribute("data-theme",n),localStorage.setItem(__,n)},[n]),{theme:n,toggle:()=>e(s=>s==="light"?"dark":"light")}}function _E(){const{user:n}=mE(),[e,t]=A.useState(new Set),[s,o]=A.useState(new Map),[l,c]=A.useState(""),f=A.useRef(e);f.current=e;const p=A.useRef(s);p.current=s,A.useEffect(()=>{if(!n){t(new Set),c("");return}const E=zu(Xa,"completions_index",n.uid);return cE(E,b=>{if(b.exists()){const j=b.data(),U=j.puzzleIds||[];t(new Set(U)),c(j.displayName||n.displayName||"");const M=j.times||{};o(new Map(Object.entries(M))),j.count!==U.length&&Bu(E,{count:U.length}).catch(()=>{})}else t(new Set),o(new Map),c(n.displayName||"")},()=>{t(new Set),o(new Map),c(n.displayName||"")})},[n]);const y=A.useCallback(async(E,b)=>{if(!n||f.current.has(E))return;const j=zu(Xa,"completions_index",n.uid);try{const U=await y_(j);if(U.exists()){const M=U.data(),Y=M.puzzleIds||[];if(Y.includes(E))return;const se={puzzleIds:KR(E),count:Y.length+1};b!=null&&!(M.times&&M.times[E])&&(se[`times.${E}`]=b),await Bu(j,se)}else{const M=n.displayName||"Anonymous",Y={uid:n.uid,puzzleIds:[E],count:1,displayName:M};b!=null&&(Y.times={[E]:b}),await xd(j,Y)}}catch{const U=n.displayName||"Anonymous",M={uid:n.uid,puzzleIds:[E],count:1,displayName:U};b!=null&&(M.times={[E]:b}),await xd(j,M).catch(()=>{})}},[n]),v=A.useCallback(async E=>{if(!n||!f.current.has(E))return;const b=zu(Xa,"completions_index",n.uid);try{const j=await y_(b);if(j.exists()){const U=j.data().puzzleIds||[],M=Math.max(0,U.filter(Y=>Y!==E).length);await Bu(b,{puzzleIds:QR(E),count:M})}}catch{}},[n]),T=A.useCallback(async E=>{if(!n)return;const b=E.trim();if(!b)return;const j=zu(Xa,"completions_index",n.uid);try{await Bu(j,{displayName:b})}catch{await xd(j,{uid:n.uid,puzzleIds:[],count:0,displayName:b})}},[n]);return{completedPuzzleIds:e,completionTimes:s,displayName:l,setDisplayName:T,markCompleted:y,unmarkCompleted:v}}function dp(n){const e=Math.floor(n/1e3),t=Math.floor(e/3600),s=Math.floor(e%3600/60),o=e%60;return t>0?`${t}:${String(s).padStart(2,"0")}:${String(o).padStart(2,"0")}`:`${s}:${String(o).padStart(2,"0")}`}function uP(n=10){const[e,t]=A.useState([]);return A.useEffect(()=>{const s=XR(LR(Xa,"completions_index"),ZR("count","desc"),eP(n));return cE(s,o=>{const l=[];o.forEach(c=>{const f=c.data();f.count>0&&l.push({uid:c.id,displayName:f.displayName||"Anonymous",count:f.count})}),t(l)},()=>{t([])})},[n]),e}function fp(){const[n,e]=A.useState({open:!1,message:"",hasCancel:!1}),t=A.useRef(null),s=A.useCallback(f=>{var p;e(y=>({...y,open:!1})),(p=t.current)==null||p.call(t,f),t.current=null},[]),o=A.useCallback((f,p)=>new Promise(y=>{var v;(v=t.current)==null||v.call(t,!1),t.current=()=>y(),e({open:!0,message:f,title:p,hasCancel:!1})}),[]),l=A.useCallback((f,p,y,v)=>new Promise(T=>{var E;(E=t.current)==null||E.call(t,!1),t.current=T,e({open:!0,message:f,title:p,confirmLabel:y,cancelLabel:v,hasCancel:!0})}),[]);return{modalProps:{open:n.open,title:n.title,message:n.message,confirmLabel:n.confirmLabel,cancelLabel:n.cancelLabel,onConfirm:()=>s(!0),onCancel:n.hasCancel?()=>s(!1):void 0},showAlert:o,showConfirm:l}}function pp({open:n,title:e,message:t,confirmLabel:s="OK",cancelLabel:o="Cancel",onConfirm:l,onCancel:c}){const f=A.useCallback(()=>{c?c():l()},[c,l]);return A.useEffect(()=>{if(!n)return;const p=y=>{y.key==="Escape"&&f()};return window.addEventListener("keydown",p),()=>window.removeEventListener("keydown",p)},[n,f]),n?C.jsx("div",{className:"modal-backdrop",onMouseDown:f,children:C.jsxs("div",{className:"modal-card",onMouseDown:p=>p.stopPropagation(),children:[e&&C.jsx("h3",{className:"modal-title",children:e}),C.jsx("p",{className:"modal-message",children:t}),C.jsxs("div",{className:"modal-actions",children:[c&&C.jsx("button",{className:"modal-btn",onClick:c,children:o}),C.jsx("button",{className:"modal-btn modal-btn-confirm",onClick:l,children:s})]})]})}):null}const v_=[{code:"",label:"English"},{code:"fr",label:"Franais"},{code:"es",label:"Espaol"},{code:"de",label:"Deutsch"},{code:"pt",label:"Portugus"},{code:"it",label:"Italiano"},{code:"nl",label:"Nederlands"},{code:"ru",label:""},{code:"ja",label:""},{code:"ko",label:""},{code:"zh-CN",label:""},{code:"ar",label:""},{code:"hi",label:""},{code:"pl",label:"Polski"},{code:"tr",label:"Trke"},{code:"sv",label:"Svenska"}];function cP(){return document.querySelector("#google_translate_element select")}function hP(){const n=document.cookie.match(/googtrans=\/en\/([^;]+)/);return n?n[1]:""}function dP(n){const e=cP();if(e){if(!n){document.cookie="googtrans=; path=/; expires=Thu, 01 Jan 1970 00:00:00 UTC",document.cookie="googtrans=; path=/; domain="+window.location.hostname+"; expires=Thu, 01 Jan 1970 00:00:00 UTC",e.value="",e.dispatchEvent(new Event("change")),window.location.reload();return}e.value=n,e.dispatchEvent(new Event("change"))}}function mp(){var y;const[n,e]=A.useState(hP),[t,s]=A.useState(!1),o=A.useRef(null),l=A.useRef(null),[c,f]=A.useState(null);A.useEffect(()=>{const v=T=>{o.current&&!o.current.contains(T.target)&&s(!1)};return document.addEventListener("mousedown",v),()=>document.removeEventListener("mousedown",v)},[]),A.useEffect(()=>{if(t&&l.current){const v=l.current.getBoundingClientRect();f({top:v.bottom+4,right:window.innerWidth-v.right})}},[t]);const p=((y=v_.find(v=>v.code===n))==null?void 0:y.label)||"English";return C.jsxs("div",{className:"lang-picker notranslate",ref:o,children:[C.jsx("button",{ref:l,className:"lang-picker-btn",onClick:()=>s(v=>!v),title:"Change language",children:p}),t&&c&&C.jsx("div",{className:"lang-picker-menu",style:{position:"fixed",top:c.top,right:c.right},children:v_.map(v=>C.jsx("button",{className:`lang-picker-item${v.code===n?" active":""}`,onClick:()=>{e(v.code),dP(v.code),s(!1)},children:v.label},v.code))})]})}function fP(){const n=new URLSearchParams(window.location.hash.split("?")[1]||"").get("debug")==="true",{theme:e,toggle:t}=hp(),{user:s,signIn:o,signOut:l}=mE(),{completedPuzzleIds:c,completionTimes:f,displayName:p,setDisplayName:y}=_E(),v=uP(10),{modalProps:T,showConfirm:E}=fp(),[b,j]=A.useState(!1),[U,M]=A.useState(""),[Y,se]=A.useState([]),[ue,oe]=A.useState(!0),[ne,Ee]=A.useState(new Set),[x,I]=A.useState("or"),[k,L]=A.useState(new Set),[D,V]=A.useState(!1);A.useEffect(()=>{cp().then(Q=>{se(Q),oe(!1)})},[]);const R=A.useMemo(()=>{const Q=new Set;for(const J of Y)for(const N of J.tags||[])Q.add(N);return[...Q].sort()},[Y]),Ie=A.useMemo(()=>{const Q=["Very easy","Easy","Medium","Hard","Very hard"],J=new Set;for(const G of Y)G.difficulty&&J.add(G.difficulty);const N=Q.filter(G=>J.has(G));for(const G of J)N.includes(G)||N.push(G);return N},[Y]),Oe=A.useMemo(()=>{let Q=Y;return ne.size>0&&(Q=Q.filter(J=>{const N=J.tags||[];return x==="or"?N.some(G=>ne.has(G)):[...ne].every(G=>N.includes(G))})),k.size>0&&(Q=Q.filter(J=>J.difficulty!=null&&k.has(J.difficulty))),D&&(Q=Q.filter(J=>!c.has(J.id))),Q},[Y,ne,x,k,D,c]),Ye=A.useMemo(()=>{const Q=["Very easy","Easy","Medium","Hard","Very hard"],J=[],N=new Map;for(const G of Oe){const Pe=G.difficulty||"Unrated";N.has(Pe)||N.set(Pe,[]),N.get(Pe).push(G)}for(const G of Q)N.has(G)&&(J.push({difficulty:G,puzzles:N.get(G)}),N.delete(G));for(const[G,Pe]of N)J.push({difficulty:G,puzzles:Pe});return J},[Oe]),ge=Q=>{Ee(J=>{const N=new Set(J);return N.has(Q)?N.delete(Q):N.add(Q),N})},ee=Q=>{L(J=>{const N=new Set(J);return N.has(Q)?N.delete(Q):N.add(Q),N})};return C.jsxs("div",{className:"puzzle-list-layout",children:[C.jsxs("aside",{className:"puzzle-list-sidebar",children:[C.jsx("div",{className:"sidebar-section",children:s?C.jsx("button",{className:"auth-btn auth-btn-full notranslate",onClick:()=>{M(p),j(!0)},children:p||s.displayName||"User"}):C.jsx("button",{className:"auth-btn auth-btn-full",onClick:o,children:"Sign in with Google"})}),C.jsxs("div",{className:"sidebar-section",children:[C.jsx("h3",{className:"sidebar-title",children:"Leaderboard"}),v.length===0?C.jsx("p",{className:"sidebar-empty",children:"No completions yet"}):C.jsx("ol",{className:"leaderboard-list",children:v.map((Q,J)=>C.jsxs("li",{className:`leaderboard-entry${s&&Q.uid===s.uid?" leaderboard-self":""}`,children:[C.jsxs("span",{className:"leaderboard-rank",children:[J+1,"."]}),C.jsx("span",{className:"leaderboard-name notranslate",children:Q.displayName}),C.jsx("span",{className:"leaderboard-count",children:Q.count})]},Q.uid))})]}),C.jsx("div",{className:"sidebar-spacer"})]}),C.jsxs("div",{className:"puzzle-list-main",children:[C.jsxs("div",{className:"puzzle-list-topbar",children:[C.jsx("span",{className:"discord-link notranslate",title:"Click to copy Discord username",onClick:()=>{navigator.clipboard.writeText("pmlemay"),alert("Copied pmlemay to clipboard!")},children:"Contact me on Discord : pmlemay"}),C.jsx(mp,{}),C.jsx("button",{className:"puzzle-list-theme-btn",onClick:t,title:"Toggle theme",children:e==="light"?"":""})]}),C.jsx("div",{className:"puzzle-list-header",children:C.jsx("h1",{children:"4Color Puzzles"})}),C.jsx("div",{className:"puzzle-list-actions",children:C.jsx(bo,{to:"/edit",className:"new-puzzle-btn",children:"Create New Puzzle"})}),(R.length>0||Ie.length>0)&&C.jsxs("div",{className:"filter-bars",children:[C.jsxs("div",{className:"tag-filter-bar",children:[c.size>0&&C.jsxs(C.Fragment,{children:[C.jsx("button",{className:`tag-chip${D?" selected":""}`,onClick:()=>V(Q=>!Q),children:"Hide completed"}),Ie.length>0&&C.jsx("span",{className:"filter-separator",children:"|"})]}),Ie.map(Q=>C.jsx("button",{className:`tag-chip difficulty${k.has(Q)?" selected":""}`,onClick:()=>ee(Q),children:Q},Q))]}),R.length>0&&C.jsxs("div",{className:"tag-filter-bar",children:[R.map(Q=>C.jsx("button",{className:`tag-chip${ne.has(Q)?" selected":""}`,onClick:()=>ge(Q),children:Q},Q)),ne.size>=2&&C.jsx("button",{className:"tag-mode-toggle",onClick:()=>I(Q=>Q==="or"?"and":"or"),title:x==="or"?"Showing puzzles matching ANY tag":"Showing puzzles matching ALL tags",children:x.toUpperCase()})]})]}),ue?C.jsx("p",{children:"Loading puzzles..."}):Y.length===0?C.jsxs("p",{className:"empty-state",children:["No puzzles yet. ",C.jsx(bo,{to:"/edit",children:"Create one"})," to get started!"]}):C.jsx("div",{className:"puzzle-sections",children:Ye.map(Q=>C.jsxs("div",{className:"puzzle-section",children:[C.jsx("h2",{className:"puzzle-section-title",children:Q.difficulty}),C.jsx("div",{className:"puzzle-cards",children:Q.puzzles.map(J=>C.jsxs("div",{className:"puzzle-card-row",children:[C.jsxs(bo,{to:`/play/${J.id}`,className:`puzzle-card${c.has(J.id)?" puzzle-completed":""}`,children:[C.jsxs("h3",{children:[J.title,c.has(J.id)&&C.jsx("span",{className:"completed-badge",title:"Completed",children:""}),f.has(J.id)&&C.jsx("span",{className:"completion-time",children:dp(f.get(J.id))})]}),C.jsxs("p",{className:"puzzle-meta",children:["by ",J.author,"  ",J.gridSize.rows,"",J.gridSize.cols]}),J.tags&&J.tags.length>0&&C.jsx("div",{className:"puzzle-tags",children:J.tags.map(N=>C.jsx("span",{className:"puzzle-tag",children:N},N))})]}),n&&C.jsx(bo,{to:`/edit/${J.id}`,className:"puzzle-edit-btn",title:"Edit puzzle",children:""})]},J.id))})]},Q.difficulty))})]}),b&&s&&C.jsx("div",{className:"modal-backdrop",onClick:()=>j(!1),children:C.jsxs("div",{className:"modal-card",onClick:Q=>Q.stopPropagation(),children:[C.jsx("h2",{className:"modal-title",children:"Account"}),C.jsxs("p",{className:"account-info",children:["Signed in with Google as ",s.email]}),C.jsxs("div",{className:"account-name-field",children:[C.jsx("label",{children:"Display name"}),C.jsx("input",{value:U,onChange:Q=>M(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&U.trim()&&(y(U.trim()),j(!1))},placeholder:s.displayName||"Enter a name"})]}),C.jsxs("div",{className:"modal-actions",children:[C.jsx("button",{className:"modal-btn",onClick:()=>{U.trim()&&y(U.trim()),j(!1)},children:"Save"}),C.jsx("button",{className:"modal-btn modal-btn-danger",onClick:async()=>{j(!1),await E("Are you sure you want to sign out?","Sign Out","Sign out","Cancel")&&l()},children:"Sign out"})]})]})}),C.jsx(pp,{...T})]})}function w_(n,e){const t=n.map(l=>l.map(c=>({...c}))),s=2,o=new Set(e.map(l=>`${l.row},${l.col}`));for(const l of e){const c=t[l.row][l.col].fixedBorders;t[l.row][l.col].borders=[c[0]>0?c[0]:o.has(`${l.row-1},${l.col}`)?0:s,c[1]>0?c[1]:o.has(`${l.row},${l.col+1}`)?0:s,c[2]>0?c[2]:o.has(`${l.row+1},${l.col}`)?0:s,c[3]>0?c[3]:o.has(`${l.row},${l.col-1}`)?0:s]}return t}function pP(n,e,t,s){const o=[];for(let l=0;l<t;l++)l!==n&&o.push({row:l,col:e});for(let l=0;l<s;l++)l!==e&&o.push({row:n,col:l});return o}function mP(n,e,t,s){const o=[],l=[[-1,-1],[-1,1],[1,-1],[1,1]];for(const[c,f]of l){let p=n+c,y=e+f;for(;p>=0&&p<t&&y>=0&&y<s;)o.push({row:p,col:y}),p+=c,y+=f}return o}function gP(n,e,t,s){const o=[];for(let l=-1;l<=1;l++)for(let c=-1;c<=1;c++){if(l===0&&c===0)continue;const f=n+l,p=e+c;f>=0&&f<t&&p>=0&&p<s&&o.push({row:f,col:p})}return o}function yP(n,e,t,s){const o=[],l=[[-2,-1],[-2,1],[-1,-2],[-1,2],[1,-2],[1,2],[2,-1],[2,1]];for(const[c,f]of l){const p=n+c,y=e+f;p>=0&&p<t&&y>=0&&y<s&&o.push({row:p,col:y})}return o}function _P(n,e,t,s){if(e.length===0)return[];const o=new Set(e),l=new Set,c=[];for(const f of n)l.add(`${f.row},${f.col}`);for(const f of n){const p=[];o.has("rook")&&p.push(...pP(f.row,f.col,t,s)),o.has("bishop")&&p.push(...mP(f.row,f.col,t,s)),o.has("king")&&p.push(...gP(f.row,f.col,t,s)),o.has("knight")&&p.push(...yP(f.row,f.col,t,s));for(const y of p){const v=`${y.row},${y.col}`;l.has(v)||(l.add(v),c.push(y))}}return c}const vP=16,Pi=500;function Dt(n){return n.map(e=>e.map(t=>({...t,notes:[...t.notes],borders:[...t.borders],fixedBorders:[...t.fixedBorders]})))}function xi(n){return n.map(e=>e.map(t=>({...t,selected:!1,notes:[...t.notes],borders:[...t.borders],fixedBorders:[...t.fixedBorders]})))}function vE(n,e){const[t,s]=A.useState(()=>lf(n,e)),o=A.useRef(t);o.current=t;const[l,c]=A.useState([]),[f,p]=A.useState("normal"),y=A.useRef([]),v=A.useRef([]),T=A.useRef(!0),E=A.useRef(!1),b=A.useRef(null),j=A.useRef(!1),U=A.useRef(!1),M=A.useRef(null),Y=A.useRef(!1),se=A.useRef(null),[ue,oe]=A.useState(null),[ne,Ee]=A.useState(null),x=A.useRef([]),I=A.useRef(""),k=A.useCallback(ae=>{x.current=ae},[]),L=A.useCallback(ae=>{I.current=ae},[]),D=A.useCallback(ae=>{p(ae),ae!=="color"&&ae!=="fixedColor"&&oe(null),ae!=="mark"&&Ee(null)},[]),V=A.useCallback(ae=>{y.current.push(xi(o.current)),y.current.length>Pi&&y.current.shift(),v.current=[],s(W=>typeof ae=="function"?ae(W):ae)},[]),R=A.useCallback(()=>{const ae=y.current.pop();ae&&(v.current.push(xi(o.current)),v.current.length>Pi&&v.current.shift(),s(ae),c([]))},[]),Ie=A.useCallback(()=>{const ae=v.current.pop();ae&&(y.current.push(xi(o.current)),y.current.length>Pi&&y.current.shift(),s(ae),c([]))},[]),Oe=A.useCallback(()=>{s(ae=>ae.map(W=>W.map(ce=>({...ce,selected:!1})))),c([])},[]),Ye=A.useCallback(ae=>{if(ae.length!==0){if((f==="color"||f==="fixedColor")&&ue!==null){const W=f==="fixedColor"?"fixedColor":"color",ce=ue==="0";s(_e=>{U.current||(U.current=!0,y.current.push(xi(_e)),y.current.length>Pi&&y.current.shift(),v.current=[],ce?M.current=null:M.current=_e[ae[0].row][ae[0].col][W]===ue?null:ue);const fe=M.current,me=I.current==="nurikabe";if(!ae.some(Ft=>_e[Ft.row][Ft.col][W]!==fe||me&&fe&&_e[Ft.row][Ft.col].mark==="dot"))return _e;const St=Dt(_e);for(const Ft of ae)St[Ft.row][Ft.col][W]=fe,me&&fe&&(St[Ft.row][Ft.col].mark=null);return St});return}if(f==="cross"){s(W=>{E.current||(E.current=!0,y.current.push(xi(W)),y.current.length>Pi&&y.current.shift(),v.current=[],T.current=!W[ae[0].row][ae[0].col].crossed);const ce=ae.filter(me=>!W[me.row][me.col].value&&!W[me.row][me.col].fixedValue&&!W[me.row][me.col].mark);if(!ce.some(me=>W[me.row][me.col].crossed!==T.current))return W;const fe=Dt(W);for(const me of ce)fe[me.row][me.col].crossed=T.current;return fe});return}if(f==="mark"&&ne!==null){s(W=>{Y.current||(Y.current=!0,y.current.push(xi(W)),y.current.length>Pi&&y.current.shift(),v.current=[],se.current=W[ae[0].row][ae[0].col].mark===ne?null:ne);const ce=se.current,_e=ae.filter(Ve=>!W[Ve.row][Ve.col].crossed&&!W[Ve.row][Ve.col].value&&!W[Ve.row][Ve.col].fixedValue&&W[Ve.row][Ve.col].notes.length===0);if(!_e.some(Ve=>W[Ve.row][Ve.col].mark!==ce))return W;const me=Dt(W);for(const Ve of _e)me[Ve.row][Ve.col].mark=ce;return me});return}if(f==="border"){s(W=>{if(!b.current){b.current=Dt(W),y.current.push(xi(W)),y.current.length>Pi&&y.current.shift(),v.current=[];const _e=b.current[ae[0].row][ae[0].col];j.current=_e.borders.some((fe,me)=>fe>0&&_e.fixedBorders[me]===0)}const ce=b.current;if(j.current){const _e=Dt(ce);for(const fe of ae){const me=_e[fe.row][fe.col].fixedBorders;_e[fe.row][fe.col].borders=[...me]}return _e}else return w_(ce,ae)});return}}},[f,ue,ne]),ge=A.useCallback(ae=>{if((f==="color"||f==="fixedColor")&&ue!==null){U.current=!1;return}if(f==="cross"){E.current=!1;return}if(f==="mark"&&ne!==null){Y.current=!1;return}if(f==="border"){b.current=null;return}s(W=>{var _e;const ce=W.map(fe=>fe.map(me=>({...me})));for(const fe of ae)(_e=ce[fe.row])!=null&&_e[fe.col]&&(ce[fe.row][fe.col].selected=!0);return ce}),c(ae)},[f,ue,ne,V]),ee=A.useCallback(ae=>{l.length!==0&&V(W=>{const ce=Dt(W),fe=l.every(Ve=>ce[Ve.row][Ve.col].value===ae)?null:ae;for(const Ve of l)ce[Ve.row][Ve.col].value=fe;const me=x.current;if(fe!==null&&me.length>0){const Ve=ce.length,St=ce[0].length,Ft=_P(l,me,Ve,St);for(const lr of Ft){const qn=ce[lr.row][lr.col];!qn.value&&!qn.fixedValue&&!qn.mark&&(qn.crossed=!0)}}return ce})},[l,V]),Q=A.useCallback(ae=>{l.length!==0&&V(W=>{const ce=Dt(W),_e=l.every(fe=>ce[fe.row][fe.col].color===ae);for(const fe of l)ce[fe.row][fe.col].color=_e?null:ae;return ce})},[l,V]),J=A.useCallback(()=>{if(l.length===0)return;const ae=f==="fixedColor"?"fixedColor":"color";V(W=>{const ce=Dt(W);for(const _e of l)ce[_e.row][_e.col][ae]=null;return ce})},[l,f,V]),N=A.useCallback(ae=>{l.length!==0&&V(W=>{const ce=Dt(W),_e=l.every(fe=>ce[fe.row][fe.col].fixedValue===ae);for(const fe of l)ce[fe.row][fe.col].fixedValue=_e?null:ae;return ce})},[l,V]),G=A.useCallback(ae=>{l.length!==0&&V(W=>{const ce=Dt(W),_e=l.every(fe=>ce[fe.row][fe.col].fixedColor===ae);for(const fe of l)ce[fe.row][fe.col].fixedColor=_e?null:ae;return ce})},[l,V]),Pe=A.useCallback(ae=>{l.length!==0&&V(W=>{const ce=Dt(W);for(const _e of l){const fe=ce[_e.row][_e.col],me=fe.notes.indexOf(ae);me!==-1?fe.notes.splice(me,1):fe.notes.length<vP&&fe.notes.push(ae)}return ce})},[l,V]),Ne=A.useCallback((ae,W)=>{if(l.length===0)return;const ce=l[0];V(_e=>{var Ve,St;const fe=Dt(_e),me=fe[ce.row][ce.col];return((Ve=me.label)==null?void 0:Ve.text)===ae&&((St=me.label)==null?void 0:St.align)===W?me.label=null:me.label={text:ae,align:W},fe})},[l,V]),ze=A.useCallback(()=>{l.length!==0&&V(ae=>{const W=Dt(ae);for(const ce of l)W[ce.row][ce.col].label=null;return W})},[l,V]),Ce=A.useCallback(()=>{l.length!==0&&V(ae=>{const W=Dt(ae),ce=l.filter(fe=>!W[fe.row][fe.col].value&&!W[fe.row][fe.col].fixedValue&&!W[fe.row][fe.col].mark);if(ce.length===0)return ae;const _e=ce.every(fe=>W[fe.row][fe.col].crossed);for(const fe of ce)W[fe.row][fe.col].crossed=!_e;return W})},[l,V]),Be=A.useCallback(ae=>{l.length!==0&&V(W=>{const ce=Dt(W),_e=l.filter(me=>!ce[me.row][me.col].crossed&&!ce[me.row][me.col].value&&!ce[me.row][me.col].fixedValue&&ce[me.row][me.col].notes.length===0);if(_e.length===0)return W;const fe=_e.every(me=>ce[me.row][me.col].mark===ae);for(const me of _e)ce[me.row][me.col].mark=fe?null:ae;return ce})},[l,V]),Ae=A.useCallback(()=>{l.length!==0&&V(ae=>{const W=Dt(ae);for(const ce of l)W[ce.row][ce.col].mark=null;return W})},[l,V]),He=A.useCallback(ae=>{l.length!==0&&V(W=>{const ce=Dt(W),_e=l.every(fe=>ce[fe.row][fe.col].image===ae);for(const fe of l)ce[fe.row][fe.col].image=_e?null:ae;return ce})},[l,V]),yt=A.useCallback(()=>{l.length!==0&&V(ae=>{const W=Dt(ae);for(const ce of l)W[ce.row][ce.col].image=null;return W})},[l,V]),Ln=A.useCallback(()=>{l.length!==0&&V(ae=>{const W=Dt(ae);for(const ce of l){const _e=W[ce.row][ce.col];_e.value=null,_e.notes=[],_e.color=null,_e.crossed=!1,_e.mark=null,_e.borders=[..._e.fixedBorders]}return W})},[l,V]),Fr=A.useCallback(()=>{l.length!==0&&V(ae=>{if(l.some(ce=>{const _e=ae[ce.row][ce.col];return _e.borders.some((fe,me)=>fe>0&&_e.fixedBorders[me]===0)})){const ce=Dt(ae);for(const _e of l){const fe=ce[_e.row][_e.col].fixedBorders;ce[_e.row][_e.col].borders=[...fe]}return ce}else return w_(ae,l)})},[l,V]),dn=A.useCallback((ae,W)=>{y.current=[],s(lf(ae,W)),c([])},[]);return{grid:t,setGrid:s,selection:l,setSelection:c,inputMode:f,setInputMode:D,activeColor:ue,setActiveColor:oe,activeMark:ne,setActiveMark:Ee,clearSelection:Oe,commitSelection:ge,onDragChange:Ye,applyValue:ee,applyColor:Q,eraseColor:J,applyFixedValue:N,applyFixedColor:G,addNote:Pe,applyLabel:Ne,removeLabel:ze,toggleCross:Ce,toggleMark:Be,eraseMark:Ae,applyImage:He,removeImage:yt,clearValues:Ln,applyBorders:Fr,resetGrid:dn,setAutoCrossRules:k,setForcedInputLayout:L,undo:R,redo:Ie}}function wP(n){return n.startsWith("Digit")?n.charAt(5):n.startsWith("Key")?n.charAt(3).toUpperCase():null}function EP(n){return n.key.length===1&&!n.ctrlKey&&!n.altKey&&!n.metaKey?n.key.toUpperCase():null}function wE(n){const e=A.useRef(null);A.useEffect(()=>{n.inputMode!=="fixedDouble"&&(e.current=null)},[n.inputMode]),A.useEffect(()=>{const t=s=>{var l,c,f,p,y,v,T,E,b;if(s.target.tagName==="INPUT")return;if((s.ctrlKey||s.metaKey)&&s.key==="z"){s.preventDefault(),n.undo();return}if((s.ctrlKey||s.metaKey)&&s.key==="y"){s.preventDefault(),n.redo();return}if(s.key==="Delete"||s.key==="Backspace"){s.preventDefault(),n.clearValues();return}if(s.key==="Enter"){s.preventDefault(),(l=n.onEnter)==null||l.call(n);return}if(!s.shiftKey&&!s.ctrlKey&&!s.altKey&&!s.metaKey&&n.hasSelection===!1&&n.onInputModeChange){const j={N:"normal",C:"color",X:"cross",B:"border",M:"mark"},U=s.key.toUpperCase();if(U in j){s.preventDefault(),n.onInputModeChange(j[U]);return}}const o=EP(s);if(o){if(s.preventDefault(),s.shiftKey){const j=wP(s.code);j&&n.addNote(j);return}switch(n.inputMode){case"normal":n.applyValue(o);break;case"color":o==="0"?((c=n.onActiveColorChange)==null||c.call(n,o),(f=n.eraseColor)==null||f.call(n)):o>="1"&&o<="9"&&((p=n.onActiveColorChange)==null||p.call(n,o),n.applyColor(o));break;case"fixed":n.applyFixedValue(o);break;case"fixedDouble":o>="0"&&o<="9"&&(e.current===null?e.current=o:(n.applyFixedValue(e.current+o),e.current=null));break;case"fixedColor":o==="0"?((y=n.onActiveColorChange)==null||y.call(n,o),(v=n.eraseColor)==null||v.call(n)):o>="1"&&o<="9"&&((T=n.onActiveColorChange)==null||T.call(n,o),n.applyFixedColor(o));break;case"note":n.addNote(o);break;case"mark":{const j=["circle","square","triangle","diamond","pentagon","hexagon","dot"],U=parseInt(o)-1;if(U>=0&&U<j.length){const M=j[U];(E=n.onActiveMarkChange)==null||E.call(n,M),(b=n.toggleMark)==null||b.call(n,M)}break}}}};return window.addEventListener("keydown",t),()=>window.removeEventListener("keydown",t)},[n.inputMode,n.applyValue,n.applyColor,n.applyFixedValue,n.applyFixedColor,n.addNote,n.clearValues,n.eraseColor,n.undo,n.redo,n.onEnter,n.onActiveColorChange,n.onActiveMarkChange,n.toggleMark,n.hasSelection,n.onInputModeChange])}function TP(n){const e=A.useRef(!1),t=A.useRef(!1),s=A.useRef([]),o=A.useRef([]),l=A.useRef(!1),c=A.useCallback(E=>{var Y;let b;if("touches"in E&&E.touches.length>0){const se=E.touches[0];b=document.elementFromPoint(se.clientX,se.clientY)}else if("target"in E)for(b=E.target;b&&b.tagName!=="TD";)b=b.parentElement;else return null;if(!b||b.tagName!=="TD")return null;const j=b,U=(Y=j.parentElement)==null?void 0:Y.rowIndex,M=j.cellIndex;return U==null||M==null||U<0||M<0?null:{row:U,col:M}},[]),f=A.useCallback(E=>{if(E.target.closest(".toolbar"))return;if(E.button===2&&n.onRightClickCell){E.preventDefault();const j=c(E);j&&(t.current=!0,o.current=[j],n.onRightClickCell(j));return}if(E.button!==0)return;E.preventDefault(),l.current=E.ctrlKey,E.ctrlKey||n.onSelectionStart();const b=c(E);b&&(e.current=!0,s.current=[b],n.onSelectionChange([b]))},[c,n]),p=A.useCallback(E=>{var j;if(t.current){E.preventDefault();const U=c(E);if(!U||o.current.some(M=>M.row===U.row&&M.col===U.col))return;o.current=[...o.current,U],(j=n.onRightClickCell)==null||j.call(n,U);return}if(!e.current)return;E.preventDefault();const b=c(E);b&&(s.current.some(U=>U.row===b.row&&U.col===b.col)||(s.current=[...s.current,b],n.onSelectionChange(s.current)))},[c,n]),y=A.useCallback(()=>{if(t.current){t.current=!1,o.current=[];return}e.current&&(e.current=!1,n.onSelectionEnd(s.current))},[n]),v=A.useCallback(E=>{if(E.target.closest(".toolbar"))return;E.preventDefault(),n.onSelectionStart();const b=c(E);b&&(e.current=!0,s.current=[b],n.onSelectionChange([b]))},[c,n]),T=A.useCallback(E=>{if(!e.current)return;E.preventDefault();const b=c(E);b&&(s.current.some(j=>j.row===b.row&&j.col===b.col)||(s.current=[...s.current,b],n.onSelectionChange(s.current)))},[c,n]);return{handleCellMouseDown:f,handleCellMouseMove:p,handleMouseUp:y,handleTouchStart:v,handleTouchMove:T,ctrlHeld:l}}const IP={circle:"M25,8 a17,17 0 1,0 0.001,0 Z",square:"M8,8 h34 v34 h-34 Z",triangle:"M25,6 L44,42 L6,42 Z",diamond:"M25,6 L44,25 L25,44 L6,25 Z",pentagon:"M25,6 L43,20 L36,42 L14,42 L7,20 Z",hexagon:"M25,6 L41,15.5 L41,34.5 L25,44 L9,34.5 L9,15.5 Z",dot:"M25,25 m-6,0 a6,6 0 1,0 12,0 a6,6 0 1,0 -12,0 Z"},SP=hf.memo(function({data:e,beingSelected:t,debug:s,row:o,col:l}){const{selected:c,value:f,notes:p,fixedValue:y,fixedColor:v,color:T,borders:E,label:b,crossed:j,mark:U,image:M}=e;let Y="grid-cell cell-enabled";c&&(Y+=" cell-selected"),t&&(Y+=" cell-being-selected");let se="cell-inner";v?se+=` color${v}`:T&&(se+=` color${T}`),y&&(se+=" cell-fixed-value");const ue={borderTopWidth:`${E[0]}px`,borderRightWidth:`${E[1]}px`,borderBottomWidth:`${E[2]}px`,borderLeftWidth:`${E[3]}px`},oe=y||f||"",ne=p.length>0;return C.jsx("td",{className:Y,children:C.jsxs("div",{className:se,style:ue,children:[M&&C.jsx("img",{src:M,className:"cell-image",alt:"",draggable:!1}),j&&C.jsx("span",{className:"cell-cross",children:""}),U&&C.jsx("span",{className:"cell-mark","aria-hidden":"true",children:C.jsx("svg",{viewBox:"0 0 50 50",xmlns:"http://www.w3.org/2000/svg",children:C.jsx("path",{d:IP[U],fill:U==="dot"?"currentColor":"none",stroke:"currentColor",strokeWidth:"2.5"})})}),ne&&!oe&&!j?C.jsx("div",{className:"notes-grid notranslate",children:p.map((Ee,x)=>C.jsx("span",{className:"note-item",children:Ee},x))}):!j&&oe&&C.jsx("span",{className:"cell-value notranslate",children:oe}),b&&C.jsx("span",{className:`cell-label cell-label-${b.align}`,children:b.text}),s&&C.jsxs("span",{className:"debug-overlay",children:[o,",",l]})]})})});function EE({grid:n,selection:e,debug:t,inputMode:s,activeColor:o,activeMark:l,clearSelection:c,commitSelection:f,onDragChange:p,onRightClickCell:y,forcedInputLayout:v}){const T=A.useRef([]),[,E]=A.useState(0),b=(s==="color"||s==="fixedColor")&&o!==null,j=s==="mark"&&l!=null,U=s==="cross"||s==="border"||b||j,M=TP({onSelectionStart:()=>{c(),T.current=[]},onSelectionChange:Y=>{T.current=Y,U?p==null||p(Y):E(se=>se+1)},onSelectionEnd:Y=>{T.current=[],f(Y)},onRightClickCell:y});return A.useEffect(()=>{const Y=()=>M.handleMouseUp();return window.addEventListener("mouseup",Y),window.addEventListener("touchend",Y),()=>{window.removeEventListener("mouseup",Y),window.removeEventListener("touchend",Y)}},[M.handleMouseUp]),C.jsx("div",{className:"grid-container",children:C.jsx("table",{className:"puzzle-grid",onMouseDown:M.handleCellMouseDown,onMouseMove:M.handleCellMouseMove,onTouchStart:M.handleTouchStart,onTouchMove:M.handleTouchMove,onContextMenu:v?Y=>Y.preventDefault():void 0,children:C.jsx("tbody",{children:n.map((Y,se)=>C.jsx("tr",{children:Y.map((ue,oe)=>C.jsx(SP,{data:ue,row:se,col:oe,debug:t,beingSelected:!U&&T.current.some(ne=>ne.row===se&&ne.col===oe)},oe))},se))})})})}const CP=[{mode:"normal",label:"Normal (N)"},{mode:"note",label:"Note (Shift+Key)"},{mode:"color",label:"Color (C)"},{mode:"cross",label:"X Cross (X)"},{mode:"border",label:"Border (B)"},{mode:"mark",label:"Marks (M)"}],kP=["circle","square","triangle","diamond","pentagon","hexagon","dot"],AP={circle:"",square:"",triangle:"",diamond:"",pentagon:"",hexagon:"",dot:""},RP=[{mode:"fixed",label:"Fixed Normal"},{mode:"fixedDouble",label:"Fixed 2-Digit"},{mode:"fixedColor",label:"Fixed Color"},{mode:"label",label:"Label"}];function TE({inputMode:n,onInputModeChange:e,onColorSelect:t,onColorErase:s,activeColor:o=null,onActiveColorChange:l,onLabelApply:c,onLabelRemove:f,onUndo:p,onRedo:y,onErase:v,isEditor:T=!1,theme:E,onThemeToggle:b,imageLibrary:j=[],selectedImageIndex:U=null,onImageSelect:M,onImageApply:Y,onImageRemove:se,onImageImport:ue,activeMark:oe=null,onActiveMarkChange:ne,onMarkSelect:Ee,onMarkErase:x,onSubmit:I,forcedInputLayout:k}){const L=n==="color"||n==="fixedColor",D=n==="label",[V,R]=A.useState(""),[Ie,Oe]=A.useState("top"),Ye=ge=>C.jsx("button",{className:`tb-btn ${n===ge.mode?"selected":""}`,onClick:()=>e(n===ge.mode?"normal":ge.mode),children:ge.label},ge.mode);return C.jsxs("div",{className:"toolbar",children:[!k&&C.jsxs("div",{className:"tb-section",children:[C.jsx("div",{className:"tb-section-title",children:"Input Mode"}),CP.map(Ye)]}),C.jsxs("div",{className:"tb-section",children:[C.jsx("div",{className:"tb-section-title",children:"Actions"}),C.jsx("button",{className:"tb-btn",onClick:v,title:"Delete/Backspace",children:"Erase (Del)"}),C.jsx("button",{className:"tb-btn",onClick:p,title:"Ctrl+Z",children:"Undo (Ctrl+Z)"}),C.jsx("button",{className:"tb-btn",onClick:y,title:"Ctrl+Y",children:"Redo (Ctrl+Y)"})]}),L&&!k&&C.jsxs("div",{className:"tb-section",children:[C.jsx("div",{className:"tb-section-title",children:"Colors"}),C.jsxs("div",{className:"tb-palette",children:[C.jsx("button",{className:`palette-swatch color-erase ${o==="0"?"active-color":""}`,onClick:()=>{o==="0"?l==null||l(null):(l==null||l("0"),s==null||s())},title:`No color (erase)${o==="0"?"  drag to erase":""}`,children:""}),Array.from({length:9},(ge,ee)=>ee+1).map(ge=>C.jsx("button",{className:`palette-swatch color${ge} ${o===String(ge)?"active-color":""}`,onClick:()=>{const ee=String(ge);o===ee?l==null||l(null):(l==null||l(ee),t==null||t(ee))},title:`Color ${ge}${o===String(ge)?" (active  drag to paint)":""}`,children:ge},ge))]}),o!==null&&C.jsx("button",{className:"tb-btn",onClick:()=>l==null?void 0:l(null),children:"Deselect Color"})]}),n==="mark"&&!k&&C.jsxs("div",{className:"tb-section",children:[C.jsx("div",{className:"tb-section-title",children:"Shape"}),C.jsxs("div",{className:"tb-mark-palette",children:[C.jsx("button",{className:`mark-swatch mark-erase ${oe===null?"active-mark":""}`,onClick:()=>{x==null||x(),ne==null||ne(null)},title:"Erase mark",children:""}),kP.map(ge=>C.jsx("button",{className:`mark-swatch ${oe===ge?"active-mark":""}`,onClick:()=>{oe===ge?ne==null||ne(null):(ne==null||ne(ge),Ee==null||Ee(ge))},title:ge,children:AP[ge]},ge))]}),oe!==null&&C.jsx("button",{className:"tb-btn",onClick:()=>ne==null?void 0:ne(null),children:"Deselect Shape"})]}),T&&C.jsxs("div",{className:"tb-section",children:[C.jsx("div",{className:"tb-section-title",children:"Editor"}),RP.map(Ye)]}),T&&C.jsxs("div",{className:"tb-section",children:[C.jsx("div",{className:"tb-section-title",children:"Images"}),j.length>0&&C.jsx("div",{className:"tb-image-grid",children:j.map((ge,ee)=>C.jsx("button",{className:`tb-image-thumb ${U===ee?"selected":""}`,onClick:()=>M==null?void 0:M(U===ee?null:ee),title:`Image ${ee+1}`,children:C.jsx("img",{src:ge,alt:"",draggable:!1})},ee))}),C.jsx("button",{className:"tb-btn",onClick:ue,children:"Import Image"}),U!==null&&C.jsx("button",{className:"tb-btn",onClick:Y,children:"Apply to Cells"}),C.jsx("button",{className:"tb-btn",onClick:se,children:"Remove Image"})]}),D&&C.jsxs("div",{className:"tb-section",children:[C.jsx("div",{className:"tb-section-title",children:"Label"}),C.jsx("input",{className:"tb-input",value:V,onChange:ge=>R(ge.target.value),placeholder:"Label text..."}),C.jsxs("div",{className:"tb-row",children:[C.jsx("button",{className:`tb-btn-sm ${Ie==="top"?"selected":""}`,onClick:()=>Oe("top"),children:"Top"}),C.jsx("button",{className:`tb-btn-sm ${Ie==="bottom"?"selected":""}`,onClick:()=>Oe("bottom"),children:"Bottom"})]}),C.jsx("button",{className:"tb-btn",onClick:()=>{V.trim()&&(c==null||c(V.trim(),Ie))},children:"Apply"}),C.jsx("button",{className:"tb-btn",onClick:()=>f==null?void 0:f(),children:"Remove"})]}),C.jsxs("div",{className:"tb-hint",children:[n==="fixed"&&"Type any key for fixed clue.",n==="fixedDouble"&&"Type two digits for a 2-digit fixed clue.",n==="fixedColor"&&(o!==null?"Drag to paint. Click swatch again to deselect.":"Press 0-9 or click swatch. Click to lock color for drag painting."),n==="label"&&"Enter text, pick alignment, Apply.",k&&n!=="fixed"&&n!=="fixedDouble"&&n!=="fixedColor"&&n!=="label"&&"Left-click: paint black. Right-click: toggle dot.",!k&&n==="normal"&&"Type any key to set value. Same key to remove.",!k&&n==="color"&&(o!==null?"Drag to paint. Click swatch again to deselect.":"Press 0-9 or click swatch. Click to lock color for drag painting."),!k&&n==="note"&&"Type to add/remove notes (max 16).",!k&&n==="cross"&&"Click/drag to toggle X marks.",!k&&n==="border"&&"Drag to create/remove borders.",!k&&n==="mark"&&(oe!==null?"Drag to paint mark. Click swatch again to deselect.":"Press 1-6 or click swatch to select shape.")]}),C.jsx("div",{className:"tb-spacer"}),I&&C.jsx("div",{className:"tb-submit",children:C.jsx("button",{className:"tb-submit-btn",onClick:I,children:"Submit"})}),C.jsx("div",{className:"tb-theme-toggle",children:C.jsx("button",{className:"tb-btn",onClick:b,title:"Toggle theme",children:E==="light"?" Dark":" Light"})})]})}function E_(){return/googtrans=\/en\/[^;]/.test(document.cookie)}function IE({title:n,author:e,gridSize:t,difficulty:s,rulesList:o,cluesList:l,backLink:c=!0,headerRight:f,children:p,struckRuleWords:y,onStruckRuleWordsChange:v,struckClueWords:T,onStruckClueWordsChange:E}){const[b,j]=A.useState(new Set),[U,M]=A.useState(new Set),[Y,se]=A.useState(!0),[ue,oe]=A.useState(!0),[ne,Ee]=A.useState(E_);A.useEffect(()=>{const Ie=setInterval(()=>Ee(E_()),1e3);return()=>clearInterval(Ie)},[]);const x=y??b,I=v??j,k=T??U,L=E??M,D=(Ie,Oe)=>{Ie(Ye=>{const ge=new Set(Ye);return ge.has(Oe)?ge.delete(Oe):ge.add(Oe),ge})},V=(Ie,Oe,Ye,ge)=>{const ee=Ie.split(/(\s+)/).map((J,N)=>/^\s+$/.test(J)?null:`${Oe}:${N}`).filter(Boolean),Q=ee.every(J=>Ye.has(J));ge(J=>{const N=new Set(J);for(const G of ee)Q?N.delete(G):N.add(G);return N})},R=(Ie,Oe,Ye,ge)=>Ie.split(/(\s+)/).map((ee,Q)=>{if(/^\s+$/.test(ee))return ee;const J=`${Oe}:${Q}`,N=Ye.has(J);return C.jsx("span",{className:`info-word ${N?"info-word-struck":""}`,onClick:G=>{G.stopPropagation(),D(ge,J)},children:ee},Q)});return C.jsxs("div",{className:"info-panel",children:[(c||f)&&C.jsxs("div",{className:"info-header-row",children:[c&&C.jsx(bo,{to:"/",className:"info-back-link",children:" Puzzles"}),f&&C.jsx("div",{className:"info-header-right",children:f})]}),n&&C.jsxs("div",{className:"info-section",children:[C.jsx("h2",{className:"info-title",children:n}),e&&C.jsxs("p",{className:"info-meta",children:["by ",e]}),t&&C.jsxs("p",{className:"info-meta",children:[t.rows,"",t.cols]}),s&&C.jsxs("p",{className:"info-meta",children:["Difficulty: ",s]})]}),o&&o.length>0&&C.jsxs("div",{className:"info-section",children:[C.jsxs("div",{className:"info-section-title info-collapsible",onClick:()=>se(Ie=>!Ie),children:[C.jsx("span",{className:`info-chevron ${Y?"open":""}`,children:""}),"Rules"]}),Y&&C.jsx("ul",{className:"info-list",children:o.map((Ie,Oe)=>C.jsx("li",{className:"info-list-text info-list-bullet",onClick:ne?void 0:()=>V(Ie,Oe,x,I),children:ne?Ie:R(Ie,Oe,x,I)},Oe))})]}),l&&l.length>0&&C.jsxs("div",{className:"info-section",children:[C.jsxs("div",{className:"info-section-title info-collapsible",onClick:()=>oe(Ie=>!Ie),children:[C.jsx("span",{className:`info-chevron ${ue?"open":""}`,children:""}),"Clues"]}),ue&&C.jsx("ul",{className:"info-list",children:l.map((Ie,Oe)=>C.jsx("li",{className:"info-list-text info-list-bullet",onClick:ne?void 0:()=>V(Ie,Oe,k,L),children:ne?Ie:R(Ie,Oe,k,L)},Oe))})]}),p&&C.jsx("div",{className:"info-section",children:p})]})}function SE({children:n,defaultWidth:e=400,storageKey:t="4color:leftWidth"}){const[s,o]=A.useState(()=>{const y=localStorage.getItem(t);return y?Number(y):e}),l=A.useRef(!1),c=A.useRef(0),f=A.useRef(0),p=A.useCallback(y=>{y.preventDefault(),l.current=!0,c.current=y.clientX,f.current=s,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[s]);return A.useEffect(()=>{const y=T=>{if(!l.current)return;const E=Math.max(180,Math.min(800,f.current+T.clientX-c.current));o(E)},v=()=>{l.current&&(l.current=!1,document.body.style.cursor="",document.body.style.userSelect="",localStorage.setItem(t,String(s)))};return window.addEventListener("mousemove",y),window.addEventListener("mouseup",v),()=>{window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",v)}},[s,t]),A.useEffect(()=>{const y=()=>{const v=Math.min(800,window.innerWidth*.4);s>v&&o(v)};return window.addEventListener("resize",y),y(),()=>window.removeEventListener("resize",y)},[s]),C.jsxs("div",{className:"panel-left-wrapper",children:[C.jsx("aside",{className:"panel-left",style:{width:s},children:n}),C.jsx("div",{className:`panel-left-handle ${l.current?"dragging":""}`,onMouseDown:p})]})}function T_(){const{puzzleId:n}=D_();Tc();const[e]=F_(),t=e.get("debug")==="true",s=Number(e.get("rows"))||10,o=Number(e.get("cols"))||10,{theme:l,toggle:c}=hp(),[f,p]=A.useState(s),[y,v]=A.useState(o),[T,E]=A.useState(""),[b,j]=A.useState(""),[U,M]=A.useState(""),[Y,se]=A.useState([]),[ue,oe]=A.useState([]),[ne,Ee]=A.useState([]),[x,I]=A.useState(""),[k,L]=A.useState(""),[D,V]=A.useState([]),[R,Ie]=A.useState(null),[Oe,Ye]=A.useState([]),[ge,ee]=A.useState([]),[Q,J]=A.useState(""),[N,G]=A.useState(""),[Pe,Ne]=A.useState(-1),ze=A.useRef(null),[Ce,Be]=A.useState(n||""),[Ae,He]=A.useState(!1),[yt,Ln]=A.useState(""),{modalProps:Fr,showAlert:dn,showConfirm:ae}=fp(),W=vE(f,y),ce=A.useRef(null),_e=A.useRef(null);A.useEffect(()=>{cp().then(K=>{const le=new Set;for(const he of K)for(const Le of he.tags||[])le.add(Le);Ye([...le].sort())})},[]),A.useEffect(()=>{n&&yE(n).then(K=>{var le;if(K){E(K.title),j(K.author),p(K.gridSize.rows),v(K.gridSize.cols),M(K.difficulty||""),se(K.tags||[]),ee(K.autoCrossRules||[]),J(K.forcedInputLayout||""),oe(K.rules||[]),Ee(K.clues||[]),W.setGrid(uf(K));const he=new Set;for(const Le of K.cells)if(Le.image){const it=((le=K.images)==null?void 0:le[Le.image])??Le.image;he.add(it)}V(Array.from(he))}})},[n]),A.useEffect(()=>{W.setAutoCrossRules(ge)},[ge]),A.useEffect(()=>{W.setForcedInputLayout(Q),Q==="nurikabe"&&(W.setInputMode("color"),W.setActiveColor("9"))},[Q]),wE({inputMode:W.inputMode,applyValue:W.applyValue,applyColor:W.applyColor,applyFixedValue:W.applyFixedValue,applyFixedColor:W.applyFixedColor,addNote:W.addNote,clearValues:W.clearValues,eraseColor:W.eraseColor,undo:W.undo,redo:W.redo,onActiveColorChange:W.setActiveColor,onActiveMarkChange:W.setActiveMark,toggleMark:W.toggleMark,hasSelection:W.selection.length>0,onInputModeChange:W.setInputMode,onEnter:()=>{R!==null&&D[R]&&W.applyImage(D[R])}});const fe=A.useMemo(()=>{const K=N.toLowerCase().trim();return K?Oe.filter(le=>le.toLowerCase().includes(K)&&!Y.includes(le)):[]},[N,Oe,Y]),me=K=>{var he;const le=K.trim().toLowerCase();le&&!Y.includes(le)&&se(Le=>[...Le,le]),G(""),Ne(-1),(he=ze.current)==null||he.focus()},Ve=K=>{se(le=>le.filter(he=>he!==K))},St=K=>{K.key==="Enter"?(K.preventDefault(),Pe>=0&&fe[Pe]?me(fe[Pe]):N.trim()&&me(N)):K.key==="ArrowDown"?(K.preventDefault(),Ne(le=>Math.min(le+1,fe.length-1))):K.key==="ArrowUp"?(K.preventDefault(),Ne(le=>Math.max(le-1,-1))):K.key==="Backspace"&&!N&&Y.length>0?Ve(Y[Y.length-1]):K.key==="Escape"&&(G(""),Ne(-1))},Ft=async()=>{if(!U){await dn("Please select a difficulty before saving.");return}const K=T.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")||"untitled",le=oP(W.grid,{id:K,title:T||"Untitled",author:b,rules:ue,clues:ne,difficulty:U,tags:Y,autoCrossRules:ge,forcedInputLayout:Q||void 0});n&&(le.id=n),Be(le.id),aP(le)},lr=async()=>{await ae("Are you sure you want to clear all? This cannot be undone.","Clear All")&&W.resetGrid(f,y)},qn=async()=>{await ae("Clear all player input? Puzzle layout (fixed values, colors, borders, images, labels) will be kept.","Clear Player Input")&&W.setGrid(K=>K.map(le=>le.map(he=>({...he,value:null,notes:[],color:he.fixedColor?he.color:null,crossed:!1,mark:null,selected:!1,borders:[...he.fixedBorders]}))))},ur=()=>{W.setGrid(K=>K.map(le=>le.map(he=>({...he,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...he.fixedBorders]}))))};function fs(K){return K.map(le=>le.map(he=>({fv:he.fixedValue,fc:he.fixedColor,fb:he.fixedBorders,l:he.label,i:he.image})))}const ps=async()=>{const K=JSON.stringify(fs(W.grid));if(Ln(K),W.setGrid(le=>le.map(he=>he.map(Le=>({...Le,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...Le.fixedBorders]})))),Q==="nurikabe"?(W.setInputMode("color"),W.setActiveColor("9")):W.setInputMode("normal"),n){const le=await gE(n);le&&(Object.keys(le.cells).length>0||Object.keys(le.borders||{}).length>0||Object.keys(le.colors||{}).length>0)&&W.setGrid(he=>{var it,qe,at;const Le=he.map(ut=>ut.map(tt=>({...tt})));for(const[ut,tt]of Object.entries(le.cells)){const[dt,vt]=ut.split(",").map(Number);(it=Le[dt])!=null&&it[vt]&&(Le[dt][vt].value=tt)}if(le.borders)for(const[ut,tt]of Object.entries(le.borders)){const[dt,vt]=ut.split(",").map(Number);(qe=Le[dt])!=null&&qe[vt]&&(Le[dt][vt].borders=tt)}if(le.colors)for(const[ut,tt]of Object.entries(le.colors)){const[dt,vt]=ut.split(",").map(Number);(at=Le[dt])!=null&&at[vt]&&(Le[dt][vt].color=tt)}return Le})}He(!0)},cr=()=>{W.setGrid(K=>K.map(le=>le.map(he=>({...he,value:null,notes:[],color:null,crossed:!1,mark:null,selected:!1,borders:[...he.fixedBorders]})))),He(!1)},qi=async()=>{const K=Ce||"untitled";if(JSON.stringify(fs(W.grid))!==yt&&!await ae("The puzzle definition has changed since entering solution mode. The solution may be invalid. Save anyway?","Definition Changed"))return;const he={},Le={},it={};for(let at=0;at<W.grid.length;at++)for(let ut=0;ut<W.grid[at].length;ut++){const tt=W.grid[at][ut];tt.value&&(he[`${at},${ut}`]=tt.value);const dt=tt.fixedBorders,vt=tt.borders;(vt[0]!==dt[0]||vt[1]!==dt[1]||vt[2]!==dt[2]||vt[3]!==dt[3])&&(Le[`${at},${ut}`]=vt),tt.color&&!tt.fixedColor&&(it[`${at},${ut}`]=tt.color)}if(Object.keys(he).length===0&&Object.keys(Le).length===0&&Object.keys(it).length===0){await dn("No solution values, borders, or colors entered.");return}const qe={id:K,cells:he};Object.keys(Le).length>0&&(qe.borders=Le),Object.keys(it).length>0&&(qe.colors=it),lP(qe)},jr=K=>{var Le;const le=(Le=K.target.files)==null?void 0:Le[0];if(!le)return;if(le.size>200*1024){dn("Image must be under 200KB.");return}const he=new Image;he.onload=()=>{const qe=50/Math.max(he.width,he.height),at=Math.round(he.width*qe),ut=Math.round(he.height*qe),tt=document.createElement("canvas");tt.width=at,tt.height=ut,tt.getContext("2d").drawImage(he,0,0,at,ut);const vt=tt.toDataURL("image/png");V(tn=>tn.includes(vt)?tn:[...tn,vt]),URL.revokeObjectURL(he.src)},he.src=URL.createObjectURL(le),K.target.value=""},[Ct,Ur]=A.useState(null),[Sn,Cn]=A.useState(""),Gn=A.useRef(null),en=A.useRef(null),zr=A.useCallback((K,le)=>{Gn.current={type:K,index:le}},[]),Kn=A.useCallback((K,le)=>{K.preventDefault(),en.current=le},[]),Br=A.useCallback(K=>{if(!Gn.current||en.current===null||Gn.current.type!==K)return;const le=Gn.current.index,he=en.current;if(le===he)return;(K==="rule"?oe:Ee)(it=>{const qe=[...it],[at]=qe.splice(le,1);return qe.splice(he,0,at),qe}),Gn.current=null,en.current=null},[]),Mn=A.useCallback((K,le,he)=>{Ur({type:K,index:le}),Cn(he)},[]),mn=A.useCallback(()=>{if(!Ct)return;const K=Sn.trim(),le=Ct.type==="rule"?oe:Ee;le(K?he=>he.map((Le,it)=>it===Ct.index?K:Le):he=>he.filter((Le,it)=>it!==Ct.index)),Ur(null),Cn("")},[Ct,Sn]),_t=A.useCallback(K=>{Ie(K),K!==null&&W.setInputMode("normal")},[W]),si=A.useCallback(K=>{Q==="nurikabe"&&W.setGrid(le=>{const he=le.map(it=>it.map(qe=>({...qe}))),Le=he[K.row][K.col];return Le.mark=Le.mark==="dot"?null:"dot",Le.mark==="dot"&&(Le.color=null),he})},[Q,W]),hr=()=>{R===null||!D[R]||W.applyImage(D[R])},dr=K=>{var Le;const le=(Le=K.target.files)==null?void 0:Le[0];if(!le)return;const he=new FileReader;he.onload=()=>{var it;try{const qe=JSON.parse(he.result);Be(qe.id),E(qe.title),j(qe.author),p(qe.gridSize.rows),v(qe.gridSize.cols),M(qe.difficulty||""),se(qe.tags||[]),ee(qe.autoCrossRules||[]),J(qe.forcedInputLayout||""),oe(qe.rules||[]),Ee(qe.clues||[]),W.setGrid(uf(qe));const at=new Set;for(const ut of qe.cells)if(ut.image){const tt=((it=qe.images)==null?void 0:it[ut.image])??ut.image;at.add(tt)}V(Array.from(at))}catch{dn("Invalid puzzle JSON file")}},he.readAsText(le)};return C.jsxs("div",{className:"page-layout",children:[C.jsx(SE,{children:C.jsx(IE,{title:Ae?"Solution Mode":"Puzzle Editor",backLink:!0,headerRight:C.jsx(mp,{}),children:Ae?C.jsxs(C.Fragment,{children:[C.jsx("p",{style:{fontSize:13,color:"var(--text-muted)",margin:"0 0 8px"},children:"Place the correct values for each cell. Only normal inputs (values) and borders will be saved as the solution."}),C.jsx("button",{className:"info-btn",onClick:qi,children:"Save Solution"}),C.jsx("button",{className:"info-btn",onClick:ur,children:"Clear Solution Input"}),C.jsx("button",{className:"info-btn",onClick:cr,children:"Exit Solution Mode"}),ne.length>0&&C.jsxs(C.Fragment,{children:[C.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),C.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Clues"}),ne.map((K,le)=>C.jsx("div",{className:"info-list-item",children:C.jsx("span",{className:"info-list-text",children:K})},le))]})]}):C.jsxs(C.Fragment,{children:[C.jsxs("div",{className:"info-editor-field",children:[C.jsx("label",{children:"Title"}),C.jsx("input",{value:T,onChange:K=>E(K.target.value),placeholder:"My Puzzle"})]}),C.jsxs("div",{className:"info-editor-field",children:[C.jsx("label",{children:"Author"}),C.jsx("input",{value:b,onChange:K=>j(K.target.value)})]}),C.jsxs("div",{className:"info-editor-field",children:[C.jsx("label",{children:"Difficulty"}),C.jsxs("select",{value:U,onChange:K=>M(K.target.value),children:[C.jsx("option",{value:"",children:" None "}),C.jsx("option",{value:"Very easy",children:"Very easy"}),C.jsx("option",{value:"Easy",children:"Easy"}),C.jsx("option",{value:"Medium",children:"Medium"}),C.jsx("option",{value:"Hard",children:"Hard"}),C.jsx("option",{value:"Very hard",children:"Very hard"})]})]}),C.jsxs("div",{className:"info-editor-field",children:[C.jsx("label",{children:"Tags"}),C.jsxs("div",{className:"tag-input-wrapper",children:[Y.map(K=>C.jsxs("span",{className:"tag-input-pill",children:[K,C.jsx("button",{onClick:()=>Ve(K),children:""})]},K)),C.jsx("input",{ref:ze,value:N,onChange:K=>{G(K.target.value),Ne(-1)},onKeyDown:St,onBlur:()=>setTimeout(()=>Ne(-1),150),placeholder:Y.length===0?"Add tags...":"",className:"tag-input-bare"}),fe.length>0&&C.jsx("div",{className:"tag-suggestions",children:fe.map((K,le)=>C.jsx("div",{className:`tag-suggestion${le===Pe?" active":""}`,onMouseDown:()=>me(K),children:K},K))})]})]}),C.jsxs("div",{className:"info-editor-field",children:[C.jsx("label",{children:"Auto-Cross Rules"}),C.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"4px 10px"},children:["king","rook","bishop","knight"].map(K=>C.jsxs("label",{style:{display:"flex",alignItems:"center",gap:4,fontSize:13,cursor:"pointer"},children:[C.jsx("input",{type:"checkbox",checked:ge.includes(K),onChange:le=>{ee(he=>le.target.checked?[...he,K]:he.filter(Le=>Le!==K)),le.target.blur()}}),K.charAt(0).toUpperCase()+K.slice(1)]},K))})]}),C.jsxs("div",{className:"info-editor-field",children:[C.jsx("label",{children:"Forced Input Layout"}),C.jsxs("select",{value:Q,onChange:K=>J(K.target.value),children:[C.jsx("option",{value:"",children:" None "}),C.jsx("option",{value:"nurikabe",children:"Nurikabe"})]})]}),C.jsxs("div",{className:"info-editor-row",children:[C.jsxs("div",{className:"info-editor-field",children:[C.jsx("label",{children:"Rows"}),C.jsx("input",{type:"number",value:f,onChange:K=>p(Math.min(99,Math.max(1,Number(K.target.value)))),min:1,max:99})]}),C.jsxs("div",{className:"info-editor-field",children:[C.jsx("label",{children:"Cols"}),C.jsx("input",{type:"number",value:y,onChange:K=>v(Math.min(99,Math.max(1,Number(K.target.value)))),min:1,max:99})]})]}),C.jsx("button",{className:"info-btn",onClick:()=>W.resetGrid(f,y),children:"Resize Grid"}),C.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),C.jsx("button",{className:"info-btn",onClick:Ft,children:"Save (Download JSON)"}),C.jsx("button",{className:"info-btn",onClick:()=>{var K;return(K=ce.current)==null?void 0:K.click()},children:"Load JSON"}),C.jsx("input",{ref:ce,type:"file",accept:".json",style:{display:"none"},onChange:dr}),C.jsx("button",{className:"info-btn",onClick:lr,children:"Clear All"}),C.jsx("button",{className:"info-btn",onClick:qn,children:"Clear Player Input"}),C.jsx("button",{className:"info-btn",onClick:ps,children:"Enter Solution Mode"}),C.jsx("input",{ref:_e,type:"file",accept:"image/*",style:{display:"none"},onChange:jr}),C.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),C.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Rules"}),ue.map((K,le)=>C.jsxs("div",{className:"info-list-item info-list-draggable",draggable:!0,onDragStart:()=>zr("rule",le),onDragOver:he=>Kn(he,le),onDrop:()=>Br("rule"),children:[C.jsx("span",{className:"info-drag-handle",title:"Drag to reorder",children:""}),(Ct==null?void 0:Ct.type)==="rule"&&Ct.index===le?C.jsx("input",{className:"info-edit-input",value:Sn,onChange:he=>Cn(he.target.value),onBlur:mn,onKeyDown:he=>{he.key==="Enter"&&mn(),he.key==="Escape"&&(Ur(null),Cn(""))},autoFocus:!0}):C.jsx("span",{className:"info-list-text info-list-editable",onClick:()=>Mn("rule",le,K),children:K}),C.jsx("button",{className:"info-list-remove",onClick:()=>oe(ue.filter((he,Le)=>Le!==le)),title:"Remove",children:""})]},le)),C.jsxs("div",{className:"info-add-row",children:[C.jsx("input",{className:"info-add-input",value:x,onChange:K=>I(K.target.value),placeholder:"Add a rule...",onKeyDown:K=>{K.key==="Enter"&&x.trim()&&(oe([...ue,x.trim()]),I(""))}}),C.jsx("button",{className:"info-add-btn",onClick:()=>{x.trim()&&(oe([...ue,x.trim()]),I(""))},children:"+"})]}),C.jsx("div",{style:{borderTop:"1px solid var(--border)",paddingTop:8,marginTop:4}}),C.jsx("div",{className:"info-section-title",style:{fontSize:11,fontWeight:600,textTransform:"uppercase",color:"var(--text-muted)",letterSpacing:"0.5px"},children:"Clues"}),ne.map((K,le)=>C.jsxs("div",{className:"info-list-item info-list-draggable",draggable:!0,onDragStart:()=>zr("clue",le),onDragOver:he=>Kn(he,le),onDrop:()=>Br("clue"),children:[C.jsx("span",{className:"info-drag-handle",title:"Drag to reorder",children:""}),(Ct==null?void 0:Ct.type)==="clue"&&Ct.index===le?C.jsx("input",{className:"info-edit-input",value:Sn,onChange:he=>Cn(he.target.value),onBlur:mn,onKeyDown:he=>{he.key==="Enter"&&mn(),he.key==="Escape"&&(Ur(null),Cn(""))},autoFocus:!0}):C.jsx("span",{className:"info-list-text info-list-editable",onClick:()=>Mn("clue",le,K),children:K}),C.jsx("button",{className:"info-list-remove",onClick:()=>Ee(ne.filter((he,Le)=>Le!==le)),title:"Remove",children:""})]},le)),C.jsxs("div",{className:"info-add-row",children:[C.jsx("input",{className:"info-add-input",value:k,onChange:K=>L(K.target.value),placeholder:"Add a clue...",onKeyDown:K=>{K.key==="Enter"&&k.trim()&&(Ee([...ne,k.trim()]),L(""))}}),C.jsx("button",{className:"info-add-btn",onClick:()=>{k.trim()&&(Ee([...ne,k.trim()]),L(""))},children:"+"})]})]})})}),C.jsx("main",{className:"panel-center",onMouseDown:K=>{K.target.closest(".puzzle-grid")||W.clearSelection()},children:C.jsx(EE,{grid:W.grid,selection:W.selection,debug:t,inputMode:W.inputMode,activeColor:W.activeColor,activeMark:W.activeMark,clearSelection:W.clearSelection,commitSelection:W.commitSelection,onDragChange:W.onDragChange,onRightClickCell:Q?si:void 0,forcedInputLayout:Q||void 0})}),C.jsx("aside",{className:"panel-right",children:C.jsx(TE,{inputMode:W.inputMode,onInputModeChange:K=>{K==="normal"&&Q==="nurikabe"?(W.setInputMode("color"),W.setActiveColor("9")):W.setInputMode(K),K!=="normal"&&Ie(null)},onColorSelect:K=>{W.inputMode==="fixedColor"?W.applyFixedColor(K):W.applyColor(K)},onColorErase:W.eraseColor,activeColor:W.activeColor,onActiveColorChange:W.setActiveColor,activeMark:W.activeMark,onActiveMarkChange:W.setActiveMark,onMarkSelect:K=>W.toggleMark(K),onMarkErase:W.eraseMark,onLabelApply:(K,le)=>W.applyLabel(K,le),onLabelRemove:()=>W.removeLabel(),onUndo:W.undo,onRedo:W.redo,onErase:W.clearValues,isEditor:!Ae,theme:l,onThemeToggle:c,imageLibrary:D,selectedImageIndex:R,onImageSelect:_t,onImageApply:hr,onImageRemove:W.removeImage,onImageImport:()=>{var K;return(K=_e.current)==null?void 0:K.click()},forcedInputLayout:Q||void 0})}),C.jsx(pp,{...Fr})]})}const gp="4color:play:";function I_(n,e,t,s,o){const l=[];for(let f=0;f<e.length;f++)for(let p=0;p<e[f].length;p++){const y=e[f][p];if(!(y.value||y.notes.length>0||y.color||y.crossed||y.mark))continue;const T={row:f,col:p};y.value&&(T.value=y.value),y.notes.length>0&&(T.notes=y.notes),y.color&&(T.color=y.color),y.crossed&&(T.crossed=y.crossed),y.mark&&(T.mark=y.mark),l.push(T)}const c={cells:l,struckRules:Array.from(t),struckClues:Array.from(s),elapsedMs:o};try{localStorage.setItem(gp+n,JSON.stringify(c))}catch{}}function PP(n){try{const e=localStorage.getItem(gp+n);return e?JSON.parse(e):null}catch{return null}}function xP(n){localStorage.removeItem(gp+n)}function NP(n,e){var s;const t=n.map(o=>o.map(l=>({...l,notes:[...l.notes]})));for(const o of e.cells){const l=(s=t[o.row])==null?void 0:s[o.col];l&&(o.value&&(l.value=o.value),o.notes&&(l.notes=o.notes),o.color&&(l.color=o.color),o.crossed&&(l.crossed=o.crossed),o.mark&&(l.mark=o.mark))}return t}function bP(n){return n.color||n.fixedColor||null}function DP(n){const e=n.length,t=n[0].length,s=Array.from({length:e},()=>Array(t).fill(-1));let o=0;for(let l=0;l<e;l++)for(let c=0;c<t;c++){if(s[l][c]!==-1)continue;const f=[[l,c]];for(s[l][c]=o;f.length>0;){const[p,y]=f.shift(),v=n[p][y].fixedBorders;p>0&&v[0]===0&&s[p-1][y]===-1&&(s[p-1][y]=o,f.push([p-1,y])),y<t-1&&v[1]===0&&s[p][y+1]===-1&&(s[p][y+1]=o,f.push([p,y+1])),p<e-1&&v[2]===0&&s[p+1][y]===-1&&(s[p+1][y]=o,f.push([p+1,y])),y>0&&v[3]===0&&s[p][y-1]===-1&&(s[p][y-1]=o,f.push([p,y-1]))}o++}return s}function VP(n){const e=n.length,t=n[0].length,s=DP(n),o=new Map;for(let c=0;c<e;c++)for(let f=0;f<t;f++){const p=s[c][f],y=bP(n[c][f]),v=o.get(p);if(v===void 0)o.set(p,y);else if(v!==y)return v===null||y===null?{valid:!1,error:"Some regions have uncolored cells."}:{valid:!1,error:"All cells in a region must be the same color."}}for(const[,c]of o)if(c===null)return{valid:!1,error:"Some regions are not colored."};const l=new Set(o.values());if(l.size>4)return{valid:!1,error:`Used ${l.size} colors  maximum is 4.`};for(let c=0;c<e;c++)for(let f=0;f<t;f++){const p=s[c][f],y=o.get(p);if(f<t-1){const v=s[c][f+1];if(v!==p&&o.get(v)===y)return{valid:!1,error:"Two adjacent regions share the same color."}}if(c<e-1){const v=s[c+1][f];if(v!==p&&o.get(v)===y)return{valid:!1,error:"Two adjacent regions share the same color."}}}return{valid:!0}}function OP(n,e){var T,E,b,j,U,M,Y,se,ue;const t=Object.keys(e.cells).length;let s=0;const o=n.length,l=n[0].length;for(let oe=0;oe<o;oe++)for(let ne=0;ne<l;ne++)n[oe][ne].value&&s++;const c=Object.keys(e.borders||{}).length;let f=0;if(c>0)for(const[oe,ne]of Object.entries(e.borders)){const[Ee,x]=oe.split(",").map(Number),I=(E=(T=n[Ee])==null?void 0:T[x])==null?void 0:E.borders,k=(j=(b=n[Ee])==null?void 0:b[x])==null?void 0:j.fixedBorders;I&&k&&(I[0]!==k[0]||I[1]!==k[1]||I[2]!==k[2]||I[3]!==k[3])&&f++}const p=Object.keys(e.colors||{}).length;let y=0;if(p>0)for(const[oe]of Object.entries(e.colors)){const[ne,Ee]=oe.split(",").map(Number),x=(U=n[ne])==null?void 0:U[Ee];(x!=null&&x.color||x!=null&&x.fixedColor)&&y++}if(s!==t||f!==c||y!==p){const oe=[];return t>0&&oe.push(`${s}/${t} values`),c>0&&oe.push(`${f}/${c} borders`),p>0&&oe.push(`${y}/${p} colors`),{valid:!1,error:`Not ready: ${oe.join(", ")}.`}}let v=0;for(const[oe,ne]of Object.entries(e.cells)){const[Ee,x]=oe.split(",").map(Number),I=(M=n[Ee])==null?void 0:M[x],k=(I==null?void 0:I.value)||(I==null?void 0:I.fixedValue);(!k||k.toUpperCase()!==ne.toUpperCase())&&v++}if(e.borders)for(const[oe,ne]of Object.entries(e.borders)){const[Ee,x]=oe.split(",").map(Number),I=(se=(Y=n[Ee])==null?void 0:Y[x])==null?void 0:se.borders;(!I||I[0]!==ne[0]||I[1]!==ne[1]||I[2]!==ne[2]||I[3]!==ne[3])&&v++}if(e.colors)for(const[oe,ne]of Object.entries(e.colors)){const[Ee,x]=oe.split(",").map(Number),I=(ue=n[Ee])==null?void 0:ue[x];((I==null?void 0:I.color)||(I==null?void 0:I.fixedColor)||null)!==ne&&v++}return v>0?{valid:!1,error:`${v} wrong.`}:{valid:!0}}function LP(n=0){const[e,t]=A.useState(n),[s,o]=A.useState(!1),l=A.useRef(0),c=A.useRef(n),f=A.useRef(null),p=A.useCallback(()=>{f.current&&(clearInterval(f.current),f.current=null)},[]),y=A.useCallback(()=>{l.current=Date.now(),c.current=e,o(!0)},[e]),v=A.useCallback(()=>{if(p(),l.current){const E=Date.now();c.current+=E-l.current,t(c.current),l.current=0}o(!1)},[p]),T=A.useCallback((E=0)=>{p(),c.current=E,l.current=0,t(E),o(!1)},[p]);return A.useEffect(()=>(s&&(f.current=setInterval(()=>{t(c.current+(Date.now()-l.current))},1e3)),p),[s,p]),A.useEffect(()=>()=>{p()},[p]),{elapsedMs:e,formatted:dp(e),running:s,start:y,pause:v,reset:T}}function MP(){var ze;const{puzzleId:n}=D_(),e=Tc(),[t]=F_(),s=t.get("debug")==="true",{theme:o,toggle:l}=hp(),[c,f]=A.useState(null),[p,y]=A.useState(!0),[v,T]=A.useState(!1),[E,b]=A.useState(new Set),[j,U]=A.useState(new Set),[M,Y]=A.useState(null),{modalProps:se,showAlert:ue,showConfirm:oe}=fp(),{completedPuzzleIds:ne,completionTimes:Ee,markCompleted:x}=_E(),I=vE(1,1),k=LP(0),L=A.useRef(k);L.current=k;const D=A.useRef(I.grid);D.current=I.grid;const V=A.useRef(E);V.current=E;const R=A.useRef(j);R.current=j;const Ie=A.useRef(null),Oe=A.useRef(!1),[Ye,ge]=A.useState(!1);A.useEffect(()=>{n&&yE(n).then(Ce=>{if(Ce){f(Ce);let Be=uf(Ce);const Ae=PP(n);let He=0;Ae&&(Be=NP(Be,Ae),b(new Set(Ae.struckRules)),U(new Set(Ae.struckClues)),He=Ae.elapsedMs||0),I.setGrid(Be),I.setAutoCrossRules(Ce.autoCrossRules||[]),I.setForcedInputLayout(Ce.forcedInputLayout||""),Ce.forcedInputLayout==="nurikabe"&&(I.setInputMode("color"),I.setActiveColor("9")),gE(n).then(yt=>{yt&&Y(yt)}),ne.has(n)?ge(!0):(L.current.reset(He),setTimeout(()=>{L.current.start()},0)),setTimeout(()=>{Oe.current=!0},0)}else T(!0);y(!1)})},[n]),A.useEffect(()=>{n&&ne.has(n)&&!Ye&&(ge(!0),L.current.pause())},[n,ne,Ye]),A.useEffect(()=>{if(!(!n||!Oe.current))return Ie.current&&clearTimeout(Ie.current),Ie.current=setTimeout(()=>{I_(n,I.grid,E,j,L.current.elapsedMs)},500),()=>{Ie.current&&clearTimeout(Ie.current)}},[I.grid,E,j,n]),A.useEffect(()=>()=>{n&&Oe.current&&I_(n,D.current,V.current,R.current,L.current.elapsedMs)},[n]),wE({inputMode:I.inputMode,applyValue:I.applyValue,applyColor:I.applyColor,applyFixedValue:I.applyFixedValue,applyFixedColor:I.applyFixedColor,addNote:I.addNote,clearValues:I.clearValues,eraseColor:I.eraseColor,undo:I.undo,redo:I.redo,onActiveColorChange:I.setActiveColor,onActiveMarkChange:I.setActiveMark,toggleMark:I.toggleMark,hasSelection:I.selection.length>0,onInputModeChange:I.setInputMode});const ee=()=>{I.setGrid(Ce=>Ce.map(Be=>Be.map(Ae=>({...Ae,value:Ae.fixedValue?Ae.value:null,notes:Ae.fixedValue?Ae.notes:[],color:Ae.fixedValue?Ae.color:null,crossed:Ae.fixedValue?Ae.crossed:!1,mark:Ae.fixedValue?Ae.mark:null,borders:[...Ae.fixedBorders]})))),b(new Set),U(new Set),n&&xP(n)},Q=async()=>{await oe("Are you sure you want to reset all your input?","Reset Input")&&ee()},J=(c==null?void 0:c.forcedInputLayout)||"",N=A.useCallback(Ce=>{J==="nurikabe"&&I.setGrid(Be=>{const Ae=Be.map(yt=>yt.map(Ln=>({...Ln}))),He=Ae[Ce.row][Ce.col];return He.mark=He.mark==="dot"?null:"dot",He.mark==="dot"&&(He.color=null),Ae})},[J,I]),G=((ze=c==null?void 0:c.tags)==null?void 0:ze.includes("4color"))??!1,Pe=G||!!M,Ne=A.useCallback(async()=>{let Ce;if(G)Ce=VP(I.grid);else if(M)Ce=OP(I.grid,M);else return;Ce.valid?(k.pause(),n&&x(n,k.elapsedMs),ge(!0),await oe("Congratulations!","Puzzle Solved!","Clear Puzzle","Keep")&&ee()):await ue(Ce.error||"Not quite right. Keep trying!","Not Quite")},[I.grid,G,M,oe,ue,n,x,k]);return p?C.jsx("p",{style:{textAlign:"center",marginTop:40},children:"Loading puzzle..."}):v||!c?C.jsxs("div",{style:{textAlign:"center",marginTop:40},children:[C.jsx("p",{children:"Puzzle not found."}),C.jsx(bo,{to:"/",children:"Back to puzzle list"})]}):C.jsxs("div",{className:"page-layout",children:[C.jsx(SE,{children:C.jsxs(IE,{title:c.title,author:c.author,gridSize:c.gridSize,difficulty:c.difficulty,rulesList:c.rules,cluesList:c.clues,backLink:!0,headerRight:C.jsx(mp,{}),struckRuleWords:E,onStruckRuleWordsChange:b,struckClueWords:j,onStruckClueWordsChange:U,children:[Ye?n&&Ee.has(n)&&C.jsx("div",{className:"info-timer completed",children:dp(Ee.get(n))}):C.jsx("div",{className:"info-timer",children:k.formatted}),C.jsx("button",{className:"info-btn",onClick:Q,children:"Reset My Input"}),s&&C.jsx("button",{className:"info-btn",onClick:()=>e(`/edit/${n}`),children:"Edit Puzzle"})]})}),C.jsx("main",{className:"panel-center",onMouseDown:Ce=>{Ce.target.closest(".puzzle-grid")||I.clearSelection()},children:C.jsx(EE,{grid:I.grid,selection:I.selection,debug:s,inputMode:I.inputMode,activeColor:I.activeColor,activeMark:I.activeMark,clearSelection:I.clearSelection,commitSelection:I.commitSelection,onDragChange:I.onDragChange,onRightClickCell:J?N:void 0,forcedInputLayout:J||void 0})}),C.jsx("aside",{className:"panel-right",children:C.jsx(TE,{inputMode:I.inputMode,onInputModeChange:I.setInputMode,onColorSelect:Ce=>I.applyColor(Ce),onColorErase:I.eraseColor,activeColor:I.activeColor,onActiveColorChange:I.setActiveColor,onUndo:I.undo,onRedo:I.redo,onErase:I.clearValues,theme:o,onThemeToggle:l,activeMark:I.activeMark,onActiveMarkChange:I.setActiveMark,onMarkSelect:Ce=>I.toggleMark(Ce),onMarkErase:I.eraseMark,onSubmit:Pe?Ne:void 0,forcedInputLayout:J||void 0})}),C.jsx(pp,{...se})]})}function FP(){return C.jsx(iP,{children:C.jsx(zT,{children:C.jsxs(DT,{children:[C.jsx(Ga,{path:"/",element:C.jsx(fP,{})}),C.jsx(Ga,{path:"/edit",element:C.jsx(T_,{})}),C.jsx(Ga,{path:"/edit/:puzzleId",element:C.jsx(T_,{})}),C.jsx(Ga,{path:"/play/:puzzleId",element:C.jsx(MP,{})})]})})})}z0.createRoot(document.getElementById("root")).render(C.jsx(hf.StrictMode,{children:C.jsx(FP,{})}));
